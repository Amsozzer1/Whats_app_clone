/*! For license information please see main.18e50012.js.LICENSE.txt */
(()=>{var e={155:e=>{"use strict";var t=TypeError;e.exports=function(e,n){if(e<n)throw new t("Not enough arguments");return e}},166:(e,t,n)=>{"use strict";var r,i,s=n(4823),o=n(498),a=s.process,l=s.Deno,c=a&&a.versions||l&&l.version,u=c&&c.v8;u&&(i=(r=u.split("."))[0]>0&&r[0]<4?1:+(r[0]+r[1])),!i&&o&&(!(r=o.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=o.match(/Chrome\/(\d+)/))&&(i=+r[1]),e.exports=i},253:(e,t,n)=>{"use strict";var r=n(9519),i=n(8084);e.exports=r&&i((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},327:(e,t,n)=>{"use strict";var r=n(3192),i=TypeError;e.exports=function(e){if(r(e))throw new i("Can't call method on "+e);return e}},466:(e,t,n)=>{"use strict";var r=n(9344);e.exports=function(e){var t=+e;return t!==t||0===t?0:r(t)}},498:(e,t,n)=>{"use strict";var r=n(4823).navigator,i=r&&r.userAgent;e.exports=i?String(i):""},528:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler");Symbol.for("react.provider");var a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),f=Symbol.for("react.offscreen"),m=Symbol.for("react.client.reference");function g(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case i:case o:case s:case u:case d:return e;default:switch(e=e&&e.$$typeof){case l:case c:case p:case h:case a:return e;default:return t}}case r:return t}}}t.Hy=function(e){return"string"===typeof e||"function"===typeof e||e===i||e===o||e===s||e===u||e===d||e===f||"object"===typeof e&&null!==e&&(e.$$typeof===p||e.$$typeof===h||e.$$typeof===l||e.$$typeof===a||e.$$typeof===c||e.$$typeof===m||void 0!==e.getModuleId)}},579:(e,t,n)=>{"use strict";e.exports=n(2799)},816:(e,t,n)=>{"use strict";var r=n(5704);e.exports=function(e,t){return r[e]||(r[e]=t||{})}},904:(e,t,n)=>{"use strict";var r=n(3542);e.exports=r("document","documentElement")},972:(e,t,n)=>{"use strict";var r=n(6774),i=n(2201),s=n(1591),o=function(e){return function(t,n,o){var a=r(t),l=s(a);if(0===l)return!e&&-1;var c,u=i(o,l);if(e&&n!==n){for(;l>u;)if((c=a[u++])!==c)return!0}else for(;l>u;u++)if((e||u in a)&&a[u]===n)return e||u||0;return!e&&-1}};e.exports={includes:o(!0),indexOf:o(!1)}},1178:(e,t,n)=>{"use strict";var r=n(7707),i=n(8084),s=n(5687),o=Object,a=r("".split);e.exports=i((function(){return!o("z").propertyIsEnumerable(0)}))?function(e){return"String"===s(e)?a(e,""):o(e)}:o},1239:(e,t,n)=>{"use strict";var r=n(4706),i=n(5464),s=TypeError;e.exports=function(e){if(r(e))return e;throw new s(i(e)+" is not a function")}},1591:(e,t,n)=>{"use strict";var r=n(8249);e.exports=function(e){return r(e.length)}},1608:(e,t,n)=>{"use strict";var r=n(6821),i=String,s=TypeError;e.exports=function(e){if(r(e))return e;throw new s(i(e)+" is not an object")}},1659:(e,t,n)=>{"use strict";var r=n(7707);e.exports=r([].slice)},1709:(e,t,n)=>{"use strict";var r=n(4823),i=n(6464),s=n(4706),o=n(7192),a=n(498),l=n(1659),c=n(155),u=r.Function,d=/MSIE .\./.test(a)||"BUN"===o&&function(){var e=r.Bun.version.split(".");return e.length<3||"0"===e[0]&&(e[1]<3||"3"===e[1]&&"0"===e[2])}();e.exports=function(e,t){var n=t?2:1;return d?function(r,o){var a=c(arguments.length,1)>n,d=s(r)?r:u(r),h=a?l(arguments,n):[],p=a?function(){i(d,this,h)}:d;return t?e(p,o):e(p)}:e}},2201:(e,t,n)=>{"use strict";var r=n(466),i=Math.max,s=Math.min;e.exports=function(e,t){var n=r(e);return n<0?i(n+t,0):s(n,t)}},2345:(e,t,n)=>{"use strict";var r=n(9519),i=n(6164),s=Function.prototype,o=r&&Object.getOwnPropertyDescriptor,a=i(s,"name"),l=a&&"something"===function(){}.name,c=a&&(!r||r&&o(s,"name").configurable);e.exports={EXISTS:a,PROPER:l,CONFIGURABLE:c}},2428:(e,t,n)=>{"use strict";var r,i,s,o=n(9279),a=n(4823),l=n(6821),c=n(9266),u=n(6164),d=n(5704),h=n(4658),p=n(3114),f="Object already initialized",m=a.TypeError,g=a.WeakMap;if(o||d.state){var v=d.state||(d.state=new g);v.get=v.get,v.has=v.has,v.set=v.set,r=function(e,t){if(v.has(e))throw new m(f);return t.facade=e,v.set(e,t),t},i=function(e){return v.get(e)||{}},s=function(e){return v.has(e)}}else{var y=h("state");p[y]=!0,r=function(e,t){if(u(e,y))throw new m(f);return t.facade=e,c(e,y,t),t},i=function(e){return u(e,y)?e[y]:{}},s=function(e){return u(e,y)}}e.exports={set:r,get:i,has:s,enforce:function(e){return s(e)?i(e):r(e,{})},getterFor:function(e){return function(t){var n;if(!l(t)||(n=i(t)).type!==e)throw new m("Incompatible receiver, "+e+" required");return n}}}},2509:(e,t,n)=>{"use strict";var r=n(4850),i=n(4706),s=n(6821),o=TypeError;e.exports=function(e,t){var n,a;if("string"===t&&i(n=e.toString)&&!s(a=r(n,e)))return a;if(i(n=e.valueOf)&&!s(a=r(n,e)))return a;if("string"!==t&&i(n=e.toString)&&!s(a=r(n,e)))return a;throw new o("Can't convert object to primitive value")}},2522:(e,t,n)=>{"use strict";var r=n(327),i=Object;e.exports=function(e){return i(r(e))}},2682:(e,t,n)=>{"use strict";var r=n(3542),i=n(7707),s=n(7251),o=n(6842),a=n(1608),l=i([].concat);e.exports=r("Reflect","ownKeys")||function(e){var t=s.f(a(e)),n=o.f;return n?l(t,n(e)):t}},2760:(e,t,n)=>{"use strict";var r=n(4823),i=n(6821),s=r.document,o=i(s)&&i(s.createElement);e.exports=function(e){return o?s.createElement(e):{}}},2799:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function i(e,t,r){var i=null;if(void 0!==r&&(i=""+r),void 0!==t.key&&(i=""+t.key),"key"in t)for(var s in r={},t)"key"!==s&&(r[s]=t[s]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:i,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=i,t.jsxs=i},3036:(e,t,n)=>{"use strict";var r=n(4823),i=Object.defineProperty;e.exports=function(e,t){try{i(r,e,{value:t,configurable:!0,writable:!0})}catch(n){r[e]=t}return t}},3114:e=>{"use strict";e.exports={}},3131:(e,t,n)=>{"use strict";var r=n(4416),i=n(3572);e.exports=function(e,t,n){return n.get&&r(n.get,t,{getter:!0}),n.set&&r(n.set,t,{setter:!0}),i.f(e,t,n)}},3192:e=>{"use strict";e.exports=function(e){return null===e||void 0===e}},3326:(e,t,n)=>{"use strict";var r=n(9140),i=n(7970);e.exports=function(e){var t=r(e,"string");return i(t)?t:t+""}},3542:(e,t,n)=>{"use strict";var r=n(4823),i=n(4706);e.exports=function(e,t){return arguments.length<2?(n=r[e],i(n)?n:void 0):r[e]&&r[e][t];var n}},3572:(e,t,n)=>{"use strict";var r=n(9519),i=n(9704),s=n(253),o=n(1608),a=n(3326),l=TypeError,c=Object.defineProperty,u=Object.getOwnPropertyDescriptor,d="enumerable",h="configurable",p="writable";t.f=r?s?function(e,t,n){if(o(e),t=a(t),o(n),"function"===typeof e&&"prototype"===t&&"value"in n&&p in n&&!n[p]){var r=u(e,t);r&&r[p]&&(e[t]=n.value,n={configurable:h in n?n[h]:r[h],enumerable:d in n?n[d]:r[d],writable:!1})}return c(e,t,n)}:c:function(e,t,n){if(o(e),t=a(t),o(n),i)try{return c(e,t,n)}catch(r){}if("get"in n||"set"in n)throw new l("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},4022:(e,t)=>{"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,i=r&&!n.call({1:2},1);t.f=i?function(e){var t=r(this,e);return!!t&&t.enumerable}:n},4030:(e,t,n)=>{"use strict";var r=n(166),i=n(8084),s=n(4823).String;e.exports=!!Object.getOwnPropertySymbols&&!i((function(){var e=Symbol("symbol detection");return!s(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},4061:(e,t,n)=>{"use strict";var r=n(7707),i=n(6164),s=n(6774),o=n(972).indexOf,a=n(3114),l=r([].push);e.exports=function(e,t){var n,r=s(e),c=0,u=[];for(n in r)!i(a,n)&&i(r,n)&&l(u,n);for(;t.length>c;)i(r,n=t[c++])&&(~o(u,n)||l(u,n));return u}},4111:(e,t,n)=>{"use strict";var r=n(4030);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},4121:function(e,t,n){var r;!function(i,s){"use strict";var o="function",a="undefined",l="object",c="string",u="major",d="model",h="name",p="type",f="vendor",m="version",g="architecture",v="console",y="mobile",b="tablet",w="smarttv",S="wearable",k="embedded",C="Amazon",E="Apple",T="ASUS",_="BlackBerry",x="Browser",I="Chrome",R="Firefox",P="Google",A="Huawei",N="LG",O="Microsoft",D="Motorola",L="Opera",j="Samsung",M="Sharp",F="Sony",U="Xiaomi",V="Zebra",$="Facebook",B="Chromium OS",z="Mac OS",H=" Browser",q=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].toUpperCase()]=e[n];return t},W=function(e,t){return typeof e===c&&-1!==K(t).indexOf(K(e))},K=function(e){return e.toLowerCase()},G=function(e,t){if(typeof e===c)return e=e.replace(/^\s\s*/,""),typeof t===a?e:e.substring(0,500)},J=function(e,t){for(var n,r,i,a,c,u,d=0;d<t.length&&!c;){var h=t[d],p=t[d+1];for(n=r=0;n<h.length&&!c&&h[n];)if(c=h[n++].exec(e))for(i=0;i<p.length;i++)u=c[++r],typeof(a=p[i])===l&&a.length>0?2===a.length?typeof a[1]==o?this[a[0]]=a[1].call(this,u):this[a[0]]=a[1]:3===a.length?typeof a[1]!==o||a[1].exec&&a[1].test?this[a[0]]=u?u.replace(a[1],a[2]):s:this[a[0]]=u?a[1].call(this,u,a[2]):s:4===a.length&&(this[a[0]]=u?a[3].call(this,u.replace(a[1],a[2])):s):this[a]=u||s;d+=2}},Y=function(e,t){for(var n in t)if(typeof t[n]===l&&t[n].length>0){for(var r=0;r<t[n].length;r++)if(W(t[n][r],e))return"?"===n?s:n}else if(W(t[n],e))return"?"===n?s:n;return t.hasOwnProperty("*")?t["*"]:e},Q={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},X={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[m,[h,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[m,[h,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[h,m],[/opios[\/ ]+([\w\.]+)/i],[m,[h,L+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[m,[h,L+" GX"]],[/\bopr\/([\w\.]+)/i],[m,[h,L]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[m,[h,"Baidu"]],[/\b(?:mxbrowser|mxios|myie2)\/?([-\w\.]*)\b/i],[m,[h,"Maxthon"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim(?:browser|boat|jet))[\/ ]?([\d\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio|(?=comodo_)?dragon)\/([-\w\.]+)/i,/(heytap|ovi|115)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[h,m],[/quark(?:pc)?\/([-\w\.]+)/i],[m,[h,"Quark"]],[/\bddg\/([\w\.]+)/i],[m,[h,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[m,[h,"UC"+x]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[m,[h,"WeChat"]],[/konqueror\/([\w\.]+)/i],[m,[h,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[m,[h,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[m,[h,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[m,[h,"Smart Lenovo "+x]],[/(avast|avg)\/([\w\.]+)/i],[[h,/(.+)/,"$1 Secure "+x],m],[/\bfocus\/([\w\.]+)/i],[m,[h,R+" Focus"]],[/\bopt\/([\w\.]+)/i],[m,[h,L+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[m,[h,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[m,[h,"Dolphin"]],[/coast\/([\w\.]+)/i],[m,[h,L+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[m,[h,"MIUI"+H]],[/fxios\/([\w\.-]+)/i],[m,[h,R]],[/\bqihoobrowser\/?([\w\.]*)/i],[m,[h,"360"]],[/\b(qq)\/([\w\.]+)/i],[[h,/(.+)/,"$1Browser"],m],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[h,/(.+)/,"$1"+H],m],[/samsungbrowser\/([\w\.]+)/i],[m,[h,j+" Internet"]],[/metasr[\/ ]?([\d\.]+)/i],[m,[h,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[h,"Sogou Mobile"],m],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345(?=browser|chrome|explorer))\w*[\/ ]?v?([\w\.]+)/i],[h,m],[/(lbbrowser|rekonq)/i,/\[(linkedin)app\]/i],[h],[/ome\/([\w\.]+) \w* ?(iron) saf/i,/ome\/([\w\.]+).+qihu (360)[es]e/i],[m,h],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[h,$],m],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[h,m],[/\bgsa\/([\w\.]+) .*safari\//i],[m,[h,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[m,[h,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[m,[h,I+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[h,I+" WebView"],m],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[m,[h,"Android "+x]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[h,m],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[m,[h,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[m,h],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[h,[m,Y,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[h,m],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[h,"Netscape"],m],[/(wolvic|librewolf)\/([\w\.]+)/i],[h,m],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[m,[h,R+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[h,[m,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[h,[m,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[g,"amd64"]],[/(ia32(?=;))/i],[[g,K]],[/((?:i[346]|x)86)[;\)]/i],[[g,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[g,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[g,"armhf"]],[/windows (ce|mobile); ppc;/i],[[g,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[g,/ower/,"",K]],[/(sun4\w)[;\)]/i],[[g,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[g,K]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[d,[f,j],[p,b]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[d,[f,j],[p,y]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[d,[f,E],[p,y]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[d,[f,E],[p,b]],[/(macintosh);/i],[d,[f,E]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[d,[f,M],[p,y]],[/(?:honor)([-\w ]+)[;\)]/i],[d,[f,"Honor"],[p,y]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[d,[f,A],[p,b]],[/(?:huawei)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[d,[f,A],[p,y]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i],[[d,/_/g," "],[f,U],[p,y]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[d,/_/g," "],[f,U],[p,b]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[d,[f,"OPPO"],[p,y]],[/\b(opd2\d{3}a?) bui/i],[d,[f,"OPPO"],[p,b]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[d,[f,"Vivo"],[p,y]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[d,[f,"Realme"],[p,y]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[d,[f,D],[p,y]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[d,[f,D],[p,b]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[d,[f,N],[p,b]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[d,[f,N],[p,y]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[d,[f,"Lenovo"],[p,b]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[d,/_/g," "],[f,"Nokia"],[p,y]],[/(pixel c)\b/i],[d,[f,P],[p,b]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[d,[f,P],[p,y]],[/droid.+; (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[d,[f,F],[p,y]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[d,"Xperia Tablet"],[f,F],[p,b]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[d,[f,"OnePlus"],[p,y]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[d,[f,C],[p,b]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[d,/(.+)/g,"Fire Phone $1"],[f,C],[p,y]],[/(playbook);[-\w\),; ]+(rim)/i],[d,f,[p,b]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[d,[f,_],[p,y]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[d,[f,T],[p,b]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[d,[f,T],[p,y]],[/(nexus 9)/i],[d,[f,"HTC"],[p,b]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[f,[d,/_/g," "],[p,y]],[/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])\w*(\)| bui)/i],[d,[f,"TCL"],[p,b]],[/(itel) ((\w+))/i],[[f,K],d,[p,Y,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[d,[f,"Acer"],[p,b]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[d,[f,"Meizu"],[p,y]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[d,[f,"Ulefone"],[p,y]],[/; (energy ?\w+)(?: bui|\))/i,/; energizer ([\w ]+)(?: bui|\))/i],[d,[f,"Energizer"],[p,y]],[/; cat (b35);/i,/; (b15q?|s22 flip|s48c|s62 pro)(?: bui|\))/i],[d,[f,"Cat"],[p,y]],[/((?:new )?andromax[\w- ]+)(?: bui|\))/i],[d,[f,"Smartfren"],[p,y]],[/droid.+; (a(?:015|06[35]|142p?))/i],[d,[f,"Nothing"],[p,y]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno|micromax|advan)[-_ ]?([-\w]*)/i,/; (imo) ((?!tab)[\w ]+?)(?: bui|\))/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[f,d,[p,y]],[/(imo) (tab \w+)/i,/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[f,d,[p,b]],[/(surface duo)/i],[d,[f,O],[p,b]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[d,[f,"Fairphone"],[p,y]],[/(u304aa)/i],[d,[f,"AT&T"],[p,y]],[/\bsie-(\w*)/i],[d,[f,"Siemens"],[p,y]],[/\b(rct\w+) b/i],[d,[f,"RCA"],[p,b]],[/\b(venue[\d ]{2,7}) b/i],[d,[f,"Dell"],[p,b]],[/\b(q(?:mv|ta)\w+) b/i],[d,[f,"Verizon"],[p,b]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[d,[f,"Barnes & Noble"],[p,b]],[/\b(tm\d{3}\w+) b/i],[d,[f,"NuVision"],[p,b]],[/\b(k88) b/i],[d,[f,"ZTE"],[p,b]],[/\b(nx\d{3}j) b/i],[d,[f,"ZTE"],[p,y]],[/\b(gen\d{3}) b.+49h/i],[d,[f,"Swiss"],[p,y]],[/\b(zur\d{3}) b/i],[d,[f,"Swiss"],[p,b]],[/\b((zeki)?tb.*\b) b/i],[d,[f,"Zeki"],[p,b]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[f,"Dragon Touch"],d,[p,b]],[/\b(ns-?\w{0,9}) b/i],[d,[f,"Insignia"],[p,b]],[/\b((nxa|next)-?\w{0,9}) b/i],[d,[f,"NextBook"],[p,b]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[f,"Voice"],d,[p,y]],[/\b(lvtel\-)?(v1[12]) b/i],[[f,"LvTel"],d,[p,y]],[/\b(ph-1) /i],[d,[f,"Essential"],[p,y]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[d,[f,"Envizen"],[p,b]],[/\b(trio[-\w\. ]+) b/i],[d,[f,"MachSpeed"],[p,b]],[/\btu_(1491) b/i],[d,[f,"Rotor"],[p,b]],[/(shield[\w ]+) b/i],[d,[f,"Nvidia"],[p,b]],[/(sprint) (\w+)/i],[f,d,[p,y]],[/(kin\.[onetw]{3})/i],[[d,/\./g," "],[f,O],[p,y]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[d,[f,V],[p,b]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[d,[f,V],[p,y]],[/smart-tv.+(samsung)/i],[f,[p,w]],[/hbbtv.+maple;(\d+)/i],[[d,/^/,"SmartTV"],[f,j],[p,w]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[f,N],[p,w]],[/(apple) ?tv/i],[f,[d,E+" TV"],[p,w]],[/crkey/i],[[d,I+"cast"],[f,P],[p,w]],[/droid.+aft(\w+)( bui|\))/i],[d,[f,C],[p,w]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[d,[f,M],[p,w]],[/(bravia[\w ]+)( bui|\))/i],[d,[f,F],[p,w]],[/(mitv-\w{5}) bui/i],[d,[f,U],[p,w]],[/Hbbtv.*(technisat) (.*);/i],[f,d,[p,w]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[f,G],[d,G],[p,w]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[p,w]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[f,d,[p,v]],[/droid.+; (shield) bui/i],[d,[f,"Nvidia"],[p,v]],[/(playstation [345portablevi]+)/i],[d,[f,F],[p,v]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[d,[f,O],[p,v]],[/\b(sm-[lr]\d\d[05][fnuw]?s?)\b/i],[d,[f,j],[p,S]],[/((pebble))app/i],[f,d,[p,S]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[d,[f,E],[p,S]],[/droid.+; (glass) \d/i],[d,[f,P],[p,S]],[/droid.+; (wt63?0{2,3})\)/i],[d,[f,V],[p,S]],[/droid.+; (glass) \d/i],[d,[f,P],[p,S]],[/(pico) (4|neo3(?: link|pro)?)/i],[f,d,[p,S]],[/; (quest( \d| pro)?)/i],[d,[f,$],[p,S]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[f,[p,k]],[/(aeobc)\b/i],[d,[f,C],[p,k]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[d,[p,y]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[d,[p,b]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[p,b]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[p,y]],[/(android[-\w\. ]{0,9});.+buil/i],[d,[f,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[m,[h,"EdgeHTML"]],[/(arkweb)\/([\w\.]+)/i],[h,m],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[m,[h,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna|servo)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[h,m],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[m,h]],os:[[/microsoft (windows) (vista|xp)/i],[h,m],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[h,[m,Y,Q]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[m,Y,Q],[h,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[m,/_/g,"."],[h,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[h,z],[m,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[m,h],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish|openharmony)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[h,m],[/\(bb(10);/i],[m,[h,_]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[m,[h,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[m,[h,R+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[m,[h,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[m,[h,"watchOS"]],[/crkey\/([\d\.]+)/i],[m,[h,I+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[h,B],m],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[h,m],[/(sunos) ?([\w\.\d]*)/i],[[h,"Solaris"],m],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[h,m]]},Z=function(e,t){if(typeof e===l&&(t=e,e=s),!(this instanceof Z))return new Z(e,t).getResult();var n=typeof i!==a&&i.navigator?i.navigator:s,r=e||(n&&n.userAgent?n.userAgent:""),v=n&&n.userAgentData?n.userAgentData:s,w=t?function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2===0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n}(X,t):X,S=n&&n.userAgent==r;return this.getBrowser=function(){var e,t={};return t[h]=s,t[m]=s,J.call(t,r,w.browser),t[u]=typeof(e=t[m])===c?e.replace(/[^\d\.]/g,"").split(".")[0]:s,S&&n&&n.brave&&typeof n.brave.isBrave==o&&(t[h]="Brave"),t},this.getCPU=function(){var e={};return e[g]=s,J.call(e,r,w.cpu),e},this.getDevice=function(){var e={};return e[f]=s,e[d]=s,e[p]=s,J.call(e,r,w.device),S&&!e[p]&&v&&v.mobile&&(e[p]=y),S&&"Macintosh"==e[d]&&n&&typeof n.standalone!==a&&n.maxTouchPoints&&n.maxTouchPoints>2&&(e[d]="iPad",e[p]=b),e},this.getEngine=function(){var e={};return e[h]=s,e[m]=s,J.call(e,r,w.engine),e},this.getOS=function(){var e={};return e[h]=s,e[m]=s,J.call(e,r,w.os),S&&!e[h]&&v&&v.platform&&"Unknown"!=v.platform&&(e[h]=v.platform.replace(/chrome os/i,B).replace(/macos/i,z)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(e){return r=typeof e===c&&e.length>500?G(e,500):e,this},this.setUA(r),this};Z.VERSION="1.0.40",Z.BROWSER=q([h,m,u]),Z.CPU=q([g]),Z.DEVICE=q([d,f,p,v,y,w,b,S,k]),Z.ENGINE=Z.OS=q([h,m]),typeof t!==a?(e.exports&&(t=e.exports=Z),t.UAParser=Z):n.amdO?(r=function(){return Z}.call(t,n,t,e))===s||(e.exports=r):typeof i!==a&&(i.UAParser=Z);var ee=typeof i!==a&&(i.jQuery||i.Zepto);if(ee&&!ee.ua){var te=new Z;ee.ua=te.getResult(),ee.ua.get=function(){return te.getUA()},ee.ua.set=function(e){te.setUA(e);var t=te.getResult();for(var n in t)ee.ua[n]=t[n]}}}("object"===typeof window?window:this)},4234:(e,t,n)=>{"use strict";var r=n(7192);e.exports="NODE"===r},4288:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var w=b.prototype=new y;w.constructor=b,m(w,v.prototype),w.isPureReactComponent=!0;var S=Array.isArray,k={H:null,A:null,T:null,S:null},C=Object.prototype.hasOwnProperty;function E(e,t,r,i,s,o){return r=o.ref,{$$typeof:n,type:e,key:t,ref:void 0!==r?r:null,props:o}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var _=/\/+/g;function x(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function I(){}function R(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l,c,u=!1;if(null===e)u=!0;else switch(a){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0;break;case h:return R((u=e._init)(e._payload),t,i,s,o)}}if(u)return o=o(e),u=""===s?"."+x(e,0):s,S(o)?(i="",null!=u&&(i=u.replace(_,"$&/")+"/"),R(o,t,i,"",(function(e){return e}))):null!=o&&(T(o)&&(l=o,c=i+(null==o.key||e&&e.key===o.key?"":(""+o.key).replace(_,"$&/")+"/")+u,o=E(l.type,c,void 0,0,0,l.props)),t.push(o)),1;u=0;var d,f=""===s?".":s+":";if(S(e))for(var m=0;m<e.length;m++)u+=R(s=e[m],t,i,a=f+x(s,m),o);else if("function"===typeof(m=null===(d=e)||"object"!==typeof d?null:"function"===typeof(d=p&&d[p]||d["@@iterator"])?d:null))for(e=m.call(e),m=0;!(s=e.next()).done;)u+=R(s=s.value,t,i,a=f+x(s,m++),o);else if("object"===a){if("function"===typeof e.then)return R(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(I,I):(e.status="pending",e.then((function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)}),(function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)}))),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,i,s,o);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function P(e,t,n){if(null==e)return e;var r=[],i=0;return R(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var N="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function O(){}t.Children={map:P,forEach:function(e,t,n){P(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return P(e,(function(){t++})),t},toArray:function(e){return P(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=o,t.PureComponent=b,t.StrictMode=s,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,t.act=function(){throw Error("act(...) is not supported in production builds of React.")},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=m({},e.props),i=e.key;if(null!=t)for(s in void 0!==t.ref&&void 0,void 0!==t.key&&(i=""+t.key),t)!C.call(t,s)||"key"===s||"__self"===s||"__source"===s||"ref"===s&&void 0===t.ref||(r[s]=t[s]);var s=arguments.length-2;if(1===s)r.children=n;else if(1<s){for(var o=Array(s),a=0;a<s;a++)o[a]=arguments[a+2];r.children=o}return E(e.type,i,void 0,0,0,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:a,_context:e},e},t.createElement=function(e,t,n){var r,i={},s=null;if(null!=t)for(r in void 0!==t.key&&(s=""+t.key),t)C.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(i[r]=t[r]);var o=arguments.length-2;if(1===o)i.children=n;else if(1<o){for(var a=Array(o),l=0;l<o;l++)a[l]=arguments[l+2];i.children=a}if(e&&e.defaultProps)for(r in o=e.defaultProps)void 0===i[r]&&(i[r]=o[r]);return E(e,s,void 0,0,0,i)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=k.T,n={};k.T=n;try{var r=e(),i=k.S;null!==i&&i(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(O,N)}catch(s){N(s)}finally{k.T=t}},t.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},t.use=function(e){return k.H.use(e)},t.useActionState=function(e,t,n){return k.H.useActionState(e,t,n)},t.useCallback=function(e,t){return k.H.useCallback(e,t)},t.useContext=function(e){return k.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return k.H.useDeferredValue(e,t)},t.useEffect=function(e,t){return k.H.useEffect(e,t)},t.useId=function(){return k.H.useId()},t.useImperativeHandle=function(e,t,n){return k.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return k.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return k.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return k.H.useMemo(e,t)},t.useOptimistic=function(e,t){return k.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return k.H.useReducer(e,t,n)},t.useRef=function(e){return k.H.useRef(e)},t.useState=function(e){return k.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return k.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return k.H.useTransition()},t.version="19.0.0"},4291:(e,t,n)=>{"use strict";var r=n(5043);function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var o={d:{f:s,r:function(){throw Error(i(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},a=Symbol.for("react.portal");var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(i(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:a,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=o.p;try{if(l.T=null,o.p=2,e)return e()}finally{l.T=t,o.p=n,o.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,o.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&o.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin),i="string"===typeof t.integrity?t.integrity:void 0,s="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?o.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:i,fetchPriority:s}):"script"===n&&o.d.X(e,{crossOrigin:r,integrity:i,fetchPriority:s,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);o.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&o.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin);o.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);o.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else o.d.m(e)},t.requestFormReset=function(e){o.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.0.0"},4352:(e,t,n)=>{"use strict";var r=n(4823),i=n(816),s=n(6164),o=n(7899),a=n(4030),l=n(4111),c=r.Symbol,u=i("wks"),d=l?c.for||c:c&&c.withoutSetter||o;e.exports=function(e){return s(u,e)||(u[e]=a&&s(c,e)?c[e]:d("Symbol."+e)),u[e]}},4391:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(7004)},4416:(e,t,n)=>{"use strict";var r=n(7707),i=n(8084),s=n(4706),o=n(6164),a=n(9519),l=n(2345).CONFIGURABLE,c=n(5167),u=n(2428),d=u.enforce,h=u.get,p=String,f=Object.defineProperty,m=r("".slice),g=r("".replace),v=r([].join),y=a&&!i((function(){return 8!==f((function(){}),"length",{value:8}).length})),b=String(String).split("String"),w=e.exports=function(e,t,n){"Symbol("===m(p(t),0,7)&&(t="["+g(p(t),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!o(e,"name")||l&&e.name!==t)&&(a?f(e,"name",{value:t,configurable:!0}):e.name=t),y&&n&&o(n,"arity")&&e.length!==n.arity&&f(e,"length",{value:n.arity});try{n&&o(n,"constructor")&&n.constructor?a&&f(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(i){}var r=d(e);return o(r,"source")||(r.source=v(b,"string"==typeof t?t:"")),e};Function.prototype.toString=w((function(){return s(this)&&h(this).source||c(this)}),"toString")},4647:(e,t,n)=>{"use strict";n(6023),n(9286)},4658:(e,t,n)=>{"use strict";var r=n(816),i=n(7899),s=r("keys");e.exports=function(e){return s[e]||(s[e]=i(e))}},4706:e=>{"use strict";var t="object"==typeof document&&document.all;e.exports="undefined"==typeof t&&void 0!==t?function(e){return"function"==typeof e||e===t}:function(e){return"function"==typeof e}},4823:function(e,t,n){"use strict";var r=function(e){return e&&e.Math===Math&&e};e.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n.g&&n.g)||r("object"==typeof this&&this)||function(){return this}()||Function("return this")()},4850:(e,t,n)=>{"use strict";var r=n(5897),i=Function.prototype.call;e.exports=r?i.bind(i):function(){return i.apply(i,arguments)}},5043:(e,t,n)=>{"use strict";e.exports=n(4288)},5167:(e,t,n)=>{"use strict";var r=n(7707),i=n(4706),s=n(5704),o=r(Function.toString);i(s.inspectSource)||(s.inspectSource=function(e){return o(e)}),e.exports=s.inspectSource},5214:(e,t,n)=>{"use strict";var r=n(9519),i=n(4850),s=n(4022),o=n(6369),a=n(6774),l=n(3326),c=n(6164),u=n(9704),d=Object.getOwnPropertyDescriptor;t.f=r?d:function(e,t){if(e=a(e),t=l(t),u)try{return d(e,t)}catch(n){}if(c(e,t))return o(!i(s.f,e,t),e[t])}},5464:e=>{"use strict";var t=String;e.exports=function(e){try{return t(e)}catch(n){return"Object"}}},5551:(e,t,n)=>{"use strict";var r=n(4706),i=n(3572),s=n(4416),o=n(3036);e.exports=function(e,t,n,a){a||(a={});var l=a.enumerable,c=void 0!==a.name?a.name:t;if(r(n)&&s(n,c,a),a.global)l?e[t]=n:o(t,n);else{try{a.unsafe?e[t]&&(l=!0):delete e[t]}catch(u){}l?e[t]=n:i.f(e,t,{value:n,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return e}},5555:(e,t,n)=>{"use strict";var r=n(6164),i=n(2682),s=n(5214),o=n(3572);e.exports=function(e,t,n){for(var a=i(t),l=o.f,c=s.f,u=0;u<a.length;u++){var d=a[u];r(e,d)||n&&r(n,d)||l(e,d,c(t,d))}}},5687:(e,t,n)=>{"use strict";var r=n(7707),i=r({}.toString),s=r("".slice);e.exports=function(e){return s(i(e),8,-1)}},5704:(e,t,n)=>{"use strict";var r=n(7592),i=n(4823),s=n(3036),o="__core-js_shared__",a=e.exports=i[o]||s(o,{});(a.versions||(a.versions=[])).push({version:"3.41.0",mode:r?"pure":"global",copyright:"\xa9 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.41.0/LICENSE",source:"https://github.com/zloirock/core-js"})},5896:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,p=3,f=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function S(e){if(g=!1,w(e),!m)if(null!==r(c))m=!0,A();else{var t=r(u);null!==t&&N(S,t.startTime-e)}}var k,C=!1,E=-1,T=5,_=-1;function x(){return!(t.unstable_now()-_<T)}function I(){if(C){var e=t.unstable_now();_=e;var n=!0;try{e:{m=!1,g&&(g=!1,y(E),E=-1),f=!0;var s=p;try{t:{for(w(e),h=r(c);null!==h&&!(h.expirationTime>e&&x());){var o=h.callback;if("function"===typeof o){h.callback=null,p=h.priorityLevel;var a=o(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof a){h.callback=a,w(e),n=!0;break t}h===r(c)&&i(c),w(e)}else i(c);h=r(c)}if(null!==h)n=!0;else{var l=r(u);null!==l&&N(S,l.startTime-e),n=!1}}break e}finally{h=null,p=s,f=!1}n=void 0}}finally{n?k():C=!1}}}if("function"===typeof b)k=function(){b(I)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,P=R.port2;R.port1.onmessage=I,k=function(){P.postMessage(null)}}else k=function(){v(I,0)};function A(){C||(C=!0,k())}function N(e,n){E=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,A())},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(y(E),E=-1):g=!0,N(S,s-o))):(e.sortIndex=a,n(c,e),m||f||(m=!0,A())),e},t.unstable_shouldYield=x,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},5897:(e,t,n)=>{"use strict";var r=n(8084);e.exports=!r((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},6023:(e,t,n)=>{"use strict";var r=n(6715),i=n(4823),s=n(9464).clear;r({global:!0,bind:!0,enumerable:!0,forced:i.clearImmediate!==s},{clearImmediate:s})},6079:(e,t,n)=>{"use strict";var r=n(8084),i=n(4706),s=/#|\.prototype\./,o=function(e,t){var n=l[a(e)];return n===u||n!==c&&(i(t)?r(t):!!t)},a=o.normalize=function(e){return String(e).replace(s,".").toLowerCase()},l=o.data={},c=o.NATIVE="N",u=o.POLYFILL="P";e.exports=o},6164:(e,t,n)=>{"use strict";var r=n(7707),i=n(2522),s=r({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return s(i(e),t)}},6321:e=>{var t=e.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return null!=e.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return null!=e.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return null!=e.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s";return t+=null!=e.raddr?" raddr %s rport %d":"%v%v",t+=null!=e.tcptype?" tcptype %s":"%v",null!=e.generation&&(t+=" generation %d"),t+=null!=e["network-id"]?" network-id %d":"%v",t+=null!=e["network-cost"]?" network-cost %d":"%v"}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var t="ssrc:%d";return null!=e.attribute&&(t+=" %s",null!=e.value&&(t+=":%s")),t}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return null!=e.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(null!=e.clksrcExt?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var t="mediaclk:";return t+=null!=e.id?"id=%s %s":"%v%s",t+=null!=e.mediaClockValue?"=%s":"",t+=null!=e.rateNumerator?" rate=%s":"",t+=null!=e.rateDenominator?"/%s":""}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(t).forEach((function(e){t[e].forEach((function(e){e.reg||(e.reg=/(.*)/),e.format||(e.format="%s")}))}))},6369:e=>{"use strict";e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},6464:(e,t,n)=>{"use strict";var r=n(5897),i=Function.prototype,s=i.apply,o=i.call;e.exports="object"==typeof Reflect&&Reflect.apply||(r?o.bind(s):function(){return o.apply(s,arguments)})},6605:(e,t,n)=>{var r=n(6321),i=/%[sdv%]/g,s=function(e){var t=1,n=arguments,r=n.length;return e.replace(i,(function(e){if(t>=r)return e;var i=n[t];switch(t+=1,e){case"%%":return"%";case"%s":return String(i);case"%d":return Number(i);case"%v":return""}}))},o=function(e,t,n){var r=[e+"="+(t.format instanceof Function?t.format(t.push?n:n[t.name]):t.format)];if(t.names)for(var i=0;i<t.names.length;i+=1){var o=t.names[i];t.name?r.push(n[t.name][o]):r.push(n[t.names[i]])}else r.push(n[t.name]);return s.apply(null,r)},a=["v","o","s","i","u","e","p","c","b","t","r","z","a"],l=["i","c","b","a"];e.exports=function(e,t){t=t||{},null==e.version&&(e.version=0),null==e.name&&(e.name=" "),e.media.forEach((function(e){null==e.payloads&&(e.payloads="")}));var n=t.outerOrder||a,i=t.innerOrder||l,s=[];return n.forEach((function(t){r[t].forEach((function(n){n.name in e&&null!=e[n.name]?s.push(o(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach((function(e){s.push(o(t,n,e))}))}))})),e.media.forEach((function(e){s.push(o("m",r.m[0],e)),i.forEach((function(t){r[t].forEach((function(n){n.name in e&&null!=e[n.name]?s.push(o(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach((function(e){s.push(o(t,n,e))}))}))}))})),s.join("\r\n")+"\r\n"}},6672:e=>{"use strict";e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},6715:(e,t,n)=>{"use strict";var r=n(4823),i=n(5214).f,s=n(9266),o=n(5551),a=n(3036),l=n(5555),c=n(6079);e.exports=function(e,t){var n,u,d,h,p,f=e.target,m=e.global,g=e.stat;if(n=m?r:g?r[f]||a(f,{}):r[f]&&r[f].prototype)for(u in t){if(h=t[u],d=e.dontCallGetSet?(p=i(n,u))&&p.value:n[u],!c(m?u:f+(g?".":"#")+u,e.forced)&&void 0!==d){if(typeof h==typeof d)continue;l(h,d)}(e.sham||d&&d.sham)&&s(h,"sham",!0),o(n,u,h,e)}}},6774:(e,t,n)=>{"use strict";var r=n(1178),i=n(327);e.exports=function(e){return r(i(e))}},6821:(e,t,n)=>{"use strict";var r=n(4706);e.exports=function(e){return"object"==typeof e?null!==e:r(e)}},6842:(e,t)=>{"use strict";t.f=Object.getOwnPropertySymbols},6864:(e,t,n)=>{"use strict";var r=n(7707);e.exports=r({}.isPrototypeOf)},7004:(e,t,n)=>{"use strict";var r=n(8853),i=n(5043),s=n(7950);function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}var l=Symbol.for("react.element"),c=Symbol.for("react.transitional.element"),u=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),f=Symbol.for("react.provider"),m=Symbol.for("react.consumer"),g=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),b=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),S=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var k=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var C=Symbol.for("react.memo_cache_sentinel"),E=Symbol.iterator;function T(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=E&&e[E]||e["@@iterator"])?e:null}var _=Symbol.for("react.client.reference");function x(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===_?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case d:return"Fragment";case u:return"Portal";case p:return"Profiler";case h:return"StrictMode";case y:return"Suspense";case b:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case g:return(e.displayName||"Context")+".Provider";case m:return(e._context.displayName||"Context")+".Consumer";case v:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case w:return null!==(t=e.displayName||null)?t:x(e.type)||"Memo";case S:t=e._payload,e=e._init;try{return x(e(t))}catch(n){}}return null}var I,R,P=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,A=Object.assign;function N(e){if(void 0===I)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);I=t&&t[1]||"",R=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+I+e+R}var O=!1;function D(e,t){if(!e||O)return"";O=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(i){var r=i}Reflect.construct(e,[],n)}else{try{n.call()}catch(s){r=s}e.call(n.prototype)}}else{try{throw Error()}catch(o){r=o}(n=e())&&"function"===typeof n.catch&&n.catch((function(){}))}}catch(a){if(a&&r&&"string"===typeof a.stack)return[a.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=r.DetermineComponentFrameRoot(),o=s[0],a=s[1];if(o&&a){var l=o.split("\n"),c=a.split("\n");for(i=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;i<c.length&&!c[i].includes("DetermineComponentFrameRoot");)i++;if(r===l.length||i===c.length)for(r=l.length-1,i=c.length-1;1<=r&&0<=i&&l[r]!==c[i];)i--;for(;1<=r&&0<=i;r--,i--)if(l[r]!==c[i]){if(1!==r||1!==i)do{if(r--,0>--i||l[r]!==c[i]){var u="\n"+l[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=i);break}}}finally{O=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?N(n):""}function L(e){switch(e.tag){case 26:case 27:case 5:return N(e.type);case 16:return N("Lazy");case 13:return N("Suspense");case 19:return N("SuspenseList");case 0:case 15:return e=D(e.type,!1);case 11:return e=D(e.type.render,!1);case 1:return e=D(e.type,!0);default:return""}}function j(e){try{var t="";do{t+=L(e),e=e.return}while(e);return t}catch(n){return"\nError generating stack: "+n.message+"\n"+n.stack}}function M(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function F(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function U(e){if(M(e)!==e)throw Error(o(188))}function V(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=V(e)))return t;e=e.sibling}return null}var $=Array.isArray,B=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z={pending:!1,data:null,method:null,action:null},H=[],q=-1;function W(e){return{current:e}}function K(e){0>q||(e.current=H[q],H[q]=null,q--)}function G(e,t){q++,H[q]=e.current,e.current=t}var J=W(null),Y=W(null),Q=W(null),X=W(null);function Z(e,t){switch(G(Q,t),G(Y,e),G(J,null),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)&&(t=t.namespaceURI)?Yu(t):0;break;default:if(t=(e=8===e?t.parentNode:t).tagName,e=e.namespaceURI)t=Qu(e=Yu(e),t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}K(J),G(J,t)}function ee(){K(J),K(Y),K(Q)}function te(e){null!==e.memoizedState&&G(X,e);var t=J.current,n=Qu(t,e.type);t!==n&&(G(Y,e),G(J,n))}function ne(e){Y.current===e&&(K(J),K(Y)),X.current===e&&(K(X),jd._currentValue=z)}var re=Object.prototype.hasOwnProperty,ie=r.unstable_scheduleCallback,se=r.unstable_cancelCallback,oe=r.unstable_shouldYield,ae=r.unstable_requestPaint,le=r.unstable_now,ce=r.unstable_getCurrentPriorityLevel,ue=r.unstable_ImmediatePriority,de=r.unstable_UserBlockingPriority,he=r.unstable_NormalPriority,pe=r.unstable_LowPriority,fe=r.unstable_IdlePriority,me=r.log,ge=r.unstable_setDisableYieldValue,ve=null,ye=null;function be(e){if("function"===typeof me&&ge(e),ye&&"function"===typeof ye.setStrictMode)try{ye.setStrictMode(ve,e)}catch(t){}}var we=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(Se(e)/ke|0)|0},Se=Math.log,ke=Math.LN2;var Ce=128,Ee=4194304;function Te(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194176&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function _e(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=e.warmLanes;e=0!==e.finishedLanes;var a=134217727&n;return 0!==a?0!==(n=a&~i)?r=Te(n):0!==(s&=a)?r=Te(s):e||0!==(o=a&~o)&&(r=Te(o)):0!==(a=n&~i)?r=Te(a):0!==s?r=Te(s):e||0!==(o=n&~o)&&(r=Te(o)),0===r?0:0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(o=t&-t)||32===i&&0!==(4194176&o))?t:r}function xe(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function Ie(e,t){switch(e){case 1:case 2:case 4:case 8:return t+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Re(){var e=Ce;return 0===(4194176&(Ce<<=1))&&(Ce=128),e}function Pe(){var e=Ee;return 0===(62914560&(Ee<<=1))&&(Ee=4194304),e}function Ae(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ne(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Oe(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-we(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|4194218&n}function De(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-we(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function Le(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function je(){var e=B.p;return 0!==e?e:void 0===(e=window.event)?32:Qd(e.type)}var Me=Math.random().toString(36).slice(2),Fe="__reactFiber$"+Me,Ue="__reactProps$"+Me,Ve="__reactContainer$"+Me,$e="__reactEvents$"+Me,Be="__reactListeners$"+Me,ze="__reactHandles$"+Me,He="__reactResources$"+Me,qe="__reactMarker$"+Me;function We(e){delete e[Fe],delete e[Ue],delete e[$e],delete e[Be],delete e[ze]}function Ke(e){var t=e[Fe];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ve]||n[Fe]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ld(e);null!==e;){if(n=e[Fe])return n;e=ld(e)}return t}n=(e=n).parentNode}return null}function Ge(e){if(e=e[Fe]||e[Ve]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function Je(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(o(33))}function Ye(e){var t=e[He];return t||(t=e[He]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Qe(e){e[qe]=!0}var Xe=new Set,Ze={};function et(e,t){tt(e,t),tt(e+"Capture",t)}function tt(e,t){for(Ze[e]=t,e=0;e<t.length;e++)Xe.add(t[e])}var nt=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),rt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),it={},st={};function ot(e,t,n){if(i=t,re.call(st,i)||!re.call(it,i)&&(rt.test(i)?st[i]=!0:(it[i]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var i}function at(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function lt(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function ct(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ut(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function dt(e){e._valueTracker||(e._valueTracker=function(e){var t=ut(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function ht(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ut(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function pt(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var ft=/[\n"\\]/g;function mt(e){return e.replace(ft,(function(e){return"\\"+e.charCodeAt(0).toString(16)+" "}))}function gt(e,t,n,r,i,s,o,a){e.name="",null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.type=o:e.removeAttribute("type"),null!=t?"number"===o?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ct(t)):e.value!==""+ct(t)&&(e.value=""+ct(t)):"submit"!==o&&"reset"!==o||e.removeAttribute("value"),null!=t?yt(e,o,ct(t)):null!=n?yt(e,o,ct(n)):null!=r&&e.removeAttribute("value"),null==i&&null!=s&&(e.defaultChecked=!!s),null!=i&&(e.checked=i&&"function"!==typeof i&&"symbol"!==typeof i),null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?e.name=""+ct(a):e.removeAttribute("name")}function vt(e,t,n,r,i,s,o,a){if(null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s&&(e.type=s),null!=t||null!=n){if(!("submit"!==s&&"reset"!==s||void 0!==t&&null!==t))return;n=null!=n?""+ct(n):"",t=null!=t?""+ct(t):n,a||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:i)&&"symbol"!==typeof r&&!!r,e.checked=a?e.checked:!!r,e.defaultChecked=!!r,null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o&&(e.name=o)}function yt(e,t,n){"number"===t&&pt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function bt(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ct(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function wt(e,t,n){null==t||((t=""+ct(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ct(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function St(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(o(92));if($(r)){if(1<r.length)throw Error(o(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=ct(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r)}function kt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var Ct=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Et(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||Ct.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Tt(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(o(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var i in t)r=t[i],t.hasOwnProperty(i)&&n[i]!==r&&Et(e,i,r)}else for(var s in t)t.hasOwnProperty(s)&&Et(e,s,t[s])}function _t(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),It=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Rt(e){return It.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Pt=null;function At(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Nt=null,Ot=null;function Dt(e){var t=Ge(e);if(t&&(e=t.stateNode)){var n=e[Ue]||null;e:switch(e=t.stateNode,t.type){case"input":if(gt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+mt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=r[Ue]||null;if(!i)throw Error(o(90));gt(r,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&ht(r)}break e;case"textarea":wt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&bt(e,!!n.multiple,t,!1)}}}var Lt=!1;function jt(e,t,n){if(Lt)return e(t,n);Lt=!0;try{return e(t)}finally{if(Lt=!1,(null!==Nt||null!==Ot)&&(Fc(),Nt&&(t=Nt,e=Ot,Ot=Nt=null,Dt(t),e)))for(t=0;t<e.length;t++)Dt(e[t])}}function Mt(e,t){var n=e.stateNode;if(null===n)return null;var r=n[Ue]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Ft=!1;if(nt)try{var Ut={};Object.defineProperty(Ut,"passive",{get:function(){Ft=!0}}),window.addEventListener("test",Ut,Ut),window.removeEventListener("test",Ut,Ut)}catch(Sh){Ft=!1}var Vt=null,$t=null,Bt=null;function zt(){if(Bt)return Bt;var e,t,n=$t,r=n.length,i="value"in Vt?Vt.value:Vt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Bt=i.slice(e,1<t?1-t:void 0)}function Ht(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function qt(){return!0}function Wt(){return!1}function Kt(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?qt:Wt,this.isPropagationStopped=Wt,this}return A(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=qt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=qt)},persist:function(){},isPersistent:qt}),t}var Gt,Jt,Yt,Qt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xt=Kt(Qt),Zt=A({},Qt,{view:0,detail:0}),en=Kt(Zt),tn=A({},Zt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Yt&&(Yt&&"mousemove"===e.type?(Gt=e.screenX-Yt.screenX,Jt=e.screenY-Yt.screenY):Jt=Gt=0,Yt=e),Gt)},movementY:function(e){return"movementY"in e?e.movementY:Jt}}),nn=Kt(tn),rn=Kt(A({},tn,{dataTransfer:0})),sn=Kt(A({},Zt,{relatedTarget:0})),on=Kt(A({},Qt,{animationName:0,elapsedTime:0,pseudoElement:0})),an=Kt(A({},Qt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),ln=Kt(A({},Qt,{data:0})),cn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},un={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=dn[e])&&!!t[e]}function pn(){return hn}var fn=Kt(A({},Zt,{key:function(e){if(e.key){var t=cn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Ht(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?un[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pn,charCode:function(e){return"keypress"===e.type?Ht(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Ht(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),mn=Kt(A({},tn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),gn=Kt(A({},Zt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pn})),vn=Kt(A({},Qt,{propertyName:0,elapsedTime:0,pseudoElement:0})),yn=Kt(A({},tn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),bn=Kt(A({},Qt,{newState:0,oldState:0})),wn=[9,13,27,32],Sn=nt&&"CompositionEvent"in window,kn=null;nt&&"documentMode"in document&&(kn=document.documentMode);var Cn=nt&&"TextEvent"in window&&!kn,En=nt&&(!Sn||kn&&8<kn&&11>=kn),Tn=String.fromCharCode(32),_n=!1;function xn(e,t){switch(e){case"keyup":return-1!==wn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function In(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Rn=!1;var Pn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function An(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Pn[e.type]:"textarea"===t}function Nn(e,t,n,r){Nt?Ot?Ot.push(r):Ot=[r]:Nt=r,0<(t=ju(t,"onChange")).length&&(n=new Xt("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var On=null,Dn=null;function Ln(e){Iu(e,0)}function jn(e){if(ht(Je(e)))return e}function Mn(e,t){if("change"===e)return t}var Fn=!1;if(nt){var Un;if(nt){var Vn="oninput"in document;if(!Vn){var $n=document.createElement("div");$n.setAttribute("oninput","return;"),Vn="function"===typeof $n.oninput}Un=Vn}else Un=!1;Fn=Un&&(!document.documentMode||9<document.documentMode)}function Bn(){On&&(On.detachEvent("onpropertychange",zn),Dn=On=null)}function zn(e){if("value"===e.propertyName&&jn(Dn)){var t=[];Nn(t,Dn,e,At(e)),jt(Ln,t)}}function Hn(e,t,n){"focusin"===e?(Bn(),Dn=n,(On=t).attachEvent("onpropertychange",zn)):"focusout"===e&&Bn()}function qn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return jn(Dn)}function Wn(e,t){if("click"===e)return jn(t)}function Kn(e,t){if("input"===e||"change"===e)return jn(t)}var Gn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Jn(e,t){if(Gn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!re.call(t,i)||!Gn(e[i],t[i]))return!1}return!0}function Yn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Qn(e,t){var n,r=Yn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Yn(r)}}function Xn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Xn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function Zn(e){for(var t=pt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=pt((e=t.contentWindow).document)}return t}function er(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function tr(e,t){var n=Zn(t);t=e.focusedElem;var r=e.selectionRange;if(n!==t&&t&&t.ownerDocument&&Xn(t.ownerDocument.documentElement,t)){if(null!==r&&er(t))if(e=r.start,void 0===(n=r.end)&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if((n=(e=t.ownerDocument||document)&&e.defaultView||window).getSelection){n=n.getSelection();var i=t.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!n.extend&&s>r&&(i=r,r=s,s=i),i=Qn(t,s);var o=Qn(t,r);i&&o&&(1!==n.rangeCount||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&((e=e.createRange()).setStart(i.node,i.offset),n.removeAllRanges(),s>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}for(e=[],n=t;n=n.parentNode;)1===n.nodeType&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for("function"===typeof t.focus&&t.focus(),t=0;t<e.length;t++)(n=e[t]).element.scrollLeft=n.left,n.element.scrollTop=n.top}}var nr=nt&&"documentMode"in document&&11>=document.documentMode,rr=null,ir=null,sr=null,or=!1;function ar(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;or||null==rr||rr!==pt(r)||("selectionStart"in(r=rr)&&er(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},sr&&Jn(sr,r)||(sr=r,0<(r=ju(ir,"onSelect")).length&&(t=new Xt("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=rr)))}function lr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var cr={animationend:lr("Animation","AnimationEnd"),animationiteration:lr("Animation","AnimationIteration"),animationstart:lr("Animation","AnimationStart"),transitionrun:lr("Transition","TransitionRun"),transitionstart:lr("Transition","TransitionStart"),transitioncancel:lr("Transition","TransitionCancel"),transitionend:lr("Transition","TransitionEnd")},ur={},dr={};function hr(e){if(ur[e])return ur[e];if(!cr[e])return e;var t,n=cr[e];for(t in n)if(n.hasOwnProperty(t)&&t in dr)return ur[e]=n[t];return e}nt&&(dr=document.createElement("div").style,"AnimationEvent"in window||(delete cr.animationend.animation,delete cr.animationiteration.animation,delete cr.animationstart.animation),"TransitionEvent"in window||delete cr.transitionend.transition);var pr=hr("animationend"),fr=hr("animationiteration"),mr=hr("animationstart"),gr=hr("transitionrun"),vr=hr("transitionstart"),yr=hr("transitioncancel"),br=hr("transitionend"),wr=new Map,Sr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function kr(e,t){wr.set(e,t),et(t,[e])}var Cr=[],Er=0,Tr=0;function _r(){for(var e=Er,t=Tr=Er=0;t<e;){var n=Cr[t];Cr[t++]=null;var r=Cr[t];Cr[t++]=null;var i=Cr[t];Cr[t++]=null;var s=Cr[t];if(Cr[t++]=null,null!==r&&null!==i){var o=r.pending;null===o?i.next=i:(i.next=o.next,o.next=i),r.pending=i}0!==s&&Pr(n,i,s)}}function xr(e,t,n,r){Cr[Er++]=e,Cr[Er++]=t,Cr[Er++]=n,Cr[Er++]=r,Tr|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Ir(e,t,n,r){return xr(e,t,n,r),Ar(e)}function Rr(e,t){return xr(e,null,null,t),Ar(e)}function Pr(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var i=!1,s=e.return;null!==s;)s.childLanes|=n,null!==(r=s.alternate)&&(r.childLanes|=n),22===s.tag&&(null===(e=s.stateNode)||1&e._visibility||(i=!0)),e=s,s=s.return;i&&null!==t&&3===e.tag&&(s=e.stateNode,i=31-we(n),null===(e=(s=s.hiddenUpdates)[i])?s[i]=[t]:e.push(t),t.lane=536870912|n)}function Ar(e){if(50<Ic)throw Ic=0,Rc=null,Error(o(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Nr={},Or=new WeakMap;function Dr(e,t){if("object"===typeof e&&null!==e){var n=Or.get(e);return void 0!==n?n:(t={value:e,source:t,stack:j(t)},Or.set(e,t),t)}return{value:e,source:t,stack:j(t)}}var Lr=[],jr=0,Mr=null,Fr=0,Ur=[],Vr=0,$r=null,Br=1,zr="";function Hr(e,t){Lr[jr++]=Fr,Lr[jr++]=Mr,Mr=e,Fr=t}function qr(e,t,n){Ur[Vr++]=Br,Ur[Vr++]=zr,Ur[Vr++]=$r,$r=e;var r=Br;e=zr;var i=32-we(r)-1;r&=~(1<<i),n+=1;var s=32-we(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Br=1<<32-we(t)+i|n<<i|r,zr=s+e}else Br=1<<s|n<<i|r,zr=e}function Wr(e){null!==e.return&&(Hr(e,1),qr(e,1,0))}function Kr(e){for(;e===Mr;)Mr=Lr[--jr],Lr[jr]=null,Fr=Lr[--jr],Lr[jr]=null;for(;e===$r;)$r=Ur[--Vr],Ur[Vr]=null,zr=Ur[--Vr],Ur[Vr]=null,Br=Ur[--Vr],Ur[Vr]=null}var Gr=null,Jr=null,Yr=!1,Qr=null,Xr=!1,Zr=Error(o(519));function ei(e){throw si(Dr(Error(o(418,"")),e)),Zr}function ti(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Fe]=e,t[Ue]=r,n){case"dialog":Ru("cancel",t),Ru("close",t);break;case"iframe":case"object":case"embed":Ru("load",t);break;case"video":case"audio":for(n=0;n<_u.length;n++)Ru(_u[n],t);break;case"source":Ru("error",t);break;case"img":case"image":case"link":Ru("error",t),Ru("load",t);break;case"details":Ru("toggle",t);break;case"input":Ru("invalid",t),vt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),dt(t);break;case"select":Ru("invalid",t);break;case"textarea":Ru("invalid",t),St(t,r.value,r.defaultValue,r.children),dt(t)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||Bu(t.textContent,n)?(null!=r.popover&&(Ru("beforetoggle",t),Ru("toggle",t)),null!=r.onScroll&&Ru("scroll",t),null!=r.onScrollEnd&&Ru("scrollend",t),null!=r.onClick&&(t.onclick=zu),t=!0):t=!1,t||ei(e)}function ni(e){for(Gr=e.return;Gr;)switch(Gr.tag){case 3:case 27:return void(Xr=!0);case 5:case 13:return void(Xr=!1);default:Gr=Gr.return}}function ri(e){if(e!==Gr)return!1;if(!Yr)return ni(e),Yr=!0,!1;var t,n=!1;if((t=3!==e.tag&&27!==e.tag)&&((t=5===e.tag)&&(t=!("form"!==(t=e.type)&&"button"!==t)||Xu(e.type,e.memoizedProps)),t=!t),t&&(n=!0),n&&Jr&&ei(e),ni(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){Jr=ad(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}Jr=null}}else Jr=Gr?ad(e.stateNode.nextSibling):null;return!0}function ii(){Jr=Gr=null,Yr=!1}function si(e){null===Qr?Qr=[e]:Qr.push(e)}var oi=Error(o(460)),ai=Error(o(474)),li={then:function(){}};function ci(e){return"fulfilled"===(e=e.status)||"rejected"===e}function ui(){}function di(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(ui,ui),t=n),t.status){case"fulfilled":return t.value;case"rejected":if((e=t.reason)===oi)throw Error(o(483));throw e;default:if("string"===typeof t.status)t.then(ui,ui);else{if(null!==(e=tc)&&100<e.shellSuspendCounter)throw Error(o(482));(e=t).status="pending",e.then((function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}}),(function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}}))}switch(t.status){case"fulfilled":return t.value;case"rejected":if((e=t.reason)===oi)throw Error(o(483));throw e}throw hi=t,oi}}var hi=null;function pi(){if(null===hi)throw Error(o(459));var e=hi;return hi=null,e}var fi=null,mi=0;function gi(e){var t=mi;return mi+=1,null===fi&&(fi=[]),di(fi,e,t)}function vi(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function yi(e,t){if(t.$$typeof===l)throw Error(o(525));throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bi(e){return(0,e._init)(e._payload)}function wi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(e,t){return(e=Ml(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=33554434,n):r:(t.flags|=33554434,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=33554434),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Bl(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n,r){var s=n.type;return s===d?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===S&&bi(s)===t.type)?(vi(t=i(t,n.props),n),t.return=e,t):(vi(t=Ul(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function p(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=zl(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,s){return null===t||7!==t.tag?((t=Vl(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function m(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Bl(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case c:return vi(n=Ul(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case u:return(t=zl(t,e.mode,n)).return=e,t;case S:return m(e,t=(0,t._init)(t._payload),n)}if($(t)||T(t))return(t=Vl(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return m(e,gi(t),n);if(t.$$typeof===g)return m(e,_a(e,t),n);yi(e,t)}return null}function v(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case c:return n.key===i?h(e,t,n,r):null;case u:return n.key===i?p(e,t,n,r):null;case S:return v(e,t,n=(i=n._init)(n._payload),r)}if($(n)||T(n))return null!==i?null:f(e,t,n,r,null);if("function"===typeof n.then)return v(e,t,gi(n),r);if(n.$$typeof===g)return v(e,t,_a(e,n),r);yi(e,n)}return null}function y(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case c:return h(t,e=e.get(null===r.key?n:r.key)||null,r,i);case u:return p(t,e=e.get(null===r.key?n:r.key)||null,r,i);case S:return y(e,t,n,r=(0,r._init)(r._payload),i)}if($(r)||T(r))return f(t,e=e.get(n)||null,r,i,null);if("function"===typeof r.then)return y(e,t,n,gi(r),i);if(r.$$typeof===g)return y(e,t,n,_a(t,r),i);yi(t,r)}return null}function b(l,h,p,f){if("object"===typeof p&&null!==p&&p.type===d&&null===p.key&&(p=p.props.children),"object"===typeof p&&null!==p){switch(p.$$typeof){case c:e:{for(var w=p.key;null!==h;){if(h.key===w){if((w=p.type)===d){if(7===h.tag){n(l,h.sibling),(f=i(h,p.props.children)).return=l,l=f;break e}}else if(h.elementType===w||"object"===typeof w&&null!==w&&w.$$typeof===S&&bi(w)===h.type){n(l,h.sibling),vi(f=i(h,p.props),p),f.return=l,l=f;break e}n(l,h);break}t(l,h),h=h.sibling}p.type===d?((f=Vl(p.props.children,l.mode,f,p.key)).return=l,l=f):(vi(f=Ul(p.type,p.key,p.props,null,l.mode,f),p),f.return=l,l=f)}return a(l);case u:e:{for(w=p.key;null!==h;){if(h.key===w){if(4===h.tag&&h.stateNode.containerInfo===p.containerInfo&&h.stateNode.implementation===p.implementation){n(l,h.sibling),(f=i(h,p.children||[])).return=l,l=f;break e}n(l,h);break}t(l,h),h=h.sibling}(f=zl(p,l.mode,f)).return=l,l=f}return a(l);case S:return b(l,h,p=(w=p._init)(p._payload),f)}if($(p))return function(i,o,a,l){for(var c=null,u=null,d=o,h=o=0,p=null;null!==d&&h<a.length;h++){d.index>h?(p=d,d=null):p=d.sibling;var f=v(i,d,a[h],l);if(null===f){null===d&&(d=p);break}e&&d&&null===f.alternate&&t(i,d),o=s(f,o,h),null===u?c=f:u.sibling=f,u=f,d=p}if(h===a.length)return n(i,d),Yr&&Hr(i,h),c;if(null===d){for(;h<a.length;h++)null!==(d=m(i,a[h],l))&&(o=s(d,o,h),null===u?c=d:u.sibling=d,u=d);return Yr&&Hr(i,h),c}for(d=r(d);h<a.length;h++)null!==(p=y(d,i,h,a[h],l))&&(e&&null!==p.alternate&&d.delete(null===p.key?h:p.key),o=s(p,o,h),null===u?c=p:u.sibling=p,u=p);return e&&d.forEach((function(e){return t(i,e)})),Yr&&Hr(i,h),c}(l,h,p,f);if(T(p)){if("function"!==typeof(w=T(p)))throw Error(o(150));return function(i,a,l,c){if(null==l)throw Error(o(151));for(var u=null,d=null,h=a,p=a=0,f=null,g=l.next();null!==h&&!g.done;p++,g=l.next()){h.index>p?(f=h,h=null):f=h.sibling;var b=v(i,h,g.value,c);if(null===b){null===h&&(h=f);break}e&&h&&null===b.alternate&&t(i,h),a=s(b,a,p),null===d?u=b:d.sibling=b,d=b,h=f}if(g.done)return n(i,h),Yr&&Hr(i,p),u;if(null===h){for(;!g.done;p++,g=l.next())null!==(g=m(i,g.value,c))&&(a=s(g,a,p),null===d?u=g:d.sibling=g,d=g);return Yr&&Hr(i,p),u}for(h=r(h);!g.done;p++,g=l.next())null!==(g=y(h,i,p,g.value,c))&&(e&&null!==g.alternate&&h.delete(null===g.key?p:g.key),a=s(g,a,p),null===d?u=g:d.sibling=g,d=g);return e&&h.forEach((function(e){return t(i,e)})),Yr&&Hr(i,p),u}(l,h,p=w.call(p),f)}if("function"===typeof p.then)return b(l,h,gi(p),f);if(p.$$typeof===g)return b(l,h,_a(l,p),f);yi(l,p)}return"string"===typeof p&&""!==p||"number"===typeof p||"bigint"===typeof p?(p=""+p,null!==h&&6===h.tag?(n(l,h.sibling),(f=i(h,p)).return=l,l=f):(n(l,h),(f=Bl(p,l.mode,f)).return=l,l=f),a(l)):n(l,h)}return function(e,t,n,r){try{mi=0;var i=b(e,t,n,r);return fi=null,i}catch(o){if(o===oi)throw o;var s=Ll(29,o,null,e.mode);return s.lanes=r,s.return=e,s}}}var Si=wi(!0),ki=wi(!1),Ci=W(null),Ei=W(0);function Ti(e,t){G(Ei,e=cc),G(Ci,t),cc=e|t.baseLanes}function _i(){G(Ei,cc),G(Ci,Ci.current)}function xi(){cc=Ei.current,K(Ci),K(Ei)}var Ii=W(null),Ri=null;function Pi(e){var t=e.alternate;G(Di,1&Di.current),G(Ii,e),null===Ri&&(null===t||null!==Ci.current||null!==t.memoizedState)&&(Ri=e)}function Ai(e){if(22===e.tag){if(G(Di,Di.current),G(Ii,e),null===Ri){var t=e.alternate;null!==t&&null!==t.memoizedState&&(Ri=e)}}else Ni()}function Ni(){G(Di,Di.current),G(Ii,Ii.current)}function Oi(e){K(Ii),Ri===e&&(Ri=null),K(Di)}var Di=W(0);function Li(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ji="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach((function(e){return e()}))}},Mi=r.unstable_scheduleCallback,Fi=r.unstable_NormalPriority,Ui={$$typeof:g,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Vi(){return{controller:new ji,data:new Map,refCount:0}}function $i(e){e.refCount--,0===e.refCount&&Mi(Fi,(function(){e.controller.abort()}))}var Bi=null,zi=0,Hi=0,qi=null;function Wi(){if(0===--zi&&null!==Bi){null!==qi&&(qi.status="fulfilled");var e=Bi;Bi=null,Hi=0,qi=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Ki=P.S;P.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Bi){var n=Bi=[];zi=0,Hi=Su(),qi={status:"pending",value:void 0,then:function(e){n.push(e)}}}zi++,t.then(Wi,Wi)}(0,t),null!==Ki&&Ki(e,t)};var Gi=W(null);function Ji(){var e=Gi.current;return null!==e?e:tc.pooledCache}function Yi(e,t){G(Gi,null===t?Gi.current:t.pool)}function Qi(){var e=Ji();return null===e?null:{parent:Ui._currentValue,pool:e}}var Xi=0,Zi=null,es=null,ts=null,ns=!1,rs=!1,is=!1,ss=0,os=0,as=null,ls=0;function cs(){throw Error(o(321))}function us(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Gn(e[n],t[n]))return!1;return!0}function ds(e,t,n,r,i,s){return Xi=s,Zi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,P.H=null===e||null===e.memoizedState?_o:xo,is=!1,s=n(r,i),is=!1,rs&&(s=ps(t,n,r,i)),hs(e),s}function hs(e){P.H=To;var t=null!==es&&null!==es.next;if(Xi=0,ts=es=Zi=null,ns=!1,os=0,as=null,t)throw Error(o(300));null===e||Ho||null!==(e=e.dependencies)&&Ca(e)&&(Ho=!0)}function ps(e,t,n,r){Zi=e;var i=0;do{if(rs&&(as=null),os=0,rs=!1,25<=i)throw Error(o(301));if(i+=1,ts=es=null,null!=e.updateQueue){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,null!=s.memoCache&&(s.memoCache.index=0)}P.H=Io,s=t(n,r)}while(rs);return s}function fs(){var e=P.H,t=e.useState()[0];return t="function"===typeof t.then?ws(t):t,e=e.useState()[0],(null!==es?es.memoizedState:null)!==e&&(Zi.flags|=1024),t}function ms(){var e=0!==ss;return ss=0,e}function gs(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function vs(e){if(ns){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}ns=!1}Xi=0,ts=es=Zi=null,rs=!1,os=ss=0,as=null}function ys(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ts?Zi.memoizedState=ts=e:ts=ts.next=e,ts}function bs(){if(null===es){var e=Zi.alternate;e=null!==e?e.memoizedState:null}else e=es.next;var t=null===ts?Zi.memoizedState:ts.next;if(null!==t)ts=t,es=e;else{if(null===e){if(null===Zi.alternate)throw Error(o(467));throw Error(o(310))}e={memoizedState:(es=e).memoizedState,baseState:es.baseState,baseQueue:es.baseQueue,queue:es.queue,next:null},null===ts?Zi.memoizedState=ts=e:ts=ts.next=e}return ts}function ws(e){var t=os;return os+=1,null===as&&(as=[]),e=di(as,e,t),t=Zi,null===(null===ts?t.memoizedState:ts.next)&&(t=t.alternate,P.H=null===t||null===t.memoizedState?_o:xo),e}function Ss(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return ws(e);if(e.$$typeof===g)return Ta(e)}throw Error(o(438,String(e)))}function ks(e){var t=null,n=Zi.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=Zi.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map((function(e){return e.slice()})),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},Zi.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=C;return t.index++,n}function Cs(e,t){return"function"===typeof t?t(e):t}function Es(e){return Ts(bs(),es,e)}function Ts(e,t,n){var r=e.queue;if(null===r)throw Error(o(311));r.lastRenderedReducer=n;var i=e.baseQueue,s=r.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}t.baseQueue=i=s,r.pending=null}if(s=e.baseState,null===i)e.memoizedState=s;else{var l=a=null,c=null,u=t=i.next,d=!1;do{var h=-536870913&u.lane;if(h!==u.lane?(rc&h)===h:(Xi&h)===h){var p=u.revertLane;if(0===p)null!==c&&(c=c.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===Hi&&(d=!0);else{if((Xi&p)===p){u=u.next,p===Hi&&(d=!0);continue}h={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=h,a=s):c=c.next=h,Zi.lanes|=p,dc|=p}h=u.action,is&&n(s,h),s=u.hasEagerState?u.eagerState:n(s,h)}else p={lane:h,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=p,a=s):c=c.next=p,Zi.lanes|=h,dc|=h;u=u.next}while(null!==u&&u!==t);if(null===c?a=s:c.next=l,!Gn(s,e.memoizedState)&&(Ho=!0,d&&null!==(n=qi)))throw n;e.memoizedState=s,e.baseState=a,e.baseQueue=c,r.lastRenderedState=s}return null===i&&(r.lanes=0),[e.memoizedState,r.dispatch]}function _s(e){var t=bs(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{s=e(s,a.action),a=a.next}while(a!==i);Gn(s,t.memoizedState)||(Ho=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function xs(e,t,n){var r=Zi,i=bs(),s=Yr;if(s){if(void 0===n)throw Error(o(407));n=n()}else n=t();var a=!Gn((es||i).memoizedState,n);if(a&&(i.memoizedState=n,Ho=!0),i=i.queue,Xs(Ps.bind(null,r,i,e),[e]),i.getSnapshot!==t||a||null!==ts&&1&ts.memoizedState.tag){if(r.flags|=2048,Ks(9,Rs.bind(null,r,i,n,t),{destroy:void 0},null),null===tc)throw Error(o(349));s||0!==(60&Xi)||Is(r,t,n)}return n}function Is(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Zi.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},Zi.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Rs(e,t,n,r){t.value=n,t.getSnapshot=r,As(t)&&Ns(e)}function Ps(e,t,n){return n((function(){As(t)&&Ns(e)}))}function As(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Gn(e,n)}catch(r){return!0}}function Ns(e){var t=Rr(e,2);null!==t&&Nc(t,e,2)}function Os(e){var t=ys();if("function"===typeof e){var n=e;if(e=n(),is){be(!0);try{n()}finally{be(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cs,lastRenderedState:e},t}function Ds(e,t,n,r){return e.baseState=n,Ts(e,es,"function"===typeof r?r:Cs)}function Ls(e,t,n,r,i){if(ko(e))throw Error(o(485));if(null!==(e=t.action)){var s={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){s.listeners.push(e)}};null!==P.T?n(!0):s.isTransition=!1,r(s),null===(n=t.pending)?(s.next=t.pending=s,js(t,s)):(s.next=n.next,t.pending=n.next=s)}}function js(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var s=P.T,o={};P.T=o;try{var a=n(i,r),l=P.S;null!==l&&l(o,a),Ms(e,t,a)}catch(c){Us(e,t,c)}finally{P.T=s}}else try{Ms(e,t,s=n(i,r))}catch(u){Us(e,t,u)}}function Ms(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then((function(n){Fs(e,t,n)}),(function(n){return Us(e,t,n)})):Fs(e,t,n)}function Fs(e,t,n){t.status="fulfilled",t.value=n,Vs(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,js(e,n)))}function Us(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,Vs(t),t=t.next}while(t!==r)}e.action=null}function Vs(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function $s(e,t){return t}function Bs(e,t){if(Yr){var n=tc.formState;if(null!==n){e:{var r=Zi;if(Yr){if(Jr){t:{for(var i=Jr,s=Xr;8!==i.nodeType;){if(!s){i=null;break t}if(null===(i=ad(i.nextSibling))){i=null;break t}}i="F!"===(s=i.data)||"F"===s?i:null}if(i){Jr=ad(i.nextSibling),r="F!"===i.data;break e}}ei(r)}r=!1}r&&(t=n[0])}}return(n=ys()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$s,lastRenderedState:t},n.queue=r,n=bo.bind(null,Zi,r),r.dispatch=n,r=Os(!1),s=So.bind(null,Zi,!1,r.queue),i={state:t,dispatch:null,action:e,pending:null},(r=ys()).queue=i,n=Ls.bind(null,Zi,i,s,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function zs(e){return Hs(bs(),es,e)}function Hs(e,t,n){t=Ts(e,t,$s)[0],e=Es(Cs)[0],t="object"===typeof t&&null!==t&&"function"===typeof t.then?ws(t):t;var r=bs(),i=r.queue,s=i.dispatch;return n!==r.memoizedState&&(Zi.flags|=2048,Ks(9,qs.bind(null,i,n),{destroy:void 0},null)),[t,s,e]}function qs(e,t){e.action=t}function Ws(e){var t=bs(),n=es;if(null!==n)return Hs(t,n,e);bs(),t=t.memoizedState;var r=(n=bs()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function Ks(e,t,n,r){return e={tag:e,create:t,inst:n,deps:r,next:null},null===(t=Zi.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},Zi.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Gs(){return bs().memoizedState}function Js(e,t,n,r){var i=ys();Zi.flags|=e,i.memoizedState=Ks(1|t,n,{destroy:void 0},void 0===r?null:r)}function Ys(e,t,n,r){var i=bs();r=void 0===r?null:r;var s=i.memoizedState.inst;null!==es&&null!==r&&us(r,es.memoizedState.deps)?i.memoizedState=Ks(t,n,s,r):(Zi.flags|=e,i.memoizedState=Ks(1|t,n,s,r))}function Qs(e,t){Js(8390656,8,e,t)}function Xs(e,t){Ys(2048,8,e,t)}function Zs(e,t){return Ys(4,2,e,t)}function eo(e,t){return Ys(4,4,e,t)}function to(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function no(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Ys(4,4,to.bind(null,t,e),n)}function ro(){}function io(e,t){var n=bs();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&us(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function so(e,t){var n=bs();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&us(t,r[1]))return r[0];if(r=e(),is){be(!0);try{e()}finally{be(!1)}}return n.memoizedState=[r,t],r}function oo(e,t,n){return void 0===n||0!==(1073741824&Xi)?e.memoizedState=t:(e.memoizedState=n,e=Ac(),Zi.lanes|=e,dc|=e,n)}function ao(e,t,n,r){return Gn(n,t)?n:null!==Ci.current?(e=oo(e,n,r),Gn(e,t)||(Ho=!0),e):0===(42&Xi)?(Ho=!0,e.memoizedState=n):(e=Ac(),Zi.lanes|=e,dc|=e,t)}function lo(e,t,n,r,i){var s=B.p;B.p=0!==s&&8>s?s:8;var o=P.T,a={};P.T=a,So(e,!1,t,n);try{var l=i(),c=P.S;if(null!==c&&c(a,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)wo(e,t,function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then((function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)}),(function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)})),r}(l,r),Pc());else wo(e,t,r,Pc())}catch(u){wo(e,t,{then:function(){},status:"rejected",reason:u},Pc())}finally{B.p=s,P.T=o}}function co(){}function uo(e,t,n,r){if(5!==e.tag)throw Error(o(476));var i=ho(e).queue;lo(e,i,t,z,null===n?co:function(){return po(e),n(r)})}function ho(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:z,baseState:z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cs,lastRenderedState:z},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cs,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function po(e){wo(e,ho(e).next.queue,{},Pc())}function fo(){return Ta(jd)}function mo(){return bs().memoizedState}function go(){return bs().memoizedState}function vo(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Pc(),r=Na(t,e=Aa(n),n);return null!==r&&(Nc(r,t,n),Oa(r,t,n)),t={cache:Vi()},void(e.payload=t)}t=t.return}}function yo(e,t,n){var r=Pc();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},ko(e)?Co(t,n):null!==(n=Ir(e,t,n,r))&&(Nc(n,e,r),Eo(n,t,r))}function bo(e,t,n){wo(e,t,n,Pc())}function wo(e,t,n,r){var i={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(ko(e))Co(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Gn(a,o))return xr(e,t,i,0),null===tc&&_r(),!1}catch(l){}if(null!==(n=Ir(e,t,i,r)))return Nc(n,e,r),Eo(n,t,r),!0}return!1}function So(e,t,n,r){if(r={lane:2,revertLane:Su(),action:r,hasEagerState:!1,eagerState:null,next:null},ko(e)){if(t)throw Error(o(479))}else null!==(t=Ir(e,n,r,2))&&Nc(t,e,2)}function ko(e){var t=e.alternate;return e===Zi||null!==t&&t===Zi}function Co(e,t){rs=ns=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Eo(e,t,n){if(0!==(4194176&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,De(e,n)}}var To={readContext:Ta,use:Ss,useCallback:cs,useContext:cs,useEffect:cs,useImperativeHandle:cs,useLayoutEffect:cs,useInsertionEffect:cs,useMemo:cs,useReducer:cs,useRef:cs,useState:cs,useDebugValue:cs,useDeferredValue:cs,useTransition:cs,useSyncExternalStore:cs,useId:cs};To.useCacheRefresh=cs,To.useMemoCache=cs,To.useHostTransitionStatus=cs,To.useFormState=cs,To.useActionState=cs,To.useOptimistic=cs;var _o={readContext:Ta,use:Ss,useCallback:function(e,t){return ys().memoizedState=[e,void 0===t?null:t],e},useContext:Ta,useEffect:Qs,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Js(4194308,4,to.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Js(4194308,4,e,t)},useInsertionEffect:function(e,t){Js(4,2,e,t)},useMemo:function(e,t){var n=ys();t=void 0===t?null:t;var r=e();if(is){be(!0);try{e()}finally{be(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=ys();if(void 0!==n){var i=n(t);if(is){be(!0);try{n(t)}finally{be(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=yo.bind(null,Zi,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ys().memoizedState=e},useState:function(e){var t=(e=Os(e)).queue,n=bo.bind(null,Zi,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:ro,useDeferredValue:function(e,t){return oo(ys(),e,t)},useTransition:function(){var e=Os(!1);return e=lo.bind(null,Zi,e.queue,!0,!1),ys().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=Zi,i=ys();if(Yr){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===tc)throw Error(o(349));0!==(60&rc)||Is(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Qs(Ps.bind(null,r,s,e),[e]),r.flags|=2048,Ks(9,Rs.bind(null,r,s,n,t),{destroy:void 0},null),n},useId:function(){var e=ys(),t=tc.identifierPrefix;if(Yr){var n=zr;t=":"+t+"R"+(n=(Br&~(1<<32-we(Br)-1)).toString(32)+n),0<(n=ss++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ls++).toString(32)+":";return e.memoizedState=t},useCacheRefresh:function(){return ys().memoizedState=vo.bind(null,Zi)}};_o.useMemoCache=ks,_o.useHostTransitionStatus=fo,_o.useFormState=Bs,_o.useActionState=Bs,_o.useOptimistic=function(e){var t=ys();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=So.bind(null,Zi,!0,n),n.dispatch=t,[e,t]};var xo={readContext:Ta,use:Ss,useCallback:io,useContext:Ta,useEffect:Xs,useImperativeHandle:no,useInsertionEffect:Zs,useLayoutEffect:eo,useMemo:so,useReducer:Es,useRef:Gs,useState:function(){return Es(Cs)},useDebugValue:ro,useDeferredValue:function(e,t){return ao(bs(),es.memoizedState,e,t)},useTransition:function(){var e=Es(Cs)[0],t=bs().memoizedState;return["boolean"===typeof e?e:ws(e),t]},useSyncExternalStore:xs,useId:mo};xo.useCacheRefresh=go,xo.useMemoCache=ks,xo.useHostTransitionStatus=fo,xo.useFormState=zs,xo.useActionState=zs,xo.useOptimistic=function(e,t){return Ds(bs(),0,e,t)};var Io={readContext:Ta,use:Ss,useCallback:io,useContext:Ta,useEffect:Xs,useImperativeHandle:no,useInsertionEffect:Zs,useLayoutEffect:eo,useMemo:so,useReducer:_s,useRef:Gs,useState:function(){return _s(Cs)},useDebugValue:ro,useDeferredValue:function(e,t){var n=bs();return null===es?oo(n,e,t):ao(n,es.memoizedState,e,t)},useTransition:function(){var e=_s(Cs)[0],t=bs().memoizedState;return["boolean"===typeof e?e:ws(e),t]},useSyncExternalStore:xs,useId:mo};function Ro(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:A({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}Io.useCacheRefresh=go,Io.useMemoCache=ks,Io.useHostTransitionStatus=fo,Io.useFormState=Ws,Io.useActionState=Ws,Io.useOptimistic=function(e,t){var n=bs();return null!==es?Ds(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])};var Po={isMounted:function(e){return!!(e=e._reactInternals)&&M(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Pc(),i=Aa(r);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Na(e,i,r))&&(Nc(t,e,r),Oa(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Pc(),i=Aa(r);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Na(e,i,r))&&(Nc(t,e,r),Oa(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Pc(),r=Aa(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=Na(e,r,n))&&(Nc(t,e,n),Oa(t,e,n))}};function Ao(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!Jn(n,r)||!Jn(i,s))}function No(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Po.enqueueReplaceState(t,t.state,null)}function Oo(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=A({},n)),e)void 0===n[i]&&(n[i]=e[i]);return n}var Do="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function Lo(e){Do(e)}function jo(e){console.error(e)}function Mo(e){Do(e)}function Fo(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout((function(){throw n}))}}function Uo(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout((function(){throw r}))}}function Vo(e,t,n){return(n=Aa(n)).tag=3,n.payload={element:null},n.callback=function(){Fo(e,t)},n}function $o(e){return(e=Aa(e)).tag=3,e}function Bo(e,t,n,r){var i=n.type.getDerivedStateFromError;if("function"===typeof i){var s=r.value;e.payload=function(){return i(s)},e.callback=function(){Uo(t,n,r)}}var o=n.stateNode;null!==o&&"function"===typeof o.componentDidCatch&&(e.callback=function(){Uo(t,n,r),"function"!==typeof i&&(null===kc?kc=new Set([this]):kc.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var zo=Error(o(461)),Ho=!1;function qo(e,t,n,r){t.child=null===e?ki(t,null,n,r):Si(t,e.child,n,r)}function Wo(e,t,n,r,i){n=n.render;var s=t.ref;if("ref"in r){var o={};for(var a in r)"ref"!==a&&(o[a]=r[a])}else o=r;return Ea(t),r=ds(e,t,n,o,s,i),a=ms(),null===e||Ho?(Yr&&a&&Wr(t),t.flags|=1,qo(e,t,r,i),t.child):(gs(e,t,i),ha(e,t,i))}function Ko(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||jl(s)||void 0!==s.defaultProps||null!==n.compare?((e=Ul(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Go(e,t,s,r,i))}if(s=e.child,!pa(e,i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:Jn)(o,r)&&e.ref===t.ref)return ha(e,t,i)}return t.flags|=1,(e=Ml(s,r)).ref=t.ref,e.return=t,t.child=e}function Go(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(Jn(s,r)&&e.ref===t.ref){if(Ho=!1,t.pendingProps=r=s,!pa(e,i))return t.lanes=e.lanes,ha(e,t,i);0!==(131072&e.flags)&&(Ho=!0)}}return Xo(e,t,n,r,i)}function Jo(e,t,n){var r=t.pendingProps,i=r.children,s=0!==(2&t.stateNode._pendingVisibility),o=null!==e?e.memoizedState:null;if(Qo(e,t),"hidden"===r.mode||s){if(0!==(128&t.flags)){if(r=null!==o?o.baseLanes|n:n,null!==e){for(i=t.child=e.child,s=0;null!==i;)s=s|i.lanes|i.childLanes,i=i.sibling;t.childLanes=s&~r}else t.childLanes=0,t.child=null;return Yo(e,t,r,n)}if(0===(536870912&n))return t.lanes=t.childLanes=536870912,Yo(e,t,null!==o?o.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Yi(0,null!==o?o.cachePool:null),null!==o?Ti(t,o):_i(),Ai(t)}else null!==o?(Yi(0,o.cachePool),Ti(t,o),Ni(),t.memoizedState=null):(null!==e&&Yi(0,null),_i(),Ni());return qo(e,t,i,n),t.child}function Yo(e,t,n,r){var i=Ji();return i=null===i?null:{parent:Ui._currentValue,pool:i},t.memoizedState={baseLanes:n,cachePool:i},null!==e&&Yi(0,null),_i(),Ai(t),null!==e&&ka(e,t,r,!0),null}function Qo(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=2097664);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(o(284));null!==e&&e.ref===n||(t.flags|=2097664)}}function Xo(e,t,n,r,i){return Ea(t),n=ds(e,t,n,r,void 0,i),r=ms(),null===e||Ho?(Yr&&r&&Wr(t),t.flags|=1,qo(e,t,n,i),t.child):(gs(e,t,i),ha(e,t,i))}function Zo(e,t,n,r,i,s){return Ea(t),t.updateQueue=null,n=ps(t,r,n,i),hs(e),r=ms(),null===e||Ho?(Yr&&r&&Wr(t),t.flags|=1,qo(e,t,n,s),t.child):(gs(e,t,s),ha(e,t,s))}function ea(e,t,n,r,i){if(Ea(t),null===t.stateNode){var s=Nr,o=n.contextType;"object"===typeof o&&null!==o&&(s=Ta(o)),s=new n(r,s),t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,s.updater=Po,t.stateNode=s,s._reactInternals=t,(s=t.stateNode).props=r,s.state=t.memoizedState,s.refs={},Ra(t),o=n.contextType,s.context="object"===typeof o&&null!==o?Ta(o):Nr,s.state=t.memoizedState,"function"===typeof(o=n.getDerivedStateFromProps)&&(Ro(t,n,o,r),s.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(o=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),o!==s.state&&Po.enqueueReplaceState(s,s.state,null),Ma(t,r,s,i),ja(),s.state=t.memoizedState),"function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){s=t.stateNode;var a=t.memoizedProps,l=Oo(n,a);s.props=l;var c=s.context,u=n.contextType;o=Nr,"object"===typeof u&&null!==u&&(o=Ta(u));var d=n.getDerivedStateFromProps;u="function"===typeof d||"function"===typeof s.getSnapshotBeforeUpdate,a=t.pendingProps!==a,u||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a||c!==o)&&No(t,s,r,o),Ia=!1;var h=t.memoizedState;s.state=h,Ma(t,r,s,i),ja(),c=t.memoizedState,a||h!==c||Ia?("function"===typeof d&&(Ro(t,n,d,r),c=t.memoizedState),(l=Ia||Ao(t,n,l,r,h,c,o))?(u||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),s.props=r,s.state=c,s.context=o,r=l):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,Pa(e,t),u=Oo(n,o=t.memoizedProps),s.props=u,d=t.pendingProps,h=s.context,c=n.contextType,l=Nr,"object"===typeof c&&null!==c&&(l=Ta(c)),(c="function"===typeof(a=n.getDerivedStateFromProps)||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==d||h!==l)&&No(t,s,r,l),Ia=!1,h=t.memoizedState,s.state=h,Ma(t,r,s,i),ja();var p=t.memoizedState;o!==d||h!==p||Ia||null!==e&&null!==e.dependencies&&Ca(e.dependencies)?("function"===typeof a&&(Ro(t,n,a,r),p=t.memoizedState),(u=Ia||Ao(t,n,u,r,h,p,l)||null!==e&&null!==e.dependencies&&Ca(e.dependencies))?(c||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,p,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),s.props=r,s.state=p,s.context=l,r=u):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return s=r,Qo(e,t),r=0!==(128&t.flags),s||r?(s=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:s.render(),t.flags|=1,null!==e&&r?(t.child=Si(t,e.child,null,i),t.child=Si(t,null,n,i)):qo(e,t,n,i),t.memoizedState=s.state,e=t.child):e=ha(e,t,i),e}function ta(e,t,n,r){return ii(),t.flags|=256,qo(e,t,n,r),t.child}var na={dehydrated:null,treeContext:null,retryLane:0};function ra(e){return{baseLanes:e,cachePool:Qi()}}function ia(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=fc),e}function sa(e,t,n){var r,i=t.pendingProps,s=!1,a=0!==(128&t.flags);if((r=a)||(r=(null===e||null!==e.memoizedState)&&0!==(2&Di.current)),r&&(s=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(Yr){if(s?Pi(t):Ni(),Yr){var l,c=Jr;if(l=c){e:{for(l=c,c=Xr;8!==l.nodeType;){if(!c){c=null;break e}if(null===(l=ad(l.nextSibling))){c=null;break e}}c=l}null!==c?(t.memoizedState={dehydrated:c,treeContext:null!==$r?{id:Br,overflow:zr}:null,retryLane:536870912},(l=Ll(18,null,null,0)).stateNode=c,l.return=t,t.child=l,Gr=t,Jr=null,l=!0):l=!1}l||ei(t)}if(null!==(c=t.memoizedState)&&null!==(c=c.dehydrated))return"$!"===c.data?t.lanes=16:t.lanes=536870912,null;Oi(t)}return c=i.children,i=i.fallback,s?(Ni(),c=aa({mode:"hidden",children:c},s=t.mode),i=Vl(i,s,n,null),c.return=t,i.return=t,c.sibling=i,t.child=c,(s=t.child).memoizedState=ra(n),s.childLanes=ia(e,r,n),t.memoizedState=na,i):(Pi(t),oa(t,c))}if(null!==(l=e.memoizedState)&&null!==(c=l.dehydrated)){if(a)256&t.flags?(Pi(t),t.flags&=-257,t=la(e,t,n)):null!==t.memoizedState?(Ni(),t.child=e.child,t.flags|=128,t=null):(Ni(),s=i.fallback,c=t.mode,i=aa({mode:"visible",children:i.children},c),(s=Vl(s,c,n,null)).flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,Si(t,e.child,null,n),(i=t.child).memoizedState=ra(n),i.childLanes=ia(e,r,n),t.memoizedState=na,t=s);else if(Pi(t),"$!"===c.data){if(r=c.nextSibling&&c.nextSibling.dataset)var u=r.dgst;r=u,(i=Error(o(419))).stack="",i.digest=r,si({value:i,source:null,stack:null}),t=la(e,t,n)}else if(Ho||ka(e,t,n,!1),r=0!==(n&e.childLanes),Ho||r){if(null!==(r=tc)){if(0!==(42&(i=n&-n)))i=1;else switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=64;break;case 268435456:i=134217728;break;default:i=0}if(0!==(i=0!==(i&(r.suspendedLanes|n))?0:i)&&i!==l.retryLane)throw l.retryLane=i,Rr(e,i),Nc(r,e,i),zo}"$?"===c.data||Hc(),t=la(e,t,n)}else"$?"===c.data?(t.flags|=128,t.child=e.child,t=au.bind(null,e),c._reactRetry=t,t=null):(e=l.treeContext,Jr=ad(c.nextSibling),Gr=t,Yr=!0,Qr=null,Xr=!1,null!==e&&(Ur[Vr++]=Br,Ur[Vr++]=zr,Ur[Vr++]=$r,Br=e.id,zr=e.overflow,$r=t),(t=oa(t,i.children)).flags|=4096);return t}return s?(Ni(),s=i.fallback,c=t.mode,u=(l=e.child).sibling,(i=Ml(l,{mode:"hidden",children:i.children})).subtreeFlags=31457280&l.subtreeFlags,null!==u?s=Ml(u,s):(s=Vl(s,c,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,null===(c=e.child.memoizedState)?c=ra(n):(null!==(l=c.cachePool)?(u=Ui._currentValue,l=l.parent!==u?{parent:u,pool:u}:l):l=Qi(),c={baseLanes:c.baseLanes|n,cachePool:l}),s.memoizedState=c,s.childLanes=ia(e,r,n),t.memoizedState=na,i):(Pi(t),e=(n=e.child).sibling,(n=Ml(n,{mode:"visible",children:i.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function oa(e,t){return(t=aa({mode:"visible",children:t},e.mode)).return=e,e.child=t}function aa(e,t){return $l(e,t,0,null)}function la(e,t,n){return Si(t,e.child,null,n),(e=oa(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function ca(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),wa(e.return,t,n)}function ua(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function da(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(qo(e,t,r.children,n),0!==(2&(r=Di.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ca(e,n,t);else if(19===e.tag)ca(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(G(Di,r),i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Li(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ua(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Li(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ua(t,!0,n,null,s);break;case"together":ua(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ha(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),dc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(ka(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Ml(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ml(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function pa(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Ca(e))}function fa(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Ho=!0;else{if(!pa(e,n)&&0===(128&t.flags))return Ho=!1,function(e,t,n){switch(t.tag){case 3:Z(t,t.stateNode.containerInfo),ya(t,Ui,e.memoizedState.cache),ii();break;case 27:case 5:te(t);break;case 4:Z(t,t.stateNode.containerInfo);break;case 10:ya(t,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(Pi(t),t.flags|=128,null):0!==(n&t.child.childLanes)?sa(e,t,n):(Pi(t),null!==(e=ha(e,t,n))?e.sibling:null);Pi(t);break;case 19:var i=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(ka(e,t,n,!1),r=0!==(n&t.childLanes)),i){if(r)return da(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),G(Di,Di.current),r)break;return null;case 22:case 23:return t.lanes=0,Jo(e,t,n);case 24:ya(t,Ui,e.memoizedState.cache)}return ha(e,t,n)}(e,t,n);Ho=0!==(131072&e.flags)}else Ho=!1,Yr&&0!==(1048576&t.flags)&&qr(t,Fr,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,i=r._init;if(r=i(r._payload),t.type=r,"function"!==typeof r){if(void 0!==r&&null!==r){if((i=r.$$typeof)===v){t.tag=11,t=Wo(null,t,r,e,n);break e}if(i===w){t.tag=14,t=Ko(null,t,r,e,n);break e}}throw t=x(r)||r,Error(o(306,t,""))}jl(r)?(e=Oo(r,e),t.tag=1,t=ea(null,t,r,e,n)):(t.tag=0,t=Xo(null,t,r,e,n))}return t;case 0:return Xo(e,t,t.type,t.pendingProps,n);case 1:return ea(e,t,r=t.type,i=Oo(r,t.pendingProps),n);case 3:e:{if(Z(t,t.stateNode.containerInfo),null===e)throw Error(o(387));var s=t.pendingProps;r=(i=t.memoizedState).element,Pa(e,t),Ma(t,s,null,n);var a=t.memoizedState;if(s=a.cache,ya(t,Ui,s),s!==i.cache&&Sa(t,[Ui],n,!0),ja(),s=a.element,i.isDehydrated){if(i={element:s,isDehydrated:!1,cache:a.cache},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=ta(e,t,s,n);break e}if(s!==r){si(r=Dr(Error(o(424)),t)),t=ta(e,t,s,n);break e}for(Jr=ad(t.stateNode.containerInfo.firstChild),Gr=t,Yr=!0,Qr=null,Xr=!0,n=ki(t,null,s,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ii(),s===r){t=ha(e,t,n);break e}qo(e,t,s,n)}t=t.child}return t;case 26:return Qo(e,t),null===e?(n=gd(t.type,null,t.pendingProps,null))?t.memoizedState=n:Yr||(n=t.type,e=t.pendingProps,(r=Ju(Q.current).createElement(n))[Fe]=t,r[Ue]=e,Wu(r,n,e),Qe(r),t.stateNode=r):t.memoizedState=gd(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return te(t),null===e&&Yr&&(r=t.stateNode=cd(t.type,t.pendingProps,Q.current),Gr=t,Xr=!0,Jr=ad(r.firstChild)),r=t.pendingProps.children,null!==e||Yr?qo(e,t,r,n):t.child=Si(t,null,r,n),Qo(e,t),t.child;case 5:return null===e&&Yr&&((i=r=Jr)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[qe])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(s=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(s!==i.rel||e.getAttribute("href")!==(null==i.href?null:i.href)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin)||e.getAttribute("title")!==(null==i.title?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((s=e.getAttribute("src"))!==(null==i.src?null:i.src)||e.getAttribute("type")!==(null==i.type?null:i.type)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var s=null==i.name?null:""+i.name;if("hidden"===i.type&&e.getAttribute("name")===s)return e}if(null===(e=ad(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,Xr))?(t.stateNode=r,Gr=t,Jr=ad(r.firstChild),Xr=!1,i=!0):i=!1),i||ei(t)),te(t),i=t.type,s=t.pendingProps,a=null!==e?e.memoizedProps:null,r=s.children,Xu(i,s)?r=null:null!==a&&Xu(i,a)&&(t.flags|=32),null!==t.memoizedState&&(i=ds(e,t,fs,null,null,n),jd._currentValue=i),Qo(e,t),qo(e,t,r,n),t.child;case 6:return null===e&&Yr&&((e=n=Jr)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=ad(e.nextSibling)))return null}return e}(n,t.pendingProps,Xr))?(t.stateNode=n,Gr=t,Jr=null,e=!0):e=!1),e||ei(t)),null;case 13:return sa(e,t,n);case 4:return Z(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Si(t,null,r,n):qo(e,t,r,n),t.child;case 11:return Wo(e,t,t.type,t.pendingProps,n);case 7:return qo(e,t,t.pendingProps,n),t.child;case 8:case 12:return qo(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,ya(t,t.type,r.value),qo(e,t,r.children,n),t.child;case 9:return i=t.type._context,r=t.pendingProps.children,Ea(t),r=r(i=Ta(i)),t.flags|=1,qo(e,t,r,n),t.child;case 14:return Ko(e,t,t.type,t.pendingProps,n);case 15:return Go(e,t,t.type,t.pendingProps,n);case 19:return da(e,t,n);case 22:return Jo(e,t,n);case 24:return Ea(t),r=Ta(Ui),null===e?(null===(i=Ji())&&(i=tc,s=Vi(),i.pooledCache=s,s.refCount++,null!==s&&(i.pooledCacheLanes|=n),i=s),t.memoizedState={parent:r,cache:i},Ra(t),ya(t,Ui,i)):(0!==(e.lanes&n)&&(Pa(e,t),Ma(t,null,null,n),ja()),i=e.memoizedState,s=t.memoizedState,i.parent!==r?(i={parent:r,cache:r},t.memoizedState=i,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=i),ya(t,Ui,r)):(r=s.cache,ya(t,Ui,r),r!==i.cache&&Sa(t,[Ui],n,!0))),qo(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}var ma=W(null),ga=null,va=null;function ya(e,t,n){G(ma,t._currentValue),t._currentValue=n}function ba(e){e._currentValue=ma.current,K(ma)}function wa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Sa(e,t,n,r){var i=e.child;for(null!==i&&(i.return=e);null!==i;){var s=i.dependencies;if(null!==s){var a=i.child;s=s.firstContext;e:for(;null!==s;){var l=s;s=i;for(var c=0;c<t.length;c++)if(l.context===t[c]){s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),wa(s.return,n,e),r||(a=null);break e}s=l.next}}else if(18===i.tag){if(null===(a=i.return))throw Error(o(341));a.lanes|=n,null!==(s=a.alternate)&&(s.lanes|=n),wa(a,n,e),a=null}else a=i.child;if(null!==a)a.return=i;else for(a=i;null!==a;){if(a===e){a=null;break}if(null!==(i=a.sibling)){i.return=a.return,a=i;break}a=a.return}i=a}}function ka(e,t,n,r){e=null;for(var i=t,s=!1;null!==i;){if(!s)if(0!==(524288&i.flags))s=!0;else if(0!==(262144&i.flags))break;if(10===i.tag){var a=i.alternate;if(null===a)throw Error(o(387));if(null!==(a=a.memoizedProps)){var l=i.type;Gn(i.pendingProps.value,a.value)||(null!==e?e.push(l):e=[l])}}else if(i===X.current){if(null===(a=i.alternate))throw Error(o(387));a.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(null!==e?e.push(jd):e=[jd])}i=i.return}null!==e&&Sa(t,e,n,r),t.flags|=262144}function Ca(e){for(e=e.firstContext;null!==e;){if(!Gn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ea(e){ga=e,va=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Ta(e){return xa(ga,e)}function _a(e,t){return null===ga&&Ea(e),xa(e,t)}function xa(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===va){if(null===e)throw Error(o(308));va=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else va=va.next=t;return n}var Ia=!1;function Ra(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Pa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Aa(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Na(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&ec)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=Ar(e),Pr(e,null,n),t}return xr(e,r,t,n),Ar(e)}function Oa(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194176&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,De(e,n)}}function Da(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var La=!1;function ja(){if(La){if(null!==qi)throw qi}}function Ma(e,t,n,r){La=!1;var i=e.updateQueue;Ia=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==s){var d=i.baseState;for(o=0,u=c=l=null,a=s;;){var h=-536870913&a.lane,p=h!==a.lane;if(p?(rc&h)===h:(r&h)===h){0!==h&&h===Hi&&(La=!0),null!==u&&(u=u.next={lane:0,tag:a.tag,payload:a.payload,callback:null,next:null});e:{var f=e,m=a;h=t;var g=n;switch(m.tag){case 1:if("function"===typeof(f=m.payload)){d=f.call(g,d,h);break e}d=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(h="function"===typeof(f=m.payload)?f.call(g,d,h):f)||void 0===h)break e;d=A({},d,h);break e;case 2:Ia=!0}}null!==(h=a.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=i.callbacks)?i.callbacks=[h]:p.push(h))}else p={lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=p,l=d):u=u.next=p,o|=h;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(p=a).next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null===s&&(i.shared.lanes=0),dc|=o,e.lanes=o,e.memoizedState=d}}function Fa(e,t){if("function"!==typeof e)throw Error(o(191,e));e.call(t)}function Ua(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)Fa(n[e],t)}function Va(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var s=n.create,o=n.inst;r=s(),o.destroy=r}n=n.next}while(n!==i)}}catch(a){ru(t,t.return,a)}}function $a(e,t,n){try{var r=t.updateQueue,i=null!==r?r.lastEffect:null;if(null!==i){var s=i.next;r=s;do{if((r.tag&e)===e){var o=r.inst,a=o.destroy;if(void 0!==a){o.destroy=void 0,i=t;var l=n;try{a()}catch(c){ru(i,l,c)}}}r=r.next}while(r!==s)}}catch(c){ru(t,t.return,c)}}function Ba(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{Ua(t,n)}catch(r){ru(e,e.return,r)}}}function za(e,t,n){n.props=Oo(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){ru(e,t,r)}}function Ha(e,t){try{var n=e.ref;if(null!==n){var r=e.stateNode;switch(e.tag){case 26:case 27:case 5:var i=r;break;default:i=r}"function"===typeof n?e.refCleanup=n(i):n.current=i}}catch(s){ru(e,t,s)}}function qa(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(i){ru(e,t,i)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(s){ru(e,t,s)}else n.current=null}function Wa(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(i){ru(e,e.return,i)}}function Ka(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,s=null,a=null,l=null,c=null,u=null,d=null;for(f in n){var h=n[f];if(n.hasOwnProperty(f)&&null!=h)switch(f){case"checked":case"value":break;case"defaultValue":c=h;default:r.hasOwnProperty(f)||Hu(e,t,f,null,r,h)}}for(var p in r){var f=r[p];if(h=n[p],r.hasOwnProperty(p)&&(null!=f||null!=h))switch(p){case"type":s=f;break;case"name":i=f;break;case"checked":u=f;break;case"defaultChecked":d=f;break;case"value":a=f;break;case"defaultValue":l=f;break;case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(o(137,t));break;default:f!==h&&Hu(e,t,p,f,r,h)}}return void gt(e,a,l,c,u,d,s,i);case"select":for(s in f=a=l=p=null,n)if(c=n[s],n.hasOwnProperty(s)&&null!=c)switch(s){case"value":break;case"multiple":f=c;default:r.hasOwnProperty(s)||Hu(e,t,s,null,r,c)}for(i in r)if(s=r[i],c=n[i],r.hasOwnProperty(i)&&(null!=s||null!=c))switch(i){case"value":p=s;break;case"defaultValue":l=s;break;case"multiple":a=s;default:s!==c&&Hu(e,t,i,s,r,c)}return t=l,n=a,r=f,void(null!=p?bt(e,!!n,p,!1):!!r!==!!n&&(null!=t?bt(e,!!n,t,!0):bt(e,!!n,n?[]:"",!1)));case"textarea":for(l in f=p=null,n)if(i=n[l],n.hasOwnProperty(l)&&null!=i&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:Hu(e,t,l,null,r,i)}for(a in r)if(i=r[a],s=n[a],r.hasOwnProperty(a)&&(null!=i||null!=s))switch(a){case"value":p=i;break;case"defaultValue":f=i;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=i)throw Error(o(91));break;default:i!==s&&Hu(e,t,a,i,r,s)}return void wt(e,p,f);case"option":for(var m in n)if(p=n[m],n.hasOwnProperty(m)&&null!=p&&!r.hasOwnProperty(m))if("selected"===m)e.selected=!1;else Hu(e,t,m,null,r,p);for(c in r)if(p=r[c],f=n[c],r.hasOwnProperty(c)&&p!==f&&(null!=p||null!=f))if("selected"===c)e.selected=p&&"function"!==typeof p&&"symbol"!==typeof p;else Hu(e,t,c,p,r,f);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)p=n[g],n.hasOwnProperty(g)&&null!=p&&!r.hasOwnProperty(g)&&Hu(e,t,g,null,r,p);for(u in r)if(p=r[u],f=n[u],r.hasOwnProperty(u)&&p!==f&&(null!=p||null!=f))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(o(137,t));break;default:Hu(e,t,u,p,r,f)}return;default:if(_t(t)){for(var v in n)p=n[v],n.hasOwnProperty(v)&&void 0!==p&&!r.hasOwnProperty(v)&&qu(e,t,v,void 0,r,p);for(d in r)p=r[d],f=n[d],!r.hasOwnProperty(d)||p===f||void 0===p&&void 0===f||qu(e,t,d,p,r,f);return}}for(var y in n)p=n[y],n.hasOwnProperty(y)&&null!=p&&!r.hasOwnProperty(y)&&Hu(e,t,y,null,r,p);for(h in r)p=r[h],f=n[h],!r.hasOwnProperty(h)||p===f||null==p&&null==f||Hu(e,t,h,p,r,f)}(r,e.type,n,t),r[Ue]=t}catch(i){ru(e,e.return,i)}}function Ga(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag||4===e.tag}function Ja(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||Ga(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&27!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Ya(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=zu));else if(4!==r&&27!==r&&null!==(e=e.child))for(Ya(e,t,n),e=e.sibling;null!==e;)Ya(e,t,n),e=e.sibling}function Qa(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&27!==r&&null!==(e=e.child))for(Qa(e,t,n),e=e.sibling;null!==e;)Qa(e,t,n),e=e.sibling}var Xa=!1,Za=!1,el=!1,tl="function"===typeof WeakSet?WeakSet:Set,nl=null,rl=!1;function il(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:vl(e,n),4&r&&Va(5,n);break;case 1:if(vl(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(a){ru(n,n.return,a)}else{var i=Oo(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(l){ru(n,n.return,l)}}64&r&&Ba(n),512&r&&Ha(n,n.return);break;case 3:if(vl(e,n),64&r&&null!==(r=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:e=n.child.stateNode}try{Ua(r,e)}catch(a){ru(n,n.return,a)}}break;case 26:vl(e,n),512&r&&Ha(n,n.return);break;case 27:case 5:vl(e,n),null===t&&4&r&&Wa(n),512&r&&Ha(n,n.return);break;case 12:default:vl(e,n);break;case 13:vl(e,n),4&r&&ul(e,n);break;case 22:if(!(i=null!==n.memoizedState||Xa)){t=null!==t&&null!==t.memoizedState||Za;var s=Xa,o=Za;Xa=i,(Za=t)&&!o?bl(e,n,0!==(8772&n.subtreeFlags)):vl(e,n),Xa=s,Za=o}512&r&&("manual"===n.memoizedProps.mode?Ha(n,n.return):qa(n,n.return))}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&We(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var ol=null,al=!1;function ll(e,t,n){for(n=n.child;null!==n;)cl(e,t,n),n=n.sibling}function cl(e,t,n){if(ye&&"function"===typeof ye.onCommitFiberUnmount)try{ye.onCommitFiberUnmount(ve,n)}catch(o){}switch(n.tag){case 26:Za||qa(n,t),ll(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:Za||qa(n,t);var r=ol,i=al;for(ol=n.stateNode,ll(e,t,n),t=(n=n.stateNode).attributes;t.length;)n.removeAttributeNode(t[0]);We(n),ol=r,al=i;break;case 5:Za||qa(n,t);case 6:i=ol;var s=al;if(ol=null,ll(e,t,n),al=s,null!==(ol=i))if(al)try{e=ol,r=n.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)}catch(a){ru(n,t,a)}else try{ol.removeChild(n.stateNode)}catch(a){ru(n,t,a)}break;case 18:null!==ol&&(al?(t=ol,n=n.stateNode,8===t.nodeType?sd(t.parentNode,n):1===t.nodeType&&sd(t,n),mh(t)):sd(ol,n.stateNode));break;case 4:r=ol,i=al,ol=n.stateNode.containerInfo,al=!0,ll(e,t,n),ol=r,al=i;break;case 0:case 11:case 14:case 15:Za||$a(2,n,t),Za||$a(4,n,t),ll(e,t,n);break;case 1:Za||(qa(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&za(n,t,r)),ll(e,t,n);break;case 21:ll(e,t,n);break;case 22:Za||qa(n,t),Za=(r=Za)||null!==n.memoizedState,ll(e,t,n),Za=r;break;default:ll(e,t,n)}}function ul(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{mh(e)}catch(n){ru(t,t.return,n)}}function dl(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new tl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new tl),t;default:throw Error(o(435,e.tag))}}(e);t.forEach((function(t){var r=lu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}function hl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r],s=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 27:case 5:ol=l.stateNode,al=!1;break e;case 3:case 4:ol=l.stateNode.containerInfo,al=!0;break e}l=l.return}if(null===ol)throw Error(o(160));cl(s,a,i),ol=null,al=!1,null!==(s=i.alternate)&&(s.return=null),i.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)fl(t,e),t=t.sibling}var pl=null;function fl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:hl(t,e),ml(e),4&r&&($a(3,e,e.return),Va(3,e),$a(5,e,e.return));break;case 1:hl(t,e),ml(e),512&r&&(Za||null===n||qa(n,n.return)),64&r&&Xa&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var i=pl;if(hl(t,e),ml(e),512&r&&(Za||null===n||qa(n,n.return)),4&r){var s=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,i=i.ownerDocument||i;t:switch(r){case"title":(!(s=i.getElementsByTagName("title")[0])||s[qe]||s[Fe]||"http://www.w3.org/2000/svg"===s.namespaceURI||s.hasAttribute("itemprop"))&&(s=i.createElement(r),i.head.insertBefore(s,i.querySelector("head > title"))),Wu(s,r,n),s[Fe]=e,Qe(s),r=s;break e;case"link":var a=xd("link","href",i).get(r+(n.href||""));if(a)for(var l=0;l<a.length;l++)if((s=a[l]).getAttribute("href")===(null==n.href?null:n.href)&&s.getAttribute("rel")===(null==n.rel?null:n.rel)&&s.getAttribute("title")===(null==n.title?null:n.title)&&s.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){a.splice(l,1);break t}Wu(s=i.createElement(r),r,n),i.head.appendChild(s);break;case"meta":if(a=xd("meta","content",i).get(r+(n.content||"")))for(l=0;l<a.length;l++)if((s=a[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&s.getAttribute("name")===(null==n.name?null:n.name)&&s.getAttribute("property")===(null==n.property?null:n.property)&&s.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&s.getAttribute("charset")===(null==n.charSet?null:n.charSet)){a.splice(l,1);break t}Wu(s=i.createElement(r),r,n),i.head.appendChild(s);break;default:throw Error(o(468,r))}s[Fe]=e,Qe(s),r=s}e.stateNode=r}else Id(i,e.type,e.stateNode);else e.stateNode=kd(i,r,e.memoizedProps);else s!==r?(null===s?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):s.count--,null===r?Id(i,e.type,e.stateNode):kd(i,r,e.memoizedProps)):null===r&&null!==e.stateNode&&Ka(e,e.memoizedProps,n.memoizedProps)}break;case 27:if(4&r&&null===e.alternate){i=e.stateNode,s=e.memoizedProps;try{for(var c=i.firstChild;c;){var u=c.nextSibling,d=c.nodeName;c[qe]||"HEAD"===d||"BODY"===d||"SCRIPT"===d||"STYLE"===d||"LINK"===d&&"stylesheet"===c.rel.toLowerCase()||i.removeChild(c),c=u}for(var h=e.type,p=i.attributes;p.length;)i.removeAttributeNode(p[0]);Wu(i,h,s),i[Fe]=e,i[Ue]=s}catch(m){ru(e,e.return,m)}}case 5:if(hl(t,e),ml(e),512&r&&(Za||null===n||qa(n,n.return)),32&e.flags){i=e.stateNode;try{kt(i,"")}catch(m){ru(e,e.return,m)}}4&r&&null!=e.stateNode&&Ka(e,i=e.memoizedProps,null!==n?n.memoizedProps:i),1024&r&&(el=!0);break;case 6:if(hl(t,e),ml(e),4&r){if(null===e.stateNode)throw Error(o(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(m){ru(e,e.return,m)}}break;case 3:if(_d=null,i=pl,pl=hd(t.containerInfo),hl(t,e),pl=i,ml(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{mh(t.containerInfo)}catch(m){ru(e,e.return,m)}el&&(el=!1,gl(e));break;case 4:r=pl,pl=hd(e.stateNode.containerInfo),hl(t,e),ml(e),pl=r;break;case 12:hl(t,e),ml(e);break;case 13:hl(t,e),ml(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(bc=le()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,dl(e,r)));break;case 22:if(512&r&&(Za||null===n||qa(n,n.return)),c=null!==e.memoizedState,u=null!==n&&null!==n.memoizedState,Xa=(d=Xa)||c,Za=(h=Za)||u,hl(t,e),Za=h,Xa=d,ml(e),(t=e.stateNode)._current=e,t._visibility&=-3,t._visibility|=2&t._pendingVisibility,8192&r&&(t._visibility=c?-2&t._visibility:1|t._visibility,c&&(t=Xa||Za,null===n||u||t||yl(e)),null===e.memoizedProps||"manual"!==e.memoizedProps.mode))e:for(n=null,t=e;;){if(5===t.tag||26===t.tag||27===t.tag){if(null===n){u=n=t;try{if(i=u.stateNode,c)"function"===typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none";else{a=u.stateNode;var f=void 0!==(l=u.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null;a.style.display=null==f||"boolean"===typeof f?"":(""+f).trim()}}catch(m){ru(u,u.return,m)}}}else if(6===t.tag){if(null===n){u=t;try{u.stateNode.nodeValue=c?"":u.memoizedProps}catch(m){ru(u,u.return,m)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,dl(e,n))));break;case 19:hl(t,e),ml(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,dl(e,r)));break;case 21:break;default:hl(t,e),ml(e)}}function ml(e){var t=e.flags;if(2&t){try{if(27!==e.tag){e:{for(var n=e.return;null!==n;){if(Ga(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 27:var i=r.stateNode;Qa(e,Ja(e),i);break;case 5:var s=r.stateNode;32&r.flags&&(kt(s,""),r.flags&=-33),Qa(e,Ja(e),s);break;case 3:case 4:var a=r.stateNode.containerInfo;Ya(e,Ja(e),a);break;default:throw Error(o(161))}}}catch(l){ru(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function gl(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;gl(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function vl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)il(e,t.alternate,t),t=t.sibling}function yl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:$a(4,t,t.return),yl(t);break;case 1:qa(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&za(t,t.return,n),yl(t);break;case 26:case 27:case 5:qa(t,t.return),yl(t);break;case 22:qa(t,t.return),null===t.memoizedState&&yl(t);break;default:yl(t)}e=e.sibling}}function bl(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,i=e,s=t,o=s.flags;switch(s.tag){case 0:case 11:case 15:bl(i,s,n),Va(4,s);break;case 1:if(bl(i,s,n),"function"===typeof(i=(r=s).stateNode).componentDidMount)try{i.componentDidMount()}catch(c){ru(r,r.return,c)}if(null!==(i=(r=s).updateQueue)){var a=r.stateNode;try{var l=i.shared.hiddenCallbacks;if(null!==l)for(i.shared.hiddenCallbacks=null,i=0;i<l.length;i++)Fa(l[i],a)}catch(c){ru(r,r.return,c)}}n&&64&o&&Ba(s),Ha(s,s.return);break;case 26:case 27:case 5:bl(i,s,n),n&&null===r&&4&o&&Wa(s),Ha(s,s.return);break;case 12:default:bl(i,s,n);break;case 13:bl(i,s,n),n&&4&o&&ul(i,s);break;case 22:null===s.memoizedState&&bl(i,s,n),Ha(s,s.return)}t=t.sibling}}function wl(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&$i(n))}function Sl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&$i(e))}function kl(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Cl(e,t,n,r),t=t.sibling}function Cl(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:kl(e,t,n,r),2048&i&&Va(9,t);break;case 3:kl(e,t,n,r),2048&i&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&$i(e)));break;case 12:if(2048&i){kl(e,t,n,r),e=t.stateNode;try{var s=t.memoizedProps,o=s.id,a=s.onPostCommit;"function"===typeof a&&a(o,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){ru(t,t.return,l)}}else kl(e,t,n,r);break;case 23:break;case 22:s=t.stateNode,null!==t.memoizedState?4&s._visibility?kl(e,t,n,r):Tl(e,t):4&s._visibility?kl(e,t,n,r):(s._visibility|=4,El(e,t,n,r,0!==(10256&t.subtreeFlags))),2048&i&&wl(t.alternate,t);break;case 24:kl(e,t,n,r),2048&i&&Sl(t.alternate,t);break;default:kl(e,t,n,r)}}function El(e,t,n,r,i){for(i=i&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var s=e,o=t,a=n,l=r,c=o.flags;switch(o.tag){case 0:case 11:case 15:El(s,o,a,l,i),Va(8,o);break;case 23:break;case 22:var u=o.stateNode;null!==o.memoizedState?4&u._visibility?El(s,o,a,l,i):Tl(s,o):(u._visibility|=4,El(s,o,a,l,i)),i&&2048&c&&wl(o.alternate,o);break;case 24:El(s,o,a,l,i),i&&2048&c&&Sl(o.alternate,o);break;default:El(s,o,a,l,i)}t=t.sibling}}function Tl(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:Tl(n,r),2048&i&&wl(r.alternate,r);break;case 24:Tl(n,r),2048&i&&Sl(r.alternate,r);break;default:Tl(n,r)}t=t.sibling}}var _l=8192;function xl(e){if(e.subtreeFlags&_l)for(e=e.child;null!==e;)Il(e),e=e.sibling}function Il(e){switch(e.tag){case 26:xl(e),e.flags&_l&&null!==e.memoizedState&&function(e,t,n){if(null===Pd)throw Error(o(475));var r=Pd;if("stylesheet"===t.type&&("string"!==typeof n.media||!1!==matchMedia(n.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var i=vd(n.href),s=e.querySelector(yd(i));if(s)return null!==(e=s._p)&&"object"===typeof e&&"function"===typeof e.then&&(r.count++,r=Nd.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=s,void Qe(s);s=e.ownerDocument||e,n=bd(n),(i=ud.get(i))&&Ed(n,i),Qe(s=s.createElement("link"));var a=s;a._p=new Promise((function(e,t){a.onload=e,a.onerror=t})),Wu(s,"link",n),t.instance=s}null===r.stylesheets&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(r.count++,t=Nd.bind(r),e.addEventListener("load",t),e.addEventListener("error",t))}}(pl,e.memoizedState,e.memoizedProps);break;case 5:default:xl(e);break;case 3:case 4:var t=pl;pl=hd(e.stateNode.containerInfo),xl(e),pl=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=_l,_l=16777216,xl(e),_l=t):xl(e))}}function Rl(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Pl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];nl=r,Ol(r,e)}Rl(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Al(e),e=e.sibling}function Al(e){switch(e.tag){case 0:case 11:case 15:Pl(e),2048&e.flags&&$a(9,e,e.return);break;case 3:case 12:default:Pl(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&4&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-5,Nl(e)):Pl(e)}}function Nl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];nl=r,Ol(r,e)}Rl(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:$a(8,t,t.return),Nl(t);break;case 22:4&(n=t.stateNode)._visibility&&(n._visibility&=-5,Nl(t));break;default:Nl(t)}e=e.sibling}}function Ol(e,t){for(;null!==nl;){var n=nl;switch(n.tag){case 0:case 11:case 15:$a(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:$i(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,nl=r;else e:for(n=e;null!==nl;){var i=(r=nl).sibling,s=r.return;if(sl(r),r===n){nl=null;break e}if(null!==i){i.return=s,nl=i;break e}nl=s}}}function Dl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ll(e,t,n,r){return new Dl(e,t,n,r)}function jl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ml(e,t){var n=e.alternate;return null===n?((n=Ll(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=31457280&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Fl(e,t){e.flags&=31457282;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Ul(e,t,n,r,i,s){var a=0;if(r=e,"function"===typeof e)jl(e)&&(a=1);else if("string"===typeof e)a=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,J.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case d:return Vl(n.children,i,s,t);case h:a=8,i|=24;break;case p:return(e=Ll(12,n,t,2|i)).elementType=p,e.lanes=s,e;case y:return(e=Ll(13,n,t,i)).elementType=y,e.lanes=s,e;case b:return(e=Ll(19,n,t,i)).elementType=b,e.lanes=s,e;case k:return $l(n,i,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case f:case g:a=10;break e;case m:a=9;break e;case v:a=11;break e;case w:a=14;break e;case S:a=16,r=null;break e}a=29,n=Error(o(130,null===e?"null":typeof e,"")),r=null}return(t=Ll(a,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function Vl(e,t,n,r){return(e=Ll(7,e,r,t)).lanes=n,e}function $l(e,t,n,r){(e=Ll(22,e,r,t)).elementType=k,e.lanes=n;var i={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var e=i._current;if(null===e)throw Error(o(456));if(0===(2&i._pendingVisibility)){var t=Rr(e,2);null!==t&&(i._pendingVisibility|=2,Nc(t,e,2))}},attach:function(){var e=i._current;if(null===e)throw Error(o(456));if(0!==(2&i._pendingVisibility)){var t=Rr(e,2);null!==t&&(i._pendingVisibility&=-3,Nc(t,e,2))}}};return e.stateNode=i,e}function Bl(e,t,n){return(e=Ll(6,e,null,t)).lanes=n,e}function zl(e,t,n){return(t=Ll(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Hl(e){e.flags|=4}function ql(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!Rd(t)){if(null!==(t=Ii.current)&&((4194176&rc)===rc?null!==Ri:(62914560&rc)!==rc&&0===(536870912&rc)||t!==Ri))throw hi=li,ai;e.flags|=8192}}function Wl(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Pe():536870912,e.lanes|=t,mc|=t)}function Kl(e,t){if(!Yr)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Gl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=31457280&i.subtreeFlags,r|=31457280&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Jl(e,t,n){var r=t.pendingProps;switch(Kr(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return Gl(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),ba(Ui),ee(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(ri(t)?Hl(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==Qr&&(Dc(Qr),Qr=null))),Gl(t),null;case 26:return n=t.memoizedState,null===e?(Hl(t),null!==n?(Gl(t),ql(t,n)):(Gl(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Hl(t),Gl(t),ql(t,n)):(Gl(t),t.flags&=-16777217):(e.memoizedProps!==r&&Hl(t),Gl(t),t.flags&=-16777217),null;case 27:ne(t),n=Q.current;var i=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Hl(t);else{if(!r){if(null===t.stateNode)throw Error(o(166));return Gl(t),null}e=J.current,ri(t)?ti(t):(e=cd(i,r,n),t.stateNode=e,Hl(t))}return Gl(t),null;case 5:if(ne(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Hl(t);else{if(!r){if(null===t.stateNode)throw Error(o(166));return Gl(t),null}if(e=J.current,ri(t))ti(t);else{switch(i=Ju(Q.current),e){case 1:e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=i.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof r.is?i.createElement("select",{is:r.is}):i.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e="string"===typeof r.is?i.createElement(n,{is:r.is}):i.createElement(n)}}e[Fe]=t,e[Ue]=r;e:for(i=t.child;null!==i;){if(5===i.tag||6===i.tag)e.appendChild(i.stateNode);else if(4!==i.tag&&27!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;null===i.sibling;){if(null===i.return||i.return===t)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}t.stateNode=e;e:switch(Wu(e,n,r),n){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Hl(t)}}return Gl(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&Hl(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(e=Q.current,ri(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(i=Gr))switch(i.tag){case 27:case 5:r=i.memoizedProps}e[Fe]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||Bu(e.nodeValue,n)))||ei(t)}else(e=Ju(e).createTextNode(r))[Fe]=t,t.stateNode=e}return Gl(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(i=ri(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(o(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(o(317));i[Fe]=t}else ii(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Gl(t),i=!1}else null!==Qr&&(Dc(Qr),Qr=null),i=!0;if(!i)return 256&t.flags?(Oi(t),t):(Oi(t),null)}if(Oi(t),0!==(128&t.flags))return t.lanes=n,t;if(n=null!==r,e=null!==e&&null!==e.memoizedState,n){i=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(i=r.alternate.memoizedState.cachePool.pool);var s=null;null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(s=r.memoizedState.cachePool.pool),s!==i&&(r.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),Wl(t,t.updateQueue),Gl(t),null;case 4:return ee(),null===e&&Nu(t.stateNode.containerInfo),Gl(t),null;case 10:return ba(t.type),Gl(t),null;case 19:if(K(Di),null===(i=t.memoizedState))return Gl(t),null;if(r=0!==(128&t.flags),null===(s=i.rendering))if(r)Kl(i,!1);else{if(0!==uc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=Li(e))){for(t.flags|=128,Kl(i,!1),e=s.updateQueue,t.updateQueue=e,Wl(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Fl(n,e),n=n.sibling;return G(Di,1&Di.current|2),t.child}e=e.sibling}null!==i.tail&&le()>wc&&(t.flags|=128,r=!0,Kl(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=Li(s))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,Wl(t,e),Kl(i,!0),null===i.tail&&"hidden"===i.tailMode&&!s.alternate&&!Yr)return Gl(t),null}else 2*le()-i.renderingStartTime>wc&&536870912!==n&&(t.flags|=128,r=!0,Kl(i,!1),t.lanes=4194304);i.isBackwards?(s.sibling=t.child,t.child=s):(null!==(e=i.last)?e.sibling=s:t.child=s,i.last=s)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=le(),t.sibling=null,e=Di.current,G(Di,r?1&e|2:1&e),t):(Gl(t),null);case 22:case 23:return Oi(t),xi(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(Gl(t),6&t.subtreeFlags&&(t.flags|=8192)):Gl(t),null!==(n=t.updateQueue)&&Wl(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&K(Gi),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),ba(Ui),Gl(t),null;case 25:return null}throw Error(o(156,t.tag))}function Yl(e,t){switch(Kr(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ba(Ui),ee(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return ne(t),null;case 13:if(Oi(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));ii()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return K(Di),null;case 4:return ee(),null;case 10:return ba(t.type),null;case 22:case 23:return Oi(t),xi(),null!==e&&K(Gi),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return ba(Ui),null;default:return null}}function Ql(e,t){switch(Kr(t),t.tag){case 3:ba(Ui),ee();break;case 26:case 27:case 5:ne(t);break;case 4:ee();break;case 13:Oi(t);break;case 19:K(Di);break;case 10:ba(t.type);break;case 22:case 23:Oi(t),xi(),null!==e&&K(Gi);break;case 24:ba(Ui)}}var Xl={getCacheForType:function(e){var t=Ta(Ui),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},Zl="function"===typeof WeakMap?WeakMap:Map,ec=0,tc=null,nc=null,rc=0,ic=0,sc=null,oc=!1,ac=!1,lc=!1,cc=0,uc=0,dc=0,hc=0,pc=0,fc=0,mc=0,gc=null,vc=null,yc=!1,bc=0,wc=1/0,Sc=null,kc=null,Cc=!1,Ec=null,Tc=0,_c=0,xc=null,Ic=0,Rc=null;function Pc(){if(0!==(2&ec)&&0!==rc)return rc&-rc;if(null!==P.T){return 0!==Hi?Hi:Su()}return je()}function Ac(){0===fc&&(fc=0===(536870912&rc)||Yr?Re():536870912);var e=Ii.current;return null!==e&&(e.flags|=32),fc}function Nc(e,t,n){(e===tc&&2===ic||null!==e.cancelPendingCommit)&&(Vc(e,0),Mc(e,rc,fc,!1)),Ne(e,n),0!==(2&ec)&&e===tc||(e===tc&&(0===(2&ec)&&(hc|=n),4===uc&&Mc(e,rc,fc,!1)),mu(e))}function Oc(e,t,n){if(0!==(6&ec))throw Error(o(327));for(var r=!n&&0===(60&t)&&0===(t&e.expiredLanes)||xe(e,t),i=r?function(e,t){var n=ec;ec|=2;var r=Bc(),i=zc();tc!==e||rc!==t?(Sc=null,wc=le()+500,Vc(e,t)):ac=xe(e,t);e:for(;;)try{if(0!==ic&&null!==nc){t=nc;var s=sc;t:switch(ic){case 1:ic=0,sc=null,Yc(e,t,s,1);break;case 2:if(ci(s)){ic=0,sc=null,Jc(t);break}t=function(){2===ic&&tc===e&&(ic=7),mu(e)},s.then(t,t);break e;case 3:ic=7;break e;case 4:ic=5;break e;case 7:ci(s)?(ic=0,sc=null,Jc(t)):(ic=0,sc=null,Yc(e,t,s,7));break;case 5:var a=null;switch(nc.tag){case 26:a=nc.memoizedState;case 5:case 27:var l=nc;if(!a||Rd(a)){ic=0,sc=null;var c=l.sibling;if(null!==c)nc=c;else{var u=l.return;null!==u?(nc=u,Qc(u)):nc=null}break t}}ic=0,sc=null,Yc(e,t,s,5);break;case 6:ic=0,sc=null,Yc(e,t,s,6);break;case 8:Uc(),uc=6;break e;default:throw Error(o(462))}}Kc();break}catch(d){$c(e,d)}return va=ga=null,P.H=r,P.A=i,ec=n,null!==nc?0:(tc=null,rc=0,_r(),uc)}(e,t):qc(e,t,!0),s=r;;){if(0===i){ac&&!r&&Mc(e,t,0,!1);break}if(6===i)Mc(e,t,0,!oc);else{if(n=e.current.alternate,s&&!jc(n)){i=qc(e,t,!1),s=!1;continue}if(2===i){if(s=t,e.errorRecoveryDisabledLanes&s)var a=0;else a=0!==(a=-536870913&e.pendingLanes)?a:536870912&a?536870912:0;if(0!==a){t=a;e:{var l=e;i=gc;var c=l.current.memoizedState.isDehydrated;if(c&&(Vc(l,a).flags|=256),2!==(a=qc(l,a,!1))){if(lc&&!c){l.errorRecoveryDisabledLanes|=s,hc|=s,i=4;break e}s=vc,vc=i,null!==s&&Dc(s)}i=a}if(s=!1,2!==i)continue}}if(1===i){Vc(e,0),Mc(e,t,0,!0);break}e:{switch(r=e,i){case 0:case 1:throw Error(o(345));case 4:if((4194176&t)===t){Mc(r,t,fc,!oc);break e}break;case 2:vc=null;break;case 3:case 5:break;default:throw Error(o(329))}if(r.finishedWork=n,r.finishedLanes=t,(62914560&t)===t&&10<(s=bc+300-le())){if(Mc(r,t,fc,!oc),0!==_e(r,0))break e;r.timeoutHandle=ed(Lc.bind(null,r,n,vc,Sc,yc,t,fc,hc,mc,oc,2,-0,0),s)}else Lc(r,n,vc,Sc,yc,t,fc,hc,mc,oc,0,-0,0)}}break}mu(e)}function Dc(e){null===vc?vc=e:vc.push.apply(vc,e)}function Lc(e,t,n,r,i,s,a,l,c,u,d,h,p){var f=t.subtreeFlags;if((8192&f||16785408===(16785408&f))&&(Pd={stylesheets:null,count:0,unsuspend:Ad},Il(t),null!==(t=function(){if(null===Pd)throw Error(o(475));var e=Pd;return e.stylesheets&&0===e.count&&Dd(e,e.stylesheets),0<e.count?function(t){var n=setTimeout((function(){if(e.stylesheets&&Dd(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}}),6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=t(Zc.bind(null,e,n,r,i,a,l,c,1,h,p)),void Mc(e,s,a,!u);Zc(e,n,r,i,a,l,c,d,h,p)}function jc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Gn(s(),i))return!1}catch(o){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Mc(e,t,n,r){t&=~pc,t&=~hc,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var s=31-we(i),o=1<<s;r[s]=-1,i&=~o}0!==n&&Oe(e,n,t)}function Fc(){return 0!==(6&ec)||(gu(0,!1),!1)}function Uc(){if(null!==nc){if(0===ic)var e=nc.return;else va=ga=null,vs(e=nc),fi=null,mi=0,e=nc;for(;null!==e;)Ql(e.alternate,e),e=e.return;nc=null}}function Vc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,td(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Uc(),tc=e,nc=n=Ml(e.current,null),rc=t,ic=0,sc=null,oc=!1,ac=xe(e,t),lc=!1,mc=fc=pc=hc=dc=uc=0,vc=gc=null,yc=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var i=31-we(r),s=1<<i;t|=e[i],r&=~s}return cc=t,_r(),n}function $c(e,t){Zi=null,P.H=To,t===oi?(t=pi(),ic=3):t===ai?(t=pi(),ic=4):ic=t===zo?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,sc=t,null===nc&&(uc=1,Fo(e,Dr(t,e.current)))}function Bc(){var e=P.H;return P.H=To,null===e?To:e}function zc(){var e=P.A;return P.A=Xl,e}function Hc(){uc=4,oc||(4194176&rc)!==rc&&null!==Ii.current||(ac=!0),0===(134217727&dc)&&0===(134217727&hc)||null===tc||Mc(tc,rc,fc,!1)}function qc(e,t,n){var r=ec;ec|=2;var i=Bc(),s=zc();tc===e&&rc===t||(Sc=null,Vc(e,t)),t=!1;var o=uc;e:for(;;)try{if(0!==ic&&null!==nc){var a=nc,l=sc;switch(ic){case 8:Uc(),o=6;break e;case 3:case 2:case 6:null===Ii.current&&(t=!0);var c=ic;if(ic=0,sc=null,Yc(e,a,l,c),n&&ac){o=0;break e}break;default:c=ic,ic=0,sc=null,Yc(e,a,l,c)}}Wc(),o=uc;break}catch(u){$c(e,u)}return t&&e.shellSuspendCounter++,va=ga=null,ec=r,P.H=i,P.A=s,null===nc&&(tc=null,rc=0,_r()),o}function Wc(){for(;null!==nc;)Gc(nc)}function Kc(){for(;null!==nc&&!oe();)Gc(nc)}function Gc(e){var t=fa(e.alternate,e,cc);e.memoizedProps=e.pendingProps,null===t?Qc(e):nc=t}function Jc(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Zo(n,t,t.pendingProps,t.type,void 0,rc);break;case 11:t=Zo(n,t,t.pendingProps,t.type.render,t.ref,rc);break;case 5:vs(t);default:Ql(n,t),t=fa(n,t=nc=Fl(t,cc),cc)}e.memoizedProps=e.pendingProps,null===t?Qc(e):nc=t}function Yc(e,t,n,r){va=ga=null,vs(t),fi=null,mi=0;var i=t.return;try{if(function(e,t,n,r,i){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&ka(t,n,i,!0),null!==(n=Ii.current)){switch(n.tag){case 13:return null===Ri?Hc():null===n.alternate&&0===uc&&(uc=3),n.flags&=-257,n.flags|=65536,n.lanes=i,r===li?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),iu(e,r,i)),!1;case 22:return n.flags|=65536,r===li?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),iu(e,r,i)),!1}throw Error(o(435,n.tag))}return iu(e,r,i),Hc(),!1}if(Yr)return null!==(t=Ii.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=i,r!==Zr&&si(Dr(e=Error(o(422),{cause:r}),n))):(r!==Zr&&si(Dr(t=Error(o(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,i&=-i,e.lanes|=i,r=Dr(r,n),Da(e,i=Vo(e.stateNode,r,i)),4!==uc&&(uc=2)),!1;var s=Error(o(520),{cause:r});if(s=Dr(s,n),null===gc?gc=[s]:gc.push(s),4!==uc&&(uc=2),null===t)return!0;r=Dr(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=i&-i,n.lanes|=e,Da(n,e=Vo(n.stateNode,r,e)),!1;case 1:if(t=n.type,s=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==s&&"function"===typeof s.componentDidCatch&&(null===kc||!kc.has(s))))return n.flags|=65536,i&=-i,n.lanes|=i,Bo(i=$o(i),e,n,r),Da(n,i),!1}n=n.return}while(null!==n);return!1}(e,i,t,n,rc))return uc=1,Fo(e,Dr(n,e.current)),void(nc=null)}catch(s){if(null!==i)throw nc=i,s;return uc=1,Fo(e,Dr(n,e.current)),void(nc=null)}32768&t.flags?(Yr||1===r?e=!0:ac||0!==(536870912&rc)?e=!1:(oc=e=!0,(2===r||3===r||6===r)&&(null!==(r=Ii.current)&&13===r.tag&&(r.flags|=16384))),Xc(t,e)):Qc(t)}function Qc(e){var t=e;do{if(0!==(32768&t.flags))return void Xc(t,oc);e=t.return;var n=Jl(t.alternate,t,cc);if(null!==n)return void(nc=n);if(null!==(t=t.sibling))return void(nc=t);nc=t=e}while(null!==t);0===uc&&(uc=5)}function Xc(e,t){do{var n=Yl(e.alternate,e);if(null!==n)return n.flags&=32767,void(nc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(nc=e);nc=e=n}while(null!==e);uc=6,nc=null}function Zc(e,t,n,r,i,s,a,l,c,u){var d=P.T,h=B.p;try{B.p=2,P.T=null,function(e,t,n,r,i,s,a,l){do{tu()}while(null!==Ec);if(0!==(6&ec))throw Error(o(327));var c=e.finishedWork;if(r=e.finishedLanes,null===c)return null;if(e.finishedWork=null,e.finishedLanes=0,c===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0,e.cancelPendingCommit=null;var u=c.lanes|c.childLanes;if(function(e,t,n,r,i,s){var o=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var a=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=o&~n;0<n;){var u=31-we(n),d=1<<u;a[u]=0,l[u]=-1;var h=c[u];if(null!==h)for(c[u]=null,u=0;u<h.length;u++){var p=h[u];null!==p&&(p.lane&=-536870913)}n&=~d}0!==r&&Oe(e,r,0),0!==s&&0===i&&0!==e.tag&&(e.suspendedLanes|=s&~(o&~t))}(e,r,u|=Tr,s,a,l),e===tc&&(nc=tc=null,rc=0),0===(10256&c.subtreeFlags)&&0===(10256&c.flags)||Cc||(Cc=!0,_c=u,xc=n,function(e,t){ie(e,t)}(he,(function(){return tu(),null}))),n=0!==(15990&c.flags),0!==(15990&c.subtreeFlags)||n?(n=P.T,P.T=null,s=B.p,B.p=2,a=ec,ec|=4,function(e,t){if(e=e.containerInfo,Ku=Hd,er(e=Zn(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(g){n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,p=null;t:for(;;){for(var f;h!==n||0!==i&&3!==h.nodeType||(l=a+i),h!==s||0!==r&&3!==h.nodeType||(c=a+r),3===h.nodeType&&(a+=h.nodeValue.length),null!==(f=h.firstChild);)p=h,h=f;for(;;){if(h===e)break t;if(p===n&&++u===i&&(l=a),p===s&&++d===r&&(c=a),null!==(f=h.nextSibling))break;p=(h=p).parentNode}h=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Gu={focusedElem:e,selectionRange:n},Hd=!1,nl=t;null!==nl;)if(e=(t=nl).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,nl=e;else for(;null!==nl;){switch(s=(t=nl).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==s){e=void 0,n=t,i=s.memoizedProps,s=s.memoizedState,r=n.stateNode;try{var m=Oo(n.type,i,(n.elementType,n.type));e=r.getSnapshotBeforeUpdate(m,s),r.__reactInternalSnapshotBeforeUpdate=e}catch(v){ru(n,n.return,v)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))od(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":od(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(o(163))}if(null!==(e=t.sibling)){e.return=t.return,nl=e;break}nl=t.return}m=rl,rl=!1}(e,c),fl(c,e),tr(Gu,e.containerInfo),Hd=!!Ku,Gu=Ku=null,e.current=c,il(e,c.alternate,c),ae(),ec=a,B.p=s,P.T=n):e.current=c,Cc?(Cc=!1,Ec=e,Tc=r):eu(e,u),u=e.pendingLanes,0===u&&(kc=null),function(e){if(ye&&"function"===typeof ye.onCommitFiberRoot)try{ye.onCommitFiberRoot(ve,e,void 0,128===(128&e.current.flags))}catch(t){}}(c.stateNode),mu(e),null!==t)for(i=e.onRecoverableError,c=0;c<t.length;c++)u=t[c],i(u.value,{componentStack:u.stack});0!==(3&Tc)&&tu(),u=e.pendingLanes,0!==(4194218&r)&&0!==(42&u)?e===Rc?Ic++:(Ic=0,Rc=e):Ic=0,gu(0,!1)}(e,t,n,r,h,i,s,a)}finally{P.T=d,B.p=h}}function eu(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,$i(t)))}function tu(){if(null!==Ec){var e=Ec,t=_c;_c=0;var n=Le(Tc),r=P.T,i=B.p;try{if(B.p=32>n?32:n,P.T=null,null===Ec)var s=!1;else{n=xc,xc=null;var a=Ec,l=Tc;if(Ec=null,Tc=0,0!==(6&ec))throw Error(o(331));var c=ec;if(ec|=4,Al(a.current),Cl(a,a.current,l,n),ec=c,gu(0,!1),ye&&"function"===typeof ye.onPostCommitFiberRoot)try{ye.onPostCommitFiberRoot(ve,a)}catch(u){}s=!0}return s}finally{B.p=i,P.T=r,eu(e,t)}}return!1}function nu(e,t,n){t=Dr(n,t),null!==(e=Na(e,t=Vo(e.stateNode,t,2),2))&&(Ne(e,2),mu(e))}function ru(e,t,n){if(3===e.tag)nu(e,e,n);else for(;null!==t;){if(3===t.tag){nu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===kc||!kc.has(r))){e=Dr(n,e),null!==(r=Na(t,n=$o(2),2))&&(Bo(n,r,t,e),Ne(r,2),mu(r));break}}t=t.return}}function iu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new Zl;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(lc=!0,i.add(n),e=su.bind(null,e,t,n),t.then(e,e))}function su(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,tc===e&&(rc&n)===n&&(4===uc||3===uc&&(62914560&rc)===rc&&300>le()-bc?0===(2&ec)&&Vc(e,0):pc|=n,mc===rc&&(mc=0)),mu(e)}function ou(e,t){0===t&&(t=Pe()),null!==(e=Rr(e,t))&&(Ne(e,t),mu(e))}function au(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),ou(e,n)}function lu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(o(314))}null!==r&&r.delete(t),ou(e,n)}var cu=null,uu=null,du=!1,hu=!1,pu=!1,fu=0;function mu(e){var t;e!==uu&&null===e.next&&(null===uu?cu=uu=e:uu=uu.next=e),hu=!0,du||(du=!0,t=vu,rd((function(){0!==(6&ec)?ie(ue,t):t()})))}function gu(e,t){if(!pu&&hu){pu=!0;do{for(var n=!1,r=cu;null!==r;){if(!t)if(0!==e){var i=r.pendingLanes;if(0===i)var s=0;else{var o=r.suspendedLanes,a=r.pingedLanes;s=(1<<31-we(42|e)+1)-1,s=201326677&(s&=i&~(o&~a))?201326677&s|1:s?2|s:0}0!==s&&(n=!0,wu(r,s))}else s=rc,0===(3&(s=_e(r,r===tc?s:0)))||xe(r,s)||(n=!0,wu(r,s));r=r.next}}while(n);pu=!1}}function vu(){hu=du=!1;var e=0;0!==fu&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==Zu&&(Zu=e,!0);return Zu=null,!1}()&&(e=fu),fu=0);for(var t=le(),n=null,r=cu;null!==r;){var i=r.next,s=yu(r,t);0===s?(r.next=null,null===n?cu=i:n.next=i,null===i&&(uu=n)):(n=r,(0!==e||0!==(3&s))&&(hu=!0)),r=i}gu(e,!1)}function yu(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=-62914561&e.pendingLanes;0<s;){var o=31-we(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=Ie(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}if(n=rc,n=_e(e,e===(t=tc)?n:0),r=e.callbackNode,0===n||e===t&&2===ic||null!==e.cancelPendingCommit)return null!==r&&null!==r&&se(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||xe(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&se(r),Le(n)){case 2:case 8:n=de;break;case 32:default:n=he;break;case 268435456:n=fe}return r=bu.bind(null,e),n=ie(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&se(r),e.callbackPriority=2,e.callbackNode=null,2}function bu(e,t){var n=e.callbackNode;if(tu()&&e.callbackNode!==n)return null;var r=rc;return 0===(r=_e(e,e===tc?r:0))?null:(Oc(e,r,t),yu(e,le()),null!=e.callbackNode&&e.callbackNode===n?bu.bind(null,e):null)}function wu(e,t){if(tu())return null;Oc(e,t,!0)}function Su(){return 0===fu&&(fu=Re()),fu}function ku(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:Rt(""+e)}function Cu(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Eu=0;Eu<Sr.length;Eu++){var Tu=Sr[Eu];kr(Tu.toLowerCase(),"on"+(Tu[0].toUpperCase()+Tu.slice(1)))}kr(pr,"onAnimationEnd"),kr(fr,"onAnimationIteration"),kr(mr,"onAnimationStart"),kr("dblclick","onDoubleClick"),kr("focusin","onFocus"),kr("focusout","onBlur"),kr(gr,"onTransitionRun"),kr(vr,"onTransitionStart"),kr(yr,"onTransitionCancel"),kr(br,"onTransitionEnd"),tt("onMouseEnter",["mouseout","mouseover"]),tt("onMouseLeave",["mouseout","mouseover"]),tt("onPointerEnter",["pointerout","pointerover"]),tt("onPointerLeave",["pointerout","pointerover"]),et("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),et("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),et("onBeforeInput",["compositionend","keypress","textInput","paste"]),et("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),et("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),et("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _u="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xu=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(_u));function Iu(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;s=a,i.currentTarget=c;try{s(i)}catch(u){Do(u)}i.currentTarget=null,s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;s=a,i.currentTarget=c;try{s(i)}catch(u){Do(u)}i.currentTarget=null,s=l}}}}function Ru(e,t){var n=t[$e];void 0===n&&(n=t[$e]=new Set);var r=e+"__bubble";n.has(r)||(Ou(t,e,2,!1),n.add(r))}function Pu(e,t,n){var r=0;t&&(r|=4),Ou(n,e,r,t)}var Au="_reactListening"+Math.random().toString(36).slice(2);function Nu(e){if(!e[Au]){e[Au]=!0,Xe.forEach((function(t){"selectionchange"!==t&&(xu.has(t)||Pu(t,!1,e),Pu(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Au]||(t[Au]=!0,Pu("selectionchange",!1,t))}}function Ou(e,t,n,r){switch(Qd(t)){case 2:var i=qd;break;case 8:i=Wd;break;default:i=Kd}n=i.bind(null,t,n,e),i=void 0,!Ft||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Du(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=Ke(a)))return;if(5===(l=o.tag)||6===l||26===l||27===l){r=s=o;continue e}a=a.parentNode}}r=r.return}jt((function(){var r=s,i=At(n),o=[];e:{var a=wr.get(e);if(void 0!==a){var l=Xt,c=e;switch(e){case"keypress":if(0===Ht(n))break e;case"keydown":case"keyup":l=fn;break;case"focusin":c="focus",l=sn;break;case"focusout":c="blur",l=sn;break;case"beforeblur":case"afterblur":l=sn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=nn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=rn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=gn;break;case pr:case fr:case mr:l=on;break;case br:l=vn;break;case"scroll":case"scrollend":l=en;break;case"wheel":l=yn;break;case"copy":case"cut":case"paste":l=an;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=mn;break;case"toggle":case"beforetoggle":l=bn}var u=0!==(4&t),d=!u&&("scroll"===e||"scrollend"===e),h=u?null!==a?a+"Capture":null:a;u=[];for(var p,f=r;null!==f;){var m=f;if(p=m.stateNode,5!==(m=m.tag)&&26!==m&&27!==m||null===p||null===h||null!=(m=Mt(f,h))&&u.push(Lu(f,m,p)),d)break;f=f.return}0<u.length&&(a=new l(a,c,null,n,i),o.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===Pt||!(c=n.relatedTarget||n.fromElement)||!Ke(c)&&!c[Ve])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?Ke(c):null)&&(d=M(c),u=c.tag,c!==d||5!==u&&27!==u&&6!==u)&&(c=null)):(l=null,c=r),l!==c)){if(u=nn,m="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=mn,m="onPointerLeave",h="onPointerEnter",f="pointer"),d=null==l?a:Je(l),p=null==c?a:Je(c),(a=new u(m,f+"leave",l,n,i)).target=d,a.relatedTarget=p,m=null,Ke(i)===r&&((u=new u(h,f+"enter",c,n,i)).target=p,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,f=0,p=u=l;p;p=Mu(p))f++;for(p=0,m=h;m;m=Mu(m))p++;for(;0<f-p;)u=Mu(u),f--;for(;0<p-f;)h=Mu(h),p--;for(;f--;){if(u===h||null!==h&&u===h.alternate)break e;u=Mu(u),h=Mu(h)}u=null}else u=null;null!==l&&Fu(o,a,l,u,!1),null!==c&&null!==d&&Fu(o,d,c,u,!0)}if("select"===(l=(a=r?Je(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Mn;else if(An(a))if(Fn)g=Kn;else{g=qn;var v=Hn}else!(l=a.nodeName)||"input"!==l.toLowerCase()||"checkbox"!==a.type&&"radio"!==a.type?r&&_t(r.elementType)&&(g=Mn):g=Wn;switch(g&&(g=g(e,r))?Nn(o,g,n,i):(v&&v(e,a,r),"focusout"===e&&r&&"number"===a.type&&null!=r.memoizedProps.value&&yt(a,"number",a.value)),v=r?Je(r):window,e){case"focusin":(An(v)||"true"===v.contentEditable)&&(rr=v,ir=r,sr=null);break;case"focusout":sr=ir=rr=null;break;case"mousedown":or=!0;break;case"contextmenu":case"mouseup":case"dragend":or=!1,ar(o,n,i);break;case"selectionchange":if(nr)break;case"keydown":case"keyup":ar(o,n,i)}var y;if(Sn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Rn?xn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(En&&"ko"!==n.locale&&(Rn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Rn&&(y=zt()):($t="value"in(Vt=i)?Vt.value:Vt.textContent,Rn=!0)),0<(v=ju(r,b)).length&&(b=new ln(b,e,null,n,i),o.push({event:b,listeners:v}),y?b.data=y:null!==(y=In(n))&&(b.data=y))),(y=Cn?function(e,t){switch(e){case"compositionend":return In(t);case"keypress":return 32!==t.which?null:(_n=!0,Tn);case"textInput":return(e=t.data)===Tn&&_n?null:e;default:return null}}(e,n):function(e,t){if(Rn)return"compositionend"===e||!Sn&&xn(e,t)?(e=zt(),Bt=$t=Vt=null,Rn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return En&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(b=ju(r,"onBeforeInput")).length&&(v=new ln("onBeforeInput","beforeinput",null,n,i),o.push({event:v,listeners:b}),v.data=y)),function(e,t,n,r,i){if("submit"===t&&n&&n.stateNode===i){var s=ku((i[Ue]||null).action),o=r.submitter;o&&null!==(t=(t=o[Ue]||null)?ku(t.formAction):o.getAttribute("formAction"))&&(s=t,o=null);var a=new Xt("action","action",null,r,i);e.push({event:a,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==fu){var e=o?Cu(i,o):new FormData(i);uo(n,{pending:!0,data:e,method:i.method,action:s},null,e)}}else"function"===typeof s&&(a.preventDefault(),e=o?Cu(i,o):new FormData(i),uo(n,{pending:!0,data:e,method:i.method,action:s},s,e))},currentTarget:i}]})}}(o,e,r,n,i)}Iu(o,t)}))}function Lu(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ju(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5!==(i=i.tag)&&26!==i&&27!==i||null===s||(null!=(i=Mt(e,n))&&r.unshift(Lu(e,i,s)),null!=(i=Mt(e,t))&&r.push(Lu(e,i,s))),e=e.return}return r}function Mu(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Fu(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(a=a.tag,null!==l&&l===r)break;5!==a&&26!==a&&27!==a||null===c||(l=c,i?null!=(c=Mt(n,s))&&o.unshift(Lu(n,c,l)):i||null!=(c=Mt(n,s))&&o.push(Lu(n,c,l))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Uu=/\r\n?/g,Vu=/\u0000|\uFFFD/g;function $u(e){return("string"===typeof e?e:""+e).replace(Uu,"\n").replace(Vu,"")}function Bu(e,t){return t=$u(t),$u(e)===t}function zu(){}function Hu(e,t,n,r,i,s){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||kt(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&kt(e,""+r);break;case"className":at(e,"class",r);break;case"tabIndex":at(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":at(e,n,r);break;case"style":Tt(e,r,s);break;case"data":if("object"!==t){at(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Rt(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof s&&("formAction"===n?("input"!==t&&Hu(e,t,"name",i.name,i,null),Hu(e,t,"formEncType",i.formEncType,i,null),Hu(e,t,"formMethod",i.formMethod,i,null),Hu(e,t,"formTarget",i.formTarget,i,null)):(Hu(e,t,"encType",i.encType,i,null),Hu(e,t,"method",i.method,i,null),Hu(e,t,"target",i.target,i,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Rt(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=zu);break;case"onScroll":null!=r&&Ru("scroll",e);break;case"onScrollEnd":null!=r&&Ru("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(o(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(o(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=Rt(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Ru("beforetoggle",e),Ru("toggle",e),ot(e,"popover",r);break;case"xlinkActuate":lt(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":lt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":lt(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":lt(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":lt(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":lt(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":lt(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":lt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":lt(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":ot(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&ot(e,n=xt.get(n)||n,r)}}function qu(e,t,n,r,i,s){switch(n){case"style":Tt(e,r,s);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(o(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(o(60));e.innerHTML=n}}break;case"children":"string"===typeof r?kt(e,r):("number"===typeof r||"bigint"===typeof r)&&kt(e,""+r);break;case"onScroll":null!=r&&Ru("scroll",e);break;case"onScrollEnd":null!=r&&Ru("scrollend",e);break;case"onClick":null!=r&&(e.onclick=zu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Ze.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(i=n.endsWith("Capture"),t=n.slice(2,i?n.length-7:void 0),"function"===typeof(s=null!=(s=e[Ue]||null)?s[n]:null)&&e.removeEventListener(t,s,i),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):ot(e,n,r):("function"!==typeof s&&null!==s&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,i)))}}function Wu(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ru("error",e),Ru("load",e);var r,i=!1,s=!1;for(r in n)if(n.hasOwnProperty(r)){var a=n[r];if(null!=a)switch(r){case"src":i=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Hu(e,t,r,a,n,null)}}return s&&Hu(e,t,"srcSet",n.srcSet,n,null),void(i&&Hu(e,t,"src",n.src,n,null));case"input":Ru("invalid",e);var l=r=a=s=null,c=null,u=null;for(i in n)if(n.hasOwnProperty(i)){var d=n[i];if(null!=d)switch(i){case"name":s=d;break;case"type":a=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":r=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(o(137,t));break;default:Hu(e,t,i,d,n,null)}}return vt(e,r,l,c,u,a,s,!1),void dt(e);case"select":for(s in Ru("invalid",e),i=a=r=null,n)if(n.hasOwnProperty(s)&&null!=(l=n[s]))switch(s){case"value":r=l;break;case"defaultValue":a=l;break;case"multiple":i=l;default:Hu(e,t,s,l,n,null)}return t=r,n=a,e.multiple=!!i,void(null!=t?bt(e,!!i,t,!1):null!=n&&bt(e,!!i,n,!0));case"textarea":for(a in Ru("invalid",e),r=s=i=null,n)if(n.hasOwnProperty(a)&&null!=(l=n[a]))switch(a){case"value":i=l;break;case"defaultValue":s=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(o(91));break;default:Hu(e,t,a,l,n,null)}return St(e,i,s,r),void dt(e);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(i=n[c]))if("selected"===c)e.selected=i&&"function"!==typeof i&&"symbol"!==typeof i;else Hu(e,t,c,i,n,null);return;case"dialog":Ru("cancel",e),Ru("close",e);break;case"iframe":case"object":Ru("load",e);break;case"video":case"audio":for(i=0;i<_u.length;i++)Ru(_u[i],e);break;case"image":Ru("error",e),Ru("load",e);break;case"details":Ru("toggle",e);break;case"embed":case"source":case"link":Ru("error",e),Ru("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(i=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Hu(e,t,u,i,n,null)}return;default:if(_t(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(i=n[d])&&qu(e,t,d,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(i=n[l])&&Hu(e,t,l,i,n,null))}var Ku=null,Gu=null;function Ju(e){return 9===e.nodeType?e:e.ownerDocument}function Yu(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Qu(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function Xu(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Zu=null;var ed="function"===typeof setTimeout?setTimeout:void 0,td="function"===typeof clearTimeout?clearTimeout:void 0,nd="function"===typeof Promise?Promise:void 0,rd="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof nd?function(e){return nd.resolve(null).then(e).catch(id)}:ed;function id(e){setTimeout((function(){throw e}))}function sd(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void mh(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);mh(t)}function od(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":od(n),We(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function ad(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}function ld(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function cd(e,t,n){switch(t=Ju(n),e){case"html":if(!(e=t.documentElement))throw Error(o(452));return e;case"head":if(!(e=t.head))throw Error(o(453));return e;case"body":if(!(e=t.body))throw Error(o(454));return e;default:throw Error(o(451))}}var ud=new Map,dd=new Set;function hd(e){return"function"===typeof e.getRootNode?e.getRootNode():e.ownerDocument}var pd=B.d;B.d={f:function(){var e=pd.f(),t=Fc();return e||t},r:function(e){var t=Ge(e);null!==t&&5===t.tag&&"form"===t.type?po(t):pd.r(e)},D:function(e){pd.D(e),md("dns-prefetch",e,null)},C:function(e,t){pd.C(e,t),md("preconnect",e,t)},L:function(e,t,n){pd.L(e,t,n);var r=fd;if(r&&e&&t){var i='link[rel="preload"][as="'+mt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(i+='[imagesrcset="'+mt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(i+='[imagesizes="'+mt(n.imageSizes)+'"]')):i+='[href="'+mt(e)+'"]';var s=i;switch(t){case"style":s=vd(e);break;case"script":s=wd(e)}ud.has(s)||(e=A({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),ud.set(s,e),null!==r.querySelector(i)||"style"===t&&r.querySelector(yd(s))||"script"===t&&r.querySelector(Sd(s))||(Wu(t=r.createElement("link"),"link",e),Qe(t),r.head.appendChild(t)))}},m:function(e,t){pd.m(e,t);var n=fd;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",i='link[rel="modulepreload"][as="'+mt(r)+'"][href="'+mt(e)+'"]',s=i;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=wd(e)}if(!ud.has(s)&&(e=A({rel:"modulepreload",href:e},t),ud.set(s,e),null===n.querySelector(i))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Sd(s)))return}Wu(r=n.createElement("link"),"link",e),Qe(r),n.head.appendChild(r)}}},X:function(e,t){pd.X(e,t);var n=fd;if(n&&e){var r=Ye(n).hoistableScripts,i=wd(e),s=r.get(i);s||((s=n.querySelector(Sd(i)))||(e=A({src:e,async:!0},t),(t=ud.get(i))&&Td(e,t),Qe(s=n.createElement("script")),Wu(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(i,s))}},S:function(e,t,n){pd.S(e,t,n);var r=fd;if(r&&e){var i=Ye(r).hoistableStyles,s=vd(e);t=t||"default";var o=i.get(s);if(!o){var a={loading:0,preload:null};if(o=r.querySelector(yd(s)))a.loading=5;else{e=A({rel:"stylesheet",href:e,"data-precedence":t},n),(n=ud.get(s))&&Ed(e,n);var l=o=r.createElement("link");Qe(l),Wu(l,"link",e),l._p=new Promise((function(e,t){l.onload=e,l.onerror=t})),l.addEventListener("load",(function(){a.loading|=1})),l.addEventListener("error",(function(){a.loading|=2})),a.loading|=4,Cd(o,t,r)}o={type:"stylesheet",instance:o,count:1,state:a},i.set(s,o)}}},M:function(e,t){pd.M(e,t);var n=fd;if(n&&e){var r=Ye(n).hoistableScripts,i=wd(e),s=r.get(i);s||((s=n.querySelector(Sd(i)))||(e=A({src:e,async:!0,type:"module"},t),(t=ud.get(i))&&Td(e,t),Qe(s=n.createElement("script")),Wu(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(i,s))}}};var fd="undefined"===typeof document?null:document;function md(e,t,n){var r=fd;if(r&&"string"===typeof t&&t){var i=mt(t);i='link[rel="'+e+'"][href="'+i+'"]',"string"===typeof n&&(i+='[crossorigin="'+n+'"]'),dd.has(i)||(dd.add(i),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(i)&&(Wu(t=r.createElement("link"),"link",e),Qe(t),r.head.appendChild(t)))}}function gd(e,t,n,r){var i,s,a,l,c=(c=Q.current)?hd(c):null;if(!c)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=vd(n.href),(r=(n=Ye(c).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=vd(n.href);var u=Ye(c).hoistableStyles,d=u.get(e);if(d||(c=c.ownerDocument||c,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,d),(u=c.querySelector(yd(e)))&&!u._p&&(d.instance=u,d.state.loading=5),ud.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},ud.set(e,n),u||(i=c,s=e,a=n,l=d.state,i.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=i.createElement("link"),l.preload=s,s.addEventListener("load",(function(){return l.loading|=1})),s.addEventListener("error",(function(){return l.loading|=2})),Wu(s,"link",a),Qe(s),i.head.appendChild(s))))),t&&null===r)throw Error(o(528,""));return d}if(t&&null!==r)throw Error(o(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=wd(n),(r=(n=Ye(c).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function vd(e){return'href="'+mt(e)+'"'}function yd(e){return'link[rel="stylesheet"]['+e+"]"}function bd(e){return A({},e,{"data-precedence":e.precedence,precedence:null})}function wd(e){return'[src="'+mt(e)+'"]'}function Sd(e){return"script[async]"+e}function kd(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+mt(n.href)+'"]');if(r)return t.instance=r,Qe(r),r;var i=A({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return Qe(r=(e.ownerDocument||e).createElement("style")),Wu(r,"style",i),Cd(r,n.precedence,e),t.instance=r;case"stylesheet":i=vd(n.href);var s=e.querySelector(yd(i));if(s)return t.state.loading|=4,t.instance=s,Qe(s),s;r=bd(n),(i=ud.get(i))&&Ed(r,i),Qe(s=(e.ownerDocument||e).createElement("link"));var a=s;return a._p=new Promise((function(e,t){a.onload=e,a.onerror=t})),Wu(s,"link",r),t.state.loading|=4,Cd(s,n.precedence,e),t.instance=s;case"script":return s=wd(n.src),(i=e.querySelector(Sd(s)))?(t.instance=i,Qe(i),i):(r=n,(i=ud.get(s))&&Td(r=A({},n),i),Qe(i=(e=e.ownerDocument||e).createElement("script")),Wu(i,"link",r),e.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(o(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Cd(r,n.precedence,e));return t.instance}function Cd(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=r.length?r[r.length-1]:null,s=i,o=0;o<r.length;o++){var a=r[o];if(a.dataset.precedence===t)s=a;else if(s!==i)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Ed(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Td(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var _d=null;function xd(e,t,n){if(null===_d){var r=new Map,i=_d=new Map;i.set(n,r)}else(r=(i=_d).get(n))||(r=new Map,i.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var s=n[i];if(!(s[qe]||s[Fe]||"link"===e&&"stylesheet"===s.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==s.namespaceURI){var o=s.getAttribute(t)||"";o=e+o;var a=r.get(o);a?a.push(s):r.set(o,[s])}}return r}function Id(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function Rd(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var Pd=null;function Ad(){}function Nd(){if(this.count--,0===this.count)if(this.stylesheets)Dd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Od=null;function Dd(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Od=new Map,t.forEach(Ld,e),Od=null,Nd.call(e))}function Ld(e,t){if(!(4&t.state.loading)){var n=Od.get(e);if(n)var r=n.get(null);else{n=new Map,Od.set(e,n);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<i.length;s++){var o=i[s];"LINK"!==o.nodeName&&"not all"===o.getAttribute("media")||(n.set(o.dataset.precedence,o),r=o)}r&&n.set(null,r)}o=(i=t.instance).getAttribute("data-precedence"),(s=n.get(o)||r)===r&&n.set(null,i),n.set(o,i),this.count++,r=Nd.bind(this),i.addEventListener("load",r),i.addEventListener("error",r),s?s.parentNode.insertBefore(i,s.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(i,e.firstChild),t.state.loading|=4}}var jd={$$typeof:g,Provider:null,Consumer:null,_currentValue:z,_currentValue2:z,_threadCount:0};function Md(e,t,n,r,i,s,o,a){this.tag=1,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ae(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ae(0),this.hiddenUpdates=Ae(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=s,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=a,this.incompleteTransitions=new Map}function Fd(e,t,n,r,i,s,o,a,l,c,u,d){return e=new Md(e,t,n,o,a,l,c,d),t=1,!0===s&&(t|=24),s=Ll(3,null,null,t),e.current=s,s.stateNode=e,(t=Vi()).refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:r,isDehydrated:n,cache:t},Ra(s),e}function Ud(e){return e?e=Nr:Nr}function Vd(e,t,n,r,i,s){i=Ud(i),null===r.context?r.context=i:r.pendingContext=i,(r=Aa(t)).payload={element:n},null!==(s=void 0===s?null:s)&&(r.callback=s),null!==(n=Na(e,r,t))&&(Nc(n,0,t),Oa(n,e,t))}function $d(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Bd(e,t){$d(e,t),(e=e.alternate)&&$d(e,t)}function zd(e){if(13===e.tag){var t=Rr(e,67108864);null!==t&&Nc(t,0,67108864),Bd(e,67108864)}}var Hd=!0;function qd(e,t,n,r){var i=P.T;P.T=null;var s=B.p;try{B.p=2,Kd(e,t,n,r)}finally{B.p=s,P.T=i}}function Wd(e,t,n,r){var i=P.T;P.T=null;var s=B.p;try{B.p=8,Kd(e,t,n,r)}finally{B.p=s,P.T=i}}function Kd(e,t,n,r){if(Hd){var i=Gd(r);if(null===i)Du(e,t,r,Jd,n),oh(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Zd=ah(Zd,e,t,n,r,i),!0;case"dragenter":return eh=ah(eh,e,t,n,r,i),!0;case"mouseover":return th=ah(th,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return nh.set(s,ah(nh.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,rh.set(s,ah(rh.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(oh(e,r),4&t&&-1<sh.indexOf(e)){for(;null!==i;){var s=Ge(i);if(null!==s)switch(s.tag){case 3:if((s=s.stateNode).current.memoizedState.isDehydrated){var o=Te(s.pendingLanes);if(0!==o){var a=s;for(a.pendingLanes|=2,a.entangledLanes|=2;o;){var l=1<<31-we(o);a.entanglements[1]|=l,o&=~l}mu(s),0===(6&ec)&&(wc=le()+500,gu(0,!1))}}break;case 13:null!==(a=Rr(s,2))&&Nc(a,0,2),Fc(),Bd(s,2)}if(null===(s=Gd(r))&&Du(e,t,r,Jd,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Du(e,t,r,null,n)}}function Gd(e){return Yd(e=At(e))}var Jd=null;function Yd(e){if(Jd=null,null!==(e=Ke(e))){var t=M(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=F(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Jd=e,null}function Qd(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ce()){case ue:return 2;case de:return 8;case he:case pe:return 32;case fe:return 268435456;default:return 32}default:return 32}}var Xd=!1,Zd=null,eh=null,th=null,nh=new Map,rh=new Map,ih=[],sh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function oh(e,t){switch(e){case"focusin":case"focusout":Zd=null;break;case"dragenter":case"dragleave":eh=null;break;case"mouseover":case"mouseout":th=null;break;case"pointerover":case"pointerout":nh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":rh.delete(t.pointerId)}}function ah(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=Ge(t))&&zd(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function lh(e){var t=Ke(e.target);if(null!==t){var n=M(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=F(n)))return e.blockedOn=t,void function(e,t){var n=B.p;try{return B.p=e,t()}finally{B.p=n}}(e.priority,(function(){if(13===n.tag){var e=Pc(),t=Rr(n,e);null!==t&&Nc(t,0,e),Bd(n,e)}}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function ch(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Gd(e.nativeEvent);if(null!==n)return null!==(t=Ge(n))&&zd(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Pt=r,n.target.dispatchEvent(r),Pt=null,t.shift()}return!0}function uh(e,t,n){ch(e)&&n.delete(t)}function dh(){Xd=!1,null!==Zd&&ch(Zd)&&(Zd=null),null!==eh&&ch(eh)&&(eh=null),null!==th&&ch(th)&&(th=null),nh.forEach(uh),rh.forEach(uh)}function hh(e,t){e.blockedOn===t&&(e.blockedOn=null,Xd||(Xd=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,dh)))}var ph=null;function fh(e){ph!==e&&(ph=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,(function(){ph===e&&(ph=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],i=e[t+2];if("function"!==typeof r){if(null===Yd(r||n))continue;break}var s=Ge(n);null!==s&&(e.splice(t,3),t-=3,uo(s,{pending:!0,data:i,method:n.method,action:r},r,i))}})))}function mh(e){function t(t){return hh(t,e)}null!==Zd&&hh(Zd,e),null!==eh&&hh(eh,e),null!==th&&hh(th,e),nh.forEach(t),rh.forEach(t);for(var n=0;n<ih.length;n++){var r=ih[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<ih.length&&null===(n=ih[0]).blockedOn;)lh(n),null===n.blockedOn&&ih.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var i=n[r],s=n[r+1],o=i[Ue]||null;if("function"===typeof s)o||fh(n);else if(o){var a=null;if(s&&s.hasAttribute("formAction")){if(i=s,o=s[Ue]||null)a=o.formAction;else if(null!==Yd(i))continue}else a=o.action;"function"===typeof a?n[r+1]=a:(n.splice(r,3),r-=3),fh(n)}}}function gh(e){this._internalRoot=e}function vh(e){this._internalRoot=e}vh.prototype.render=gh.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Vd(t.current,Pc(),e,t,null,null)},vh.prototype.unmount=gh.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;0===e.tag&&tu(),Vd(e.current,2,null,e,null,null),Fc(),t[Ve]=null}},vh.prototype.unstable_scheduleHydration=function(e){if(e){var t=je();e={blockedOn:null,target:e,priority:t};for(var n=0;n<ih.length&&0!==t&&t<ih[n].priority;n++);ih.splice(n,0,e),0===n&&lh(e)}};var yh=i.version;if("19.0.0"!==yh)throw Error(o(527,yh,"19.0.0"));B.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=M(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return U(i),e;if(s===r)return U(i),t;s=s.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?V(e):null)?null:e.stateNode};var bh={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:P,findFiberByHostInstance:Ke,reconcilerVersion:"19.0.0"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var wh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wh.isDisabled&&wh.supportsFiber)try{ve=wh.inject(bh),ye=wh}catch(kh){}}t.createRoot=function(e,t){if(!a(e))throw Error(o(299));var n=!1,r="",i=Lo,s=jo,l=Mo;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(i=t.onUncaughtError),void 0!==t.onCaughtError&&(s=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Fd(e,1,!1,null,0,n,r,i,s,l,0,null),e[Ve]=t.current,Nu(8===e.nodeType?e.parentNode:e),new gh(t)},t.hydrateRoot=function(e,t,n){if(!a(e))throw Error(o(299));var r=!1,i="",s=Lo,l=jo,c=Mo,u=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onUncaughtError&&(s=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(u=n.formState)),(t=Fd(e,1,!0,t,0,r,i,s,l,c,0,u)).context=Ud(null),n=t.current,(i=Aa(r=Pc())).callback=null,Na(n,i,r),t.current.lanes=r,Ne(t,r),mu(t),e[Ve]=t.current,Nu(e),new vh(t)},t.version="19.0.0"},7151:(e,t,n)=>{"use strict";var r=n(1239),i=n(3192);e.exports=function(e,t){var n=e[t];return i(n)?void 0:r(n)}},7192:(e,t,n)=>{"use strict";var r=n(4823),i=n(498),s=n(5687),o=function(e){return i.slice(0,e.length)===e};e.exports=o("Bun/")?"BUN":o("Cloudflare-Workers")?"CLOUDFLARE":o("Deno/")?"DENO":o("Node.js/")?"NODE":r.Bun&&"string"==typeof Bun.version?"BUN":r.Deno&&"object"==typeof Deno.version?"DENO":"process"===s(r.process)?"NODE":r.window&&r.document?"BROWSER":"REST"},7251:(e,t,n)=>{"use strict";var r=n(4061),i=n(6672).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},7412:(e,t,n)=>{"use strict";n(9668),n(4647)},7592:e=>{"use strict";e.exports=!1},7707:(e,t,n)=>{"use strict";var r=n(5897),i=Function.prototype,s=i.call,o=r&&i.bind.bind(s,s);e.exports=r?o:function(e){return function(){return s.apply(e,arguments)}}},7899:(e,t,n)=>{"use strict";var r=n(7707),i=0,s=Math.random(),o=r(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+o(++i+s,36)}},7950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4291)},7970:(e,t,n)=>{"use strict";var r=n(3542),i=n(4706),s=n(6864),o=n(4111),a=Object;e.exports=o?function(e){return"symbol"==typeof e}:function(e){var t=r("Symbol");return i(t)&&s(t.prototype,a(e))}},8084:e=>{"use strict";e.exports=function(e){try{return!!e()}catch(t){return!0}}},8097:(e,t,n)=>{"use strict";var r=n(5687),i=n(7707);e.exports=function(e){if("Function"===r(e))return i(e)}},8249:(e,t,n)=>{"use strict";var r=n(466),i=Math.min;e.exports=function(e){var t=r(e);return t>0?i(t,9007199254740991):0}},8824:e=>{"use strict";const t={generateIdentifier:function(){return Math.random().toString(36).substring(2,12)}};t.localCName=t.generateIdentifier(),t.splitLines=function(e){return e.trim().split("\n").map((e=>e.trim()))},t.splitSections=function(e){return e.split("\nm=").map(((e,t)=>(t>0?"m="+e:e).trim()+"\r\n"))},t.getDescription=function(e){const n=t.splitSections(e);return n&&n[0]},t.getMediaSections=function(e){const n=t.splitSections(e);return n.shift(),n},t.matchPrefix=function(e,n){return t.splitLines(e).filter((e=>0===e.indexOf(n)))},t.parseCandidate=function(e){let t;t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" ");const n={foundation:t[0],component:{1:"rtp",2:"rtcp"}[t[1]]||t[1],protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]};for(let r=8;r<t.length;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=parseInt(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1];break;case"ufrag":n.ufrag=t[r+1],n.usernameFragment=t[r+1];break;default:void 0===n[t[r]]&&(n[t[r]]=t[r+1])}return n},t.writeCandidate=function(e){const t=[];t.push(e.foundation);const n=e.component;"rtp"===n?t.push(1):"rtcp"===n?t.push(2):t.push(n),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);const r=e.type;return t.push("typ"),t.push(r),"host"!==r&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},t.parseIceOptions=function(e){return e.substring(14).split(" ")},t.parseRtpMap=function(e){let t=e.substring(9).split(" ");const n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},t.writeRtpMap=function(e){let t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);const n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},t.parseExtmap=function(e){const t=e.substring(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1],attributes:t.slice(2).join(" ")}},t.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+(e.attributes?" "+e.attributes:"")+"\r\n"},t.parseFmtp=function(e){const t={};let n;const r=e.substring(e.indexOf(" ")+1).split(";");for(let i=0;i<r.length;i++)n=r[i].trim().split("="),t[n[0].trim()]=n[1];return t},t.writeFmtp=function(e){let t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){const r=[];Object.keys(e.parameters).forEach((t=>{void 0!==e.parameters[t]?r.push(t+"="+e.parameters[t]):r.push(t)})),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},t.parseRtcpFb=function(e){const t=e.substring(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},t.writeRtcpFb=function(e){let t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((e=>{t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},t.parseSsrcMedia=function(e){const t=e.indexOf(" "),n={ssrc:parseInt(e.substring(7,t),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substring(t+1,r),n.value=e.substring(r+1)):n.attribute=e.substring(t+1),n},t.parseSsrcGroup=function(e){const t=e.substring(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((e=>parseInt(e,10)))}},t.getMid=function(e){const n=t.matchPrefix(e,"a=mid:")[0];if(n)return n.substring(6)},t.parseFingerprint=function(e){const t=e.substring(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1].toUpperCase()}},t.getDtlsParameters=function(e,n){return{role:"auto",fingerprints:t.matchPrefix(e+n,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(e,t){let n="a=setup:"+t+"\r\n";return e.fingerprints.forEach((e=>{n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),n},t.parseCryptoLine=function(e){const t=e.substring(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},t.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"===typeof e.keyParams?t.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},t.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;const t=e.substring(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},t.getCryptoParameters=function(e,n){return t.matchPrefix(e+n,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(e,n){const r=t.matchPrefix(e+n,"a=ice-ufrag:")[0],i=t.matchPrefix(e+n,"a=ice-pwd:")[0];return r&&i?{usernameFragment:r.substring(12),password:i.substring(10)}:null},t.writeIceParameters=function(e){let t="a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n";return e.iceLite&&(t+="a=ice-lite\r\n"),t},t.parseRtpParameters=function(e){const n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},r=t.splitLines(e)[0].split(" ");n.profile=r[2];for(let s=3;s<r.length;s++){const i=r[s],o=t.matchPrefix(e,"a=rtpmap:"+i+" ")[0];if(o){const r=t.parseRtpMap(o),s=t.matchPrefix(e,"a=fmtp:"+i+" ");switch(r.parameters=s.length?t.parseFmtp(s[0]):{},r.rtcpFeedback=t.matchPrefix(e,"a=rtcp-fb:"+i+" ").map(t.parseRtcpFb),n.codecs.push(r),r.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(r.name.toUpperCase())}}}t.matchPrefix(e,"a=extmap:").forEach((e=>{n.headerExtensions.push(t.parseExtmap(e))}));const i=t.matchPrefix(e,"a=rtcp-fb:* ").map(t.parseRtcpFb);return n.codecs.forEach((e=>{i.forEach((t=>{e.rtcpFeedback.find((e=>e.type===t.type&&e.parameter===t.parameter))||e.rtcpFeedback.push(t)}))})),n},t.writeRtpDescription=function(e,n){let r="";r+="m="+e+" ",r+=n.codecs.length>0?"9":"0",r+=" "+(n.profile||"UDP/TLS/RTP/SAVPF")+" ",r+=n.codecs.map((e=>void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType)).join(" ")+"\r\n",r+="c=IN IP4 0.0.0.0\r\n",r+="a=rtcp:9 IN IP4 0.0.0.0\r\n",n.codecs.forEach((e=>{r+=t.writeRtpMap(e),r+=t.writeFmtp(e),r+=t.writeRtcpFb(e)}));let i=0;return n.codecs.forEach((e=>{e.maxptime>i&&(i=e.maxptime)})),i>0&&(r+="a=maxptime:"+i+"\r\n"),n.headerExtensions&&n.headerExtensions.forEach((e=>{r+=t.writeExtmap(e)})),r},t.parseRtpEncodingParameters=function(e){const n=[],r=t.parseRtpParameters(e),i=-1!==r.fecMechanisms.indexOf("RED"),s=-1!==r.fecMechanisms.indexOf("ULPFEC"),o=t.matchPrefix(e,"a=ssrc:").map((e=>t.parseSsrcMedia(e))).filter((e=>"cname"===e.attribute)),a=o.length>0&&o[0].ssrc;let l;const c=t.matchPrefix(e,"a=ssrc-group:FID").map((e=>e.substring(17).split(" ").map((e=>parseInt(e,10)))));c.length>0&&c[0].length>1&&c[0][0]===a&&(l=c[0][1]),r.codecs.forEach((e=>{if("RTX"===e.name.toUpperCase()&&e.parameters.apt){let t={ssrc:a,codecPayloadType:parseInt(e.parameters.apt,10)};a&&l&&(t.rtx={ssrc:l}),n.push(t),i&&(t=JSON.parse(JSON.stringify(t)),t.fec={ssrc:a,mechanism:s?"red+ulpfec":"red"},n.push(t))}})),0===n.length&&a&&n.push({ssrc:a});let u=t.matchPrefix(e,"b=");return u.length&&(u=0===u[0].indexOf("b=TIAS:")?parseInt(u[0].substring(7),10):0===u[0].indexOf("b=AS:")?1e3*parseInt(u[0].substring(5),10)*.95-16e3:void 0,n.forEach((e=>{e.maxBitrate=u}))),n},t.parseRtcpParameters=function(e){const n={},r=t.matchPrefix(e,"a=ssrc:").map((e=>t.parseSsrcMedia(e))).filter((e=>"cname"===e.attribute))[0];r&&(n.cname=r.value,n.ssrc=r.ssrc);const i=t.matchPrefix(e,"a=rtcp-rsize");n.reducedSize=i.length>0,n.compound=0===i.length;const s=t.matchPrefix(e,"a=rtcp-mux");return n.mux=s.length>0,n},t.writeRtcpParameters=function(e){let t="";return e.reducedSize&&(t+="a=rtcp-rsize\r\n"),e.mux&&(t+="a=rtcp-mux\r\n"),void 0!==e.ssrc&&e.cname&&(t+="a=ssrc:"+e.ssrc+" cname:"+e.cname+"\r\n"),t},t.parseMsid=function(e){let n;const r=t.matchPrefix(e,"a=msid:");if(1===r.length)return n=r[0].substring(7).split(" "),{stream:n[0],track:n[1]};const i=t.matchPrefix(e,"a=ssrc:").map((e=>t.parseSsrcMedia(e))).filter((e=>"msid"===e.attribute));return i.length>0?(n=i[0].value.split(" "),{stream:n[0],track:n[1]}):void 0},t.parseSctpDescription=function(e){const n=t.parseMLine(e),r=t.matchPrefix(e,"a=max-message-size:");let i;r.length>0&&(i=parseInt(r[0].substring(19),10)),isNaN(i)&&(i=65536);const s=t.matchPrefix(e,"a=sctp-port:");if(s.length>0)return{port:parseInt(s[0].substring(12),10),protocol:n.fmt,maxMessageSize:i};const o=t.matchPrefix(e,"a=sctpmap:");if(o.length>0){const e=o[0].substring(10).split(" ");return{port:parseInt(e[0],10),protocol:e[1],maxMessageSize:i}}},t.writeSctpDescription=function(e,t){let n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,22)},t.writeSessionBoilerplate=function(e,n,r){let i;const s=void 0!==n?n:2;i=e||t.generateSessionId();return"v=0\r\no="+(r||"thisisadapterortc")+" "+i+" "+s+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},t.getDirection=function(e,n){const r=t.splitLines(e);for(let t=0;t<r.length;t++)switch(r[t]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[t].substring(2)}return n?t.getDirection(n):"sendrecv"},t.getKind=function(e){return t.splitLines(e)[0].split(" ")[0].substring(2)},t.isRejected=function(e){return"0"===e.split(" ",2)[1]},t.parseMLine=function(e){const n=t.splitLines(e)[0].substring(2).split(" ");return{kind:n[0],port:parseInt(n[1],10),protocol:n[2],fmt:n.slice(3).join(" ")}},t.parseOLine=function(e){const n=t.matchPrefix(e,"o=")[0].substring(2).split(" ");return{username:n[0],sessionId:n[1],sessionVersion:parseInt(n[2],10),netType:n[3],addressType:n[4],address:n[5]}},t.isValidSDP=function(e){if("string"!==typeof e||0===e.length)return!1;const n=t.splitLines(e);for(let t=0;t<n.length;t++)if(n[t].length<2||"="!==n[t].charAt(1))return!1;return!0},e.exports=t},8853:(e,t,n)=>{"use strict";e.exports=n(5896)},8877:(e,t,n)=>{var r=function(e){return String(Number(e))===e?Number(e):e},i=function(e,t,n){var i=e.name&&e.names;e.push&&!t[e.push]?t[e.push]=[]:i&&!t[e.name]&&(t[e.name]={});var s=e.push?{}:i?t[e.name]:t;!function(e,t,n,i){if(i&&!n)t[i]=r(e[1]);else for(var s=0;s<n.length;s+=1)null!=e[s+1]&&(t[n[s]]=r(e[s+1]))}(n.match(e.reg),s,e.names,e.name),e.push&&t[e.push].push(s)},s=n(6321),o=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(e){var t={},n=[],r=t;return e.split(/(\r\n|\r|\n)/).filter(o).forEach((function(e){var t=e[0],o=e.slice(2);"m"===t&&(n.push({rtp:[],fmtp:[]}),r=n[n.length-1]);for(var a=0;a<(s[t]||[]).length;a+=1){var l=s[t][a];if(l.reg.test(o))return i(l,r,o)}})),t.media=n,t};var a=function(e,t){var n=t.split(/=(.+)/,2);return 2===n.length?e[n[0]]=r(n[1]):1===n.length&&t.length>1&&(e[n[0]]=void 0),e};t.parseParams=function(e){return e.split(/;\s?/).reduce(a,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(e){return e.toString().split(" ").map(Number)},t.parseRemoteCandidates=function(e){for(var t=[],n=e.split(" ").map(r),i=0;i<n.length;i+=3)t.push({component:n[i],ip:n[i+1],port:n[i+2]});return t},t.parseImageAttributes=function(e){return e.split(" ").map((function(e){return e.substring(1,e.length-1).split(",").reduce(a,{})}))},t.parseSimulcastStreamList=function(e){return e.split(";").map((function(e){return e.split(",").map((function(e){var t,n=!1;return"~"!==e[0]?t=r(e):(t=r(e.substring(1,e.length)),n=!0),{scid:t,paused:n}}))}))}},8973:(e,t,n)=>{"use strict";var r=n(498);e.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(r)},9055:(e,t,n)=>{"use strict";var r=n(8097),i=n(1239),s=n(5897),o=r(r.bind);e.exports=function(e,t){return i(e),void 0===t?e:s?o(e,t):function(){return e.apply(t,arguments)}}},9140:(e,t,n)=>{"use strict";var r=n(4850),i=n(6821),s=n(7970),o=n(7151),a=n(2509),l=n(4352),c=TypeError,u=l("toPrimitive");e.exports=function(e,t){if(!i(e)||s(e))return e;var n,l=o(e,u);if(l){if(void 0===t&&(t="default"),n=r(l,e,t),!i(n)||s(n))return n;throw new c("Can't convert object to primitive value")}return void 0===t&&(t="number"),a(e,t)}},9266:(e,t,n)=>{"use strict";var r=n(9519),i=n(3572),s=n(6369);e.exports=r?function(e,t,n){return i.f(e,t,s(1,n))}:function(e,t,n){return e[t]=n,e}},9279:(e,t,n)=>{"use strict";var r=n(4823),i=n(4706),s=r.WeakMap;e.exports=i(s)&&/native code/.test(String(s))},9286:(e,t,n)=>{"use strict";var r=n(6715),i=n(4823),s=n(9464).set,o=n(1709),a=i.setImmediate?o(s,!1):s;r({global:!0,bind:!0,enumerable:!0,forced:i.setImmediate!==a},{setImmediate:a})},9344:e=>{"use strict";var t=Math.ceil,n=Math.floor;e.exports=Math.trunc||function(e){var r=+e;return(r>0?n:t)(r)}},9464:(e,t,n)=>{"use strict";var r,i,s,o,a=n(4823),l=n(6464),c=n(9055),u=n(4706),d=n(6164),h=n(8084),p=n(904),f=n(1659),m=n(2760),g=n(155),v=n(8973),y=n(4234),b=a.setImmediate,w=a.clearImmediate,S=a.process,k=a.Dispatch,C=a.Function,E=a.MessageChannel,T=a.String,_=0,x={},I="onreadystatechange";h((function(){r=a.location}));var R=function(e){if(d(x,e)){var t=x[e];delete x[e],t()}},P=function(e){return function(){R(e)}},A=function(e){R(e.data)},N=function(e){a.postMessage(T(e),r.protocol+"//"+r.host)};b&&w||(b=function(e){g(arguments.length,1);var t=u(e)?e:C(e),n=f(arguments,1);return x[++_]=function(){l(t,void 0,n)},i(_),_},w=function(e){delete x[e]},y?i=function(e){S.nextTick(P(e))}:k&&k.now?i=function(e){k.now(P(e))}:E&&!v?(o=(s=new E).port2,s.port1.onmessage=A,i=c(o.postMessage,o)):a.addEventListener&&u(a.postMessage)&&!a.importScripts&&r&&"file:"!==r.protocol&&!h(N)?(i=N,a.addEventListener("message",A,!1)):i=I in m("script")?function(e){p.appendChild(m("script"))[I]=function(){p.removeChild(this),R(e)}}:function(e){setTimeout(P(e),0)}),e.exports={set:b,clear:w}},9519:(e,t,n)=>{"use strict";var r=n(8084);e.exports=!r((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))},9550:(e,t,n)=>{"use strict";var r=n(1608);e.exports=function(){var e=r(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}},9640:(e,t,n)=>{var r=n(8877),i=n(6605);n(6321),t.qg=r.parse,r.parseParams,r.parseFmtpConfig,r.parsePayloads,r.parseRemoteCandidates,r.parseImageAttributes,r.parseSimulcastStreamList},9668:(e,t,n)=>{"use strict";var r=n(4823),i=n(9519),s=n(3131),o=n(9550),a=n(8084),l=r.RegExp,c=l.prototype;i&&a((function(){var e=!0;try{l(".","d")}catch(a){e=!1}var t={},n="",r=e?"dgimsy":"gimsy",i=function(e,r){Object.defineProperty(t,e,{get:function(){return n+=r,!0}})},s={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};for(var o in e&&(s.hasIndices="d"),s)i(o,s[o]);return Object.getOwnPropertyDescriptor(c,"flags").get.call(t)!==r||n!==r}))&&s(c,"flags",{configurable:!0,get:o})},9704:(e,t,n)=>{"use strict";var r=n(9519),i=n(8084),s=n(2760);e.exports=!r&&!i((function(){return 7!==Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a}))}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r].call(s.exports,s,s.exports,n),s.exports}n.m=e,n.amdO={},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>o[e]=()=>r[e]));return o.default=()=>r,n.d(s,o),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+".97e2b624.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="video-streaming:";n.l=(r,i,s,o)=>{if(e[r])e[r].push(i);else{var a,l;if(void 0!==s)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+s){a=d;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+s),a.src=r),e[r]=[i];var h=(t,n)=>{a.onerror=a.onload=null,clearTimeout(p);var i=e[r];if(delete e[r],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach((e=>e(n))),t)return t(n)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=h.bind(null,a.onerror),a.onload=h.bind(null,a.onload),l&&document.head.appendChild(a)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{var e={792:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var s=new Promise(((n,r)=>i=e[t]=[n,r]));r.push(i[2]=s);var o=n.p+n.u(t),a=new Error;n.l(o,(r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var s=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+s+": "+o+")",a.name="ChunkLoadError",a.type=s,a.request=o,i[1](a)}}),"chunk-"+t,t)}};var t=(t,r)=>{var i,s,o=r[0],a=r[1],l=r[2],c=0;if(o.some((t=>0!==e[t]))){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(l)l(n)}for(t&&t(r);c<o.length;c++)s=o[c],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0},r=self.webpackChunkvideo_streaming=self.webpackChunkvideo_streaming||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e={};n.r(e),n.d(e,{fixNegotiationNeeded:()=>jb,shimAddTrackRemoveTrack:()=>Db,shimAddTrackRemoveTrackWithNative:()=>Ob,shimGetDisplayMedia:()=>xb,shimGetSendersWithDtmf:()=>Pb,shimGetStats:()=>Ab,shimGetUserMedia:()=>_b,shimMediaStream:()=>Ib,shimOnTrack:()=>Rb,shimPeerConnection:()=>Lb,shimSenderReceiverGetStats:()=>Nb});var t={};n.r(t),n.d(t,{shimAddTransceiver:()=>qb,shimCreateAnswer:()=>Gb,shimCreateOffer:()=>Kb,shimGetDisplayMedia:()=>Fb,shimGetParameters:()=>Wb,shimGetUserMedia:()=>Mb,shimOnTrack:()=>Ub,shimPeerConnection:()=>Vb,shimRTCDataChannel:()=>Hb,shimReceiverGetStats:()=>Bb,shimRemoveStream:()=>zb,shimSenderGetStats:()=>$b});var r={};n.r(r),n.d(r,{shimAudioContext:()=>rw,shimCallbacksAPI:()=>Qb,shimConstraints:()=>Zb,shimCreateOfferLegacy:()=>nw,shimGetUserMedia:()=>Xb,shimLocalStreamsAPI:()=>Jb,shimRTCIceServerUrls:()=>ew,shimRemoteStreamsAPI:()=>Yb,shimTrackEventTransceiver:()=>tw});var i={};n.r(i),n.d(i,{removeExtmapAllowMixed:()=>dw,shimAddIceCandidateNullOrEmpty:()=>hw,shimConnectionState:()=>uw,shimMaxMessageSize:()=>lw,shimParameterlessSetLocalDescription:()=>pw,shimRTCIceCandidate:()=>ow,shimRTCIceCandidateRelayProtocol:()=>aw,shimSendThrowTypeError:()=>cw});var s={};n.r(s),n.d(s,{hasBrowserEnv:()=>wk,hasStandardBrowserEnv:()=>kk,hasStandardBrowserWebWorkerEnv:()=>Ck,navigator:()=>Sk,origin:()=>Ek});n(7412);var o=n(5043),a=n.t(o,2),l=n(4391);const c="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBwgHBgkIBwgKCgkLDRYPDQwMDRsUFRAWIB0iIiAdHx8kKDQsJCYxJx8fLT0tMTU3Ojo6Iys/RD84QzQ5OjcBCgoKDQwNGg8PGjclHyU3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3N//AABEIAJQAlAMBIgACEQEDEQH/xAAcAAEAAQUBAQAAAAAAAAAAAAAAAQMEBQYHAgj/xABAEAABAgIIBAMDCwMDBQAAAAABAhEAAwQFEiExQVFhBiJCcRMyUgdiYxQjQ1NygYKRobHBo8LRFTPwFiXS4fH/xAAaAQEAAwEBAQAAAAAAAAAAAAAAAwQFBgEC/8QAJxEAAgICAgECBgMAAAAAAAAAAAECAwQREiExBUEiMjNRYYEjcbH/2gAMAwEAAhEDEQA/AOzXlRJItNeciNBEA+Vg3ofp7wIyss19n0+9A3vfatf1P8QBBZiCCUkuoZqOo2j05ckkWmvVkRp3iNOZm6/RtBsrOF9j0+9AAYBrgPI/R3hcxxsnzAYqO0Nc7Wf1kMwXZur6vaAF9o3i23mybSAZkgBgPKPT3g11mxv4b4bwxGNp8/rNoAFr3BI6mxUdRBy7uLRDWsm07wFzc1ls/q9oNcRZ3sf3QAGCWBA6Qek6mF3NiQfOBio7Q3tWn6vrNoYEHBs/q9oAXu4Um1haybTvEXAC42ekHEHUwa6zYfPw3x96JBvJd36vXtAD1A3v526+0S5BHqa45Aad4gXAdLf04jJmxvser3oAm5gwNkeUZg6naGSs387dXaAPM9p36/XtAZXs39KACrL84KtLOQ0hEu3X4f8AdvEQBDhgQSUk3KOKjodon1OGbzN0dom9ySRabmIwI23jyMm/A/T9qAJvdICQSfKnJQ1MRcwLmy9ysydO0LmLgs/M2JO20TfaN4tteciNBvAD1PcR5x6O0BeUteSOUZKGpgMm/B7veF17jl6gMVHbaAIusvaLP5s307RLtaBuI8w9G4jB8UcU1dwzQ5k+mzkLpTfN0ZCx4kzYDEbnIRx2uPaLxHWqiiVSv9PkX2ZdDJSQN1nmJ3Ddo+JTUSWFUpnfSsIYrsi7ltFgsamPApEg3JnoIfEKBL6do+ZZlKpNKL0qkz56jiZ01SyfvJiJUuWlVpKEg6gRG7vwTLF/J9PuS5ZtWwSNRDMZk+UHBY3j55qyuq0q2YF0KsaVKboE0lB7pNx/KOh8M+0ZFIWmjV/LRKKy3ymUGSdLQ6e4u7R9RsT8kc6JR7XZ0JxZPMbILWswdO0T1KBHMBekYJGogC7FKkkkXKfls5ffEBmDA2X5QcQd9olICU9Lczjlfr7we5zg/mzB07Q9T3g+ds/swvf3muOQGh3gCb7RFllDEZJGoiAXssHfye/3hcwABsnyjMHfaHqdyOsDq7QBIDvZSF332stoRCm6wTpZyG+8IAMBdZYDo9G8PvtPj8SIe7Fxko4qOkSc3DN5vh9oAZPaAI6/RtBsrP4PT70GL+UFRwTkoamDhgbRs4BeZOkALwdXxP1kcv8Aafx9SKspS6lqOZ4VISkfKaUPNJcOEI3bE5P946hqDcw5h9X2j5ZpUykVrW8+alKptJplJUUpe9SlKuH6gRHZLSLGPBSe2WsyYVTVTJ0wqmLLla1OpR3JvMVZRCg6SCNjHc+FuHKHw9V6JMqWhdKIBnUhuZas78gMAIxfHPCMqtqMum1fJSmsZYtEJDCeBkfe0P3dquy8cnRFxLiggEYhtjiIry49DK6YrDCKKYrJgeHRPZpxOtM1NR05RXKVfRCrFJxKSf2/LSOlbu9rq9e0fOsqZMkzUTpKyiZLUFIUMQRgY79UtYJrSqaLTpbDx5QWpIwRq24LxYrlvplK+GnyRes2dlsD9XDMhvwa+9AZNe/lf6TvDUvyuxXmD6e0SlcfivPX6toYG42Ww+HC9yLIB6k5IGohowd/L8TvADDBQl9+reEA58qQvW1kdIQAvcs1tuY5NtANyWX+G+XeDBgLLDJPp3g7u974/E7QBF1lVp2fm1J22ib7RLi21+jf5g7EG0xGCvRtEAZWSzvY9PvQBIANkXt0ajvHz/7MqvFI4sVNnB/kUta2OS3sD9zH0ACxd3fE/Wdo5LwFQTQuJOLLSWCKZ4aRoLcxX7FMQ3eC1i+WjerULUU3g8VC6azxFwTQK3nrpVHmqodKmF1qSm0iYdVJuv3BEa3N9ntayz8zSaHNG6lJ/gx0p4Wo92NHMxwLXacfkf3Tj/4xRpXC1dURJUuhmYgC9UlYX+gv/SOpWoWocjzRxUuCQQQRrHYfZhOVN4UlIWXEqfMShsr3v/OMFxjUcqm0ObT6OgClyU2lN9KkYvuBnGZ9lSCnhhS8Aukr/FgG/SJ6X8RXyV8BuJwVa/G2faF9oeprjlZ33hg2TYfDhczNcS5R6t4slEgNZTjYfl1ffaJIBtP+Ns+0MySbziv17QuuOFnD4cAFWbrYUbrrOm+8RHq8YLEvuHfeEAQ9wILglgrNR0MCGtXM2Pw+0C7l2Km5mwbbeAblY/Yf+YAMXHKCoi5OShqYjIG0WJa3mTp2gbLEF7L8zYvttE32jhba/Rtt4AajBsR6O0aRR6EaFxLxCshk0mkSpqD6gZSXP52o3cYJbDof+6MHXcpKKWJwHPMSArcj/wCxDf8AIWMZ/wAmizeDxTtQtRT2aWio8Hinag8ebGio8Hinahaj3Y0e1lNkhd6GNp9IueAaIqh8IVbLmA+IqT4ywei0Sr82Ii0Er5Sfk7keLyOMnujaZctMuWiXLFiWgBMsZ3a7RYx1vbKWW/CPSb7LX2sH+k7wyd7na1mNu0MlWrn87f2w6hgFNdo3+YtFInqIKQGF6BgncRAyud8Pid4Brmey/KM332hdzPf62/tgCQCXZImX55bREDZutlWF1nTfeIgCWDAWWANyfTuYjF3vteb4naJy8zg3BWajpC/MWW83w+0AHLg2gFDBWSNjENcBZLO9jNJ9XaJY+lybwn17wfO1dgF5q92AHqve1j8TtGPrqUV0O0kEmWX+yNDGQwJDM2Pw+0QpIIKSm1aFyT9INTHzOPKLR9QlwkpGoPB4qU6jmi0hUtyUYoVqIt3jNa09GzF8ltFR4PFN4PHh6VHg8U3iQ5UAASTcAIAylSSvEpRWUlSZYcgam6M/mTackXqGC9hFrVtGFFooSTZUb5ixkdIuRmCliMU+jcRo1Q4xMm+fOe0SLma5vKT9H3g1zNc72cz73aAe5g7+UH6TvDd7hda0PpiQhJe8l7ziv1bCIwa9mw+H3hfpeLyjJO8L7mFp8H+k7wBIJDsrw78894RAc4J8Tv07QgAXdTtaZ1AYNqN4DoZy/kfPvDADlLO4Tmk6wIN7m0/mbr7QBF1lV5CX5iMQdtom+0bhaa8ZAbbwD3EKAPSrJI0MRkA3K7hOYOvaAJF9ki8HyPn3gTconyg85zB2hmSeZ/N7/aGBBdiPKo4IGhgDHV9KSaDMmTB85KFoNgzxrCVhV6TG3IRJregzEylH5Ku5Kk9RHUDmP3jUadQqTVtJ8KbiXKVAXLEU8mtp7NDDsTXHZ6eDxREw5i+BmH0/rFUu6KpLYxluHZEucqbPW5EogDZ8xGBWpart8NY22oarn0KiqmLITOmG1YPSN94noi3Mr5U+MNb7ZkxatgBitrhk3+YgEWU2Xsk8pOJO+0U0TZUy2lPMEKZcseYK3GVxeKl5e0RaIvOSxoIvmUDcFPgPO2XaF9tutrhlZ33gOki4jyv0d4ahuV705k6wBDiykgmy/Ic332ic1u93nbp+zC98RaPmX6hoIX3Nc3lf6PvABRAa2VC66zp/mIj0HD2VBD4vmdYiAG4U79fq2gwHu2f6cSXBwFrMZAbbxZVhWVDqySJlMpCZY+jSb1TPuxMepOT0jxtJbZeN7oL9Pr3iFKSkFS1gDOYc9o0esuOZqgpFWUawCf8Adn3q+4A3fmY1esKyptYqJplKmzRkgq5R2SLo0KfTLZ9y6KNvqFcfl7Og1pxdVVBSUypvymcLkokFwg/awjDVdMrPjOlqTSVGjVTLPzsqUSPEPpJzOuQ0do1yoann11T00aRyo802Z6E699I69V1Bo9XUOXRKJLCJUsMBmdSd4+8iNOIuMO5/f7HxTK3Ke5dR/wBJlBFGKKOhISiz82lIYADKIp9Ck06jmVPS4xSc0nUR4p4IVLIuN7fp/iLmVME2UlWowjMktrs0YvT6NDp9EmVfSDJpALYomAXLH/MYtypDct5wYB4t+PuJvlVOFXUGY0qjKeZNSb1LvDA6D9+0a1Q65plDpkmkonKWqUoKCVF0q2MSw9DtsjzTS/Huev1yuD4uLb+51WoalEkil0xLzzeiWfo//f7Rm581MmUpSnLDAYmLSo61o9cVdKp1GPLMHMk4oVmk7iIpq/EnBIwSW+/OIY1cHx14E7XZ8e97MPxPUtLX/wB1qWcqTWksc/hm6en0kYFsnjB1Px/KLSq4o5lkXeLJSSEnUpxB/OOiNHPPaFwu3iVzV8sXX0mUnP3wP3/PvfxJVW/xXfplHJjbXu2r9o26g1jQqxl26FSZNIGYQsEq7jL74ut32t+n3Y4PLmzJUwTJS1y1jBaFFKh2IvjY6s44rigqSmeuXTZQuKZw5m2UM+7xZu9Isj3W9kNXqcH1NaOqsPLZAa+x6N4Ng17/ANSNcqXjKqqzKZMyYqiTibkTyBbOlrAjuxjYhnf9sjL7MZVlU63xmtM0YWRsW4vZLP0eJ/G0IKKesqTpZzG+8RHwfZhuJ67FT0NHgpBnzT80hfS2KjtHNaRPnUueqfSpqps1R5lqLmM7xvPVOr6ZLK7aZEtCAe4tfzGAIjocCmNdSl7sxMy2U7HH2R4MQRHqPJjQ2UtHRPZxNoAqtcqTMQaaVkzkPzNgm7Rv5jcRhHBihpgmoWuXNBcLQWIPcRufA9c8RUqskUVc0UuhJ/3ps0Xyw13NmToX+6MPNwpJytT6NbFy1pVtG+08ciD738RjKculmgTqPQVCXOnCymacJT4q3LYDWMtTBakK1BB/WLBoz4eC7PyaDxfw1RKuqWjzqFdMkrsrKzzTrTXk63Pozxq1T0JVOrWiUacfDlzZqUqVcbtP4jefaFOs0SiUd3tTTMLZsG/ujTaFMMim0ec/+3NSv8iDHQ4ilLHbb77MTJcY36S+x0uqqsNR1lOm1ddQaSHmUbKXMyUnY4EdshGVkpecgYm2Mc9f5gb8MIqURNqkp2BP/PzjBnJvt+TZikukZKKFKnSJEiZMpS5aJABtqmEBIG7xieMKXXFBqZdIqKRLnUhKhaCwVEIzIGZGn74RxasaxrCuJgm1pWE6k5hBUyB2Au/SJsTBlk9p6RFk5caOmuyrWKqIaxpX+nKtUTxleCdUvdFu8eEslIAwES8dTFcYpHOye5Nnp427gviufQ6VJq+nTTMoi1WJa1lzIUcL807ZRp7xCuZKgcw0R30Qug4yR902yqlyifQCbTcpCNbQxOsIsKjpJptTUGkzPnFzJCFKO7QjjZRabR1UZbSZo3GoH/UM5QABXLQotqzfxGBMIR0uL9GP9GDf9WX9nk4R5OEIRYRCy8qOiS6fW9Gok4qEuatlFBYs0dgoFCo1X0ZFGocpMqUnBI/cnMxEIxfVJPnFe2jT9PS4tlxNSFIUDgQYxoLpfNnhCM6BfmaD7QlqNb0eWfKijAjuVKf9hGpUgkSlEaGEI6nC+hE53L+tI7JQ1FdDo61YqlIJ7kCL+gDmWewhCOas9zfh5LtQeObe02oqBRJKKzossyp82bZmBJ5VPe7a9oQiXAk45EdEWak6ZbOePB4QjqznRCEIA7lw5LSKgq5KXSE0aWAB9kREIRxc/mZ1cPlR/9k=",u="https://whats-app-clone-backend-1wf4.onrender.com";function d(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=d(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}const h=function(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=d(e))&&(r&&(r+=" "),r+=t);return r};function p(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const r={};for(const i in e){const s=e[i];let o="",a=!0;for(let e=0;e<s.length;e+=1){const r=s[e];r&&(o+=(!0===a?"":" ")+t(r),a=!1,n&&n[r]&&(o+=" "+n[r]))}r[i]=o}return r}function f(e){const t=new URL(`https://mui.com/production-error/?code=${e}`);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((e=>t.searchParams.append("args[]",e))),`Minified MUI error #${e}; visit ${t} for the full message.`}function m(e){if("string"!==typeof e)throw new Error(f(7));return e.charAt(0).toUpperCase()+e.slice(1)}const g=m;function v(){return v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v.apply(null,arguments)}var y=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(r){}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){var t;return null==(t=e.parentNode)?void 0:t.removeChild(e)})),this.tags=[],this.ctr=0},e}(),b=Math.abs,w=String.fromCharCode,S=Object.assign;function k(e){return e.trim()}function C(e,t,n){return e.replace(t,n)}function E(e,t){return e.indexOf(t)}function T(e,t){return 0|e.charCodeAt(t)}function _(e,t,n){return e.slice(t,n)}function x(e){return e.length}function I(e){return e.length}function R(e,t){return t.push(e),e}var P=1,A=1,N=0,O=0,D=0,L="";function j(e,t,n,r,i,s,o){return{value:e,root:t,parent:n,type:r,props:i,children:s,line:P,column:A,length:o,return:""}}function M(e,t){return S(j("",null,null,"",null,null,0),e,{length:-e.length},t)}function F(){return D=O>0?T(L,--O):0,A--,10===D&&(A=1,P--),D}function U(){return D=O<N?T(L,O++):0,A++,10===D&&(A=1,P++),D}function V(){return T(L,O)}function $(){return O}function B(e,t){return _(L,e,t)}function z(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function H(e){return P=A=1,N=x(L=e),O=0,[]}function q(e){return L="",e}function W(e){return k(B(O-1,J(91===e?e+2:40===e?e+1:e)))}function K(e){for(;(D=V())&&D<33;)U();return z(e)>2||z(D)>3?"":" "}function G(e,t){for(;--t&&U()&&!(D<48||D>102||D>57&&D<65||D>70&&D<97););return B(e,$()+(t<6&&32==V()&&32==U()))}function J(e){for(;U();)switch(D){case e:return O;case 34:case 39:34!==e&&39!==e&&J(D);break;case 40:41===e&&J(e);break;case 92:U()}return O}function Y(e,t){for(;U()&&e+D!==57&&(e+D!==84||47!==V()););return"/*"+B(t,O-1)+"*"+w(47===e?e:U())}function Q(e){for(;!z(V());)U();return B(e,O)}var X="-ms-",Z="-moz-",ee="-webkit-",te="comm",ne="rule",re="decl",ie="@keyframes";function se(e,t){for(var n="",r=I(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function oe(e,t,n,r){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case re:return e.return=e.return||e.value;case te:return"";case ie:return e.return=e.value+"{"+se(e.children,r)+"}";case ne:e.value=e.props.join(",")}return x(n=se(e.children,r))?e.return=e.value+"{"+n+"}":""}function ae(e){return q(le("",null,null,null,[""],e=H(e),0,[0],e))}function le(e,t,n,r,i,s,o,a,l){for(var c=0,u=0,d=o,h=0,p=0,f=0,m=1,g=1,v=1,y=0,b="",S=i,k=s,_=r,I=b;g;)switch(f=y,y=U()){case 40:if(108!=f&&58==T(I,d-1)){-1!=E(I+=C(W(y),"&","&\f"),"&\f")&&(v=-1);break}case 34:case 39:case 91:I+=W(y);break;case 9:case 10:case 13:case 32:I+=K(f);break;case 92:I+=G($()-1,7);continue;case 47:switch(V()){case 42:case 47:R(ue(Y(U(),$()),t,n),l);break;default:I+="/"}break;case 123*m:a[c++]=x(I)*v;case 125*m:case 59:case 0:switch(y){case 0:case 125:g=0;case 59+u:-1==v&&(I=C(I,/\f/g,"")),p>0&&x(I)-d&&R(p>32?de(I+";",r,n,d-1):de(C(I," ","")+";",r,n,d-2),l);break;case 59:I+=";";default:if(R(_=ce(I,t,n,c,u,i,a,b,S=[],k=[],d),s),123===y)if(0===u)le(I,t,_,_,S,s,d,a,k);else switch(99===h&&110===T(I,3)?100:h){case 100:case 108:case 109:case 115:le(e,_,_,r&&R(ce(e,_,_,0,0,i,a,b,i,S=[],d),k),i,k,d,a,r?S:k);break;default:le(I,_,_,_,[""],k,0,a,k)}}c=u=p=0,m=v=1,b=I="",d=o;break;case 58:d=1+x(I),p=f;default:if(m<1)if(123==y)--m;else if(125==y&&0==m++&&125==F())continue;switch(I+=w(y),y*m){case 38:v=u>0?1:(I+="\f",-1);break;case 44:a[c++]=(x(I)-1)*v,v=1;break;case 64:45===V()&&(I+=W(U())),h=V(),u=d=x(b=I+=Q($())),y++;break;case 45:45===f&&2==x(I)&&(m=0)}}return s}function ce(e,t,n,r,i,s,o,a,l,c,u){for(var d=i-1,h=0===i?s:[""],p=I(h),f=0,m=0,g=0;f<r;++f)for(var v=0,y=_(e,d+1,d=b(m=o[f])),w=e;v<p;++v)(w=k(m>0?h[v]+" "+y:C(y,/&\f/g,h[v])))&&(l[g++]=w);return j(e,t,n,0===i?ne:a,l,c,u)}function ue(e,t,n){return j(e,t,n,te,w(D),_(e,2,-2),0)}function de(e,t,n,r){return j(e,t,n,re,_(e,0,r),_(e,r+1,-1),r)}var he=function(e,t,n){for(var r=0,i=0;r=i,i=V(),38===r&&12===i&&(t[n]=1),!z(i);)U();return B(e,O)},pe=function(e,t){return q(function(e,t){var n=-1,r=44;do{switch(z(r)){case 0:38===r&&12===V()&&(t[n]=1),e[n]+=he(O-1,t,n);break;case 2:e[n]+=W(r);break;case 4:if(44===r){e[++n]=58===V()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=w(r)}}while(r=U());return e}(H(e),t))},fe=new WeakMap,me=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||fe.get(n))&&!r){fe.set(e,!0);for(var i=[],s=pe(t,i),o=n.props,a=0,l=0;a<s.length;a++)for(var c=0;c<o.length;c++,l++)e.props[l]=i[a]?s[a].replace(/&\f/g,o[c]):o[c]+" "+s[a]}}},ge=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function ve(e,t){switch(function(e,t){return 45^T(e,0)?(((t<<2^T(e,0))<<2^T(e,1))<<2^T(e,2))<<2^T(e,3):0}(e,t)){case 5103:return ee+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return ee+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return ee+e+Z+e+X+e+e;case 6828:case 4268:return ee+e+X+e+e;case 6165:return ee+e+X+"flex-"+e+e;case 5187:return ee+e+C(e,/(\w+).+(:[^]+)/,ee+"box-$1$2"+X+"flex-$1$2")+e;case 5443:return ee+e+X+"flex-item-"+C(e,/flex-|-self/,"")+e;case 4675:return ee+e+X+"flex-line-pack"+C(e,/align-content|flex-|-self/,"")+e;case 5548:return ee+e+X+C(e,"shrink","negative")+e;case 5292:return ee+e+X+C(e,"basis","preferred-size")+e;case 6060:return ee+"box-"+C(e,"-grow","")+ee+e+X+C(e,"grow","positive")+e;case 4554:return ee+C(e,/([^-])(transform)/g,"$1"+ee+"$2")+e;case 6187:return C(C(C(e,/(zoom-|grab)/,ee+"$1"),/(image-set)/,ee+"$1"),e,"")+e;case 5495:case 3959:return C(e,/(image-set\([^]*)/,ee+"$1$`$1");case 4968:return C(C(e,/(.+:)(flex-)?(.*)/,ee+"box-pack:$3"+X+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+ee+e+e;case 4095:case 3583:case 4068:case 2532:return C(e,/(.+)-inline(.+)/,ee+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(x(e)-1-t>6)switch(T(e,t+1)){case 109:if(45!==T(e,t+4))break;case 102:return C(e,/(.+:)(.+)-([^]+)/,"$1"+ee+"$2-$3$1"+Z+(108==T(e,t+3)?"$3":"$2-$3"))+e;case 115:return~E(e,"stretch")?ve(C(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==T(e,t+1))break;case 6444:switch(T(e,x(e)-3-(~E(e,"!important")&&10))){case 107:return C(e,":",":"+ee)+e;case 101:return C(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+ee+(45===T(e,14)?"inline-":"")+"box$3$1"+ee+"$2$3$1"+X+"$2box$3")+e}break;case 5936:switch(T(e,t+11)){case 114:return ee+e+X+C(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return ee+e+X+C(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return ee+e+X+C(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return ee+e+X+e+e}return e}var ye=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case re:e.return=ve(e.value,e.length);break;case ie:return se([M(e,{value:C(e.value,"@","@"+ee)})],r);case ne:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return se([M(e,{props:[C(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return se([M(e,{props:[C(t,/:(plac\w+)/,":"+ee+"input-$1")]}),M(e,{props:[C(t,/:(plac\w+)/,":-moz-$1")]}),M(e,{props:[C(t,/:(plac\w+)/,X+"input-$1")]})],r)}return""}))}}],be=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var r,i,s=e.stylisPlugins||ye,o={},a=[];r=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)o[t[n]]=!0;a.push(e)}));var l,c,u=[oe,(c=function(e){l.insert(e)},function(e){e.root||(e=e.return)&&c(e)})],d=function(e){var t=I(e);return function(n,r,i,s){for(var o="",a=0;a<t;a++)o+=e[a](n,r,i,s)||"";return o}}([me,ge].concat(s,u));i=function(e,t,n,r){l=n,function(e){se(ae(e),d)}(e?e+"{"+t.styles+"}":t.styles),r&&(h.inserted[t.name]=!0)};var h={key:t,sheet:new y({key:t,container:r,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:i};return h.sheet.hydrate(a),h};var we={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function Se(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}var ke=/[A-Z]|^ms/g,Ce=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Ee=function(e){return 45===e.charCodeAt(1)},Te=function(e){return null!=e&&"boolean"!==typeof e},_e=Se((function(e){return Ee(e)?e:e.replace(ke,"-$&").toLowerCase()})),xe=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(Ce,(function(e,t,n){return Re={name:t,styles:n,next:Re},t}))}return 1===we[e]||Ee(e)||"number"!==typeof t||0===t?t:t+"px"};function Ie(e,t,n){if(null==n)return"";var r=n;if(void 0!==r.__emotion_styles)return r;switch(typeof n){case"boolean":return"";case"object":var i=n;if(1===i.anim)return Re={name:i.name,styles:i.styles,next:Re},i.name;var s=n;if(void 0!==s.styles){var o=s.next;if(void 0!==o)for(;void 0!==o;)Re={name:o.name,styles:o.styles,next:Re},o=o.next;return s.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=Ie(e,t,n[i])+";";else for(var s in n){var o=n[s];if("object"!==typeof o){var a=o;null!=t&&void 0!==t[a]?r+=s+"{"+t[a]+"}":Te(a)&&(r+=_e(s)+":"+xe(s,a)+";")}else if(!Array.isArray(o)||"string"!==typeof o[0]||null!=t&&void 0!==t[o[0]]){var l=Ie(e,t,o);switch(s){case"animation":case"animationName":r+=_e(s)+":"+l+";";break;default:r+=s+"{"+l+"}"}}else for(var c=0;c<o.length;c++)Te(o[c])&&(r+=_e(s)+":"+xe(s,o[c])+";")}return r}(e,t,n);case"function":if(void 0!==e){var a=Re,l=n(e);return Re=a,Ie(e,t,l)}}var c=n;if(null==t)return c;var u=t[c];return void 0!==u?u:c}var Re,Pe=/label:\s*([^\s;{]+)\s*(;|$)/g;function Ae(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,i="";Re=void 0;var s=e[0];null==s||void 0===s.raw?(r=!1,i+=Ie(n,t,s)):i+=s[0];for(var o=1;o<e.length;o++){if(i+=Ie(n,t,e[o]),r)i+=s[o]}Pe.lastIndex=0;for(var a,l="";null!==(a=Pe.exec(i));)l+="-"+a[1];var c=function(e){for(var t,n=0,r=0,i=e.length;i>=4;++r,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}(i)+l;return{name:c,styles:i,next:Re}}var Ne=!!a.useInsertionEffect&&a.useInsertionEffect,Oe=Ne||function(e){return e()},De=(Ne||o.useLayoutEffect,o.createContext("undefined"!==typeof HTMLElement?be({key:"css"}):null)),Le=(De.Provider,function(e){return(0,o.forwardRef)((function(t,n){var r=(0,o.useContext)(De);return e(t,r,n)}))}),je=o.createContext({});var Me=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)},Fe=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Ue=Se((function(e){return Fe.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),Ve=function(e){return"theme"!==e},$e=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?Ue:Ve},Be=function(e,t,n){var r;if(t){var i=t.shouldForwardProp;r=e.__emotion_forwardProp&&i?function(t){return e.__emotion_forwardProp(t)&&i(t)}:i}return"function"!==typeof r&&n&&(r=e.__emotion_forwardProp),r},ze=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;return Me(t,n,r),Oe((function(){return function(e,t,n){Me(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var i=t;do{e.insert(t===i?"."+r:"",i,e.sheet,!0),i=i.next}while(void 0!==i)}}(t,n,r)})),null},He=function e(t,n){var r,i,s=t.__emotion_real===t,a=s&&t.__emotion_base||t;void 0!==n&&(r=n.label,i=n.target);var l=Be(t,n,s),c=l||$e(a),u=!c("as");return function(){var d=arguments,h=s&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==r&&h.push("label:"+r+";"),null==d[0]||void 0===d[0].raw)h.push.apply(h,d);else{var p=d[0];h.push(p[0]);for(var f=d.length,m=1;m<f;m++)h.push(d[m],p[m])}var g=Le((function(e,t,n){var r=u&&e.as||a,s="",d=[],p=e;if(null==e.theme){for(var f in p={},e)p[f]=e[f];p.theme=o.useContext(je)}"string"===typeof e.className?s=function(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):n&&(r+=n+" ")})),r}(t.registered,d,e.className):null!=e.className&&(s=e.className+" ");var m=Ae(h.concat(d),t.registered,p);s+=t.key+"-"+m.name,void 0!==i&&(s+=" "+i);var g=u&&void 0===l?$e(r):c,v={};for(var y in e)u&&"as"===y||g(y)&&(v[y]=e[y]);return v.className=s,n&&(v.ref=n),o.createElement(o.Fragment,null,o.createElement(ze,{cache:t,serialized:m,isStringTag:"string"===typeof r}),o.createElement(r,v))}));return g.displayName=void 0!==r?r:"Styled("+("string"===typeof a?a:a.displayName||a.name||"Component")+")",g.defaultProps=t.defaultProps,g.__emotion_real=g,g.__emotion_base=a,g.__emotion_styles=h,g.__emotion_forwardProp=l,Object.defineProperty(g,"toString",{value:function(){return"."+i}}),g.withComponent=function(t,r){return e(t,v({},n,r,{shouldForwardProp:Be(g,r,!0)})).apply(void 0,h)},g}}.bind(null);["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){He[e]=He(e)}));const qe=[];function We(e){return qe[0]=e,Ae(qe)}var Ke=n(528);function Ge(e){if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Je(e){if(o.isValidElement(e)||(0,Ke.Hy)(e)||!Ge(e))return e;const t={};return Object.keys(e).forEach((n=>{t[n]=Je(e[n])})),t}function Ye(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0};const r=n.clone?{...e}:e;return Ge(e)&&Ge(t)&&Object.keys(t).forEach((i=>{o.isValidElement(t[i])||(0,Ke.Hy)(t[i])?r[i]=t[i]:Ge(t[i])&&Object.prototype.hasOwnProperty.call(e,i)&&Ge(e[i])?r[i]=Ye(e[i],t[i],n):n.clone?r[i]=Ge(t[i])?Je(t[i]):t[i]:r[i]=t[i]})),r}function Qe(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5,...i}=e,s=(e=>{const t=Object.keys(e).map((t=>({key:t,val:e[t]})))||[];return t.sort(((e,t)=>e.val-t.val)),t.reduce(((e,t)=>({...e,[t.key]:t.val})),{})})(t),o=Object.keys(s);function a(e){return`@media (min-width:${"number"===typeof t[e]?t[e]:e}${n})`}function l(e){return`@media (max-width:${("number"===typeof t[e]?t[e]:e)-r/100}${n})`}function c(e,i){const s=o.indexOf(i);return`@media (min-width:${"number"===typeof t[e]?t[e]:e}${n}) and (max-width:${(-1!==s&&"number"===typeof t[o[s]]?t[o[s]]:i)-r/100}${n})`}return{keys:o,values:s,up:a,down:l,between:c,only:function(e){return o.indexOf(e)+1<o.length?c(e,o[o.indexOf(e)+1]):a(e)},not:function(e){const t=o.indexOf(e);return 0===t?a(o[1]):t===o.length-1?l(o[t]):c(e,o[o.indexOf(e)+1]).replace("@media","@media not all and")},unit:n,...i}}const Xe={borderRadius:4},Ze={xs:0,sm:600,md:900,lg:1200,xl:1536},et={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${Ze[e]}px)`},tt={containerQueries:e=>({up:t=>{let n="number"===typeof t?t:Ze[t]||t;return"number"===typeof n&&(n=`${n}px`),e?`@container ${e} (min-width:${n})`:`@container (min-width:${n})`}})};function nt(e,t,n){const r=e.theme||{};if(Array.isArray(t)){const e=r.breakpoints||et;return t.reduce(((r,i,s)=>(r[e.up(e.keys[s])]=n(t[s]),r)),{})}if("object"===typeof t){const e=r.breakpoints||et;return Object.keys(t).reduce(((i,s)=>{if(function(e,t){return"@"===t||t.startsWith("@")&&(e.some((e=>t.startsWith(`@${e}`)))||!!t.match(/^@\d/))}(e.keys,s)){const e=function(e,t){const n=t.match(/^@([^/]+)?\/?(.+)?$/);if(!n)return null;const[,r,i]=n,s=Number.isNaN(+r)?r||0:+r;return e.containerQueries(i).up(s)}(r.containerQueries?r:tt,s);e&&(i[e]=n(t[s],s))}else if(Object.keys(e.values||Ze).includes(s)){i[e.up(s)]=n(t[s],s)}else{const e=s;i[e]=t[e]}return i}),{})}return n(t)}function rt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=e.keys?.reduce(((t,n)=>(t[e.up(n)]={},t)),{});return t||{}}function it(e,t){return e.reduce(((e,t)=>{const n=e[t];return(!n||0===Object.keys(n).length)&&delete e[t],e}),t)}function st(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||"string"!==typeof t)return null;if(e&&e.vars&&n){const n=`vars.${t}`.split(".").reduce(((e,t)=>e&&e[t]?e[t]:null),e);if(null!=n)return n}return t.split(".").reduce(((e,t)=>e&&null!=e[t]?e[t]:null),e)}function ot(e,t,n){let r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return r="function"===typeof e?e(n):Array.isArray(e)?e[n]||i:st(e,n)||i,t&&(r=t(r,i,e)),r}const at=function(e){const{prop:t,cssProperty:n=e.prop,themeKey:r,transform:i}=e,s=e=>{if(null==e[t])return null;const s=e[t],o=st(e.theme,r)||{};return nt(e,s,(e=>{let r=ot(o,i,e);return e===r&&"string"===typeof e&&(r=ot(o,i,`${t}${"default"===e?"":m(e)}`,e)),!1===n?r:{[n]:r}}))};return s.propTypes={},s.filterProps=[t],s};const lt=function(e,t){return t?Ye(e,t,{clone:!1}):e};const ct={m:"margin",p:"padding"},ut={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},dt={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},ht=function(e){const t={};return n=>(void 0===t[n]&&(t[n]=e(n)),t[n])}((e=>{if(e.length>2){if(!dt[e])return[e];e=dt[e]}const[t,n]=e.split(""),r=ct[t],i=ut[n]||"";return Array.isArray(i)?i.map((e=>r+e)):[r+i]})),pt=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],ft=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],mt=[...pt,...ft];function gt(e,t,n,r){const i=st(e,t,!0)??n;return"number"===typeof i||"string"===typeof i?e=>"string"===typeof e?e:"string"===typeof i?`calc(${e} * ${i})`:i*e:Array.isArray(i)?e=>{if("string"===typeof e)return e;const t=Math.abs(e);const n=i[t];return e>=0?n:"number"===typeof n?-n:`-${n}`}:"function"===typeof i?i:()=>{}}function vt(e){return gt(e,"spacing",8)}function yt(e,t){return"string"===typeof t||null==t?t:e(t)}function bt(e,t,n,r){if(!t.includes(n))return null;const i=function(e,t){return n=>e.reduce(((e,r)=>(e[r]=yt(t,n),e)),{})}(ht(n),r);return nt(e,e[n],i)}function wt(e,t){const n=vt(e.theme);return Object.keys(e).map((r=>bt(e,t,r,n))).reduce(lt,{})}function St(e){return wt(e,pt)}function kt(e){return wt(e,ft)}function Ct(e){return wt(e,mt)}St.propTypes={},St.filterProps=pt,kt.propTypes={},kt.filterProps=ft,Ct.propTypes={},Ct.filterProps=mt;function Et(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vt({spacing:e});if(e.mui)return e;const n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(0===n.length?[1]:n).map((e=>{const n=t(e);return"number"===typeof n?`${n}px`:n})).join(" ")};return n.mui=!0,n}const Tt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce(((e,t)=>(t.filterProps.forEach((n=>{e[n]=t})),e)),{}),i=e=>Object.keys(e).reduce(((t,n)=>r[n]?lt(t,r[n](e)):t),{});return i.propTypes={},i.filterProps=t.reduce(((e,t)=>e.concat(t.filterProps)),[]),i};function _t(e){return"number"!==typeof e?e:`${e}px solid`}function xt(e,t){return at({prop:e,themeKey:"borders",transform:t})}const It=xt("border",_t),Rt=xt("borderTop",_t),Pt=xt("borderRight",_t),At=xt("borderBottom",_t),Nt=xt("borderLeft",_t),Ot=xt("borderColor"),Dt=xt("borderTopColor"),Lt=xt("borderRightColor"),jt=xt("borderBottomColor"),Mt=xt("borderLeftColor"),Ft=xt("outline",_t),Ut=xt("outlineColor"),Vt=e=>{if(void 0!==e.borderRadius&&null!==e.borderRadius){const t=gt(e.theme,"shape.borderRadius",4),n=e=>({borderRadius:yt(t,e)});return nt(e,e.borderRadius,n)}return null};Vt.propTypes={},Vt.filterProps=["borderRadius"];Tt(It,Rt,Pt,At,Nt,Ot,Dt,Lt,jt,Mt,Vt,Ft,Ut);const $t=e=>{if(void 0!==e.gap&&null!==e.gap){const t=gt(e.theme,"spacing",8),n=e=>({gap:yt(t,e)});return nt(e,e.gap,n)}return null};$t.propTypes={},$t.filterProps=["gap"];const Bt=e=>{if(void 0!==e.columnGap&&null!==e.columnGap){const t=gt(e.theme,"spacing",8),n=e=>({columnGap:yt(t,e)});return nt(e,e.columnGap,n)}return null};Bt.propTypes={},Bt.filterProps=["columnGap"];const zt=e=>{if(void 0!==e.rowGap&&null!==e.rowGap){const t=gt(e.theme,"spacing",8),n=e=>({rowGap:yt(t,e)});return nt(e,e.rowGap,n)}return null};zt.propTypes={},zt.filterProps=["rowGap"];Tt($t,Bt,zt,at({prop:"gridColumn"}),at({prop:"gridRow"}),at({prop:"gridAutoFlow"}),at({prop:"gridAutoColumns"}),at({prop:"gridAutoRows"}),at({prop:"gridTemplateColumns"}),at({prop:"gridTemplateRows"}),at({prop:"gridTemplateAreas"}),at({prop:"gridArea"}));function Ht(e,t){return"grey"===t?t:e}Tt(at({prop:"color",themeKey:"palette",transform:Ht}),at({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Ht}),at({prop:"backgroundColor",themeKey:"palette",transform:Ht}));function qt(e){return e<=1&&0!==e?100*e+"%":e}const Wt=at({prop:"width",transform:qt}),Kt=e=>{if(void 0!==e.maxWidth&&null!==e.maxWidth){const t=t=>{const n=e.theme?.breakpoints?.values?.[t]||Ze[t];return n?"px"!==e.theme?.breakpoints?.unit?{maxWidth:`${n}${e.theme.breakpoints.unit}`}:{maxWidth:n}:{maxWidth:qt(t)}};return nt(e,e.maxWidth,t)}return null};Kt.filterProps=["maxWidth"];const Gt=at({prop:"minWidth",transform:qt}),Jt=at({prop:"height",transform:qt}),Yt=at({prop:"maxHeight",transform:qt}),Qt=at({prop:"minHeight",transform:qt}),Xt=(at({prop:"size",cssProperty:"width",transform:qt}),at({prop:"size",cssProperty:"height",transform:qt}),Tt(Wt,Kt,Gt,Jt,Yt,Qt,at({prop:"boxSizing"})),{border:{themeKey:"borders",transform:_t},borderTop:{themeKey:"borders",transform:_t},borderRight:{themeKey:"borders",transform:_t},borderBottom:{themeKey:"borders",transform:_t},borderLeft:{themeKey:"borders",transform:_t},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:_t},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Vt},color:{themeKey:"palette",transform:Ht},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Ht},backgroundColor:{themeKey:"palette",transform:Ht},p:{style:kt},pt:{style:kt},pr:{style:kt},pb:{style:kt},pl:{style:kt},px:{style:kt},py:{style:kt},padding:{style:kt},paddingTop:{style:kt},paddingRight:{style:kt},paddingBottom:{style:kt},paddingLeft:{style:kt},paddingX:{style:kt},paddingY:{style:kt},paddingInline:{style:kt},paddingInlineStart:{style:kt},paddingInlineEnd:{style:kt},paddingBlock:{style:kt},paddingBlockStart:{style:kt},paddingBlockEnd:{style:kt},m:{style:St},mt:{style:St},mr:{style:St},mb:{style:St},ml:{style:St},mx:{style:St},my:{style:St},margin:{style:St},marginTop:{style:St},marginRight:{style:St},marginBottom:{style:St},marginLeft:{style:St},marginX:{style:St},marginY:{style:St},marginInline:{style:St},marginInlineStart:{style:St},marginInlineEnd:{style:St},marginBlock:{style:St},marginBlockStart:{style:St},marginBlockEnd:{style:St},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:$t},rowGap:{style:zt},columnGap:{style:Bt},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:qt},maxWidth:{style:Kt},minWidth:{transform:qt},height:{transform:qt},maxHeight:{transform:qt},minHeight:{transform:qt},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}});const Zt=function(){function e(e,t,n,r){const i={[e]:t,theme:n},s=r[e];if(!s)return{[e]:t};const{cssProperty:o=e,themeKey:a,transform:l,style:c}=s;if(null==t)return null;if("typography"===a&&"inherit"===t)return{[e]:t};const u=st(n,a)||{};if(c)return c(i);return nt(i,t,(t=>{let n=ot(u,l,t);return t===n&&"string"===typeof t&&(n=ot(u,l,`${e}${"default"===t?"":m(t)}`,t)),!1===o?n:{[o]:n}}))}return function t(n){const{sx:r,theme:i={}}=n||{};if(!r)return null;const s=i.unstable_sxConfig??Xt;function o(n){let r=n;if("function"===typeof n)r=n(i);else if("object"!==typeof n)return n;if(!r)return null;const o=rt(i.breakpoints),a=Object.keys(o);let l=o;return Object.keys(r).forEach((n=>{const o=function(e,t){return"function"===typeof e?e(t):e}(r[n],i);if(null!==o&&void 0!==o)if("object"===typeof o)if(s[n])l=lt(l,e(n,o,i,s));else{const e=nt({theme:i},o,(e=>({[n]:e})));!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce(((e,t)=>e.concat(Object.keys(t))),[]),i=new Set(r);return t.every((e=>i.size===Object.keys(e).length))}(e,o)?l=lt(l,e):l[n]=t({sx:o,theme:i})}else l=lt(l,e(n,o,i,s))})),function(e,t){if(!e.containerQueries)return t;const n=Object.keys(t).filter((e=>e.startsWith("@container"))).sort(((e,t)=>{const n=/min-width:\s*([0-9.]+)/;return+(e.match(n)?.[1]||0)-+(t.match(n)?.[1]||0)}));return n.length?n.reduce(((e,n)=>{const r=t[n];return delete e[n],e[n]=r,e}),{...t}):t}(i,it(a,l))}return Array.isArray(r)?r.map(o):o(r)}}();Zt.filterProps=["sx"];const en=Zt;function tn(e,t){const n=this;if(n.vars){if(!n.colorSchemes?.[e]||"function"!==typeof n.getColorSchemeSelector)return{};let r=n.getColorSchemeSelector(e);return"&"===r?t:((r.includes("data-")||r.includes("."))&&(r=`*:where(${r.replace(/\s*&$/,"")}) &`),{[r]:t})}return n.palette.mode===e?t:{}}const nn=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{breakpoints:t={},palette:n={},spacing:r,shape:i={},...s}=e;let o=Ye({breakpoints:Qe(t),direction:"ltr",components:{},palette:{mode:"light",...n},spacing:Et(r),shape:{...Xe,...i}},s);o=function(e){const t=(e,t)=>e.replace("@media",t?`@container ${t}`:"@container");function n(n,r){n.up=function(){return t(e.breakpoints.up(...arguments),r)},n.down=function(){return t(e.breakpoints.down(...arguments),r)},n.between=function(){return t(e.breakpoints.between(...arguments),r)},n.only=function(){return t(e.breakpoints.only(...arguments),r)},n.not=function(){const n=t(e.breakpoints.not(...arguments),r);return n.includes("not all and")?n.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):n}}const r={},i=e=>(n(r,e),r);return n(i),{...e,containerQueries:i}}(o),o.applyStyles=tn;for(var a=arguments.length,l=new Array(a>1?a-1:0),c=1;c<a;c++)l[c-1]=arguments[c];return o=l.reduce(((e,t)=>Ye(e,t)),o),o.unstable_sxConfig={...Xt,...s?.unstable_sxConfig},o.unstable_sx=function(e){return en({sx:e,theme:this})},o};function rn(e){const{variants:t,...n}=e,r={variants:t,style:We(n),isProcessed:!0};return r.style===n||t&&t.forEach((e=>{"function"!==typeof e.style&&(e.style=We(e.style))})),r}const sn=nn();function on(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}function an(e){return e?(t,n)=>n[e]:null}function ln(e,t){const n="function"===typeof t?t(e):t;if(Array.isArray(n))return n.flatMap((t=>ln(e,t)));if(Array.isArray(n?.variants)){let t;if(n.isProcessed)t=n.style;else{const{variants:e,...r}=n;t=r}return cn(e,n.variants,[t])}return n?.isProcessed?n.style:n}function cn(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];e:for(let i=0;i<t.length;i+=1){const s=t[i];if("function"===typeof s.props){if(n??={...e,...e.ownerState,ownerState:e.ownerState},!s.props(n))continue}else for(const t in s.props)if(e[t]!==s.props[t]&&e.ownerState?.[t]!==s.props[t])continue e;"function"===typeof s.style?(n??={...e,...e.ownerState,ownerState:e.ownerState},r.push(s.style(n))):r.push(s.style)}return r}function un(e,t){}function dn(e){return e?e.charAt(0).toLowerCase()+e.slice(1):e}const hn=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MIN_SAFE_INTEGER,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.MAX_SAFE_INTEGER;return Math.max(t,Math.min(e,n))};function pn(e){return hn(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:1)}function fn(e){if(e.type)return e;if("#"===e.charAt(0))return fn(function(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&1===n[0].length&&(n=n.map((e=>e+e))),n?`rgb${4===n.length?"a":""}(${n.map(((e,t)=>t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3)).join(", ")})`:""}(e));const t=e.indexOf("("),n=e.substring(0,t);if(!["rgb","rgba","hsl","hsla","color"].includes(n))throw new Error(f(9,e));let r,i=e.substring(t+1,e.length-1);if("color"===n){if(i=i.split(" "),r=i.shift(),4===i.length&&"/"===i[3].charAt(0)&&(i[3]=i[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(r))throw new Error(f(10,r))}else i=i.split(",");return i=i.map((e=>parseFloat(e))),{type:n,values:i,colorSpace:r}}const mn=(e,t)=>{try{return(e=>{const t=fn(e);return t.values.slice(0,3).map(((e,n)=>t.type.includes("hsl")&&0!==n?`${e}%`:e)).join(" ")})(e)}catch(n){return e}};function gn(e){const{type:t,colorSpace:n}=e;let{values:r}=e;return t.includes("rgb")?r=r.map(((e,t)=>t<3?parseInt(e,10):e)):t.includes("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),r=t.includes("color")?`${n} ${r.join(" ")}`:`${r.join(", ")}`,`${t}(${r})`}function vn(e){e=fn(e);const{values:t}=e,n=t[0],r=t[1]/100,i=t[2]/100,s=r*Math.min(i,1-i),o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return i-s*Math.max(Math.min(t-3,9-t,1),-1)};let a="rgb";const l=[Math.round(255*o(0)),Math.round(255*o(8)),Math.round(255*o(4))];return"hsla"===e.type&&(a+="a",l.push(t[3])),gn({type:a,values:l})}function yn(e){let t="hsl"===(e=fn(e)).type||"hsla"===e.type?fn(vn(e)).values:e.values;return t=t.map((t=>("color"!==e.type&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4))),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function bn(e,t){return e=fn(e),t=pn(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]=`/${t}`:e.values[3]=t,gn(e)}function wn(e,t,n){try{return bn(e,t)}catch(r){return e}}function Sn(e,t){if(e=fn(e),t=pn(t),e.type.includes("hsl"))e.values[2]*=1-t;else if(e.type.includes("rgb")||e.type.includes("color"))for(let n=0;n<3;n+=1)e.values[n]*=1-t;return gn(e)}function kn(e,t,n){try{return Sn(e,t)}catch(r){return e}}function Cn(e,t){if(e=fn(e),t=pn(t),e.type.includes("hsl"))e.values[2]+=(100-e.values[2])*t;else if(e.type.includes("rgb"))for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(e.type.includes("color"))for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return gn(e)}function En(e,t,n){try{return Cn(e,t)}catch(r){return e}}function Tn(e,t,n){try{return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.15;return yn(e)>.5?Sn(e,t):Cn(e,t)}(e,t)}catch(r){return e}}const _n={black:"#000",white:"#fff"},xn={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},In={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},Rn={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},Pn={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},An={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},Nn={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},On={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"};function Dn(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:_n.white,default:_n.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const Ln=Dn();function jn(){return{text:{primary:_n.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:_n.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const Mn=jn();function Fn(e,t,n,r){const i=r.light||r,s=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=Cn(e.main,i):"dark"===t&&(e.dark=Sn(e.main,s)))}function Un(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:r=.2,...i}=e,s=e.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:An[200],light:An[50],dark:An[400]}:{main:An[700],light:An[400],dark:An[800]}}(t),o=e.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:In[200],light:In[50],dark:In[400]}:{main:In[500],light:In[300],dark:In[700]}}(t),a=e.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:Rn[500],light:Rn[300],dark:Rn[700]}:{main:Rn[700],light:Rn[400],dark:Rn[800]}}(t),l=e.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:Nn[400],light:Nn[300],dark:Nn[700]}:{main:Nn[700],light:Nn[500],dark:Nn[900]}}(t),c=e.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:On[400],light:On[300],dark:On[700]}:{main:On[800],light:On[500],dark:On[900]}}(t),u=e.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:Pn[400],light:Pn[300],dark:Pn[700]}:{main:"#ed6c02",light:Pn[500],dark:Pn[900]}}(t);function d(e){const t=function(e,t){const n=yn(e),r=yn(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}(e,Mn.text.primary)>=n?Mn.text.primary:Ln.text.primary;return t}const h=e=>{let{color:t,name:n,mainShade:i=500,lightShade:s=300,darkShade:o=700}=e;if(t={...t},!t.main&&t[i]&&(t.main=t[i]),!t.hasOwnProperty("main"))throw new Error(f(11,n?` (${n})`:"",i));if("string"!==typeof t.main)throw new Error(f(12,n?` (${n})`:"",JSON.stringify(t.main)));return Fn(t,"light",s,r),Fn(t,"dark",o,r),t.contrastText||(t.contrastText=d(t.main)),t};let p;"light"===t?p=Dn():"dark"===t&&(p=jn());return Ye({common:{..._n},mode:t,primary:h({color:s,name:"primary"}),secondary:h({color:o,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:h({color:a,name:"error"}),warning:h({color:u,name:"warning"}),info:h({color:l,name:"info"}),success:h({color:c,name:"success"}),grey:xn,contrastThreshold:n,getContrastText:d,augmentColor:h,tonalOffset:r,...p},i)}function Vn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";function t(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];if(!r.length)return"";const s=r[0];return"string"!==typeof s||s.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, ${s}`:`, var(--${e?`${e}-`:""}${s}${t(...r.slice(1))})`}return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return`var(--${e?`${e}-`:""}${n}${t(...i)})`}}function $n(e){const t={};return Object.entries(e).forEach((e=>{const[n,r]=e;"object"===typeof r&&(t[n]=`${r.fontStyle?`${r.fontStyle} `:""}${r.fontVariant?`${r.fontVariant} `:""}${r.fontWeight?`${r.fontWeight} `:""}${r.fontStretch?`${r.fontStretch} `:""}${r.fontSize||""}${r.lineHeight?`/${r.lineHeight} `:""}${r.fontFamily||""}`)})),t}const Bn=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=e;t.forEach(((e,s)=>{s===t.length-1?Array.isArray(i)?i[Number(e)]=n:i&&"object"===typeof i&&(i[e]=n):i&&"object"===typeof i&&(i[e]||(i[e]=r.includes(e)?[]:{}),i=i[e])}))};function zn(e,t){const{prefix:n,shouldSkipGeneratingVar:r}=t||{},i={},s={},o={};var a,l;return a=(e,t,a)=>{if(("string"===typeof t||"number"===typeof t)&&(!r||!r(e,t))){const r=`--${n?`${n}-`:""}${e.join("-")}`,l=((e,t)=>"number"===typeof t?["lineHeight","fontWeight","opacity","zIndex"].some((t=>e.includes(t)))||e[e.length-1].toLowerCase().includes("opacity")?t:`${t}px`:t)(e,t);Object.assign(i,{[r]:l}),Bn(s,e,`var(${r})`,a),Bn(o,e,`var(${r}, ${l})`,a)}},l=e=>"vars"===e[0],function e(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];Object.entries(t).forEach((t=>{let[i,s]=t;(!l||l&&!l([...n,i]))&&void 0!==s&&null!==s&&("object"===typeof s&&Object.keys(s).length>0?e(s,[...n,i],Array.isArray(s)?[...r,i]:r):a([...n,i],s,r))}))}(e),{css:i,vars:s,varsWithDefaults:o}}const Hn=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{getSelector:n=g,disableCssColorScheme:r,colorSchemeSelector:i}=t,{colorSchemes:s={},components:o,defaultColorScheme:a="light",...l}=e,{vars:c,css:u,varsWithDefaults:d}=zn(l,t);let h=d;const p={},{[a]:f,...m}=s;if(Object.entries(m||{}).forEach((e=>{let[n,r]=e;const{vars:i,css:s,varsWithDefaults:o}=zn(r,t);h=Ye(h,o),p[n]={css:s,vars:i}})),f){const{css:e,vars:n,varsWithDefaults:r}=zn(f,t);h=Ye(h,r),p[a]={css:e,vars:n}}function g(t,n){let r=i;if("class"===i&&(r=".%s"),"data"===i&&(r="[data-%s]"),i?.startsWith("data-")&&!i.includes("%s")&&(r=`[${i}="%s"]`),t){if("media"===r){if(e.defaultColorScheme===t)return":root";const r=s[t]?.palette?.mode||t;return{[`@media (prefers-color-scheme: ${r})`]:{":root":n}}}if(r)return e.defaultColorScheme===t?`:root, ${r.replace("%s",String(t))}`:r.replace("%s",String(t))}return":root"}return{vars:h,generateThemeVars:()=>{let e={...c};return Object.entries(p).forEach((t=>{let[,{vars:n}]=t;e=Ye(e,n)})),e},generateStyleSheets:()=>{const t=[],i=e.defaultColorScheme||"light";function o(e,n){Object.keys(n).length&&t.push("string"===typeof e?{[e]:{...n}}:e)}o(n(void 0,{...u}),u);const{[i]:a,...l}=p;if(a){const{css:e}=a,t=s[i]?.palette?.mode,l=!r&&t?{colorScheme:t,...e}:{...e};o(n(i,{...l}),l)}return Object.entries(l).forEach((e=>{let[t,{css:i}]=e;const a=s[t]?.palette?.mode,l=!r&&a?{colorScheme:a,...i}:{...i};o(n(t,{...l}),l)})),t}}};function qn(e,t){return{toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}},...t}}const Wn={textTransform:"uppercase"},Kn='"Roboto", "Helvetica", "Arial", sans-serif';function Gn(e,t){const{fontFamily:n=Kn,fontSize:r=14,fontWeightLight:i=300,fontWeightRegular:s=400,fontWeightMedium:o=500,fontWeightBold:a=700,htmlFontSize:l=16,allVariants:c,pxToRem:u,...d}="function"===typeof t?t(e):t;const h=r/14,p=u||(e=>e/l*h+"rem"),f=(e,t,r,i,s)=>{return{fontFamily:n,fontWeight:e,fontSize:p(t),lineHeight:r,...n===Kn?{letterSpacing:(o=i/t,Math.round(1e5*o)/1e5)+"em"}:{},...s,...c};var o},m={h1:f(i,96,1.167,-1.5),h2:f(i,60,1.2,-.5),h3:f(s,48,1.167,0),h4:f(s,34,1.235,.25),h5:f(s,24,1.334,0),h6:f(o,20,1.6,.15),subtitle1:f(s,16,1.75,.15),subtitle2:f(o,14,1.57,.1),body1:f(s,16,1.5,.15),body2:f(s,14,1.43,.15),button:f(o,14,1.75,.4,Wn),caption:f(s,12,1.66,.4),overline:f(s,12,2.66,1,Wn),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Ye({htmlFontSize:l,pxToRem:p,fontFamily:n,fontSize:r,fontWeightLight:i,fontWeightRegular:s,fontWeightMedium:o,fontWeightBold:a,...m},d,{clone:!1})}function Jn(){return[`${arguments.length<=0?void 0:arguments[0]}px ${arguments.length<=1?void 0:arguments[1]}px ${arguments.length<=2?void 0:arguments[2]}px ${arguments.length<=3?void 0:arguments[3]}px rgba(0,0,0,0.2)`,`${arguments.length<=4?void 0:arguments[4]}px ${arguments.length<=5?void 0:arguments[5]}px ${arguments.length<=6?void 0:arguments[6]}px ${arguments.length<=7?void 0:arguments[7]}px rgba(0,0,0,0.14)`,`${arguments.length<=8?void 0:arguments[8]}px ${arguments.length<=9?void 0:arguments[9]}px ${arguments.length<=10?void 0:arguments[10]}px ${arguments.length<=11?void 0:arguments[11]}px rgba(0,0,0,0.12)`].join(",")}const Yn=["none",Jn(0,2,1,-1,0,1,1,0,0,1,3,0),Jn(0,3,1,-2,0,2,2,0,0,1,5,0),Jn(0,3,3,-2,0,3,4,0,0,1,8,0),Jn(0,2,4,-1,0,4,5,0,0,1,10,0),Jn(0,3,5,-1,0,5,8,0,0,1,14,0),Jn(0,3,5,-1,0,6,10,0,0,1,18,0),Jn(0,4,5,-2,0,7,10,1,0,2,16,1),Jn(0,5,5,-3,0,8,10,1,0,3,14,2),Jn(0,5,6,-3,0,9,12,1,0,3,16,2),Jn(0,6,6,-3,0,10,14,1,0,4,18,3),Jn(0,6,7,-4,0,11,15,1,0,4,20,3),Jn(0,7,8,-4,0,12,17,2,0,5,22,4),Jn(0,7,8,-4,0,13,19,2,0,5,24,4),Jn(0,7,9,-4,0,14,21,2,0,5,26,4),Jn(0,8,9,-5,0,15,22,2,0,6,28,5),Jn(0,8,10,-5,0,16,24,2,0,6,30,5),Jn(0,8,11,-5,0,17,26,2,0,6,32,5),Jn(0,9,11,-5,0,18,28,2,0,7,34,6),Jn(0,9,12,-6,0,19,29,2,0,7,36,6),Jn(0,10,13,-6,0,20,31,3,0,8,38,7),Jn(0,10,13,-6,0,21,33,3,0,8,40,7),Jn(0,10,14,-6,0,22,35,3,0,8,42,7),Jn(0,11,14,-7,0,23,36,3,0,9,44,8),Jn(0,11,15,-7,0,24,38,3,0,9,46,8)],Qn={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Xn={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function Zn(e){return`${Math.round(e)}ms`}function er(e){if(!e)return 0;const t=e/36;return Math.min(Math.round(10*(4+15*t**.25+t/5)),3e3)}function tr(e){const t={...Qn,...e.easing},n={...Xn,...e.duration};return{getAutoHeightDuration:er,create:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{duration:i=n.standard,easing:s=t.easeInOut,delay:o=0,...a}=r;return(Array.isArray(e)?e:[e]).map((e=>`${e} ${"string"===typeof i?i:Zn(i)} ${s} ${"string"===typeof o?o:Zn(o)}`)).join(",")},...e,easing:t,duration:n}}const nr={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function rr(){const e={...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}};return function e(t){const n=Object.entries(t);for(let i=0;i<n.length;i++){const[s,o]=n[i];!Ge(r=o)&&"undefined"!==typeof r&&"string"!==typeof r&&"boolean"!==typeof r&&"number"!==typeof r&&!Array.isArray(r)||s.startsWith("unstable_")?delete t[s]:Ge(o)&&(t[s]={...o},e(t[s]))}var r}(e),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';\n\nconst theme = ${JSON.stringify(e,null,2)};\n\ntheme.breakpoints = createBreakpoints(theme.breakpoints || {});\ntheme.transitions = createTransitions(theme.transitions || {});\n\nexport default theme;`}function ir(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{breakpoints:t,mixins:n={},spacing:r,palette:i={},transitions:s={},typography:o={},shape:a,...l}=e;if(e.vars&&void 0===e.generateThemeVars)throw new Error(f(20));const c=Un(i),u=nn(e);let d=Ye(u,{mixins:qn(u.breakpoints,n),palette:c,shadows:Yn.slice(),typography:Gn(c,o),transitions:tr(s),zIndex:{...nr}});d=Ye(d,l);for(var h=arguments.length,p=new Array(h>1?h-1:0),m=1;m<h;m++)p[m-1]=arguments[m];return d=p.reduce(((e,t)=>Ye(e,t)),d),d.unstable_sxConfig={...Xt,...l?.unstable_sxConfig},d.unstable_sx=function(e){return en({sx:e,theme:this})},d.toRuntimeSource=rr,d}const sr=ir;function or(e){let t;return t=e<1?5.11916*e**2:4.5*Math.log(e+1)+2,Math.round(10*t)/1e3}const ar=[...Array(25)].map(((e,t)=>{if(0===t)return"none";const n=or(t);return`linear-gradient(rgba(255 255 255 / ${n}), rgba(255 255 255 / ${n}))`}));function lr(e){return{inputPlaceholder:"dark"===e?.5:.42,inputUnderline:"dark"===e?.7:.42,switchTrackDisabled:"dark"===e?.2:.12,switchTrack:"dark"===e?.3:.38}}function cr(e){return"dark"===e?ar:[]}function ur(e){return!!e[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||"palette"===e[0]&&!!e[1]?.match(/(mode|contrastThreshold|tonalOffset)/)}const dr=e=>[...[...Array(25)].map(((t,n)=>`--${e?`${e}-`:""}overlays-${n}`)),`--${e?`${e}-`:""}palette-AppBar-darkBg`,`--${e?`${e}-`:""}palette-AppBar-darkColor`],hr=e=>(t,n)=>{const r=e.rootSelector||":root",i=e.colorSchemeSelector;let s=i;if("class"===i&&(s=".%s"),"data"===i&&(s="[data-%s]"),i?.startsWith("data-")&&!i.includes("%s")&&(s=`[${i}="%s"]`),e.defaultColorScheme===t){if("dark"===t){const i={};return dr(e.cssVarPrefix).forEach((e=>{i[e]=n[e],delete n[e]})),"media"===s?{[r]:n,"@media (prefers-color-scheme: dark)":{[r]:i}}:s?{[s.replace("%s",t)]:i,[`${r}, ${s.replace("%s",t)}`]:n}:{[r]:{...n,...i}}}if(s&&"media"!==s)return`${r}, ${s.replace("%s",String(t))}`}else if(t){if("media"===s)return{[`@media (prefers-color-scheme: ${String(t)})`]:{[r]:n}};if(s)return s.replace("%s",String(t))}return r};function pr(e,t,n){!e[t]&&n&&(e[t]=n)}function fr(e){return"string"===typeof e&&e.startsWith("hsl")?vn(e):e}function mr(e,t){`${t}Channel`in e||(e[`${t}Channel`]=mn(fr(e[t])))}const gr=e=>{try{return e()}catch(t){}};function vr(e,t,n,r){if(!t)return;t=!0===t?{}:t;const i="dark"===r?"dark":"light";if(!n)return void(e[r]=function(e){const{palette:t={mode:"light"},opacity:n,overlays:r,...i}=e,s=Un(t);return{palette:s,opacity:{...lr(s.mode),...n},overlays:r||cr(s.mode),...i}}({...t,palette:{mode:i,...t?.palette}}));const{palette:s,...o}=sr({...n,palette:{mode:i,...t?.palette}});return e[r]={...t,palette:s,opacity:{...lr(i),...t?.opacity},overlays:t?.overlays||cr(i)},o}function yr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{colorSchemes:t={light:!0},defaultColorScheme:n,disableCssColorScheme:r=!1,cssVarPrefix:i="mui",shouldSkipGeneratingVar:s=ur,colorSchemeSelector:o=(t.light&&t.dark?"media":void 0),rootSelector:a=":root",...l}=e,c=Object.keys(t)[0],u=n||(t.light&&"light"!==c?"light":c),d=function(){return Vn(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"mui")}(i),{[u]:h,light:p,dark:m,...g}=t,v={...g};let y=h;if(("dark"===u&&!("dark"in t)||"light"===u&&!("light"in t))&&(y=!0),!y)throw new Error(f(21,u));const b=vr(v,y,l,u);p&&!v.light&&vr(v,p,void 0,"light"),m&&!v.dark&&vr(v,m,void 0,"dark");let w={defaultColorScheme:u,...b,cssVarPrefix:i,colorSchemeSelector:o,rootSelector:a,getCssVar:d,colorSchemes:v,font:{...$n(b.typography),...b.font},spacing:(S=l.spacing,"number"===typeof S?`${S}px`:"string"===typeof S||"function"===typeof S||Array.isArray(S)?S:"8px")};var S;Object.keys(w.colorSchemes).forEach((e=>{const t=w.colorSchemes[e].palette,n=e=>{const n=e.split("-"),r=n[1],i=n[2];return d(e,t[r][i])};var r;if("light"===t.mode&&(pr(t.common,"background","#fff"),pr(t.common,"onBackground","#000")),"dark"===t.mode&&(pr(t.common,"background","#000"),pr(t.common,"onBackground","#fff")),r=t,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"].forEach((e=>{r[e]||(r[e]={})})),"light"===t.mode){pr(t.Alert,"errorColor",kn(t.error.light,.6)),pr(t.Alert,"infoColor",kn(t.info.light,.6)),pr(t.Alert,"successColor",kn(t.success.light,.6)),pr(t.Alert,"warningColor",kn(t.warning.light,.6)),pr(t.Alert,"errorFilledBg",n("palette-error-main")),pr(t.Alert,"infoFilledBg",n("palette-info-main")),pr(t.Alert,"successFilledBg",n("palette-success-main")),pr(t.Alert,"warningFilledBg",n("palette-warning-main")),pr(t.Alert,"errorFilledColor",gr((()=>t.getContrastText(t.error.main)))),pr(t.Alert,"infoFilledColor",gr((()=>t.getContrastText(t.info.main)))),pr(t.Alert,"successFilledColor",gr((()=>t.getContrastText(t.success.main)))),pr(t.Alert,"warningFilledColor",gr((()=>t.getContrastText(t.warning.main)))),pr(t.Alert,"errorStandardBg",En(t.error.light,.9)),pr(t.Alert,"infoStandardBg",En(t.info.light,.9)),pr(t.Alert,"successStandardBg",En(t.success.light,.9)),pr(t.Alert,"warningStandardBg",En(t.warning.light,.9)),pr(t.Alert,"errorIconColor",n("palette-error-main")),pr(t.Alert,"infoIconColor",n("palette-info-main")),pr(t.Alert,"successIconColor",n("palette-success-main")),pr(t.Alert,"warningIconColor",n("palette-warning-main")),pr(t.AppBar,"defaultBg",n("palette-grey-100")),pr(t.Avatar,"defaultBg",n("palette-grey-400")),pr(t.Button,"inheritContainedBg",n("palette-grey-300")),pr(t.Button,"inheritContainedHoverBg",n("palette-grey-A100")),pr(t.Chip,"defaultBorder",n("palette-grey-400")),pr(t.Chip,"defaultAvatarColor",n("palette-grey-700")),pr(t.Chip,"defaultIconColor",n("palette-grey-700")),pr(t.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),pr(t.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),pr(t.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),pr(t.LinearProgress,"primaryBg",En(t.primary.main,.62)),pr(t.LinearProgress,"secondaryBg",En(t.secondary.main,.62)),pr(t.LinearProgress,"errorBg",En(t.error.main,.62)),pr(t.LinearProgress,"infoBg",En(t.info.main,.62)),pr(t.LinearProgress,"successBg",En(t.success.main,.62)),pr(t.LinearProgress,"warningBg",En(t.warning.main,.62)),pr(t.Skeleton,"bg",`rgba(${n("palette-text-primaryChannel")} / 0.11)`),pr(t.Slider,"primaryTrack",En(t.primary.main,.62)),pr(t.Slider,"secondaryTrack",En(t.secondary.main,.62)),pr(t.Slider,"errorTrack",En(t.error.main,.62)),pr(t.Slider,"infoTrack",En(t.info.main,.62)),pr(t.Slider,"successTrack",En(t.success.main,.62)),pr(t.Slider,"warningTrack",En(t.warning.main,.62));const e=Tn(t.background.default,.8);pr(t.SnackbarContent,"bg",e),pr(t.SnackbarContent,"color",gr((()=>t.getContrastText(e)))),pr(t.SpeedDialAction,"fabHoverBg",Tn(t.background.paper,.15)),pr(t.StepConnector,"border",n("palette-grey-400")),pr(t.StepContent,"border",n("palette-grey-400")),pr(t.Switch,"defaultColor",n("palette-common-white")),pr(t.Switch,"defaultDisabledColor",n("palette-grey-100")),pr(t.Switch,"primaryDisabledColor",En(t.primary.main,.62)),pr(t.Switch,"secondaryDisabledColor",En(t.secondary.main,.62)),pr(t.Switch,"errorDisabledColor",En(t.error.main,.62)),pr(t.Switch,"infoDisabledColor",En(t.info.main,.62)),pr(t.Switch,"successDisabledColor",En(t.success.main,.62)),pr(t.Switch,"warningDisabledColor",En(t.warning.main,.62)),pr(t.TableCell,"border",En(wn(t.divider,1),.88)),pr(t.Tooltip,"bg",wn(t.grey[700],.92))}if("dark"===t.mode){pr(t.Alert,"errorColor",En(t.error.light,.6)),pr(t.Alert,"infoColor",En(t.info.light,.6)),pr(t.Alert,"successColor",En(t.success.light,.6)),pr(t.Alert,"warningColor",En(t.warning.light,.6)),pr(t.Alert,"errorFilledBg",n("palette-error-dark")),pr(t.Alert,"infoFilledBg",n("palette-info-dark")),pr(t.Alert,"successFilledBg",n("palette-success-dark")),pr(t.Alert,"warningFilledBg",n("palette-warning-dark")),pr(t.Alert,"errorFilledColor",gr((()=>t.getContrastText(t.error.dark)))),pr(t.Alert,"infoFilledColor",gr((()=>t.getContrastText(t.info.dark)))),pr(t.Alert,"successFilledColor",gr((()=>t.getContrastText(t.success.dark)))),pr(t.Alert,"warningFilledColor",gr((()=>t.getContrastText(t.warning.dark)))),pr(t.Alert,"errorStandardBg",kn(t.error.light,.9)),pr(t.Alert,"infoStandardBg",kn(t.info.light,.9)),pr(t.Alert,"successStandardBg",kn(t.success.light,.9)),pr(t.Alert,"warningStandardBg",kn(t.warning.light,.9)),pr(t.Alert,"errorIconColor",n("palette-error-main")),pr(t.Alert,"infoIconColor",n("palette-info-main")),pr(t.Alert,"successIconColor",n("palette-success-main")),pr(t.Alert,"warningIconColor",n("palette-warning-main")),pr(t.AppBar,"defaultBg",n("palette-grey-900")),pr(t.AppBar,"darkBg",n("palette-background-paper")),pr(t.AppBar,"darkColor",n("palette-text-primary")),pr(t.Avatar,"defaultBg",n("palette-grey-600")),pr(t.Button,"inheritContainedBg",n("palette-grey-800")),pr(t.Button,"inheritContainedHoverBg",n("palette-grey-700")),pr(t.Chip,"defaultBorder",n("palette-grey-700")),pr(t.Chip,"defaultAvatarColor",n("palette-grey-300")),pr(t.Chip,"defaultIconColor",n("palette-grey-300")),pr(t.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),pr(t.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),pr(t.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),pr(t.LinearProgress,"primaryBg",kn(t.primary.main,.5)),pr(t.LinearProgress,"secondaryBg",kn(t.secondary.main,.5)),pr(t.LinearProgress,"errorBg",kn(t.error.main,.5)),pr(t.LinearProgress,"infoBg",kn(t.info.main,.5)),pr(t.LinearProgress,"successBg",kn(t.success.main,.5)),pr(t.LinearProgress,"warningBg",kn(t.warning.main,.5)),pr(t.Skeleton,"bg",`rgba(${n("palette-text-primaryChannel")} / 0.13)`),pr(t.Slider,"primaryTrack",kn(t.primary.main,.5)),pr(t.Slider,"secondaryTrack",kn(t.secondary.main,.5)),pr(t.Slider,"errorTrack",kn(t.error.main,.5)),pr(t.Slider,"infoTrack",kn(t.info.main,.5)),pr(t.Slider,"successTrack",kn(t.success.main,.5)),pr(t.Slider,"warningTrack",kn(t.warning.main,.5));const e=Tn(t.background.default,.98);pr(t.SnackbarContent,"bg",e),pr(t.SnackbarContent,"color",gr((()=>t.getContrastText(e)))),pr(t.SpeedDialAction,"fabHoverBg",Tn(t.background.paper,.15)),pr(t.StepConnector,"border",n("palette-grey-600")),pr(t.StepContent,"border",n("palette-grey-600")),pr(t.Switch,"defaultColor",n("palette-grey-300")),pr(t.Switch,"defaultDisabledColor",n("palette-grey-600")),pr(t.Switch,"primaryDisabledColor",kn(t.primary.main,.55)),pr(t.Switch,"secondaryDisabledColor",kn(t.secondary.main,.55)),pr(t.Switch,"errorDisabledColor",kn(t.error.main,.55)),pr(t.Switch,"infoDisabledColor",kn(t.info.main,.55)),pr(t.Switch,"successDisabledColor",kn(t.success.main,.55)),pr(t.Switch,"warningDisabledColor",kn(t.warning.main,.55)),pr(t.TableCell,"border",kn(wn(t.divider,1),.68)),pr(t.Tooltip,"bg",wn(t.grey[700],.92))}mr(t.background,"default"),mr(t.background,"paper"),mr(t.common,"background"),mr(t.common,"onBackground"),mr(t,"divider"),Object.keys(t).forEach((e=>{const n=t[e];"tonalOffset"!==e&&n&&"object"===typeof n&&(n.main&&pr(t[e],"mainChannel",mn(fr(n.main))),n.light&&pr(t[e],"lightChannel",mn(fr(n.light))),n.dark&&pr(t[e],"darkChannel",mn(fr(n.dark))),n.contrastText&&pr(t[e],"contrastTextChannel",mn(fr(n.contrastText))),"text"===e&&(mr(t[e],"primary"),mr(t[e],"secondary")),"action"===e&&(n.active&&mr(t[e],"active"),n.selected&&mr(t[e],"selected")))}))}));for(var k=arguments.length,C=new Array(k>1?k-1:0),E=1;E<k;E++)C[E-1]=arguments[E];w=C.reduce(((e,t)=>Ye(e,t)),w);const T={prefix:i,disableCssColorScheme:r,shouldSkipGeneratingVar:s,getSelector:hr(w)},{vars:_,generateThemeVars:x,generateStyleSheets:I}=Hn(w,T);return w.vars=_,Object.entries(w.colorSchemes[w.defaultColorScheme]).forEach((e=>{let[t,n]=e;w[t]=n})),w.generateThemeVars=x,w.generateStyleSheets=I,w.generateSpacing=function(){return Et(l.spacing,vt(this))},w.getColorSchemeSelector=function(e){return function(t){return"media"===e?`@media (prefers-color-scheme: ${t})`:e?e.startsWith("data-")&&!e.includes("%s")?`[${e}="${t}"] &`:"class"===e?`.${t} &`:"data"===e?`[data-${t}] &`:`${e.replace("%s",t)} &`:"&"}}(o),w.spacing=w.generateSpacing(),w.shouldSkipGeneratingVar=s,w.unstable_sxConfig={...Xt,...l?.unstable_sxConfig},w.unstable_sx=function(e){return en({sx:e,theme:this})},w.toRuntimeSource=rr,w}function br(e,t,n){e.colorSchemes&&n&&(e.colorSchemes[t]={...!0!==n&&n,palette:Un({...!0===n?{}:n.palette,mode:t})})}const wr=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{palette:t,cssVariables:n=!1,colorSchemes:r=(t?void 0:{light:!0}),defaultColorScheme:i=t?.mode,...s}=e,o=i||"light",a=r?.[o],l={...r,...t?{[o]:{..."boolean"!==typeof a&&a,palette:t}}:void 0};for(var c=arguments.length,u=new Array(c>1?c-1:0),d=1;d<c;d++)u[d-1]=arguments[d];if(!1===n){if(!("colorSchemes"in e))return sr(e,...u);let n=t;"palette"in e||l[o]&&(!0!==l[o]?n=l[o].palette:"dark"===o&&(n={mode:"dark"}));const r=sr({...e,palette:n},...u);return r.defaultColorScheme=o,r.colorSchemes=l,"light"===r.palette.mode&&(r.colorSchemes.light={...!0!==l.light&&l.light,palette:r.palette},br(r,"dark",l.dark)),"dark"===r.palette.mode&&(r.colorSchemes.dark={...!0!==l.dark&&l.dark,palette:r.palette},br(r,"light",l.light)),r}return t||"light"in l||"light"!==o||(l.light=!0),yr({...s,colorSchemes:l,defaultColorScheme:o,..."boolean"!==typeof n&&n},...u)}(),Sr=wr,kr="$$material";const Cr=function(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e},Er=e=>Cr(e)&&"classes"!==e,Tr=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:t,defaultTheme:n=sn,rootShouldForwardProp:r=on,slotShouldForwardProp:i=on}=e;function s(e){!function(e,t,n){e.theme=function(e){for(const t in e)return!1;return!0}(e.theme)?n:e.theme[t]||e.theme}(e,t,n)}return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}(e,(e=>e.filter((e=>e!==en))));const{name:n,slot:o,skipVariantsResolver:a,skipSx:l,overridesResolver:c=an(dn(o)),...u}=t,d=void 0!==a?a:o&&"Root"!==o&&"root"!==o||!1,h=l||!1;let p=on;"Root"===o||"root"===o?p=r:o?p=i:function(e){return"string"===typeof e&&e.charCodeAt(0)>96}(e)&&(p=void 0);const f=function(e,t){return He(e,t)}(e,{shouldForwardProp:p,label:un(n,o),...u}),m=e=>{if("function"===typeof e&&e.__emotion_real!==e)return function(t){return ln(t,e)};if(Ge(e)){const t=rn(e);return t.variants?function(e){return ln(e,t)}:t.style}return e},g=function(){const t=[];for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];const a=i.map(m),l=[];if(t.push(s),n&&c&&l.push((function(e){const t=e.theme,r=t.components?.[n]?.styleOverrides;if(!r)return null;const i={};for(const n in r)i[n]=ln(e,r[n]);return c(e,i)})),n&&!d&&l.push((function(e){const t=e.theme,r=t?.components?.[n]?.variants;return r?cn(e,r):null})),h||l.push(en),Array.isArray(a[0])){const e=a.shift(),n=new Array(t.length).fill(""),r=new Array(l.length).fill("");let i;i=[...n,...e,...r],i.raw=[...n,...e.raw,...r],t.unshift(i)}const u=[...t,...a,...l],p=f(...u);return e.muiName&&(p.muiName=e.muiName),p};return f.withConfig&&(g.withConfig=f.withConfig),g}}({themeId:kr,defaultTheme:Sr,rootShouldForwardProp:Er}),_r=Tr,xr={theme:void 0};const Ir=function(e){let t,n;return function(r){let i=t;return void 0!==i&&r.theme===n||(xr.theme=r.theme,i=rn(e(xr)),t=i,n=r.theme),i}};function Rr(e,t){const n={...t};for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)){const i=r;if("components"===i||"slots"===i)n[i]={...e[i],...n[i]};else if("componentsProps"===i||"slotProps"===i){const r=e[i],s=t[i];if(s)if(r){n[i]={...s};for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e)){const t=e;n[i][t]=Rr(r[t],s[t])}}else n[i]=s;else n[i]=r||{}}else void 0===n[i]&&(n[i]=e[i])}return n}var Pr=n(579);const Ar=o.createContext(void 0);function Nr(e){let{props:t,name:n}=e;return function(e){const{theme:t,name:n,props:r}=e;if(!t||!t.components||!t.components[n])return r;const i=t.components[n];return i.defaultProps?Rr(i.defaultProps,r):i.styleOverrides||i.variants?r:Rr(i,r)}({props:t,name:n,theme:{components:o.useContext(Ar)}})}function Or(e){return Nr(e)}const Dr=e=>e,Lr=(()=>{let e=Dr;return{configure(t){e=t},generate:t=>e(t),reset(){e=Dr}}})(),jr={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Mr(e,t){const n=jr[t];return n?`${arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui"}-${n}`:`${Lr.generate(e)}-${t}`}function Fr(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const r={};return t.forEach((t=>{r[t]=Mr(e,t,n)})),r}function Ur(e){return Mr("MuiSvgIcon",e)}Fr("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const Vr=_r("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"inherit"!==n.color&&t[`color${g(n.color)}`],t[`fontSize${g(n.fontSize)}`]]}})(Ir((e=>{let{theme:t}=e;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:t.transitions?.create?.("fill",{duration:(t.vars??t).transitions?.duration?.shorter}),variants:[{props:e=>!e.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:t.typography?.pxToRem?.(20)||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:t.typography?.pxToRem?.(24)||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:t.typography?.pxToRem?.(35)||"2.1875rem"}},...Object.entries((t.vars??t).palette).filter((e=>{let[,t]=e;return t&&t.main})).map((e=>{let[n]=e;return{props:{color:n},style:{color:(t.vars??t).palette?.[n]?.main}}})),{props:{color:"action"},style:{color:(t.vars??t).palette?.action?.active}},{props:{color:"disabled"},style:{color:(t.vars??t).palette?.action?.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}}))),$r=o.forwardRef((function(e,t){const n=Or({props:e,name:"MuiSvgIcon"}),{children:r,className:i,color:s="inherit",component:a="svg",fontSize:l="medium",htmlColor:c,inheritViewBox:u=!1,titleAccess:d,viewBox:f="0 0 24 24",...m}=n,v=o.isValidElement(r)&&"svg"===r.type,y={...n,color:s,component:a,fontSize:l,instanceFontSize:e.fontSize,inheritViewBox:u,viewBox:f,hasSvgAsChild:v},b={};u||(b.viewBox=f);const w=(e=>{const{color:t,fontSize:n,classes:r}=e;return p({root:["root","inherit"!==t&&`color${g(t)}`,`fontSize${g(n)}`]},Ur,r)})(y);return(0,Pr.jsxs)(Vr,{as:a,className:h(w.root,i),focusable:"false",color:c,"aria-hidden":!d||void 0,role:d?"img":void 0,ref:t,...b,...m,...v&&r.props,ownerState:y,children:[v?r.props.children:r,d?(0,Pr.jsx)("title",{children:d}):null]})}));$r.muiName="SvgIcon";const Br=$r;function zr(e,t){function n(n,r){return(0,Pr.jsx)(Br,{"data-testid":`${t}Icon`,ref:r,...n,children:e})}return n.muiName=Br.muiName,o.memo(o.forwardRef(n))}const Hr=zr((0,Pr.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search"),qr=zr((0,Pr.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"MoreVert"),Wr=zr((0,Pr.jsx)("path",{d:"M21.99 4c0-1.1-.89-2-1.99-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4zM17 11h-4v4h-2v-4H7V9h4V5h2v4h4z"}),"AddComment"),Kr=zr((0,Pr.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),Gr=zr((0,Pr.jsx)("path",{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m-9-2V7H4v3H1v2h3v3h2v-3h3v-2zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"PersonAdd"),Jr=e=>{let{isOpen:t,onClose:n,onAddUser:r}=e;const[i,s]=(0,o.useState)(""),[a,l]=(0,o.useState)(""),[c,u]=(0,o.useState)(!1),[d,h]=(0,o.useState)("");if(!t)return null;return(0,Pr.jsx)("div",{className:"popup-overlay",children:(0,Pr.jsxs)("div",{className:"popup-container",children:[(0,Pr.jsxs)("div",{className:"popup-header",children:[(0,Pr.jsxs)("h2",{className:"popup-title",children:[(0,Pr.jsx)(Gr,{className:"popup-icon"})," Add New Contact"]}),(0,Pr.jsx)("button",{onClick:n,className:"close-button",children:(0,Pr.jsx)(Kr,{})})]}),(0,Pr.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),h(""),!i.trim()||!a.trim())return void h("Please fill in all fields");if(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i)){u(!0);try{await r({email:i,name:a}),s(""),l(""),n()}catch(d){h(d.message||"Failed to add user. Please try again.")}finally{u(!1)}}else h("Please enter a valid email address")},children:[(0,Pr.jsxs)("div",{className:"form-fields",children:[(0,Pr.jsxs)("div",{className:"form-field",children:[(0,Pr.jsx)("label",{htmlFor:"name",className:"field-label",children:"Name"}),(0,Pr.jsx)("input",{type:"text",id:"name",value:a,onChange:e=>l(e.target.value),placeholder:"Enter contact name",className:"text-input"})]}),(0,Pr.jsxs)("div",{className:"form-field",children:[(0,Pr.jsx)("label",{htmlFor:"email",className:"field-label",children:"Email Address"}),(0,Pr.jsx)("input",{type:"email",id:"email",value:i,onChange:e=>s(e.target.value),placeholder:"Enter email address",className:"text-input"})]}),d&&(0,Pr.jsx)("div",{className:"error-message",children:d})]}),(0,Pr.jsxs)("div",{className:"form-buttons",children:[(0,Pr.jsx)("button",{type:"button",onClick:n,className:"cancel-button",children:"Cancel"}),(0,Pr.jsx)("button",{type:"submit",disabled:c,className:"submit-button "+(c?"button-loading":""),children:c?(0,Pr.jsxs)(Pr.Fragment,{children:[(0,Pr.jsxs)("svg",{className:"loading-spinner",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,Pr.jsx)("circle",{className:"spinner-track",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Pr.jsx)("path",{className:"spinner-path",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Adding..."]}):"Add Contact"})]})]})]})})};const Yr=o.createContext({});function Qr(e){return Mr("MuiList",e)}Fr("MuiList",["root","padding","dense","subheader"]);const Xr=_r("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disablePadding&&t.padding,n.dense&&t.dense,n.subheader&&t.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:e=>{let{ownerState:t}=e;return!t.disablePadding},style:{paddingTop:8,paddingBottom:8}},{props:e=>{let{ownerState:t}=e;return t.subheader},style:{paddingTop:0}}]}),Zr=o.forwardRef((function(e,t){const n=Or({props:e,name:"MuiList"}),{children:r,className:i,component:s="ul",dense:a=!1,disablePadding:l=!1,subheader:c,...u}=n,d=o.useMemo((()=>({dense:a})),[a]),f={...n,component:s,dense:a,disablePadding:l},m=(e=>{const{classes:t,disablePadding:n,dense:r,subheader:i}=e;return p({root:["root",!n&&"padding",r&&"dense",i&&"subheader"]},Qr,t)})(f);return(0,Pr.jsx)(Yr.Provider,{value:d,children:(0,Pr.jsxs)(Xr,{as:s,className:h(m.root,i),ref:t,ownerState:f,...u,children:[c,r]})})})),ei=Zr;const ti=function(e){return"string"===typeof e};const ni=function(e,t){return o.isValidElement(e)&&-1!==t.indexOf(e.type.muiName??e.type?._payload?.value?.muiName)};function ri(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function ii(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return o.useMemo((()=>t.every((e=>null==e))?null:e=>{t.forEach((t=>{ri(t,e)}))}),t)}const si=ii;function oi(e){return Mr("MuiListItem",e)}Fr("MuiListItem",["root","container","dense","alignItemsFlexStart","divider","gutters","padding","secondaryAction"]);const ai=Fr("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]);function li(e){return Mr("MuiListItemSecondaryAction",e)}Fr("MuiListItemSecondaryAction",["root","disableGutters"]);const ci=_r("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.disableGutters&&t.disableGutters]}})({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)",variants:[{props:e=>{let{ownerState:t}=e;return t.disableGutters},style:{right:0}}]}),ui=o.forwardRef((function(e,t){const n=Or({props:e,name:"MuiListItemSecondaryAction"}),{className:r,...i}=n,s=o.useContext(Yr),a={...n,disableGutters:s.disableGutters},l=(e=>{const{disableGutters:t,classes:n}=e;return p({root:["root",t&&"disableGutters"]},li,n)})(a);return(0,Pr.jsx)(ci,{className:h(l.root,r),ownerState:a,ref:t,...i})}));ui.muiName="ListItemSecondaryAction";const di=ui,hi=_r("div",{name:"MuiListItem",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,"flex-start"===n.alignItems&&t.alignItemsFlexStart,n.divider&&t.divider,!n.disableGutters&&t.gutters,!n.disablePadding&&t.padding,n.hasSecondaryAction&&t.secondaryAction]}})(Ir((e=>{let{theme:t}=e;return{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left",variants:[{props:e=>{let{ownerState:t}=e;return!t.disablePadding},style:{paddingTop:8,paddingBottom:8}},{props:e=>{let{ownerState:t}=e;return!t.disablePadding&&t.dense},style:{paddingTop:4,paddingBottom:4}},{props:e=>{let{ownerState:t}=e;return!t.disablePadding&&!t.disableGutters},style:{paddingLeft:16,paddingRight:16}},{props:e=>{let{ownerState:t}=e;return!t.disablePadding&&!!t.secondaryAction},style:{paddingRight:48}},{props:e=>{let{ownerState:t}=e;return!!t.secondaryAction},style:{[`& > .${ai.root}`]:{paddingRight:48}}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:e=>{let{ownerState:t}=e;return t.divider},style:{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"}},{props:e=>{let{ownerState:t}=e;return t.button},style:{transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}}},{props:e=>{let{ownerState:t}=e;return t.hasSecondaryAction},style:{paddingRight:48}}]}}))),pi=_r("li",{name:"MuiListItem",slot:"Container",overridesResolver:(e,t)=>t.container})({position:"relative"}),fi=o.forwardRef((function(e,t){const n=Or({props:e,name:"MuiListItem"}),{alignItems:r="center",children:i,className:s,component:a,components:l={},componentsProps:c={},ContainerComponent:u="li",ContainerProps:{className:d,...f}={},dense:m=!1,disableGutters:g=!1,disablePadding:v=!1,divider:y=!1,secondaryAction:b,slotProps:w={},slots:S={},...k}=n,C=o.useContext(Yr),E=o.useMemo((()=>({dense:m||C.dense||!1,alignItems:r,disableGutters:g})),[r,C.dense,m,g]),T=o.useRef(null),_=o.Children.toArray(i),x=_.length&&ni(_[_.length-1],["ListItemSecondaryAction"]),I={...n,alignItems:r,dense:E.dense,disableGutters:g,disablePadding:v,divider:y,hasSecondaryAction:x},R=(e=>{const{alignItems:t,classes:n,dense:r,disableGutters:i,disablePadding:s,divider:o,hasSecondaryAction:a}=e;return p({root:["root",r&&"dense",!i&&"gutters",!s&&"padding",o&&"divider","flex-start"===t&&"alignItemsFlexStart",a&&"secondaryAction"],container:["container"]},oi,n)})(I),P=si(T,t),A=S.root||l.Root||hi,N=w.root||c.root||{},O={className:h(R.root,N.className,s),...k};let D=a||"li";return x?(D=O.component||a?D:"div","li"===u&&("li"===D?D="div":"li"===O.component&&(O.component="div")),(0,Pr.jsx)(Yr.Provider,{value:E,children:(0,Pr.jsxs)(pi,{as:u,className:h(R.container,d),ref:P,ownerState:I,...f,children:[(0,Pr.jsx)(A,{...N,...!ti(A)&&{as:D,ownerState:{...I,...N.ownerState}},...O,children:_}),_.pop()]})})):(0,Pr.jsx)(Yr.Provider,{value:E,children:(0,Pr.jsxs)(A,{...N,as:D,ref:P,...!ti(A)&&{ownerState:{...I,...N.ownerState}},...O,children:[_,b&&(0,Pr.jsx)(di,{children:b})]})})})),mi=fi;function gi(e){return Mr("MuiTypography",e)}const vi=Fr("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);function yi(e){const{sx:t,...n}=e,{systemProps:r,otherProps:i}=(e=>{const t={systemProps:{},otherProps:{}},n=e?.theme?.unstable_sxConfig??Xt;return Object.keys(e).forEach((r=>{n[r]?t.systemProps[r]=e[r]:t.otherProps[r]=e[r]})),t})(n);let s;return s=Array.isArray(t)?[r,...t]:"function"===typeof t?function(){const e=t(...arguments);return Ge(e)?{...r,...e}:r}:{...r,...t},{...i,sx:s}}function bi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t=>{let[,n]=t;return n&&function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!function(e){return"string"===typeof e.main}(e))return!1;for(const n of t)if(!e.hasOwnProperty(n)||"string"!==typeof e[n])return!1;return!0}(n,e)}}const wi={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},Si=yi,ki=_r("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.variant&&t[n.variant],"inherit"!==n.align&&t[`align${g(n.align)}`],n.noWrap&&t.noWrap,n.gutterBottom&&t.gutterBottom,n.paragraph&&t.paragraph]}})(Ir((e=>{let{theme:t}=e;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(t.typography).filter((e=>{let[t,n]=e;return"inherit"!==t&&n&&"object"===typeof n})).map((e=>{let[t,n]=e;return{props:{variant:t},style:n}})),...Object.entries(t.palette).filter(bi()).map((e=>{let[n]=e;return{props:{color:n},style:{color:(t.vars||t).palette[n].main}}})),...Object.entries(t.palette?.text||{}).filter((e=>{let[,t]=e;return"string"===typeof t})).map((e=>{let[n]=e;return{props:{color:`text${g(n)}`},style:{color:(t.vars||t).palette.text[n]}}})),{props:e=>{let{ownerState:t}=e;return"inherit"!==t.align},style:{textAlign:"var(--Typography-textAlign)"}},{props:e=>{let{ownerState:t}=e;return t.noWrap},style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:e=>{let{ownerState:t}=e;return t.gutterBottom},style:{marginBottom:"0.35em"}},{props:e=>{let{ownerState:t}=e;return t.paragraph},style:{marginBottom:16}}]}}))),Ci={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},Ei=o.forwardRef((function(e,t){const{color:n,...r}=Or({props:e,name:"MuiTypography"}),i=Si({...r,...!wi[n]&&{color:n}}),{align:s="inherit",className:o,component:a,gutterBottom:l=!1,noWrap:c=!1,paragraph:u=!1,variant:d="body1",variantMapping:f=Ci,...m}=i,v={...i,align:s,color:n,className:o,component:a,gutterBottom:l,noWrap:c,paragraph:u,variant:d,variantMapping:f},y=a||(u?"p":f[d]||Ci[d])||"span",b=(e=>{const{align:t,gutterBottom:n,noWrap:r,paragraph:i,variant:s,classes:o}=e;return p({root:["root",s,"inherit"!==e.align&&`align${g(t)}`,n&&"gutterBottom",r&&"noWrap",i&&"paragraph"]},gi,o)})(v);return(0,Pr.jsx)(ki,{as:y,ref:t,className:h(b.root,o),...m,ownerState:v,style:{..."inherit"!==s&&{"--Typography-textAlign":s},...m.style}})})),Ti=Ei;function _i(e){return Mr("MuiListItemText",e)}const xi=Fr("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);const Ii=function(e){return"string"===typeof e};const Ri=function(e,t,n){return void 0===e||Ii(e)?t:{...t,ownerState:{...t.ownerState,...n}}};const Pi=function(e,t,n){return"function"===typeof e?e(t,n):e};const Ai=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(void 0===e)return{};const n={};return Object.keys(e).filter((n=>n.match(/^on[A-Z]/)&&"function"===typeof e[n]&&!t.includes(n))).forEach((t=>{n[t]=e[t]})),n};const Ni=function(e){if(void 0===e)return{};const t={};return Object.keys(e).filter((t=>!(t.match(/^on[A-Z]/)&&"function"===typeof e[t]))).forEach((n=>{t[n]=e[n]})),t};const Oi=function(e){const{getSlotProps:t,additionalProps:n,externalSlotProps:r,externalForwardedProps:i,className:s}=e;if(!t){const e=h(n?.className,s,i?.className,r?.className),t={...n?.style,...i?.style,...r?.style},o={...n,...i,...r};return e.length>0&&(o.className=e),Object.keys(t).length>0&&(o.style=t),{props:o,internalRef:void 0}}const o=Ai({...i,...r}),a=Ni(r),l=Ni(i),c=t(o),u=h(c?.className,n?.className,s,i?.className,r?.className),d={...c?.style,...n?.style,...i?.style,...r?.style},p={...c,...n,...l,...a};return u.length>0&&(p.className=u),Object.keys(d).length>0&&(p.style=d),{props:p,internalRef:c.ref}};function Di(e,t){const{className:n,elementType:r,ownerState:i,externalForwardedProps:s,internalForwardedProps:o,shouldForwardComponentProp:a=!1,...l}=t,{component:c,slots:u={[e]:void 0},slotProps:d={[e]:void 0},...h}=s,p=u[e]||r,f=Pi(d[e],i),{props:{component:m,...g},internalRef:v}=Oi({className:n,...l,externalForwardedProps:"root"===e?h:void 0,externalSlotProps:f}),y=ii(v,f?.ref,t.ref),b="root"===e?m||c:m;return[p,Ri(p,{..."root"===e&&!c&&!u[e]&&o,..."root"!==e&&!u[e]&&o,...g,...b&&!a&&{as:b},...b&&a&&{component:b},ref:y},i)]}const Li=_r("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${xi.primary}`]:t.primary},{[`& .${xi.secondary}`]:t.secondary},t.root,n.inset&&t.inset,n.primary&&n.secondary&&t.multiline,n.dense&&t.dense]}})({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4,[`.${vi.root}:where(& .${xi.primary})`]:{display:"block"},[`.${vi.root}:where(& .${xi.secondary})`]:{display:"block"},variants:[{props:e=>{let{ownerState:t}=e;return t.primary&&t.secondary},style:{marginTop:6,marginBottom:6}},{props:e=>{let{ownerState:t}=e;return t.inset},style:{paddingLeft:56}}]}),ji=o.forwardRef((function(e,t){const n=Or({props:e,name:"MuiListItemText"}),{children:r,className:i,disableTypography:s=!1,inset:a=!1,primary:l,primaryTypographyProps:c,secondary:u,secondaryTypographyProps:d,slots:f={},slotProps:m={},...g}=n,{dense:v}=o.useContext(Yr);let y=null!=l?l:r,b=u;const w={...n,disableTypography:s,inset:a,primary:!!y,secondary:!!b,dense:v},S=(e=>{const{classes:t,inset:n,primary:r,secondary:i,dense:s}=e;return p({root:["root",n&&"inset",s&&"dense",r&&i&&"multiline"],primary:["primary"],secondary:["secondary"]},_i,t)})(w),k={slots:f,slotProps:{primary:c,secondary:d,...m}},[C,E]=Di("root",{className:h(S.root,i),elementType:Li,externalForwardedProps:{...k,...g},ownerState:w,ref:t}),[T,_]=Di("primary",{className:S.primary,elementType:Ti,externalForwardedProps:k,ownerState:w}),[x,I]=Di("secondary",{className:S.secondary,elementType:Ti,externalForwardedProps:k,ownerState:w});return null==y||y.type===Ti||s||(y=(0,Pr.jsx)(T,{variant:v?"body2":"body1",component:_?.variant?void 0:"span",..._,children:y})),null==b||b.type===Ti||s||(b=(0,Pr.jsx)(x,{variant:"body2",color:"textSecondary",...I,children:b})),(0,Pr.jsxs)(C,{...E,children:[y,b]})}));function Mi(e){return Mr("MuiDivider",e)}Fr("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);const Fi=_r("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.absolute&&t.absolute,t[n.variant],n.light&&t.light,"vertical"===n.orientation&&t.vertical,n.flexItem&&t.flexItem,n.children&&t.withChildren,n.children&&"vertical"===n.orientation&&t.withChildrenVertical,"right"===n.textAlign&&"vertical"!==n.orientation&&t.textAlignRight,"left"===n.textAlign&&"vertical"!==n.orientation&&t.textAlignLeft]}})(Ir((e=>{let{theme:t}=e;return{margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(t.vars||t).palette.divider,borderBottomWidth:"thin",variants:[{props:{absolute:!0},style:{position:"absolute",bottom:0,left:0,width:"100%"}},{props:{light:!0},style:{borderColor:t.vars?`rgba(${t.vars.palette.dividerChannel} / 0.08)`:bn(t.palette.divider,.08)}},{props:{variant:"inset"},style:{marginLeft:72}},{props:{variant:"middle",orientation:"horizontal"},style:{marginLeft:t.spacing(2),marginRight:t.spacing(2)}},{props:{variant:"middle",orientation:"vertical"},style:{marginTop:t.spacing(1),marginBottom:t.spacing(1)}},{props:{orientation:"vertical"},style:{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"}},{props:{flexItem:!0},style:{alignSelf:"stretch",height:"auto"}},{props:e=>{let{ownerState:t}=e;return!!t.children},style:{display:"flex",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}}},{props:e=>{let{ownerState:t}=e;return t.children&&"vertical"!==t.orientation},style:{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(t.vars||t).palette.divider}`,borderTopStyle:"inherit"}}},{props:e=>{let{ownerState:t}=e;return"vertical"===t.orientation&&t.children},style:{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(t.vars||t).palette.divider}`,borderLeftStyle:"inherit"}}},{props:e=>{let{ownerState:t}=e;return"right"===t.textAlign&&"vertical"!==t.orientation},style:{"&::before":{width:"90%"},"&::after":{width:"10%"}}},{props:e=>{let{ownerState:t}=e;return"left"===t.textAlign&&"vertical"!==t.orientation},style:{"&::before":{width:"10%"},"&::after":{width:"90%"}}}]}}))),Ui=_r("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.wrapper,"vertical"===n.orientation&&t.wrapperVertical]}})(Ir((e=>{let{theme:t}=e;return{display:"inline-block",paddingLeft:`calc(${t.spacing(1)} * 1.2)`,paddingRight:`calc(${t.spacing(1)} * 1.2)`,whiteSpace:"nowrap",variants:[{props:{orientation:"vertical"},style:{paddingTop:`calc(${t.spacing(1)} * 1.2)`,paddingBottom:`calc(${t.spacing(1)} * 1.2)`}}]}}))),Vi=o.forwardRef((function(e,t){const n=Or({props:e,name:"MuiDivider"}),{absolute:r=!1,children:i,className:s,orientation:o="horizontal",component:a=(i||"vertical"===o?"div":"hr"),flexItem:l=!1,light:c=!1,role:u=("hr"!==a?"separator":void 0),textAlign:d="center",variant:f="fullWidth",...m}=n,g={...n,absolute:r,component:a,flexItem:l,light:c,orientation:o,role:u,textAlign:d,variant:f},v=(e=>{const{absolute:t,children:n,classes:r,flexItem:i,light:s,orientation:o,textAlign:a,variant:l}=e;return p({root:["root",t&&"absolute",l,s&&"light","vertical"===o&&"vertical",i&&"flexItem",n&&"withChildren",n&&"vertical"===o&&"withChildrenVertical","right"===a&&"vertical"!==o&&"textAlignRight","left"===a&&"vertical"!==o&&"textAlignLeft"],wrapper:["wrapper","vertical"===o&&"wrapperVertical"]},Mi,r)})(g);return(0,Pr.jsx)(Fi,{as:a,className:h(v.root,s),role:u,ref:t,ownerState:g,"aria-orientation":"separator"!==u||"hr"===a&&"vertical"!==o?void 0:o,...m,children:i?(0,Pr.jsx)(Ui,{className:v.wrapper,ownerState:g,children:i}):null})}));Vi&&(Vi.muiSkipListHighlight=!0);const $i=Vi;function Bi(e){return Mr("MuiListItemIcon",e)}Fr("MuiListItemIcon",["root","alignItemsFlexStart"]);const zi=_r("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"flex-start"===n.alignItems&&t.alignItemsFlexStart]}})(Ir((e=>{let{theme:t}=e;return{minWidth:56,color:(t.vars||t).palette.action.active,flexShrink:0,display:"inline-flex",variants:[{props:{alignItems:"flex-start"},style:{marginTop:8}}]}}))),Hi=o.forwardRef((function(e,t){const n=Or({props:e,name:"MuiListItemIcon"}),{className:r,...i}=n,s=o.useContext(Yr),a={...n,alignItems:s.alignItems},l=(e=>{const{alignItems:t,classes:n}=e;return p({root:["root","flex-start"===t&&"alignItemsFlexStart"]},Bi,n)})(a);return(0,Pr.jsx)(zi,{className:h(l.root,r),ownerState:a,ref:t,...i})})),qi=Hi,Wi=zr((0,Pr.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete"),Ki=zr((0,Pr.jsx)("path",{d:"M15 16h4v2h-4zm0-8h7v2h-7zm0 4h6v2h-6zM3 18c0 1.1.9 2 2 2h6c1.1 0 2-.9 2-2V8H3zM14 5h-3l-1-1H6L5 5H2v2h12z"}),"DeleteSweep"),Gi=zr((0,Pr.jsx)("path",{d:"m17 7-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4z"}),"Logout");const Ji=function(e){let{onClose:t,onClearChat:n,handleLogout:r,onDeleteAccount:i}=e;return(0,Pr.jsx)("div",{className:"settings-drawer",role:"presentation",onClick:t,onKeyDown:t,children:(0,Pr.jsxs)(ei,{children:[(0,Pr.jsx)(mi,{className:"settings-header",children:(0,Pr.jsx)(ji,{primary:"Settings"})}),(0,Pr.jsx)($i,{}),(0,Pr.jsxs)(mi,{button:!0,onClick:n,children:[(0,Pr.jsx)(qi,{children:(0,Pr.jsx)(Ki,{})}),(0,Pr.jsx)(ji,{primary:"Delete All Chats"})]}),(0,Pr.jsxs)(mi,{button:!0,onClick:r,children:[(0,Pr.jsx)(qi,{children:(0,Pr.jsx)(Gi,{})}),(0,Pr.jsx)(ji,{primary:"Logout"})]}),(0,Pr.jsx)($i,{}),(0,Pr.jsxs)(mi,{button:!0,onClick:i,className:"delete-account",children:[(0,Pr.jsx)(qi,{children:(0,Pr.jsx)(Wi,{})}),(0,Pr.jsx)(ji,{primary:"Delete Your Account"})]})]})})},Yi=o.createContext();function Qi(e){return parseInt(o.version,10)>=19?e?.props?.ref||null:e?.ref||null}function Xi(e){return e&&e.ownerDocument||document}const Zi=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function es(e){const t=[],n=[];return Array.from(e.querySelectorAll(Zi)).forEach(((e,r)=>{const i=function(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?"true"===e.contentEditable||("AUDIO"===e.nodeName||"VIDEO"===e.nodeName||"DETAILS"===e.nodeName)&&null===e.getAttribute("tabindex")?0:e.tabIndex:t}(e);-1!==i&&function(e){return!(e.disabled||"INPUT"===e.tagName&&"hidden"===e.type||function(e){if("INPUT"!==e.tagName||"radio"!==e.type)return!1;if(!e.name)return!1;const t=t=>e.ownerDocument.querySelector(`input[type="radio"]${t}`);let n=t(`[name="${e.name}"]:checked`);return n||(n=t(`[name="${e.name}"]`)),n!==e}(e))}(e)&&(0===i?t.push(e):n.push({documentOrder:r,tabIndex:i,node:e}))})),n.sort(((e,t)=>e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex)).map((e=>e.node)).concat(t)}function ts(){return!0}const ns=function(e){const{children:t,disableAutoFocus:n=!1,disableEnforceFocus:r=!1,disableRestoreFocus:i=!1,getTabbable:s=es,isEnabled:a=ts,open:l}=e,c=o.useRef(!1),u=o.useRef(null),d=o.useRef(null),h=o.useRef(null),p=o.useRef(null),f=o.useRef(!1),m=o.useRef(null),g=ii(Qi(t),m),v=o.useRef(null);o.useEffect((()=>{l&&m.current&&(f.current=!n)}),[n,l]),o.useEffect((()=>{if(!l||!m.current)return;const e=Xi(m.current);return m.current.contains(e.activeElement)||(m.current.hasAttribute("tabIndex")||m.current.setAttribute("tabIndex","-1"),f.current&&m.current.focus()),()=>{i||(h.current&&h.current.focus&&(c.current=!0,h.current.focus()),h.current=null)}}),[l]),o.useEffect((()=>{if(!l||!m.current)return;const e=Xi(m.current),t=t=>{v.current=t,!r&&a()&&"Tab"===t.key&&e.activeElement===m.current&&t.shiftKey&&(c.current=!0,d.current&&d.current.focus())},n=()=>{const t=m.current;if(null===t)return;if(!e.hasFocus()||!a()||c.current)return void(c.current=!1);if(t.contains(e.activeElement))return;if(r&&e.activeElement!==u.current&&e.activeElement!==d.current)return;if(e.activeElement!==p.current)p.current=null;else if(null!==p.current)return;if(!f.current)return;let n=[];if(e.activeElement!==u.current&&e.activeElement!==d.current||(n=s(m.current)),n.length>0){const e=Boolean(v.current?.shiftKey&&"Tab"===v.current?.key),t=n[0],r=n[n.length-1];"string"!==typeof t&&"string"!==typeof r&&(e?r.focus():t.focus())}else t.focus()};e.addEventListener("focusin",n),e.addEventListener("keydown",t,!0);const i=setInterval((()=>{e.activeElement&&"BODY"===e.activeElement.tagName&&n()}),50);return()=>{clearInterval(i),e.removeEventListener("focusin",n),e.removeEventListener("keydown",t,!0)}}),[n,r,i,a,l,s]);const y=e=>{null===h.current&&(h.current=e.relatedTarget),f.current=!0};return(0,Pr.jsxs)(o.Fragment,{children:[(0,Pr.jsx)("div",{tabIndex:l?0:-1,onFocus:y,ref:u,"data-testid":"sentinelStart"}),o.cloneElement(t,{ref:g,onFocus:e=>{null===h.current&&(h.current=e.relatedTarget),f.current=!0,p.current=e.target;const n=t.props.onFocus;n&&n(e)}}),(0,Pr.jsx)("div",{tabIndex:l?0:-1,onFocus:y,ref:d,"data-testid":"sentinelEnd"})]})};var rs=n(7950);const is="undefined"!==typeof window?o.useLayoutEffect:o.useEffect;const ss=o.forwardRef((function(e,t){const{children:n,container:r,disablePortal:i=!1}=e,[s,a]=o.useState(null),l=ii(o.isValidElement(n)?Qi(n):null,t);if(is((()=>{i||a(function(e){return"function"===typeof e?e():e}(r)||document.body)}),[r,i]),is((()=>{if(s&&!i)return ri(t,s),()=>{ri(t,null)}}),[t,s,i]),i){if(o.isValidElement(n)){const e={ref:l};return o.cloneElement(n,e)}return n}return s?rs.createPortal(n,s):s}));function os(e,t){return os=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},os(e,t)}const as=!1,ls=o.createContext(null);var cs="unmounted",us="exited",ds="entering",hs="entered",ps="exiting",fs=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var i,s=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?s?(i=us,r.appearStatus=ds):i=hs:i=t.unmountOnExit||t.mountOnEnter?cs:us,r.state={status:i},r.nextCallback=null,r}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,os(e,t)}(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===cs?{status:us}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==ds&&n!==hs&&(t=ds):n!==ds&&n!==hs||(t=ps)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===ds){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:rs.findDOMNode(this);n&&function(e){e.scrollTop}(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===us&&this.setState({status:cs})},n.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[rs.findDOMNode(this),r],s=i[0],o=i[1],a=this.getTimeouts(),l=r?a.appear:a.enter;!e&&!n||as?this.safeSetState({status:hs},(function(){t.props.onEntered(s)})):(this.props.onEnter(s,o),this.safeSetState({status:ds},(function(){t.props.onEntering(s,o),t.onTransitionEnd(l,(function(){t.safeSetState({status:hs},(function(){t.props.onEntered(s,o)}))}))})))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:rs.findDOMNode(this);t&&!as?(this.props.onExit(r),this.safeSetState({status:ps},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:us},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:us},(function(){e.props.onExited(r)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:rs.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],s=i[0],o=i[1];this.props.addEndListener(s,o)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===cs)return null;var t=this.props,n=t.children,r=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return o.createElement(ls.Provider,{value:null},"function"===typeof n?n(e,r):o.cloneElement(o.Children.only(n),r))},t}(o.Component);function ms(){}fs.contextType=ls,fs.propTypes={},fs.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:ms,onEntering:ms,onEntered:ms,onExit:ms,onExiting:ms,onExited:ms},fs.UNMOUNTED=cs,fs.EXITED=us,fs.ENTERING=ds,fs.ENTERED=hs,fs.EXITING=ps;const gs=fs;const vs=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t=o.useContext(je);return t&&(n=t,0!==Object.keys(n).length)?t:e;var n},ys=nn();const bs=function(){return vs(arguments.length>0&&void 0!==arguments[0]?arguments[0]:ys)};function ws(){const e=bs(Sr);return e[kr]||e}const Ss=e=>e.scrollTop;function ks(e,t){const{timeout:n,easing:r,style:i={}}=e;return{duration:i.transitionDuration??("number"===typeof n?n:n[t.mode]||0),easing:i.transitionTimingFunction??("object"===typeof r?r[t.mode]:r),delay:i.transitionDelay}}const Cs={entering:{opacity:1},entered:{opacity:1}},Es=o.forwardRef((function(e,t){const n=ws(),r={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{addEndListener:i,appear:s=!0,children:a,easing:l,in:c,onEnter:u,onEntered:d,onEntering:h,onExit:p,onExited:f,onExiting:m,style:g,timeout:v=r,TransitionComponent:y=gs,...b}=e,w=o.useRef(null),S=si(w,Qi(a),t),k=e=>t=>{if(e){const n=w.current;void 0===t?e(n):e(n,t)}},C=k(h),E=k(((e,t)=>{Ss(e);const r=ks({style:g,timeout:v,easing:l},{mode:"enter"});e.style.webkitTransition=n.transitions.create("opacity",r),e.style.transition=n.transitions.create("opacity",r),u&&u(e,t)})),T=k(d),_=k(m),x=k((e=>{const t=ks({style:g,timeout:v,easing:l},{mode:"exit"});e.style.webkitTransition=n.transitions.create("opacity",t),e.style.transition=n.transitions.create("opacity",t),p&&p(e)})),I=k(f);return(0,Pr.jsx)(y,{appear:s,in:c,nodeRef:w,onEnter:E,onEntered:T,onEntering:C,onExit:x,onExited:I,onExiting:_,addEndListener:e=>{i&&i(w.current,e)},timeout:v,...b,children:(e,t)=>{let{ownerState:n,...r}=t;return o.cloneElement(a,{style:{opacity:0,visibility:"exited"!==e||c?void 0:"hidden",...Cs[e],...g,...a.props.style},ref:S,...r})}})})),Ts=Es;function _s(e){return Mr("MuiBackdrop",e)}Fr("MuiBackdrop",["root","invisible"]);const xs=_r("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.invisible&&t.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),Is=o.forwardRef((function(e,t){const n=Or({props:e,name:"MuiBackdrop"}),{children:r,className:i,component:s="div",invisible:o=!1,open:a,components:l={},componentsProps:c={},slotProps:u={},slots:d={},TransitionComponent:f,transitionDuration:m,...g}=n,v={...n,component:s,invisible:o},y=(e=>{const{classes:t,invisible:n}=e;return p({root:["root",n&&"invisible"]},_s,t)})(v),b={slots:{transition:f,root:l.Root,...d},slotProps:{...c,...u}},[w,S]=Di("root",{elementType:xs,externalForwardedProps:b,className:h(y.root,i),ownerState:v}),[k,C]=Di("transition",{elementType:Ts,externalForwardedProps:b,ownerState:v});return(0,Pr.jsx)(k,{in:a,timeout:m,...g,...C,children:(0,Pr.jsx)(w,{"aria-hidden":!0,...S,classes:y,ref:t,children:r})})}));const Rs=function(e){const t=o.useRef(e);return is((()=>{t.current=e})),o.useRef((function(){return(0,t.current)(...arguments)})).current};function Ps(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(((e,t)=>null==t?e:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r),t.apply(this,r)}),(()=>{}))}function As(e){return Xi(e).defaultView||window}function Ns(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function Os(e){return parseInt(As(e).getComputedStyle(e).paddingRight,10)||0}function Ds(e,t,n,r,i){const s=[t,n,...r];[].forEach.call(e.children,(e=>{const t=!s.includes(e),n=!function(e){const t=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(e.tagName),n="INPUT"===e.tagName&&"hidden"===e.getAttribute("type");return t||n}(e);t&&n&&Ns(e,i)}))}function Ls(e,t){let n=-1;return e.some(((e,r)=>!!t(e)&&(n=r,!0))),n}function js(e,t){const n=[],r=e.container;if(!t.disableScrollLock){if(function(e){const t=Xi(e);return t.body===e?As(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}(r)){const e=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;const t=e.document.documentElement.clientWidth;return e.innerWidth-t}(As(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight=`${Os(r)+e}px`;const t=Xi(r).querySelectorAll(".mui-fixed");[].forEach.call(t,(t=>{n.push({value:t.style.paddingRight,property:"padding-right",el:t}),t.style.paddingRight=`${Os(t)+e}px`}))}let e;if(r.parentNode instanceof DocumentFragment)e=Xi(r).body;else{const t=r.parentElement,n=As(r);e="HTML"===t?.nodeName&&"scroll"===n.getComputedStyle(t).overflowY?t:r}n.push({value:e.style.overflow,property:"overflow",el:e},{value:e.style.overflowX,property:"overflow-x",el:e},{value:e.style.overflowY,property:"overflow-y",el:e}),e.style.overflow="hidden"}return()=>{n.forEach((e=>{let{value:t,el:n,property:r}=e;t?n.style.setProperty(r,t):n.style.removeProperty(r)}))}}const Ms=()=>{},Fs=new class{constructor(){this.modals=[],this.containers=[]}add(e,t){let n=this.modals.indexOf(e);if(-1!==n)return n;n=this.modals.length,this.modals.push(e),e.modalRef&&Ns(e.modalRef,!1);const r=function(e){const t=[];return[].forEach.call(e.children,(e=>{"true"===e.getAttribute("aria-hidden")&&t.push(e)})),t}(t);Ds(t,e.mount,e.modalRef,r,!0);const i=Ls(this.containers,(e=>e.container===t));return-1!==i?(this.containers[i].modals.push(e),n):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblings:r}),n)}mount(e,t){const n=Ls(this.containers,(t=>t.modals.includes(e))),r=this.containers[n];r.restore||(r.restore=js(r,t))}remove(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.modals.indexOf(e);if(-1===n)return n;const r=Ls(this.containers,(t=>t.modals.includes(e))),i=this.containers[r];if(i.modals.splice(i.modals.indexOf(e),1),this.modals.splice(n,1),0===i.modals.length)i.restore&&i.restore(),e.modalRef&&Ns(e.modalRef,t),Ds(i.container,e.mount,e.modalRef,i.hiddenSiblings,!1),this.containers.splice(r,1);else{const e=i.modals[i.modals.length-1];e.modalRef&&Ns(e.modalRef,!1)}return n}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}};const Us=function(e){const{container:t,disableEscapeKeyDown:n=!1,disableScrollLock:r=!1,closeAfterTransition:i=!1,onTransitionEnter:s,onTransitionExited:a,children:l,onClose:c,open:u,rootRef:d}=e,h=o.useRef({}),p=o.useRef(null),f=o.useRef(null),m=ii(f,d),[g,v]=o.useState(!u),y=function(e){return!!e&&e.props.hasOwnProperty("in")}(l);let b=!0;"false"!==e["aria-hidden"]&&!1!==e["aria-hidden"]||(b=!1);const w=()=>(h.current.modalRef=f.current,h.current.mount=p.current,h.current),S=()=>{Fs.mount(w(),{disableScrollLock:r}),f.current&&(f.current.scrollTop=0)},k=Rs((()=>{const e=function(e){return"function"===typeof e?e():e}(t)||Xi(p.current).body;Fs.add(w(),e),f.current&&S()})),C=()=>Fs.isTopModal(w()),E=Rs((e=>{p.current=e,e&&(u&&C()?S():f.current&&Ns(f.current,b))})),T=o.useCallback((()=>{Fs.remove(w(),b)}),[b]);o.useEffect((()=>()=>{T()}),[T]),o.useEffect((()=>{u?k():y&&i||T()}),[u,T,y,i,k]);const _=e=>t=>{e.onKeyDown?.(t),"Escape"===t.key&&229!==t.which&&C()&&(n||(t.stopPropagation(),c&&c(t,"escapeKeyDown")))},x=e=>t=>{e.onClick?.(t),t.target===t.currentTarget&&c&&c(t,"backdropClick")};return{getRootProps:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=Ai(e);delete n.onTransitionEnter,delete n.onTransitionExited;const r={...n,...t};return{role:"presentation",...r,onKeyDown:_(r),ref:m}},getBackdropProps:function(){const e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{"aria-hidden":!0,...e,onClick:x(e),open:u}},getTransitionProps:()=>({onEnter:Ps((()=>{v(!1),s&&s()}),l?.props.onEnter??Ms),onExited:Ps((()=>{v(!0),a&&a(),i&&T()}),l?.props.onExited??Ms)}),rootRef:m,portalRef:E,isTopModal:C,exited:g,hasTransition:y}};function Vs(e){return Mr("MuiModal",e)}Fr("MuiModal",["root","hidden","backdrop"]);const $s=_r("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.open&&n.exited&&t.hidden]}})(Ir((e=>{let{theme:t}=e;return{position:"fixed",zIndex:(t.vars||t).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:e=>{let{ownerState:t}=e;return!t.open&&t.exited},style:{visibility:"hidden"}}]}}))),Bs=_r(Is,{name:"MuiModal",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})({zIndex:-1}),zs=o.forwardRef((function(e,t){const n=Or({name:"MuiModal",props:e}),{BackdropComponent:r=Bs,BackdropProps:i,classes:s,className:a,closeAfterTransition:l=!1,children:c,container:u,component:d,components:f={},componentsProps:m={},disableAutoFocus:g=!1,disableEnforceFocus:v=!1,disableEscapeKeyDown:y=!1,disablePortal:b=!1,disableRestoreFocus:w=!1,disableScrollLock:S=!1,hideBackdrop:k=!1,keepMounted:C=!1,onBackdropClick:E,onClose:T,onTransitionEnter:_,onTransitionExited:x,open:I,slotProps:R={},slots:P={},theme:A,...N}=n,O={...n,closeAfterTransition:l,disableAutoFocus:g,disableEnforceFocus:v,disableEscapeKeyDown:y,disablePortal:b,disableRestoreFocus:w,disableScrollLock:S,hideBackdrop:k,keepMounted:C},{getRootProps:D,getBackdropProps:L,getTransitionProps:j,portalRef:M,isTopModal:F,exited:U,hasTransition:V}=Us({...O,rootRef:t}),$={...O,exited:U},B=(e=>{const{open:t,exited:n,classes:r}=e;return p({root:["root",!t&&n&&"hidden"],backdrop:["backdrop"]},Vs,r)})($),z={};if(void 0===c.props.tabIndex&&(z.tabIndex="-1"),V){const{onEnter:e,onExited:t}=j();z.onEnter=e,z.onExited=t}const H={slots:{root:f.Root,backdrop:f.Backdrop,...P},slotProps:{...m,...R}},[q,W]=Di("root",{ref:t,elementType:$s,externalForwardedProps:{...H,...N,component:d},getSlotProps:D,ownerState:$,className:h(a,B?.root,!$.open&&$.exited&&B?.hidden)}),[K,G]=Di("backdrop",{ref:i?.ref,elementType:r,externalForwardedProps:H,shouldForwardComponentProp:!0,additionalProps:i,getSlotProps:e=>L({...e,onClick:t=>{E&&E(t),e?.onClick&&e.onClick(t)}}),className:h(i?.className,B?.backdrop),ownerState:$});return C||I||V&&!U?(0,Pr.jsx)(ss,{ref:M,container:u,disablePortal:b,children:(0,Pr.jsxs)(q,{...W,children:[!k&&r?(0,Pr.jsx)(K,{...G}):null,(0,Pr.jsx)(ns,{disableEnforceFocus:v,disableAutoFocus:g,disableRestoreFocus:w,isEnabled:F,open:I,children:o.cloneElement(c,z)})]})}):null})),Hs=zs;const qs=function(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];clearTimeout(t),t=setTimeout((()=>{e.apply(this,i)}),n)}return r.clear=()=>{clearTimeout(t)},r},Ws=As;function Ks(e,t,n){var r;const i=function(e,t,n){const r=t.getBoundingClientRect(),i=n&&n.getBoundingClientRect(),s=Ws(t);let o;if(t.fakeTransform)o=t.fakeTransform;else{const e=s.getComputedStyle(t);o=e.getPropertyValue("-webkit-transform")||e.getPropertyValue("transform")}let a=0,l=0;if(o&&"none"!==o&&"string"===typeof o){const e=o.split("(")[1].split(")")[0].split(",");a=parseInt(e[4],10),l=parseInt(e[5],10)}return"left"===e?i?`translateX(${i.right+a-r.left}px)`:`translateX(${s.innerWidth+a-r.left}px)`:"right"===e?i?`translateX(-${r.right-i.left-a}px)`:`translateX(-${r.left+r.width-a}px)`:"up"===e?i?`translateY(${i.bottom+l-r.top}px)`:`translateY(${s.innerHeight+l-r.top}px)`:i?`translateY(-${r.top-i.top+r.height-l}px)`:`translateY(-${r.top+r.height-l}px)`}(e,t,"function"===typeof(r=n)?r():r);i&&(t.style.webkitTransform=i,t.style.transform=i)}const Gs=o.forwardRef((function(e,t){const n=ws(),r={enter:n.transitions.easing.easeOut,exit:n.transitions.easing.sharp},i={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{addEndListener:s,appear:a=!0,children:l,container:c,direction:u="down",easing:d=r,in:h,onEnter:p,onEntered:f,onEntering:m,onExit:g,onExited:v,onExiting:y,style:b,timeout:w=i,TransitionComponent:S=gs,...k}=e,C=o.useRef(null),E=si(Qi(l),C,t),T=e=>t=>{e&&(void 0===t?e(C.current):e(C.current,t))},_=T(((e,t)=>{Ks(u,e,c),Ss(e),p&&p(e,t)})),x=T(((e,t)=>{const r=ks({timeout:w,style:b,easing:d},{mode:"enter"});e.style.webkitTransition=n.transitions.create("-webkit-transform",{...r}),e.style.transition=n.transitions.create("transform",{...r}),e.style.webkitTransform="none",e.style.transform="none",m&&m(e,t)})),I=T(f),R=T(y),P=T((e=>{const t=ks({timeout:w,style:b,easing:d},{mode:"exit"});e.style.webkitTransition=n.transitions.create("-webkit-transform",t),e.style.transition=n.transitions.create("transform",t),Ks(u,e,c),g&&g(e)})),A=T((e=>{e.style.webkitTransition="",e.style.transition="",v&&v(e)})),N=o.useCallback((()=>{C.current&&Ks(u,C.current,c)}),[u,c]);return o.useEffect((()=>{if(h||"down"===u||"right"===u)return;const e=qs((()=>{C.current&&Ks(u,C.current,c)})),t=Ws(C.current);return t.addEventListener("resize",e),()=>{e.clear(),t.removeEventListener("resize",e)}}),[u,h,c]),o.useEffect((()=>{h||N()}),[h,N]),(0,Pr.jsx)(S,{nodeRef:C,onEnter:_,onEntered:I,onEntering:x,onExit:P,onExited:A,onExiting:R,addEndListener:e=>{s&&s(C.current,e)},appear:a,in:h,timeout:w,...k,children:(e,t)=>{let{ownerState:n,...r}=t;return o.cloneElement(l,{ref:E,style:{visibility:"exited"!==e||h?void 0:"hidden",...b,...l.props.style},...r})}})})),Js=Gs;function Ys(e){return Mr("MuiPaper",e)}Fr("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const Qs=_r("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],!n.square&&t.rounded,"elevation"===n.variant&&t[`elevation${n.elevation}`]]}})(Ir((e=>{let{theme:t}=e;return{backgroundColor:(t.vars||t).palette.background.paper,color:(t.vars||t).palette.text.primary,transition:t.transitions.create("box-shadow"),variants:[{props:e=>{let{ownerState:t}=e;return!t.square},style:{borderRadius:t.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(t.vars||t).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}}))),Xs=o.forwardRef((function(e,t){const n=Or({props:e,name:"MuiPaper"}),r=ws(),{className:i,component:s="div",elevation:o=1,square:a=!1,variant:l="elevation",...c}=n,u={...n,component:s,elevation:o,square:a,variant:l},d=(e=>{const{square:t,elevation:n,variant:r,classes:i}=e;return p({root:["root",r,!t&&"rounded","elevation"===r&&`elevation${n}`]},Ys,i)})(u);return(0,Pr.jsx)(Qs,{as:s,ownerState:u,className:h(d.root,i),ref:t,...c,style:{..."elevation"===l&&{"--Paper-shadow":(r.vars||r).shadows[o],...r.vars&&{"--Paper-overlay":r.vars.overlays?.[o]},...!r.vars&&"dark"===r.palette.mode&&{"--Paper-overlay":`linear-gradient(${bn("#fff",or(o))}, ${bn("#fff",or(o))})`}},...c.style}})})),Zs=Xs;function eo(e){return Mr("MuiDrawer",e)}Fr("MuiDrawer",["root","docked","paper","anchorLeft","anchorRight","anchorTop","anchorBottom","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);function to(e,t){if(!e)return t;if("function"===typeof e||"function"===typeof t)return n=>{const r="function"===typeof t?t(n):t,i="function"===typeof e?e({...n,...r}):e,s=h(n?.className,r?.className,i?.className);return{...r,...i,...!!s&&{className:s},...r?.style&&i?.style&&{style:{...r.style,...i.style}},...r?.sx&&i?.sx&&{sx:[...Array.isArray(r.sx)?r.sx:[r.sx],...Array.isArray(i.sx)?i.sx:[i.sx]]}}};const n=t,r=h(n?.className,e?.className);return{...t,...e,...!!r&&{className:r},...n?.style&&e?.style&&{style:{...n.style,...e.style}},...n?.sx&&e?.sx&&{sx:[...Array.isArray(n.sx)?n.sx:[n.sx],...Array.isArray(e.sx)?e.sx:[e.sx]]}}}const no=(e,t)=>{const{ownerState:n}=e;return[t.root,("permanent"===n.variant||"persistent"===n.variant)&&t.docked,t.modal]},ro=_r(Hs,{name:"MuiDrawer",slot:"Root",overridesResolver:no})(Ir((e=>{let{theme:t}=e;return{zIndex:(t.vars||t).zIndex.drawer}}))),io=_r("div",{shouldForwardProp:Er,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:no})({flex:"0 0 auto"}),so=_r(Zs,{name:"MuiDrawer",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.paper,t[`paperAnchor${g(n.anchor)}`],"temporary"!==n.variant&&t[`paperAnchorDocked${g(n.anchor)}`]]}})(Ir((e=>{let{theme:t}=e;return{overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(t.vars||t).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0,variants:[{props:{anchor:"left"},style:{left:0}},{props:{anchor:"top"},style:{top:0,left:0,right:0,height:"auto",maxHeight:"100%"}},{props:{anchor:"right"},style:{right:0}},{props:{anchor:"bottom"},style:{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"}},{props:e=>{let{ownerState:t}=e;return"left"===t.anchor&&"temporary"!==t.variant},style:{borderRight:`1px solid ${(t.vars||t).palette.divider}`}},{props:e=>{let{ownerState:t}=e;return"top"===t.anchor&&"temporary"!==t.variant},style:{borderBottom:`1px solid ${(t.vars||t).palette.divider}`}},{props:e=>{let{ownerState:t}=e;return"right"===t.anchor&&"temporary"!==t.variant},style:{borderLeft:`1px solid ${(t.vars||t).palette.divider}`}},{props:e=>{let{ownerState:t}=e;return"bottom"===t.anchor&&"temporary"!==t.variant},style:{borderTop:`1px solid ${(t.vars||t).palette.divider}`}}]}}))),oo={left:"right",right:"left",top:"down",bottom:"up"};const ao=o.forwardRef((function(e,t){const n=Or({props:e,name:"MuiDrawer"}),r=ws(),i=o.useContext(Yi)??!1,s={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{anchor:a="left",BackdropProps:l,children:c,className:u,elevation:d=16,hideBackdrop:f=!1,ModalProps:{BackdropProps:m,...v}={},onClose:y,open:b=!1,PaperProps:w={},SlideProps:S,TransitionComponent:k,transitionDuration:C=s,variant:E="temporary",slots:T={},slotProps:_={},...x}=n,I=o.useRef(!1);o.useEffect((()=>{I.current=!0}),[]);const R=function(e,t){let{direction:n}=e;return"rtl"===n&&function(e){return["left","right"].includes(e)}(t)?oo[t]:t}({direction:i?"rtl":"ltr"},a),P=a,A={...n,anchor:P,elevation:d,open:b,variant:E,...x},N=(e=>{const{classes:t,anchor:n,variant:r}=e;return p({root:["root",`anchor${g(n)}`],docked:[("permanent"===r||"persistent"===r)&&"docked"],modal:["modal"],paper:["paper",`paperAnchor${g(n)}`,"temporary"!==r&&`paperAnchorDocked${g(n)}`]},eo,t)})(A),O={slots:{transition:k,...T},slotProps:{paper:w,transition:S,..._,backdrop:to(_.backdrop||{...l,...m},{transitionDuration:C})}},[D,L]=Di("root",{ref:t,elementType:ro,className:h(N.root,N.modal,u),shouldForwardComponentProp:!0,ownerState:A,externalForwardedProps:{...O,...x,...v},additionalProps:{open:b,onClose:y,hideBackdrop:f,slots:{backdrop:O.slots.backdrop},slotProps:{backdrop:O.slotProps.backdrop}}}),[j,M]=Di("paper",{elementType:so,shouldForwardComponentProp:!0,className:h(N.paper,w.className),ownerState:A,externalForwardedProps:O,additionalProps:{elevation:"temporary"===E?d:0,square:!0}}),[F,U]=Di("docked",{elementType:io,ref:t,className:h(N.root,N.docked,u),ownerState:A,externalForwardedProps:O,additionalProps:x}),[V,$]=Di("transition",{elementType:Js,ownerState:A,externalForwardedProps:O,additionalProps:{in:b,direction:oo[R],timeout:C,appear:I.current}}),B=(0,Pr.jsx)(j,{...M,children:c});if("permanent"===E)return(0,Pr.jsx)(F,{...U,children:B});const z=(0,Pr.jsx)(V,{...$,children:B});return"persistent"===E?(0,Pr.jsx)(F,{...U,children:z}):(0,Pr.jsx)(D,{...L,children:z})})),lo=ao,co=(0,o.createContext)(null);function uo(e){let{children:t,userId:n,user:r}=e;const[i,s]=(0,o.useState)(null),[a,l]=(0,o.useState)(!1),[c,u]=(0,o.useState)(null),[d,h]=(0,o.useState)(null),[p,f]=(0,o.useState)(""),[m,g]=(0,o.useState)(""),[v,y]=(0,o.useState)({});(0,o.useEffect)((()=>{if(i&&a){const e=setInterval((()=>{try{i.send(JSON.stringify({type:"ping"}))}catch(e){console.error("Error sending ping:",e),l(!1)}}),3e4);return()=>clearInterval(e)}}),[i,a]),(0,o.useEffect)((()=>{if(!n)return;const e=new WebSocket("wss://whats-app-clone-backend-1wf4.onrender.com/socket");return e.onopen=()=>{console.log("WebSocket connected"),l(!0),e.send(JSON.stringify({type:"register",userId:n}))},e.onmessage=e=>{try{const t=JSON.parse(e.data);console.log("WS message received:",e.data),"incoming_call"===t.type&&u(t),"registered"===t.type&&t.success&&g(t.token),"call_canceled"===t.type&&(console.log("Received call_canceled message:",t),c&&c.callerId===t.callerId&&console.log("Clearing incoming call due to cancellation"),h(null),u(null)),"call_response"===t.type&&(console.log("Call response received:",t.status),"declined"===t.status?(h("declined"),u(null)):"accepted"===t.status&&(console.log("ACEPETE"),h("accepted"),a&&i&&b({type:"Call_info",userId:r.uid,userName:r.displayName,userPhoto:r.photoURL}))),"call_info"===t.type&&(f(t.callID),h("accepted"),u(null)),t.type,"message_sent"==t.type&&(t.sender in v?y((e=>({...e,[t.sender]:[...e[t.sender],t.message]}))):y((e=>({...e,[t.sender]:[t.message]}))))}catch(t){console.error("Error parsing WebSocket message:",t)}},e.onclose=()=>{console.log("WebSocket disconnected"),l(!1)},e.onerror=e=>{console.error("WebSocket error:",e)},s(e),()=>{e.close()}}),[n]);const b=e=>{i&&a?i.send(JSON.stringify(e)):console.error("Cannot send message, WebSocket not connected")},w={connected:a,incomingCall:c,callStatus:d,callID:p,userToken:m,messages:v,sendMessage:b,initiateCall:(e,t)=>{b({type:"call_request",receiverId:e,callerId:n,callerName:t}),h("calling")},respondToCall:(e,t,n,r)=>{b({type:"call_response",callerId:e,response:t?"accepted":"declined",callID:n,userID:r}),t?(h("accepted"),u(null)):(h("declined"),u(null))},clearIncomingCall:()=>{u(null)},setMessages:y,cancelCall:e=>{console.log(e);try{b({type:"call_canceled",receiverId:e,callerId:n})}catch(t){console.log(t)}}};return(0,Pr.jsx)(co.Provider,{value:w,children:t})}function ho(){const e=(0,o.useContext)(co);if(!e)throw new Error("useWebSocket must be used within a WebSocketProvider");return e}function po(e){let{chat:t,handleCurrChat:n,userUID:r,handleBack:i}=e;const[s,a]=(0,o.useState)(null),[l,d]=(0,o.useState)(!0);(0,o.useEffect)((()=>{r&&async function(){d(!0);const e=await async function(e){try{const t=await fetch(`${u}/getUser?userId=${e}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return await t.json()}catch(t){return console.log("Error fetching user:",t),null}}(r);a(e),d(!1)}()}),[r]);return(0,Pr.jsxs)("div",{className:"chat-bar",onClick:()=>{n(t.data.userId,t.data.chat,t.id),i(!1)},children:[(0,Pr.jsx)("div",{className:"chat-avatar-container",children:l?(0,Pr.jsx)("div",{className:"chat-avatar-placeholder"}):(0,Pr.jsx)("img",{src:(null===s||void 0===s?void 0:s.photoURL)||c,alt:(null===s||void 0===s?void 0:s.displayName)||"User",className:"chat-avatar",onError:e=>{e.target.src=c}})}),(0,Pr.jsxs)("div",{className:"chat-info",children:[(0,Pr.jsx)("div",{className:"chat-info-top",children:(0,Pr.jsx)("span",{className:"chat-name",children:l?"Loading...":(null===s||void 0===s?void 0:s.displayName)||"Unknown User"})}),(0,Pr.jsx)("div",{className:"chat-info-bottom",children:(0,Pr.jsx)("p",{className:"chat-preview",children:(()=>{var e;if(null===t||void 0===t||null===(e=t.data)||void 0===e||!e.chat||0===t.data.chat.length)return"Start a conversation";const n=t.data.chat[t.data.chat.length-1];return n.message.length>30?n.message.substring(0,27)+"...":n.message})()})})]})]})}function fo(e){let{handleLogout:t,handleChatClear:n,deleteUser:r}=e;const[i,s]=(0,o.useState)(!1);return(0,Pr.jsxs)("div",{className:"sidebar-header",children:[(0,Pr.jsx)("div",{className:"sidebar-header-left",children:(0,Pr.jsx)("h2",{children:"Chats"})}),(0,Pr.jsx)("div",{className:"sidebar-header-actions",children:(0,Pr.jsx)("button",{className:"header-btn",onClick:()=>s(!i),children:(0,Pr.jsx)(qr,{})})}),(0,Pr.jsx)(lo,{anchor:"right",open:i,onClose:()=>s(!i),children:(0,Pr.jsx)(Ji,{onClose:()=>s(!i),onClearChat:n,handleLogout:t,onDeleteAccount:r})})]})}const mo=function(e){let{setAllChats:t,allChats:n,chats:r,handleOnClick:i,user:s,handleBack:a,setIsAddUserOpen:l,isAddUserOpen:c,handleLogout:d,handleChatClear:h,deleteUser:p}=e;const[f,m]=(0,o.useState)([]),[g,v]=(0,o.useState)(""),[y,b]=(0,o.useState)({}),[w,S]=(0,o.useState)(!1),{initiateCall:k,connected:C,sendMessage:E,messages:T,setMessages:_}=ho(),x=(0,o.useRef)({});function I(e){if(v(e),!e||""===e.trim())return void m(r);const t=e.toLowerCase().trim(),n=r.filter((e=>{var n;if(e.id===s.uid)return!1;const r=y[e.id];return null===r||void 0===r||null===(n=r.displayName)||void 0===n?void 0:n.toLowerCase().includes(t)}));m(n)}return(0,o.useEffect)((()=>(Object.keys(T).length>0&&function(e,t,n,r){if(!e||0===Object.keys(e).length)return;const i=[...t];let s=!1;const o=[];for(const l in e){const t=JSON.stringify(e[l]);if(x.current[l]===t)continue;let n=-1;for(let e=0;e<i.length;e++)if(i[e].id==l){n=e;break}if(-1===n)continue;const r=i[n];r.data||(r.data={}),r.data.chat||(r.data.chat=[]);const c=e[l];if(c&&c.length>0){for(let e=0;e<c.length;e++)c[e]&&(r.data.chat.push({isUser:!1,message:(a=c[e]).message,sender:a.sender,timestamp:"5:43 PM"}),s=!0);x.current[l]=t,o.push(l)}}var a;s&&n&&n(i),o.length>0&&r&&r((e=>{const t={...e};return o.forEach((e=>{delete t[e]})),t}))}(T,n,t,_),()=>{x.current={}})),[T,n,t,_]),(0,o.useEffect)((()=>{m(r)}),[r]),(0,o.useEffect)((()=>{!async function(){if(!r||0===r.length)return;S(!0);const e={},t=r.map((async t=>{if(t.id!==s.uid){const n=await async function(e){try{const t=await fetch(`${u}/getUser?userId=${e}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return await t.json()}catch(t){return console.log("Error fetching user:",t),null}}(t.id);n&&(e[t.id]=n)}}));await Promise.all(t),b(e),S(!1)}()}),[r,s.uid]),(0,o.useEffect)((()=>{console.log("Results updated:",f)}),[f]),f&&0!==f.length?(0,Pr.jsxs)("div",{className:"chat-scroll-container",children:[(0,Pr.jsx)(fo,{handleLogout:d,handleChatClear:h,deleteUser:p}),(0,Pr.jsx)("div",{className:"search-container",children:(0,Pr.jsxs)("div",{className:"search-input-wrapper",children:[(0,Pr.jsx)(Hr,{className:"search-icon"}),(0,Pr.jsx)("input",{type:"text",placeholder:"Search or start a new chat",className:"search-input",value:g,onChange:e=>I(e.target.value)})]})}),(0,Pr.jsxs)("div",{className:"chats-list",children:[(0,Pr.jsx)(Jr,{isOpen:c,onClose:()=>l(!1),onAddUser:async e=>{let{email:t,name:n}=e;try{const e=await fetch(`${u}/allUsers`);if(!e.ok)throw new Error("Failed to fetch users");const r=(await e.json()).find((e=>e.email.toLowerCase()===t.toLowerCase()));if(!r)throw new Error("No user found with this email");const i=r.uid;if(!(await fetch(`${u}/addUser?adder=${s.uid}&added=${i}&userId=${n}`,{method:"PUT",headers:{"Content-Type":"application/json"}})).ok)throw new Error("Failed to add user to contacts");return m([...f,{id:i,data:{chat:[],timestamp:(new Date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),userId:n}}]),!0}catch(r){throw console.error("Error adding user:",r),r}}}),w&&g?(0,Pr.jsx)("div",{className:"loading-indicator",children:"Searching..."}):f.map(((e,t)=>`${s.uid}`!==e.id?(0,Pr.jsx)(po,{handleBack:a,chat:e,handleCurrChat:i,userUID:e.id},t):null))]}),(0,Pr.jsx)("div",{className:"new-chat-button-container",children:(0,Pr.jsx)("button",{className:"floating-new-chat",onClick:()=>l(!0),children:(0,Pr.jsx)(Wr,{})})})]}):(0,Pr.jsxs)("div",{className:"chat-scroll-container",children:[(0,Pr.jsx)(fo,{}),(0,Pr.jsx)("div",{className:"search-container",children:(0,Pr.jsxs)("div",{className:"search-input-wrapper",children:[(0,Pr.jsx)(Hr,{className:"search-icon"}),(0,Pr.jsx)("input",{type:"text",placeholder:"Search or start a new chat",className:"search-input",value:g,onChange:e=>I(e.target.value)})]})}),(0,Pr.jsxs)("div",{className:"no-chats-message",children:[(0,Pr.jsx)("p",{children:g?"No matching conversations found":"No conversations yet"}),!g&&(0,Pr.jsxs)("button",{className:"start-chat-btn",onClick:()=>l(!0),children:[(0,Pr.jsx)(Wr,{})," Start a chat"]})]})]})},go=zr((0,Pr.jsx)("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2M6 9h12v2H6zm8 5H6v-2h8zm4-6H6V6h12z"}),"Chat"),vo=zr((0,Pr.jsx)("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"}),"Settings");const yo=function(e){let{User:t,handleLogout:n,handleChatClear:r,deleteUser:i}=e;const[s,a]=(0,o.useState)(c);(0,o.useEffect)((()=>{a(t.photoURL)}),[t]);const[l,u]=(0,o.useState)(!1),d=e=>t=>{("keydown"!==t.type||"Tab"!==t.key&&"Shift"!==t.key)&&u(e)};return(0,Pr.jsxs)("div",{className:"bar",children:[(0,Pr.jsx)("div",{className:"col",children:(0,Pr.jsx)("button",{className:"btn-sideBar",children:(0,Pr.jsx)(go,{className:"icon-style"})})}),(0,Pr.jsxs)("div",{className:"col",children:[(0,Pr.jsx)("button",{className:"btn-sideBar",onClick:d(!0),children:(0,Pr.jsx)(vo,{className:"icon-style"})}),(0,Pr.jsx)("button",{className:"btn-sideBar",children:(0,Pr.jsx)("img",{src:s,alt:"User avatar",style:{height:"90%",width:"90%",borderRadius:"50%"}})}),(0,Pr.jsx)(lo,{anchor:"right",open:l,onClose:d(!1),children:(0,Pr.jsx)(Ji,{onClose:d(!1),onClearChat:r,handleLogout:n,onDeleteAccount:i})})]})]})},bo=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},wo={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let d=(15&o)<<2|l>>6,h=63&l;a||(h=64,s||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(bo(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new So;const l=t<<2|s>>4;if(r.push(l),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class So extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ko=function(e){return function(e){const t=bo(e);return wo.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Co=function(e){try{return wo.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};const Eo=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,To=()=>{try{return Eo()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyBhWy_Lwyrr4isMoItVw07izKH7-0RKpMM",REACT_APP_STREAM_API_KEY:"sqtepgt3s5px"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&Co(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},_o=e=>{var t,n;return null===(n=null===(t=To())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},xo=()=>{var e;return null===(e=To())||void 0===e?void 0:e.config},Io=e=>{var t;return null===(t=To())||void 0===t?void 0:t[`_${e}`]};class Ro{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function Po(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Ao(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function No(){return!function(){var e;const t=null===(e=To())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Oo(){try{return"object"===typeof indexedDB}catch(e){return!1}}function Do(){return new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}))}class Lo extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Lo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,jo.prototype.create)}}class jo{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n=`${this.service}/${e}`,r=this.errors[e],i=r?function(e,t){return e.replace(Mo,((e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`}))}(r,t):"Error",s=`${this.serviceName}: ${i} (${n}).`;return new Lo(n,s,t)}}const Mo=/\{\$([^}]+)}/g;function Fo(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(Uo(n)&&Uo(s)){if(!Fo(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Uo(e){return null!==e&&"object"===typeof e}function Vo(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function $o(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function Bo(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class zo{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=Ho),void 0===r.error&&(r.error=Ho),void 0===r.complete&&(r.complete=Ho);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function Ho(){}function qo(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3)*Math.pow(t,e),r=Math.round(.5*n*(Math.random()-.5)*2);return Math.min(144e5,n+r)}function Wo(e){return e&&e._delegate?e._delegate:e}class Ko{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Go="[DEFAULT]";class Jo{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Ro;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Go})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Go;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Go;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Go;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Yo(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(i){}return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Go;return this.component?this.component.multipleInstances?e:Go:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}function Yo(e){return e===Go?void 0:e}class Qo{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Jo(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Xo=[];var Zo;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Zo||(Zo={}));const ea={debug:Zo.DEBUG,verbose:Zo.VERBOSE,info:Zo.INFO,warn:Zo.WARN,error:Zo.ERROR,silent:Zo.SILENT},ta=Zo.INFO,na={[Zo.DEBUG]:"log",[Zo.VERBOSE]:"log",[Zo.INFO]:"info",[Zo.WARN]:"warn",[Zo.ERROR]:"error"},ra=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=na[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r](`[${n}]  ${e.name}:`,...s)};class ia{constructor(e){this.name=e,this._logLevel=ta,this._logHandler=ra,this._userLogHandler=null,Xo.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Zo))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?ea[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Zo.DEBUG,...t),this._logHandler(this,Zo.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Zo.VERBOSE,...t),this._logHandler(this,Zo.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Zo.INFO,...t),this._logHandler(this,Zo.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Zo.WARN,...t),this._logHandler(this,Zo.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Zo.ERROR,...t),this._logHandler(this,Zo.ERROR,...t)}}let sa,oa;const aa=new WeakMap,la=new WeakMap,ca=new WeakMap,ua=new WeakMap,da=new WeakMap;let ha={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return la.get(e);if("objectStoreNames"===t)return e.objectStoreNames||ca.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ma(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function pa(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(oa||(oa=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(ga(this),n),ma(aa.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ma(e.apply(ga(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(ga(this),t,...r);return ca.set(s,t.sort?t.sort():[t]),ma(s)}}function fa(e){return"function"===typeof e?pa(e):(e instanceof IDBTransaction&&function(e){if(la.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));la.set(e,t)}(e),t=e,(sa||(sa=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,ha):e);var t}function ma(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(ma(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&aa.set(t,e)})).catch((()=>{})),da.set(t,e),t}(e);if(ua.has(e))return ua.get(e);const t=fa(e);return t!==e&&(ua.set(e,t),da.set(t,e)),t}const ga=e=>da.get(e);function va(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=ma(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(ma(o.result),e.oldVersion,e.newVersion,ma(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}const ya=["get","getKey","getAll","getAllKeys","count"],ba=["put","add","delete","clear"],wa=new Map;function Sa(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(wa.get(t))return wa.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=ba.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!ya.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return wa.set(t,s),s}ha=(e=>({...e,get:(t,n,r)=>Sa(t,n)||e.get(t,n,r),has:(t,n)=>!!Sa(t,n)||e.has(t,n)}))(ha);class ka{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const Ca="@firebase/app",Ea="0.11.3",Ta=new ia("@firebase/app"),_a="@firebase/app-compat",xa="@firebase/analytics-compat",Ia="@firebase/analytics",Ra="@firebase/app-check-compat",Pa="@firebase/app-check",Aa="@firebase/auth",Na="@firebase/auth-compat",Oa="@firebase/database",Da="@firebase/data-connect",La="@firebase/database-compat",ja="@firebase/functions",Ma="@firebase/functions-compat",Fa="@firebase/installations",Ua="@firebase/installations-compat",Va="@firebase/messaging",$a="@firebase/messaging-compat",Ba="@firebase/performance",za="@firebase/performance-compat",Ha="@firebase/remote-config",qa="@firebase/remote-config-compat",Wa="@firebase/storage",Ka="@firebase/storage-compat",Ga="@firebase/firestore",Ja="@firebase/vertexai",Ya="@firebase/firestore-compat",Qa="firebase",Xa="[DEFAULT]",Za={[Ca]:"fire-core",[_a]:"fire-core-compat",[Ia]:"fire-analytics",[xa]:"fire-analytics-compat",[Pa]:"fire-app-check",[Ra]:"fire-app-check-compat",[Aa]:"fire-auth",[Na]:"fire-auth-compat",[Oa]:"fire-rtdb",[Da]:"fire-data-connect",[La]:"fire-rtdb-compat",[ja]:"fire-fn",[Ma]:"fire-fn-compat",[Fa]:"fire-iid",[Ua]:"fire-iid-compat",[Va]:"fire-fcm",[$a]:"fire-fcm-compat",[Ba]:"fire-perf",[za]:"fire-perf-compat",[Ha]:"fire-rc",[qa]:"fire-rc-compat",[Wa]:"fire-gcs",[Ka]:"fire-gcs-compat",[Ga]:"fire-fst",[Ya]:"fire-fst-compat",[Ja]:"fire-vertex","fire-js":"fire-js",[Qa]:"fire-js-all"},el=new Map,tl=new Map,nl=new Map;function rl(e,t){try{e.container.addComponent(t)}catch(n){Ta.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function il(e){const t=e.name;if(nl.has(t))return Ta.debug(`There were multiple attempts to register component ${t}.`),!1;nl.set(t,e);for(const n of el.values())rl(n,e);for(const n of tl.values())rl(n,e);return!0}function sl(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function ol(e){return null!==e&&void 0!==e&&void 0!==e.settings}const al=new jo("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class ll{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Ko("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw al.create("app-deleted",{appName:this._name})}}const cl="11.5.0";function ul(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Xa,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw al.create("bad-app-name",{appName:String(i)});if(n||(n=xo()),!n)throw al.create("no-options");const s=el.get(i);if(s){if(Fo(n,s.options)&&Fo(r,s.config))return s;throw al.create("duplicate-app",{appName:i})}const o=new Qo(i);for(const l of nl.values())o.addComponent(l);const a=new ll(n,r,o);return el.set(i,a),a}function dl(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xa;const t=el.get(e);if(!t&&e===Xa&&xo())return ul();if(!t)throw al.create("no-app",{appName:e});return t}function hl(e,t,n){var r;let i=null!==(r=Za[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=[`Unable to register library "${i}" with version "${t}":`];return s&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void Ta.warn(e.join(" "))}il(new Ko(`${i}-version`,(()=>({library:i,version:t})),"VERSION"))}const pl="firebase-heartbeat-store";let fl=null;function ml(){return fl||(fl=va("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(pl)}catch(n){console.warn(n)}}}).catch((e=>{throw al.create("idb-open",{originalErrorMessage:e.message})}))),fl}async function gl(e,t){try{const n=(await ml()).transaction(pl,"readwrite"),r=n.objectStore(pl);await r.put(t,vl(e)),await n.done}catch(n){if(n instanceof Lo)Ta.warn(n.message);else{const e=al.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});Ta.warn(e.message)}}}function vl(e){return`${e.name}!${e.options.appId}`}class yl{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new wl(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=bl();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){Ta.warn(n)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=bl(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),Sl(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Sl(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=ko(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return Ta.warn(t),""}}}function bl(){return(new Date).toISOString().substring(0,10)}class wl{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Oo()&&Do().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await ml()).transaction(pl),n=await t.objectStore(pl).get(vl(e));return await t.done,n}catch(t){if(t instanceof Lo)Ta.warn(t.message);else{const e=al.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});Ta.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return gl(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return gl(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Sl(e){return ko(JSON.stringify({version:2,heartbeats:e})).length}var kl;kl="",il(new Ko("platform-logger",(e=>new ka(e)),"PRIVATE")),il(new Ko("heartbeat",(e=>new yl(e)),"PRIVATE")),hl(Ca,Ea,kl),hl(Ca,Ea,"esm2017"),hl("fire-js","");var Cl=function(e,t){return Cl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},Cl(e,t)};function El(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Cl(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function Tl(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function _l(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{l(r.next(e))}catch(t){s(t)}}function a(e){try{l(r.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))}function xl(e,t){var n,r,i,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},o=Object.create(("function"===typeof Iterator?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(l){a=[6,l],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}Object.create;function Il(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Rl(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,s=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return o}function Pl(e,t,n){if(n||2===arguments.length)for(var r,i=0,s=t.length;i<s;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}function Al(e){return this instanceof Al?(this.v=e,this):new Al(e)}function Nl(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),s=[];return r=Object.create(("function"===typeof AsyncIterator?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",(function(e){return function(t){return Promise.resolve(t).then(e,c)}})),r[Symbol.asyncIterator]=function(){return this},r;function o(e,t){i[e]&&(r[e]=function(t){return new Promise((function(n,r){s.push([e,t,n,r])>1||a(e,t)}))},t&&(r[e]=t(r[e])))}function a(e,t){try{!function(e){e.value instanceof Al?Promise.resolve(e.value.v).then(l,c):u(s[0][2],e)}(i[e](t))}catch(n){u(s[0][3],n)}}function l(e){a("next",e)}function c(e){a("throw",e)}function u(e,t){e(t),s.shift(),s.length&&a(s[0][0],s[0][1])}}function Ol(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=Il(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,i,(t=e[n](t)).done,t.value)}))}}}Object.create;"function"===typeof SuppressedError&&SuppressedError;function Dl(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Ll=Dl,jl=new jo("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ml=new ia("@firebase/auth");function Fl(e){if(Ml.logLevel<=Zo.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Ml.error(`Auth (${cl}): ${e}`,...n)}}function Ul(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Hl(e,...n)}function Vl(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Hl(e,...n)}function $l(e,t,n){const r=Object.assign(Object.assign({},Ll()),{[t]:n});return new jo("auth","Firebase",r).create(t,{appName:e.name})}function Bl(e){return $l(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function zl(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Ul(e,"argument-error"),$l(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Hl(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return jl.create(e,...n)}function ql(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Hl(t,...r)}}function Wl(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Fl(t),new Error(t)}function Kl(e,t){e||Wl(t)}function Gl(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Jl(){return"http:"===Yl()||"https:"===Yl()}function Yl(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class Ql{constructor(e,t){this.shortDelay=e,this.longDelay=t,Kl(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Po())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Jl()||Ao()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Xl(e,t){Kl(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class Zl{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Wl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Wl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Wl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ec={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},tc=new Ql(3e4,6e4);function nc(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function rc(e,t,n,r){return ic(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=Vo(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:a},i);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),Zl.fetch()(oc(e,e.config.apiHost,n,o),l)}))}async function ic(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},ec),t);try{const t=new lc(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw cc(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw cc(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw cc(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw cc(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw $l(e,a,o);Ul(e,a)}}catch(i){if(i instanceof Lo)throw i;Ul(e,"network-request-failed",{message:String(i)})}}async function sc(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await rc(e,t,n,r,i);return"mfaPendingCredential"in s&&Ul(e,"multi-factor-auth-required",{_serverResponse:s}),s}function oc(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?Xl(e.config,i):`${e.config.apiScheme}://${i}`}function ac(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class lc{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(Vl(this.auth,"network-request-failed"))),tc.get())}))}}function cc(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Vl(e,t,r);return i.customData._tokenResponse=n,i}function uc(e){return void 0!==e&&void 0!==e.enterprise}class dc{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return ac(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function hc(e,t){return rc(e,"GET","/v2/recaptchaConfig",nc(e,t))}async function pc(e,t){return rc(e,"POST","/v1/accounts:lookup",t)}function fc(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function mc(e){return 1e3*Number(e)}function gc(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Fl("JWT malformed, contained fewer than 3 sections"),null;try{const e=Co(n);return e?JSON.parse(e):(Fl("Failed to decode base64 JWT payload"),null)}catch(i){return Fl("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}function vc(e){const t=gc(e);return ql(t,"internal-error"),ql("undefined"!==typeof t.exp,"internal-error"),ql("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function yc(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof Lo&&function(e){let{code:t}=e;return"auth/user-disabled"===t||"auth/user-token-expired"===t}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class bc{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===(null===e||void 0===e?void 0:e.code)&&this.schedule(!0))}this.schedule()}}class wc{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=fc(this.lastLoginAt),this.creationTime=fc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Sc(e){var t;const n=e.auth,r=await e.getIdToken(),i=await yc(e,pc(n,{idToken:r}));ql(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?kc(s.providerUserInfo):[],a=(l=e.providerData,c=o,[...l.filter((e=>!c.some((t=>t.providerId===e.providerId)))),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),h=!!u&&d,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new wc(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(e,p)}function kc(e){return e.map((e=>{var{providerId:t}=e,n=Tl(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class Cc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ql(e.idToken,"internal-error"),ql("undefined"!==typeof e.idToken,"internal-error"),ql("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):vc(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ql(0!==e.length,"internal-error");const t=vc(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(ql(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await ic(e,{},(async()=>{const n=Vo({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=oc(e,r,"/v1/token",`key=${i}`),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",Zl.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new Cc;return n&&(ql("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(ql("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(ql("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Cc,this.toJSON())}_performRefresh(){return Wl("not implemented")}}function Ec(e,t){ql("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Tc{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=Tl(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new bc(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new wc(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await yc(this,this.stsTokenManager.getToken(this.auth,e));return ql(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Wo(e),r=await n.getIdToken(t),i=gc(r);ql(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:fc(mc(i.auth_time)),issuedAtTime:fc(mc(i.iat)),expirationTime:fc(mc(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=Wo(e);await Sc(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(ql(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Tc(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ql(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Sc(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ol(this.auth.app))return Promise.reject(Bl(this.auth));const e=await this.getIdToken();return await yc(this,async function(e,t){return rc(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,p=null!==(s=t.photoURL)&&void 0!==s?s:void 0,f=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:y,emailVerified:b,isAnonymous:w,providerData:S,stsTokenManager:k}=t;ql(y&&k,e,"internal-error");const C=Cc.fromJSON(this.name,k);ql("string"===typeof y,e,"internal-error"),Ec(u,e.name),Ec(d,e.name),ql("boolean"===typeof b,e,"internal-error"),ql("boolean"===typeof w,e,"internal-error"),Ec(h,e.name),Ec(p,e.name),Ec(f,e.name),Ec(m,e.name),Ec(g,e.name),Ec(v,e.name);const E=new Tc({uid:y,auth:e,email:d,emailVerified:b,displayName:u,isAnonymous:w,photoURL:p,phoneNumber:h,tenantId:f,stsTokenManager:C,createdAt:g,lastLoginAt:v});return S&&Array.isArray(S)&&(E.providerData=S.map((e=>Object.assign({},e)))),m&&(E._redirectEventId=m),E}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Cc;r.updateFromServerResponse(t);const i=new Tc({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Sc(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];ql(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?kc(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),o=new Cc;o.updateFromIdToken(n);const a=new Tc({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new wc(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(a,l),a}}const _c=new Map;function xc(e){Kl(e instanceof Function,"Expected a class definition");let t=_c.get(e);return t?(Kl(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,_c.set(e,t),t)}class Ic{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Ic.type="NONE";const Rc=Ic;function Pc(e,t,n){return`firebase:${e}:${t}:${n}`}class Ac{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Pc(this.userKey,r.apiKey,i),this.fullPersistenceKey=Pc("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Tc._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Ac(xc(Rc),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||xc(Rc);const s=Pc(n,e.config.apiKey,e.name);let o=null;for(const c of t)try{const t=await c._get(s);if(t){const n=Tc._fromJSON(e,t);c!==i&&(o=n),i=c;break}}catch(l){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(l){}}))),new Ac(i,e,n)):new Ac(i,e,n)}}function Nc(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(jc(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Oc(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Fc(t))return"Blackberry";if(Uc(t))return"Webos";if(Dc(t))return"Safari";if((t.includes("chrome/")||Lc(t))&&!t.includes("edge/"))return"Chrome";if(Mc(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Oc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Po();return/firefox\//i.test(e)}function Dc(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Po()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Lc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Po();return/crios\//i.test(e)}function jc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Po();return/iemobile/i.test(e)}function Mc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Po();return/android/i.test(e)}function Fc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Po();return/blackberry/i.test(e)}function Uc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Po();return/webos/i.test(e)}function Vc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Po();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function $c(){return function(){const e=Po();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Bc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Po();return Vc(e)||Mc(e)||Uc(e)||Fc(e)||/windows phone/i.test(e)||jc(e)}function zc(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Nc(Po());break;case"Worker":t=`${Nc(Po())}-${e}`;break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return`${t}/JsCore/${cl}/${r}`}class Hc{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(i){r(i)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class qc{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class Wc{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Gc(this),this.idTokenSubscription=new Gc(this),this.beforeStateQueue=new Hc(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=jl,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=xc(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await Ac.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await pc(this,{idToken:e}),n=await Tc._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(ol(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(s)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ql(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Sc(e)}catch(t){if("auth/network-request-failed"!==(null===t||void 0===t?void 0:t.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ol(this.app))return Promise.reject(Bl(this));const t=e?Wo(e):null;return t&&ql(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&ql(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return ol(this.app)?Promise.reject(Bl(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ol(this.app)?Promise.reject(Bl(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(xc(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return rc(e,"GET","/v2/passwordPolicy",nc(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new qc(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new jo("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return rc(e,"POST","/v2/accounts:revokeToken",nc(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&xc(e)||this._popupRedirectResolver;ql(t,this,"argument-error"),this.redirectPersistenceManager=await Ac.create(this,[xc(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(ql(o,this,"internal-error"),o.then((()=>{s||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ql(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=zc(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(ol(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Ml.logLevel<=Zo.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Ml.warn(`Auth (${cl}): ${e}`,...n)}}(`Error while retrieving App Check token: ${t.error}`),null===t||void 0===t?void 0:t.token}}function Kc(e){return Wo(e)}class Gc{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new zo(e,t);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return ql(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Jc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Yc(e){return Jc.loadJS(e)}function Qc(e){return`__${e}${Math.floor(1e6*Math.random())}`}class Xc{constructor(){this.enterprise=new Zc}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Zc{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const eu="NO_RECAPTCHA";class tu{constructor(e){this.type="recaptcha-enterprise",this.auth=Kc(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;uc(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n(eu)}))})):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Xc).execute("siteKey",{action:"verify"})}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{hc(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new dc(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&uc(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Jc.recaptchaEnterpriseScript;0!==t.length&&(t+=i),Yc(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function nu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=new tu(e);let o;if(i)o=eu;else try{o=await s.verify(n)}catch(l){o=await s.verify(n,!0)}const a=Object.assign({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in a){const e=a.phoneEnrollmentInfo.phoneNumber,t=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const e=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function ru(e,t,n,r,i){var s,o;if("EMAIL_PASSWORD_PROVIDER"===i){if(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await nu(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if("auth/missing-recaptcha-token"===i.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await nu(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}if("PHONE_PROVIDER"===i){if(null===(o=e._getRecaptchaConfig())||void 0===o?void 0:o.isProviderEnabled("PHONE_PROVIDER")){const i=await nu(e,t,n);return r(e,i).catch((async i=>{var s;if("AUDIT"===(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.getProviderEnforcementState("PHONE_PROVIDER"))&&("auth/missing-recaptcha-token"===i.code||"auth/invalid-app-credential"===i.code)){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const i=await nu(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)}))}{const i=await nu(e,t,n,!1,!0);return r(e,i)}}return Promise.reject(i+" provider is not supported.")}async function iu(e){const t=Kc(e),n=await hc(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new dc(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new tu(t).verify()}}function su(e,t,n){const r=Kc(e);ql(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=ou(t),{host:o,port:a}=function(e){const t=ou(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:au(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:au(t)}}}(t),l={url:`${s}//${o}${null===a?"":`:${a}`}/`},c=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator)return ql(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void ql(Fo(l,r.config.emulator)&&Fo(c,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=l,r.emulatorConfig=c,r.settings.appVerificationDisabledForTesting=!0,i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function ou(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function au(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class lu{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Wl("not implemented")}_getIdTokenResponse(e){return Wl("not implemented")}_linkToIdToken(e,t){return Wl("not implemented")}_getReauthenticationResolver(e){return Wl("not implemented")}}async function cu(e,t){return rc(e,"POST","/v1/accounts:signUp",t)}async function uu(e,t){return sc(e,"POST","/v1/accounts:signInWithPassword",nc(e,t))}class du extends lu{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new du(e,t,"password")}static _fromEmailAndCode(e,t){return new du(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return ru(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",uu,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return sc(e,"POST","/v1/accounts:signInWithEmailLink",nc(e,t))}(e,{email:this._email,oobCode:this._password});default:Ul(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return ru(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",cu,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return sc(e,"POST","/v1/accounts:signInWithEmailLink",nc(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Ul(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function hu(e,t){return sc(e,"POST","/v1/accounts:signInWithIdp",nc(e,t))}class pu extends lu{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new pu(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ul("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=Tl(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new pu(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return hu(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,hu(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,hu(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Vo(t)}return e}}async function fu(e,t){return rc(e,"POST","/v1/accounts:sendVerificationCode",nc(e,t))}const mu={USER_NOT_FOUND:"user-not-found"};class gu extends lu{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new gu({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new gu({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return sc(e,"POST","/v1/accounts:signInWithPhoneNumber",nc(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await sc(e,"POST","/v1/accounts:signInWithPhoneNumber",nc(e,t));if(n.temporaryProof)throw cc(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return sc(e,"POST","/v1/accounts:signInWithPhoneNumber",nc(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),mu)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new gu({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class vu{constructor(e){var t,n,r,i,s,o;const a=$o(Bo(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);ql(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=$o(Bo(e)).link,n=t?$o(Bo(t)).deep_link_id:null,r=$o(Bo(e)).deep_link_id;return(r?$o(Bo(r)).link:null)||r||n||t||e}(e);try{return new vu(t)}catch(n){return null}}}class yu{constructor(){this.providerId=yu.PROVIDER_ID}static credential(e,t){return du._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=vu.parseLink(t);return ql(n,"argument-error"),du._fromEmailAndCode(e,n.code,n.tenantId)}}yu.PROVIDER_ID="password",yu.EMAIL_PASSWORD_SIGN_IN_METHOD="password",yu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class bu{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class wu extends bu{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Su extends wu{constructor(){super("facebook.com")}static credential(e){return pu._fromParams({providerId:Su.PROVIDER_ID,signInMethod:Su.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Su.credentialFromTaggedObject(e)}static credentialFromError(e){return Su.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Su.credential(t.oauthAccessToken)}catch(n){return null}}}Su.FACEBOOK_SIGN_IN_METHOD="facebook.com",Su.PROVIDER_ID="facebook.com";class ku extends wu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return pu._fromParams({providerId:ku.PROVIDER_ID,signInMethod:ku.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ku.credentialFromTaggedObject(e)}static credentialFromError(e){return ku.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return ku.credential(n,r)}catch(i){return null}}}ku.GOOGLE_SIGN_IN_METHOD="google.com",ku.PROVIDER_ID="google.com";class Cu extends wu{constructor(){super("github.com")}static credential(e){return pu._fromParams({providerId:Cu.PROVIDER_ID,signInMethod:Cu.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Cu.credentialFromTaggedObject(e)}static credentialFromError(e){return Cu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Cu.credential(t.oauthAccessToken)}catch(n){return null}}}Cu.GITHUB_SIGN_IN_METHOD="github.com",Cu.PROVIDER_ID="github.com";class Eu extends wu{constructor(){super("twitter.com")}static credential(e,t){return pu._fromParams({providerId:Eu.PROVIDER_ID,signInMethod:Eu.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Eu.credentialFromTaggedObject(e)}static credentialFromError(e){return Eu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Eu.credential(n,r)}catch(i){return null}}}Eu.TWITTER_SIGN_IN_METHOD="twitter.com",Eu.PROVIDER_ID="twitter.com";class Tu{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await Tc._fromIdTokenResponse(e,n,r),s=_u(n);return new Tu({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=_u(n);return new Tu({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function _u(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class xu extends Lo{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,xu.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new xu(e,t,n,r)}}function Iu(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw xu._fromErrorAndOperation(e,n,t,r);throw n}))}async function Ru(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await yc(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Tu._forOperation(e,"link",r)}async function Pu(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(ol(r.app))return Promise.reject(Bl(r));const i="reauthenticate";try{const s=await yc(e,Iu(r,i,t,e),n);ql(s.idToken,r,"internal-error");const o=gc(s.idToken);ql(o,r,"internal-error");const{sub:a}=o;return ql(e.uid===a,r,"user-mismatch"),Tu._forOperation(e,i,s)}catch(s){throw"auth/user-not-found"===(null===s||void 0===s?void 0:s.code)&&Ul(r,"user-mismatch"),s}}async function Au(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(ol(e.app))return Promise.reject(Bl(e));const r="signIn",i=await Iu(e,r,t),s=await Tu._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function Nu(e,t){return rc(e,"POST","/v2/accounts/mfaEnrollment:start",nc(e,t))}new WeakMap;const Ou="__sak";class Du{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ou,"1"),this.storage.removeItem(Ou),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Lu extends Du{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Bc(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);$c()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Lu.type="LOCAL";const ju=Lu;class Mu extends Du{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Mu.type="SESSION";const Fu=Mu;class Uu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Uu(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Vu(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Uu.receivers=[];class $u{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const l=Vu("",20);r.port1.start();const c=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function Bu(){return window}function zu(){return"undefined"!==typeof Bu().WorkerGlobalScope&&"function"===typeof Bu().importScripts}const Hu="firebaseLocalStorageDb",qu="firebaseLocalStorage",Wu="fbase_key";class Ku{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function Gu(e,t){return e.transaction([qu],t?"readwrite":"readonly").objectStore(qu)}function Ju(){const e=indexedDB.open(Hu,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(qu,{keyPath:Wu})}catch(r){n(r)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(qu)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Hu);return new Ku(e).toPromise()}(),t(await Ju()))}))}))}async function Yu(e,t,n){const r=Gu(e,!0).put({[Wu]:t,value:n});return new Ku(r).toPromise()}function Qu(e,t){const n=Gu(e,!0).delete(t);return new Ku(n).toPromise()}class Xu{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Ju()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return zu()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Uu._getInstance(zu()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new $u(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ju();return await Yu(e,Ou,"1"),await Qu(e,Ou),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>Yu(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=Gu(e,!1).get(t),r=await new Ku(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Qu(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=Gu(e,!1).getAll();return new Ku(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Xu.type="LOCAL";const Zu=Xu;function ed(e,t){return rc(e,"POST","/v2/accounts/mfaSignIn:start",nc(e,t))}Qc("rcb"),new Ql(3e4,6e4);const td="recaptcha";async function nd(e,t,n){var r;if(!e._getRecaptchaConfig())try{await iu(e)}catch(i){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){ql("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},s=ru(e,r,"mfaSmsEnrollment",(async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===eu){ql((null===n||void 0===n?void 0:n.type)===td,e,"argument-error");return Nu(e,await rd(e,t,n))}return Nu(e,t)}),"PHONE_PROVIDER"),o=await s.catch((e=>Promise.reject(e)));return o.phoneSessionInfo.sessionInfo}{ql("signin"===t.type,e,"internal-error");const s=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;ql(s,e,"missing-multi-factor-info");const o={mfaPendingCredential:t.credential,mfaEnrollmentId:s,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},a=ru(e,o,"mfaSmsSignIn",(async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===eu){ql((null===n||void 0===n?void 0:n.type)===td,e,"argument-error");return ed(e,await rd(e,t,n))}return ed(e,t)}),"PHONE_PROVIDER"),l=await a.catch((e=>Promise.reject(e)));return l.phoneResponseInfo.sessionInfo}}{const t={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=ru(e,t,"sendVerificationCode",(async(e,t)=>{if(t.captchaResponse===eu){ql((null===n||void 0===n?void 0:n.type)===td,e,"argument-error");return fu(e,await rd(e,t,n))}return fu(e,t)}),"PHONE_PROVIDER"),s=await r.catch((e=>Promise.reject(e)));return s.sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function rd(e,t,n){ql(n.type===td,e,"argument-error");const r=await n.verify();ql("string"===typeof r,e,"argument-error");const i=Object.assign({},t);if("phoneEnrollmentInfo"in i){const e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,s=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:s}}),i}if("phoneSignInInfo"in i){const e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}return Object.assign(i,{recaptchaToken:r}),i}class id{constructor(e){this.providerId=id.PROVIDER_ID,this.auth=Kc(e)}verifyPhoneNumber(e,t){return nd(this.auth,e,Wo(t))}static credential(e,t){return gu._fromVerification(e,t)}static credentialFromResult(e){const t=e;return id.credentialFromTaggedObject(t)}static credentialFromError(e){return id.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?gu._fromTokenResponse(n,r):null}}function sd(e,t){return t?xc(t):(ql(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}id.PROVIDER_ID="phone",id.PHONE_SIGN_IN_METHOD="phone";class od extends lu{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return hu(e,this._buildIdpRequest())}_linkToIdToken(e,t){return hu(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return hu(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function ad(e){return Au(e.auth,new od(e),e.bypassAuthState)}function ld(e){const{auth:t,user:n}=e;return ql(n,t,"internal-error"),Pu(n,new od(e),e.bypassAuthState)}async function cd(e){const{auth:t,user:n}=e;return ql(n,t,"internal-error"),Ru(n,new od(e),e.bypassAuthState)}class ud{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ad;case"linkViaPopup":case"linkViaRedirect":return cd;case"reauthViaPopup":case"reauthViaRedirect":return ld;default:Ul(this.auth,"internal-error")}}resolve(e){Kl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Kl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const dd=new Ql(2e3,1e4);class hd extends ud{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,hd.currentPopupAction&&hd.currentPopupAction.cancel(),hd.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ql(e,this.auth,"internal-error"),e}async onExecution(){Kl(1===this.filter.length,"Popup operations only handle one event");const e=Vu();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(Vl(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Vl(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,hd.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Vl(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,dd.get())};e()}}hd.currentPopupAction=null;const pd=new Map;class fd extends ud{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=pd.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=vd(t),r=gd(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}pd.set(this.auth._key(),e)}return this.bypassAuthState||pd.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function md(e,t){pd.set(e._key(),t)}function gd(e){return xc(e._redirectPersistence)}function vd(e){return Pc("pendingRedirect",e.config.apiKey,e.name)}async function yd(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(ol(e.app))return Promise.reject(Bl(e));const r=Kc(e),i=sd(r,t),s=new fd(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}class bd{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Sd(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Sd(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Vl(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(wd(e))}saveEventToCache(e){this.cachedEventUids.add(wd(e)),this.lastProcessedEventTime=Date.now()}}function wd(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function Sd(e){let{type:t,error:n}=e;return"unknown"===t&&"auth/no-auth-event"===(null===n||void 0===n?void 0:n.code)}const kd=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Cd=/^https?/;async function Ed(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return rc(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(Td(r))return}catch(n){}Ul(e,"unauthorized-domain")}function Td(e){const t=Gl(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Cd.test(n))return!1;if(kd.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const _d=new Ql(3e4,6e4);function xd(){const e=Bu().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Id(e){return new Promise(((t,n)=>{var r,i,s;function o(){xd(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{xd(),n(Vl(e,"network-request-failed"))},timeout:_d.get()})}if(null===(i=null===(r=Bu().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=Bu().gapi)||void 0===s?void 0:s.load)){const t=Qc("iframefcb");return Bu()[t]=()=>{gapi.load?o():n(Vl(e,"network-request-failed"))},Yc(`${Jc.gapiScript}?onload=${t}`).catch((e=>n(e)))}o()}})).catch((e=>{throw Rd=null,e}))}let Rd=null;const Pd=new Ql(5e3,15e3),Ad={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Nd=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Od(e){const t=e.config;ql(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Xl(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:cl},i=Nd.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Vo(r).slice(1)}`}async function Dd(e){const t=await function(e){return Rd=Rd||Id(e),Rd}(e),n=Bu().gapi;return ql(n,e,"internal-error"),t.open({where:document.body,url:Od(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ad,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Vl(e,"network-request-failed"),s=Bu().setTimeout((()=>{r(i)}),Pd.get());function o(){Bu().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}const Ld={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class jd{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function Md(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},Ld),{width:r.toString(),height:i.toString(),top:s,left:o}),c=Po().toLowerCase();n&&(a=Lc(c)?"_blank":n),Oc(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,t)=>{let[n,r]=t;return`${e}${n}=${r},`}),"");if(function(){var e;return Vc(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Po())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new jd(null);const d=window.open(t||"",a,u);ql(d,e,"popup-blocked");try{d.focus()}catch(h){}return new jd(d)}const Fd="__/auth/handler",Ud="emulator/auth/handler",Vd=encodeURIComponent("fac");async function $d(e,t,n,r,i,s){ql(e.config.authDomain,e,"auth-domain-config-required"),ql(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:cl,eventId:i};if(t instanceof bu){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof wu){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?`#${Vd}=${encodeURIComponent(l)}`:"";return`${function(e){let{config:t}=e;if(!t.emulator)return`https://${t.authDomain}/${Fd}`;return Xl(t,Ud)}(e)}?${Vo(a).slice(1)}${c}`}const Bd="webStorageSupport";const zd=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Fu,this._completeRedirectFn=yd,this._overrideRedirectResult=md}async _openPopup(e,t,n,r){var i;Kl(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Md(e,await $d(e,t,n,Gl(),r),Vu())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Bu().location.href=e}(await $d(e,t,n,Gl(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Kl(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await Dd(e),n=new bd(e);return t.register("authEvent",(t=>{ql(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Bd,{type:Bd},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Bd];void 0!==i&&t(!!i),Ul(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Ed(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Bc()||Dc()||Vc()}};var Hd="@firebase/auth",qd="1.9.1";class Wd{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ql(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Kd=Io("authIdTokenMaxAge")||300;let Gd=null;var Jd,Yd;Jd={loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Vl("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Jc=Jd,Yd="Browser",il(new Ko("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ql(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:Yd,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:zc(Yd)},c=new Wc(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(xc);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),il(new Ko("auth-internal",(e=>(e=>new Wd(e))(Kc(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),hl(Hd,qd,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Yd)),hl(Hd,qd,"esm2017");hl("firebase","11.5.0","app");const Qd="@firebase/installations",Xd="0.6.13",Zd=1e4,eh=`w:${Xd}`,th="FIS_v2",nh=36e5,rh=new jo("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function ih(e){return e instanceof Lo&&e.code.includes("request-failed")}function sh(e){let{projectId:t}=e;return`https://firebaseinstallations.googleapis.com/v1/projects/${t}/installations`}function oh(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function ah(e,t){const n=(await t.json()).error;return rh.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function lh(e){let{apiKey:t}=e;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function ch(e,t){let{refreshToken:n}=t;const r=lh(e);return r.append("Authorization",function(e){return`${th} ${e}`}(n)),r}async function uh(e){const t=await e();return t.status>=500&&t.status<600?e():t}function dh(e){return new Promise((t=>{setTimeout(t,e)}))}const hh=/^[cdef][\w-]{21}$/;function ph(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){const t=(n=e,btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_"));var n;return t.substr(0,22)}(e);return hh.test(t)?t:""}catch(e){return""}}function fh(e){return`${e.appName}!${e.appId}`}const mh=new Map;function gh(e,t){const n=fh(e);vh(n,t),function(e,t){const n=bh();n&&n.postMessage({key:e,fid:t});wh()}(n,t)}function vh(e,t){const n=mh.get(e);if(n)for(const r of n)r(t)}let yh=null;function bh(){return!yh&&"BroadcastChannel"in self&&(yh=new BroadcastChannel("[Firebase] FID Change"),yh.onmessage=e=>{vh(e.data.key,e.data.fid)}),yh}function wh(){0===mh.size&&yh&&(yh.close(),yh=null)}const Sh="firebase-installations-store";let kh=null;function Ch(){return kh||(kh=va("firebase-installations-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(Sh)}})),kh}async function Eh(e,t){const n=fh(e),r=(await Ch()).transaction(Sh,"readwrite"),i=r.objectStore(Sh),s=await i.get(n);return await i.put(t,n),await r.done,s&&s.fid===t.fid||gh(e,t.fid),t}async function Th(e){const t=fh(e),n=(await Ch()).transaction(Sh,"readwrite");await n.objectStore(Sh).delete(t),await n.done}async function _h(e,t){const n=fh(e),r=(await Ch()).transaction(Sh,"readwrite"),i=r.objectStore(Sh),s=await i.get(n),o=t(s);return void 0===o?await i.delete(n):await i.put(o,n),await r.done,!o||s&&s.fid===o.fid||gh(e,o.fid),o}async function xh(e){let t;const n=await _h(e.appConfig,(n=>{const r=function(e){const t=e||{fid:ph(),registrationStatus:0};return Ph(t)}(n),i=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(rh.create("app-offline"))}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(e,t){try{const n=await async function(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e,{fid:i}=t;const s=sh(n),o=lh(n),a=r.getImmediate({optional:!0});if(a){const e=await a.getHeartbeatsHeader();e&&o.append("x-firebase-client",e)}const l={fid:i,authVersion:th,appId:n.appId,sdkVersion:eh},c={method:"POST",headers:o,body:JSON.stringify(l)},u=await uh((()=>fetch(s,c)));if(u.ok){const e=await u.json();return{fid:e.fid||i,registrationStatus:2,refreshToken:e.refreshToken,authToken:oh(e.authToken)}}throw await ah("Create Installation",u)}(e,t);return Eh(e.appConfig,n)}catch(n){throw ih(n)&&409===n.customData.serverCode?await Th(e.appConfig):await Eh(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:Ih(e)}:{installationEntry:t}}(e,r);return t=i.registrationPromise,i.installationEntry}));return""===n.fid?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function Ih(e){let t=await Rh(e.appConfig);for(;1===t.registrationStatus;)await dh(100),t=await Rh(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await xh(e);return n||t}return t}function Rh(e){return _h(e,(e=>{if(!e)throw rh.create("installation-not-found");return Ph(e)}))}function Ph(e){return 1===(t=e).registrationStatus&&t.registrationTime+Zd<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function Ah(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e;const i=function(e,t){let{fid:n}=t;return`${sh(e)}/${n}/authTokens:generate`}(n,t),s=ch(n,t),o=r.getImmediate({optional:!0});if(o){const e=await o.getHeartbeatsHeader();e&&s.append("x-firebase-client",e)}const a={installation:{sdkVersion:eh,appId:n.appId}},l={method:"POST",headers:s,body:JSON.stringify(a)},c=await uh((()=>fetch(i,l)));if(c.ok){return oh(await c.json())}throw await ah("Generate Auth Token",c)}async function Nh(e){let t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=await _h(e.appConfig,(r=>{if(!Dh(r))throw rh.create("not-registered");const i=r.authToken;if(!n&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+nh}(e)}(i))return r;if(1===i.requestStatus)return t=async function(e,t){let n=await Oh(e.appConfig);for(;1===n.authToken.requestStatus;)await dh(100),n=await Oh(e.appConfig);const r=n.authToken;return 0===r.requestStatus?Nh(e,t):r}(e,n),r;{if(!navigator.onLine)throw rh.create("app-offline");const n=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(r);return t=async function(e,t){try{const n=await Ah(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return await Eh(e.appConfig,r),n}catch(n){if(!ih(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await Eh(e.appConfig,n)}else await Th(e.appConfig);throw n}}(e,n),n}}));return t?await t:r.authToken}function Oh(e){return _h(e,(e=>{if(!Dh(e))throw rh.create("not-registered");const t=e.authToken;return 1===(n=t).requestStatus&&n.requestTime+Zd<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var n}))}function Dh(e){return void 0!==e&&2===e.registrationStatus}async function Lh(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e;await async function(e){const{registrationPromise:t}=await xh(e);t&&await t}(n);return(await Nh(n,t)).token}function jh(e){return rh.create("missing-app-config-values",{valueName:e})}const Mh="installations",Fh=e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw jh("App Configuration");if(!e.name)throw jh("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw jh(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:sl(t,"heartbeat"),_delete:()=>Promise.resolve()}},Uh=e=>{const t=sl(e.getProvider("app").getImmediate(),Mh).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:r}=await xh(t);return r?r.catch(console.error):Nh(t).catch(console.error),n.fid}(t),getToken:e=>Lh(t,e)}};il(new Ko(Mh,Fh,"PUBLIC")),il(new Ko("installations-internal",Uh,"PRIVATE")),hl(Qd,Xd),hl(Qd,Xd,"esm2017");const Vh="analytics",$h="https://www.googletagmanager.com/gtag/js",Bh=new ia("@firebase/analytics"),zh=new jo("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Hh(e){if(!e.startsWith($h)){const t=zh.create("invalid-gtag-resource",{gtagURL:e});return Bh.warn(t.message),""}return e}function qh(e){return Promise.all(e.map((e=>e.catch((e=>e)))))}function Wh(e,t){const n=function(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}("firebase-js-sdk-policy",{createScriptURL:Hh}),r=document.createElement("script"),i=`${$h}?l=${e}&id=${t}`;r.src=n?null===n||void 0===n?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function Kh(e,t,n,r){return async function(i){try{for(var s=arguments.length,o=new Array(s>1?s-1:0),a=1;a<s;a++)o[a-1]=arguments[a];if("event"===i){const[r,i]=o;await async function(e,t,n,r,i){try{let s=[];if(i&&i.send_to){let e=i.send_to;Array.isArray(e)||(e=[e]);const r=await qh(n);for(const n of e){const e=r.find((e=>e.measurementId===n)),i=e&&t[e.appId];if(!i){s=[];break}s.push(i)}}0===s.length&&(s=Object.values(t)),await Promise.all(s),e("event",r,i||{})}catch(s){Bh.error(s)}}(e,t,n,r,i)}else if("config"===i){const[i,s]=o;await async function(e,t,n,r,i,s){const o=r[i];try{if(o)await t[o];else{const e=(await qh(n)).find((e=>e.measurementId===i));e&&await t[e.appId]}}catch(a){Bh.error(a)}e("config",i,s)}(e,t,n,r,i,s)}else if("consent"===i){const[t,n]=o;e("consent",t,n)}else if("get"===i){const[t,n,r]=o;e("get",t,n,r)}else if("set"===i){const[t]=o;e("set",t)}else e(i,...o)}catch(l){Bh.error(l)}}}const Gh=new class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function Jh(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function Yh(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Gh,n=arguments.length>2?arguments[2]:void 0;const{appId:r,apiKey:i,measurementId:s}=e.options;if(!r)throw zh.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw zh.create("no-api-key")}const o=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new Xh;return setTimeout((async()=>{a.abort()}),void 0!==n?n:6e4),Qh({appId:r,apiKey:i,measurementId:s},o,a,t)}async function Qh(e,t,n){let{throttleEndTimeMillis:r,backoffCount:i}=t,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Gh;var o;const{appId:a,measurementId:l}=e;try{await function(e,t){return new Promise(((n,r)=>{const i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener((()=>{clearTimeout(s),r(zh.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}(n,r)}catch(c){if(l)return Bh.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${null===c||void 0===c?void 0:c.message}]`),{appId:a,measurementId:l};throw c}try{const t=await async function(e){var t;const{appId:n,apiKey:r}=e,i={method:"GET",headers:Jh(r)},s="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),o=await fetch(s,i);if(200!==o.status&&304!==o.status){let e="";try{const n=await o.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(a){}throw zh.create("config-fetch-failed",{httpStatus:o.status,responseMessage:e})}return o.json()}(e);return s.deleteThrottleMetadata(a),t}catch(c){const t=c;if(!function(e){if(!(e instanceof Lo)||!e.customData)return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(t)){if(s.deleteThrottleMetadata(a),l)return Bh.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${null===t||void 0===t?void 0:t.message}]`),{appId:a,measurementId:l};throw c}const r=503===Number(null===(o=null===t||void 0===t?void 0:t.customData)||void 0===o?void 0:o.httpStatus)?qo(i,s.intervalMillis,30):qo(i,s.intervalMillis),u={throttleEndTimeMillis:Date.now()+r,backoffCount:i+1};return s.setThrottleMetadata(a,u),Bh.debug(`Calling attemptFetch again in ${r} millis`),Qh(e,u,n,s)}}class Xh{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach((e=>e()))}}let Zh,ep;function tp(e){ep=e}function np(e){Zh=e}async function rp(e,t,n,r,i,s,o){var a;const l=Yh(e);l.then((t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&Bh.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)})).catch((e=>Bh.error(e))),t.push(l);const c=async function(){if(!Oo())return Bh.warn(zh.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await Do()}catch(e){return Bh.warn(zh.create("indexeddb-unavailable",{errorInfo:null===e||void 0===e?void 0:e.toString()}).message),!1}return!0}().then((e=>e?r.getId():void 0)),[u,d]=await Promise.all([l,c]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes($h)&&n.src.includes(e))return n;return null})(s)||Wh(s,u.measurementId),ep&&(i("consent","default",ep),tp(void 0)),i("js",new Date);const h=null!==(a=null===o||void 0===o?void 0:o.config)&&void 0!==a?a:{};return h.origin="firebase",h.update=!0,null!=d&&(h.firebase_id=d),i("config",u.measurementId,h),Zh&&(i("set",Zh),np(void 0)),u.measurementId}class ip{constructor(e){this.app=e}_delete(){return delete sp[this.app.options.appId],Promise.resolve()}}let sp={},op=[];const ap={};let lp,cp,up="dataLayer",dp="gtag",hp=!1;function pp(){const e=[];if(Ao()&&e.push("This is a browser extension environment."),"undefined"!==typeof navigator&&navigator.cookieEnabled||e.push("Cookies are not available."),e.length>0){const t=e.map(((e,t)=>`(${t+1}) ${e}`)).join(" "),n=zh.create("invalid-analytics-context",{errorInfo:t});Bh.warn(n.message)}}function fp(e,t,n){pp();const r=e.options.appId;if(!r)throw zh.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw zh.create("no-api-key");Bh.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=sp[r])throw zh.create("already-exists",{id:r});if(!hp){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(up);const{wrappedGtag:e,gtagCore:t}=function(e,t,n,r,i){let s=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window[r].push(arguments)};return window[i]&&"function"===typeof window[i]&&(s=window[i]),window[i]=Kh(s,e,t,n),{gtagCore:s,wrappedGtag:window[i]}}(sp,op,ap,up,dp);cp=e,lp=t,hp=!0}sp[r]=rp(e,op,ap,t,lp,up,n);return new ip(e)}function mp(e,t,n,r){e=Wo(e),async function(e,t,n,r,i){if(i&&i.global)e("event",n,r);else{const i=await t;e("event",n,Object.assign(Object.assign({},r),{send_to:i}))}}(cp,sp[e.app.options.appId],t,n,r).catch((e=>Bh.error(e)))}const gp="@firebase/analytics",vp="0.10.12";il(new Ko(Vh,((e,t)=>{let{options:n}=t;return fp(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n)}),"PUBLIC")),il(new Ko("analytics-internal",(function(e){try{const t=e.getProvider(Vh).getImmediate();return{logEvent:(e,n,r)=>mp(t,e,n,r)}}catch(t){throw zh.create("interop-component-reg-failed",{reason:t})}}),"PRIVATE")),hl(gp,vp),hl(gp,vp,"esm2017");var yp,bp="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},wp={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,(function(){this.blockSize=-1})),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,s=this.h,o=0;o<t;){if(0==s)for(;o<=r;)n(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(i[s++]=e.charCodeAt(o++),s==this.blockSize){n(this,i),s=0;break}}else for(;o<t;)if(i[s++]=e[o++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function s(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new r([0|e],0>e?-1:0)})):new r([0|e],0>e?-1:0)}function o(e){if(isNaN(e)||!isFinite(e))return a;if(0>e)return h(o(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var a=s(0),l=s(1),c=s(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(l)}function p(e,t){return e.add(h(t))}function f(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(a,a);if(d(e))return t=g(h(e),t),new m(h(t.g),h(t.h));if(d(t))return t=g(e,h(t)),new m(h(t.g),t.h);if(30<e.g.length){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=v(n),r=v(r);var i=y(n,1),s=y(r,1);for(r=y(r,2),n=y(n,2);!u(r);){var c=s.add(r);0>=c.l(e)&&(i=i.add(n),s=c),r=y(r,1),n=y(n,1)}return t=p(e,i.j(t)),new m(i,t)}for(i=a;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(s=o(n)).j(t);d(c)||0<c.l(e);)c=(s=o(n-=r)).j(t);u(s)&&(s=l),i=i.add(s),e=p(e,c)}return new m(i,e)}function v(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function y(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,s=[],o=0;o<i;o++)s[o]=0<t?e.i(o+n)>>>t|e.i(o+n+1)<<32-t:e.i(o+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);for(var t=o(Math.pow(e,6)),n=this,r="";;){var i=g(n,t).g,s=((0<(n=p(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=p(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,s=0;s<=t;s++){var o=i+(65535&this.i(s))+(65535&e.i(s)),a=(o>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);i=a>>>16,o&=65535,a&=65535,n[s]=a<<16|o}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return a;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(0>this.l(c)&&0>e.l(c))return o(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<e.g.length;s++){var l=this.i(i)>>>16,p=65535&this.i(i),m=e.i(s)>>>16,g=65535&e.i(s);n[2*i+2*s]+=p*g,f(n,2*i+2*s),n[2*i+2*s+1]+=l*g,f(n,2*i+2*s+1),n[2*i+2*s+1]+=p*m,f(n,2*i+2*s+1),n[2*i+2*s+2]+=l*m,f(n,2*i+2*s+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,wp.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=o,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=o(Math.pow(n,8)),i=a,s=0;s<t.length;s+=8){var l=Math.min(8,t.length-s),c=parseInt(t.substring(s,s+l),n);8>l?(l=o(Math.pow(n,l)),i=i.j(l).add(o(c))):i=(i=i.j(r)).add(o(c))}return i},yp=wp.Integer=r}).apply("undefined"!==typeof bp?bp:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var Sp,kp,Cp,Ep,Tp,_p,xp,Ip,Rp="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Pp={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Rp&&Rp];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var o=e[s];if(!(o in i))break e;i=i[o]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(e,t){return t}))}}));var r=r||{},i=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function h(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function p(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function f(e){return/^[\s\xa0]*$/.test(e)}function m(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var v=-1!=m().indexOf("Gecko")&&!(-1!=m().toLowerCase().indexOf("webkit")&&-1==m().indexOf("Edge"))&&!(-1!=m().indexOf("Trident")||-1!=m().indexOf("MSIE"))&&-1==m().indexOf("Edge");function y(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function b(e){const t={};for(const n in e)t[n]=e[n];return t}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<w.length;t++)n=w[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function k(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function C(e){i.setTimeout((()=>{throw e}),0)}function E(){var e=R;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var T=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new _),(e=>e.reset()));class _{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let x,I=!1,R=new class{constructor(){this.h=this.g=null}add(e,t){const n=T.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},P=()=>{const e=i.Promise.resolve(void 0);x=()=>{e.then(A)}};var A=()=>{for(var e;e=E();){try{e.h.call(e.g)}catch(n){C(n)}var t=T;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}I=!1};function N(){this.s=this.s,this.C=this.C}function O(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}N.prototype.s=!1,N.prototype.ma=function(){this.s||(this.s=!0,this.N())},N.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},O.prototype.h=function(){this.defaultPrevented=!0};var D=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(n){}return e}();function L(e,t){if(O.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(v){e:{try{g(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:j[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&L.aa.h.call(this)}}d(L,O);var j={2:"touch",3:"pen",4:"mouse"};L.prototype.h=function(){L.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var M="closure_listenable_"+(1e6*Math.random()|0),F=0;function U(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++F,this.da=this.fa=!1}function V(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function $(e){this.src=e,this.g={},this.h=0}function B(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(V(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function z(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}$.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=z(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new U(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var H="closure_lm_"+(1e6*Math.random()|0),q={};function W(e,t,n,r,i){if(r&&r.once)return G(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)W(e,t[s],n,r,i);return null}return n=te(n),e&&e[M]?e.K(t,n,o(r)?!!r.capture:!!r,i):K(e,t,n,!1,r,i)}function K(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var a=o(i)?!!i.capture:!!i,l=Z(e);if(l||(e[H]=l=new $(e)),(n=l.add(t,n,r,a,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=X;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)D||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Q(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function G(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)G(e,t[s],n,r,i);return null}return n=te(n),e&&e[M]?e.L(t,n,o(r)?!!r.capture:!!r,i):K(e,t,n,!0,r,i)}function J(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)J(e,t[s],n,r,i);else r=o(r)?!!r.capture:!!r,n=te(n),e&&e[M]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=z(s=e.g[t],n,r,i))&&(V(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=z(t,n,r,i)),(n=-1<e?t[e]:null)&&Y(n))}function Y(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[M])B(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Q(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(B(n,e),0==n.h&&(n.src=null,t[H]=null)):V(e)}}}function Q(e){return e in q?q[e]:q[e]="on"+e}function X(e,t){if(e.da)e=!0;else{t=new L(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&Y(e),e=n.call(r,t)}return e}function Z(e){return(e=e[H])instanceof $?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){N.call(this),this.i=new $(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new O(t,e);else if(t instanceof O)t.target=t.target||e;else{var i=t;S(t=new O(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=ie(o,r,!0,t)&&i}if(i=ie(o=t.g=e,r,!0,t)&&i,i=ie(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ie(o=t.g=n[s],r,!1,t)&&i}function ie(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.da&&o.capture==n){var a=o.listener,l=o.ha||o.src;o.fa&&B(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}function se(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function oe(e){e.g=se((()=>{e.g=null,e.i&&(e.i=!1,oe(e))}),e.l);const t=e.h;e.h=null,e.m.apply(null,t)}d(ne,N),ne.prototype[M]=!0,ne.prototype.removeEventListener=function(e,t,n,r){J(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)V(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class ae extends N{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:oe(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){N.call(this),this.h=e,this.g={}}d(le,N);var ce=[];function ue(e){y(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Y(e)}),e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var de=i.JSON.stringify,he=i.JSON.parse,pe=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function fe(){}function me(e){return e.h||(e.h=e.i())}function ge(){}fe.prototype.h=null;var ve={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ye(){O.call(this,"d")}function be(){O.call(this,"c")}d(ye,O),d(be,O);var we={},Se=null;function ke(){return Se=Se||new ne}function Ce(e){O.call(this,we.La,e)}function Ee(e){const t=ke();re(t,new Ce(t))}function Te(e,t){O.call(this,we.STAT_EVENT,e),this.stat=t}function _e(e){const t=ke();re(t,new Te(t,e))}function xe(e,t){O.call(this,we.Ma,e),this.size=t}function Ie(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout((function(){e()}),t)}function Re(){this.g=!0}function Pe(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return de(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}we.La="serverreachability",d(Ce,O),we.STAT_EVENT="statevent",d(Te,O),we.Ma="timingevent",d(xe,O),Re.prototype.xa=function(){this.g=!1},Re.prototype.info=function(){};var Ae,Ne={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Oe={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function De(){}function Le(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new je}function je(){this.i=null,this.g="",this.h=!1}d(De,fe),De.prototype.g=function(){return new XMLHttpRequest},De.prototype.i=function(){return{}},Ae=new De;var Me={},Fe={};function Ue(e,t,n){e.L=1,e.v=dt(ot(t)),e.m=n,e.P=!0,Ve(e,null)}function Ve(e,t){e.F=Date.now(),ze(e),e.A=ot(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),Tt(n.i,"t",r),e.C=0,n=e.j.J,e.h=new je,e.g=pn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new ae(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(ce[0]=i.toString()),i=ce);for(var s=0;s<i.length;s++){var o=W(n,i[s],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}t=e.H?b(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Ee(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");o=2<=d.length&&"type"==d[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.i,e.u,e.A,e.l,e.R,e.m)}function $e(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Be(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Fe:(n=Number(t.substring(n,r)),isNaN(n)?Me:(r+=1)+n>t.length?Fe:(t=t.slice(r,r+n),e.C=r+n,t))}function ze(e){e.S=Date.now()+e.I,He(e,e.I)}function He(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ie(c(e.ba,e),t)}function qe(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function We(e){0==e.j.G||e.J||ln(e.j,e)}function Ke(e){qe(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Ge(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;an(n),Yt(n)}rn(n),_e(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ie(c(n.Za,n),6e3));if(1>=Xe(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else un(n,11)}else if((e.K||n.g==e)&&an(n),!f(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=c[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(et(s,s.h),s.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ut(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var o=e;if((r=n).qa=hn(r,r.J?r.ia:null,r.W),o.K){tt(r.h,o);var a=o,l=r.L;l&&(a.I=l),a.B&&(qe(a),ze(a)),r.g=o}else nn(r);0<n.i.length&&Xt(n)}else"stop"!=c[0]&&"close"!=c[0]||un(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?un(n,7):Jt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Ee()}catch(u){}}Le.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==qt(e)?t.j():this.Y(e)},Le.prototype.Y=function(e){try{if(e==this.g)e:{const h=qt(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||Wt(this.g)))){this.J||4!=h||7==t||Ee(),qe(this);var n=this.g.Z();this.X=n;t:if($e(this)){var r=Wt(this.g);e="";var s=r.length,o=4==qt(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ke(this),We(this);var a="";break t}this.h.i=new i.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(o&&t==s-1)});r.length=0,this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!f(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,_e(12),Ke(this),We(this);break e}Pe(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ge(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<a.length;){if(e=Be(this,a),e==Fe){4==h&&(this.s=4,_e(14),n=!1),Pe(this.i,this.l,null,"[Incomplete Response]");break}if(e==Me){this.s=4,_e(15),Pe(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}Pe(this.i,this.l,e,null),Ge(this,e)}if($e(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=a.length||this.h.h||(this.s=1,_e(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),sn(d),d.M=!0,_e(11))}}else Pe(this.i,this.l,a,"[Invalid Chunked Response]"),Ke(this),We(this)}else Pe(this.i,this.l,a,null),Ge(this,a);4==h&&Ke(this),this.o&&!this.J&&(4==h?ln(this.j,this):(this.o=!1,ze(this)))}else(function(e){const t={};e=(e.g&&2<=qt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(f(e[r]))continue;var n=k(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,_e(12)):(this.s=0,_e(13)),Ke(this),We(this)}}}catch(h){}},Le.prototype.cancel=function(){this.J=!0,Ke(this)},Le.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.i,this.A),2!=this.L&&(Ee(),_e(17)),Ke(this),this.s=2,We(this)):He(this,this.S-e)};var Je=class{constructor(e,t){this.g=e,this.map=t}};function Ye(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Qe(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Xe(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return h(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(s(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}Ye.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var it=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function st(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof st){this.h=e.h,at(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new St;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ct(this,n),this.m=e.m}else e&&(t=String(e).match(it))?(this.h=!1,at(this,t[1]||"",!0),this.o=ht(t[2]||""),this.g=ht(t[3]||"",!0),lt(this,t[4]),this.l=ht(t[5]||"",!0),ct(this,t[6]||"",!0),this.m=ht(t[7]||"")):(this.h=!1,this.i=new St(null,this.h))}function ot(e){return new st(e)}function at(e,t,n){e.j=n?ht(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ct(e,t,n){t instanceof St?(e.i=t,function(e,t){t&&!e.j&&(kt(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Ct(this,t),Tt(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=pt(t,bt)),e.i=new St(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function dt(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ht(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function pt(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,ft),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ft(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}st.prototype.toString=function(){var e=[],t=this.j;t&&e.push(pt(t,gt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(pt(t,gt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(pt(n,"/"==n.charAt(0)?yt:vt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",pt(n,wt)),e.join("")};var mt,gt=/[#\/\?@]/g,vt=/[#\?:]/g,yt=/[#\?]/g,bt=/[#\?@]/g,wt=/#/g;function St(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function kt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Ct(e,t){kt(e),t=_t(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Et(e,t){return kt(e),t=_t(e,t),e.g.has(t)}function Tt(e,t,n){Ct(e,t),0<n.length&&(e.i=null,e.g.set(_t(e,t),h(n)),e.h+=n.length)}function _t(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function xt(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function It(){this.g=new pe}function Rt(e,t,n){const r=n||"";try{rt(e,(function(e,n){let i=e;o(e)&&(i=de(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Pt(e){this.l=e.Ub||null,this.j=e.eb||!1}function At(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Nt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Ot(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Dt(e)}function Dt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Lt(e){let t="";return y(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function jt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Lt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function Mt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=St.prototype).add=function(e,t){kt(this),this.i=null,e=_t(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){kt(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},e.na=function(){kt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){kt(this);let t=[];if("string"===typeof e)Et(this,e)&&(t=t.concat(this.g.get(_t(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return kt(this),this.i=null,Et(this,e=_t(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.V(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")},d(Pt,fe),Pt.prototype.g=function(){return new At(this.l,this.j)},Pt.prototype.i=(mt={},function(){return mt}),d(At,ne),(e=At.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Dt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ot(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Dt(this)),this.g&&(this.readyState=3,Dt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Nt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ot(this):Dt(this),3==this.readyState&&Nt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Ot(this))},e.Qa=function(e){this.g&&(this.response=e,Ot(this))},e.ga=function(){this.g&&Ot(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(At.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),d(Mt,ne);var Ft=/^https?$/i,Ut=["POST","PUT"];function Vt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,$t(e),zt(e)}function $t(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function Bt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=qt(e)||2!=e.Z()))if(e.u&&4==qt(e))se(e.Ea,0,e);else if(re(e,"readystatechange"),4==qt(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===r){var o=String(e.D).match(it)[1]||null;!o&&i.self&&i.self.location&&(o=i.self.location.protocol.slice(0,-1)),s=!Ft.test(o?o.toLowerCase():"")}n=s}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var a=2<qt(e)?e.g.statusText:""}catch(l){a=""}e.l=a+" ["+e.Z()+"]",$t(e)}}finally{zt(e)}}}function zt(e,t){if(e.g){Ht(e);const r=e.g,i=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function Ht(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function qt(e){return e.g?e.g.readyState:0}function Wt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Np){return null}}function Kt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Gt(e){this.Aa=0,this.i=[],this.j=new Re,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Kt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Kt("baseRetryDelayMs",5e3,e),this.cb=Kt("retryDelaySeedMs",1e4,e),this.Wa=Kt("forwardChannelMaxRetries",2,e),this.wa=Kt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Ye(e&&e.concurrentRequestLimit),this.Da=new It,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Jt(e){if(Qt(e),3==e.G){var t=e.U++,n=ot(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),en(e,n),(t=new Le(e,e.j,t)).L=2,t.v=dt(ot(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=pn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),ze(t)}dn(e)}function Yt(e){e.g&&(sn(e),e.g.cancel(),e.g=null)}function Qt(e){Yt(e),e.u&&(i.clearTimeout(e.u),e.u=null),an(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function Xt(e){if(!Qe(e.h)&&!e.s){e.s=!0;var t=e.Ga;x||P(),I||(x(),I=!0),R.add(t,e),e.B=0}}function Zt(e,t){var n;n=t?t.l:e.U++;const r=ot(e.I);ut(r,"SID",e.K),ut(r,"RID",n),ut(r,"AID",e.T),en(e,r),e.m&&e.o&&jt(r,e.m,e.o),n=new Le(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=tn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),Ue(n,r,t)}function en(e,t){e.H&&y(e.H,(function(e,n){ut(t,n,e)})),e.l&&rt({},(function(e,n){ut(t,n,e)}))}function tn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let a=0;a<n;a++){let n=i[a].g;const l=i[a].map;if(n-=t,0>n)t=Math.max(0,i[a].g-100),o=!1;else try{Rt(l,e,"req"+n+"_")}catch(s){r&&r(l)}}if(o){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function nn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;x||P(),I||(x(),I=!0),R.add(t,e),e.v=0}}function rn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Ie(c(e.Fa,e),cn(e,e.v)),e.v++,!0)}function sn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function on(e){e.g=new Le(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=ot(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),en(e,t),e.m&&e.o&&jt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=dt(ot(t)),n.m=null,n.P=!0,Ve(n,e)}function an(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function ln(e,t){var n=null;if(e.g==t){an(e),sn(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;re(r=ke(),new xe(r,n)),Xt(e)}else nn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(Xe(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Ie(c(e.Ga,e,t),cn(e,e.B)),e.B++,!0))}(e,t)||2==r&&rn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:un(e,5);break;case 4:un(e,10);break;case 3:un(e,6);break;default:un(e,2)}}function cn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function un(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new st(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||at(r,"https"),dt(r),t?function(e,t){const n=new Re;if(i.Image){const r=new Image;r.onload=u(xt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(xt,n,"TestLoadImage: error",!1,t,r),r.onabort=u(xt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(xt,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Re;const n=new AbortController,r=setTimeout((()=>{n.abort(),xt(0,0,!1,t)}),1e4);fetch(e,{signal:n.signal}).then((e=>{clearTimeout(r),e.ok?xt(0,0,!0,t):xt(0,0,!1,t)})).catch((()=>{clearTimeout(r),xt(0,0,!1,t)}))}(r.toString(),n)}else _e(2);e.G=0,e.l&&e.l.sa(t),dn(e),Qt(e)}function dn(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(p(e.ka,t),p(e.ka,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.ra()}}function hn(e,t,n){var r=n instanceof st?ot(n):new st(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var s=i.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var o=new st(null);r&&at(o,r),t&&(o.g=t),s&&lt(o,s),n&&(o.l=n),r=o}return n=e.D,t=e.ya,n&&t&&ut(r,n,t),ut(r,"VER",e.la),en(e,r),r}function pn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Mt(new Pt({eb:n})):new Mt(e.pa)).Ha(e.J),t}function fn(){}function mn(){}function gn(e,t){ne.call(this),this.g=new Gt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!f(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!f(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new bn(this)}function vn(e){ye.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function yn(){be.call(this),this.status=1}function bn(e){this.g=e}(e=Mt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ae.g(),this.v=this.o?me(this.o):me(Ae),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(o){return void Vt(this,o)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),s=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Ut,t,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,a]of n)this.g.setRequestHeader(i,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ht(this),this.u=!0,this.g.send(e),this.u=!1}catch(o){Vt(this,o)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),zt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zt(this,!0)),Mt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Bt(this):this.bb())},e.bb=function(){Bt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<qt(this)?this.g.status:-1}catch(mt){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(mt){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),he(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Gt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){_e(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=hn(this,null,this.W),Xt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new Le(this,this.j,e);let s=this.o;if(this.S&&(s?(s=b(s),S(s,this.S)):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=tn(this,i,t),ut(n=ot(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),en(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Lt(s)))+"&"+t:this.m&&jt(n,this.m,s)),et(this.h,i),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),i.T=!0,Ue(i,n,null)):Ue(i,n,t),this.G=2}}else 3==this.G&&(e?Zt(this,e):0==this.i.length||Qe(this.h)||Zt(this))},e.Fa=function(){if(this.u=null,on(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Ie(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,_e(10),Yt(this),on(this))},e.Za=function(){null!=this.C&&(this.C=null,Yt(this),rn(this),_e(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),_e(2)):(this.j.info("Failed to ping google.com"),_e(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=fn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},mn.prototype.g=function(e,t){return new gn(e,t)},d(gn,ne),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){Jt(this.g)},gn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=de(e),e=n);t.i.push(new Je(t.Ya++,e)),3==t.G&&Xt(t)},gn.prototype.N=function(){this.g.l=null,delete this.j,Jt(this.g),delete this.g,gn.aa.N.call(this)},d(vn,ye),d(yn,be),d(bn,fn),bn.prototype.ua=function(){re(this.g,"a")},bn.prototype.ta=function(e){re(this.g,new vn(e))},bn.prototype.sa=function(e){re(this.g,new yn)},bn.prototype.ra=function(){re(this.g,"b")},mn.prototype.createWebChannel=mn.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,Ip=Pp.createWebChannelTransport=function(){return new mn},xp=Pp.getStatEventTarget=function(){return ke()},_p=Pp.Event=we,Tp=Pp.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ne.NO_ERROR=0,Ne.TIMEOUT=8,Ne.HTTP_ERROR=6,Ep=Pp.ErrorCode=Ne,Oe.COMPLETE="complete",Cp=Pp.EventType=Oe,ge.EventType=ve,ve.OPEN="a",ve.CLOSE="b",ve.ERROR="c",ve.MESSAGE="d",ne.prototype.listen=ne.prototype.K,kp=Pp.WebChannel=ge,Pp.FetchXmlHttpFactory=Pt,Mt.prototype.listenOnce=Mt.prototype.L,Mt.prototype.getLastError=Mt.prototype.Ka,Mt.prototype.getLastErrorCode=Mt.prototype.Ba,Mt.prototype.getStatus=Mt.prototype.Z,Mt.prototype.getResponseJson=Mt.prototype.Oa,Mt.prototype.getResponseText=Mt.prototype.oa,Mt.prototype.send=Mt.prototype.ea,Mt.prototype.setWithCredentials=Mt.prototype.Ha,Sp=Pp.XhrIo=Mt}).apply("undefined"!==typeof Rp?Rp:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const Ap="@firebase/firestore",Np="4.7.10";class Op{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Op.UNAUTHENTICATED=new Op(null),Op.GOOGLE_CREDENTIALS=new Op("google-credentials-uid"),Op.FIRST_PARTY=new Op("first-party-uid"),Op.MOCK_USER=new Op("mock-user");let Dp="11.5.0";const Lp=new ia("@firebase/firestore");function jp(){return Lp.logLevel}function Mp(e){if(Lp.logLevel<=Zo.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Vp);Lp.debug(`Firestore (${Dp}): ${e}`,...i)}}function Fp(e){if(Lp.logLevel<=Zo.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Vp);Lp.error(`Firestore (${Dp}): ${e}`,...i)}}function Up(e){if(Lp.logLevel<=Zo.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Vp);Lp.warn(`Firestore (${Dp}): ${e}`,...i)}}function Vp(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function $p(){const e=`FIRESTORE (${Dp}) INTERNAL ASSERTION FAILED: `+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state");throw Fp(e),new Error(e)}function Bp(e,t){e||$p()}function zp(e,t){return e}const Hp={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class qp extends Lo{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Wp{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Kp{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Gp{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Op.UNAUTHENTICATED)))}shutdown(){}}class Jp{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Yp{constructor(e){this.t=e,this.currentUser=Op.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Bp(void 0===this.o);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Wp;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Wp,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{Mp("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(Mp("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Wp)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Mp("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Bp("string"==typeof t.accessToken),new Kp(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Bp(null===e||"string"==typeof e),new Op(e)}}class Qp{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Op.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class Xp{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new Qp(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Op.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Zp{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ef{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,ol(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){Bp(void 0===this.o);const n=e=>{null!=e.error&&Mp("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.R;return this.R=e.token,Mp("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{Mp("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):Mp("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.V)return Promise.resolve(new Zp(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Bp("string"==typeof e.token),this.R=e.token,new Zp(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function tf(){return new TextEncoder}function nf(e,t){return e<t?-1:e>t?1:0}function rf(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=e.codePointAt(n),i=t.codePointAt(n);if(r!==i){if(r<128&&i<128)return nf(r,i);{const s=tf(),o=of(s.encode(sf(e,n)),s.encode(sf(t,n)));return 0!==o?o:nf(r,i)}}n+=r>65535?2:1}return nf(e.length,t.length)}function sf(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function of(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return nf(e[n],t[n]);return nf(e.length,t.length)}function af(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}const lf=-62135596800,cf=1e6;class uf{static now(){return uf.fromMillis(Date.now())}static fromDate(e){return uf.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*cf);return new uf(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new qp(Hp.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new qp(Hp.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<lf)throw new qp(Hp.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new qp(Hp.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/cf}_compareTo(e){return this.seconds===e.seconds?nf(this.nanoseconds,e.nanoseconds):nf(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-lf;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class df{static fromTimestamp(e){return new df(e)}static min(){return new df(new uf(0,0))}static max(){return new df(new uf(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const hf="__name__";class pf{constructor(e,t,n){void 0===t?t=0:t>e.length&&$p(),void 0===n?n=e.length-t:n>e.length-t&&$p(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===pf.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof pf?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=pf.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return nf(e.length,t.length)}static compareSegments(e,t){const n=pf.isNumericId(e),r=pf.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?pf.extractNumericId(e).compare(pf.extractNumericId(t)):rf(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return yp.fromString(e.substring(4,e.length-2))}}class ff extends pf{construct(e,t,n){return new ff(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new qp(Hp.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter((e=>e.length>0)))}return new ff(e)}static emptyPath(){return new ff([])}}const mf=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class gf extends pf{construct(e,t,n){return new gf(e,t,n)}static isValidIdentifier(e){return mf.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),gf.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===hf}static keyField(){return new gf([hf])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new qp(Hp.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new qp(Hp.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new qp(Hp.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new qp(Hp.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new gf(t)}static emptyPath(){return new gf([])}}class vf{constructor(e){this.path=e}static fromPath(e){return new vf(ff.fromString(e))}static fromName(e){return new vf(ff.fromString(e).popFirst(5))}static empty(){return new vf(ff.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ff.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ff.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new vf(new ff(e.slice()))}}const yf=-1;class bf{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}bf.UNKNOWN_ID=-1;function wf(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=df.fromTimestamp(1e9===r?new uf(n+1,0):new uf(n,r));return new kf(i,vf.empty(),t)}function Sf(e){return new kf(e.readTime,e.key,yf)}class kf{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new kf(df.min(),vf.empty(),yf)}static max(){return new kf(df.max(),vf.empty(),yf)}}function Cf(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=vf.comparator(e.documentKey,t.documentKey),0!==n?n:nf(e.largestBatchId,t.largestBatchId))}class Ef{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}class Tf{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&$p(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Tf(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Tf?t:Tf.resolve(t)}catch(e){return Tf.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Tf.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Tf.reject(t)}static resolve(e){return new Tf(((t,n)=>{t(e)}))}static reject(e){return new Tf(((t,n)=>{n(e)}))}static waitFor(e){return new Tf(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=Tf.resolve(!1);for(const n of e)t=t.next((e=>e?Tf.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new Tf(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next((e=>{s[l]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new Tf(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}function _f(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function xf(e){return"IndexedDbTransactionError"===e.name}class If{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.oe(e),this._e=e=>t.writeSequenceNumber(e))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}If.ae=-1;const Rf=-1;function Pf(e){return null==e}function Af(e){return 0===e&&1/e==-1/0}const Nf="remoteDocuments",Of="owner",Df="mutationQueues",Lf="mutations";const jf="documentMutations",Mf="remoteDocumentsV14",Ff="remoteDocumentGlobal",Uf="targets",Vf="targetDocuments",$f="targetGlobal",Bf="collectionParents",zf="clientMetadata",Hf="bundles",qf="namedQueries",Wf="indexConfiguration",Kf="indexState",Gf="indexEntries",Jf="documentOverlays",Yf="globals",Qf=[Df,Lf,jf,Nf,Uf,Of,$f,Vf,zf,Ff,Bf,Hf,qf],Xf=[Df,Lf,jf,Mf,Uf,Of,$f,Vf,zf,Ff,Bf,Hf,qf,Jf],Zf=Xf,em=[...Zf,Wf,Kf,Gf];function tm(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function nm(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function rm(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class im{constructor(e,t){this.comparator=e,this.root=t||om.EMPTY}insert(e,t){return new im(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,om.BLACK,null,null))}remove(e){return new im(this.comparator,this.root.remove(e,this.comparator).copy(null,null,om.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sm(this.root,e,this.comparator,!1)}getReverseIterator(){return new sm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sm(this.root,e,this.comparator,!0)}}class sm{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class om{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:om.RED,this.left=null!=r?r:om.EMPTY,this.right=null!=i?i:om.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new om(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return om.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return om.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,om.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,om.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw $p();if(this.right.isRed())throw $p();const e=this.left.check();if(e!==this.right.check())throw $p();return e+(this.isRed()?0:1)}}om.EMPTY=null,om.RED=!0,om.BLACK=!1,om.EMPTY=new class{constructor(){this.size=0}get key(){throw $p()}get value(){throw $p()}get color(){throw $p()}get left(){throw $p()}get right(){throw $p()}copy(e,t,n,r,i){return this}insert(e,t,n){return new om(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class am{constructor(e){this.comparator=e,this.data=new im(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new lm(this.data.getIterator())}getIteratorFrom(e){return new lm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof am))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new am(this.comparator);return t.data=e,t}}class lm{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class cm{constructor(e){this.fields=e,e.sort(gf.comparator)}static empty(){return new cm([])}unionWith(e){let t=new am(gf.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new cm(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return af(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class um extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class dm{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new um("Invalid base64 string: "+e):e}}(e);return new dm(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new dm(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return nf(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dm.EMPTY_BYTE_STRING=new dm("");const hm=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function pm(e){if(Bp(!!e),"string"==typeof e){let t=0;const n=hm.exec(e);if(Bp(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:fm(e.seconds),nanos:fm(e.nanos)}}function fm(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function mm(e){return"string"==typeof e?dm.fromBase64String(e):dm.fromUint8Array(e)}const gm="server_timestamp",vm="__type__",ym="__previous_value__",bm="__local_write_time__";function wm(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[vm])||void 0===n?void 0:n.stringValue)===gm}function Sm(e){const t=e.mapValue.fields[ym];return wm(t)?Sm(t):t}function km(e){const t=pm(e.mapValue.fields[bm].timestampValue);return new uf(t.seconds,t.nanos)}const Cm="(default)";class Em{constructor(e,t){this.projectId=e,this.database=t||Cm}static empty(){return new Em("","")}get isDefaultDatabase(){return this.database===Cm}isEqual(e){return e instanceof Em&&e.projectId===this.projectId&&e.database===this.database}}const Tm="__type__",_m="__max__",xm={mapValue:{fields:{__type__:{stringValue:_m}}}},Im="__vector__",Rm="value";function Pm(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?wm(e)?4:zm(e)?9007199254740991:$m(e)?10:11:$p()}function Am(e,t){if(e===t)return!0;const n=Pm(e);if(n!==Pm(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return km(e).isEqual(km(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=pm(e.timestampValue),r=pm(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return mm(e.bytesValue).isEqual(mm(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return fm(e.geoPointValue.latitude)===fm(t.geoPointValue.latitude)&&fm(e.geoPointValue.longitude)===fm(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return fm(e.integerValue)===fm(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=fm(e.doubleValue),r=fm(t.doubleValue);return n===r?Af(n)===Af(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return af(e.arrayValue.values||[],t.arrayValue.values||[],Am);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(tm(n)!==tm(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Am(n[i],r[i])))return!1;return!0}(e,t);default:return $p()}}function Nm(e,t){return void 0!==(e.values||[]).find((e=>Am(e,t)))}function Om(e,t){if(e===t)return 0;const n=Pm(e),r=Pm(t);if(n!==r)return nf(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return nf(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=fm(e.integerValue||e.doubleValue),r=fm(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Dm(e.timestampValue,t.timestampValue);case 4:return Dm(km(e),km(t));case 5:return rf(e.stringValue,t.stringValue);case 6:return function(e,t){const n=mm(e),r=mm(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=nf(n[i],r[i]);if(0!==e)return e}return nf(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=nf(fm(e.latitude),fm(t.latitude));return 0!==n?n:nf(fm(e.longitude),fm(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Lm(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,s;const o=e.fields||{},a=t.fields||{},l=null===(n=o[Rm])||void 0===n?void 0:n.arrayValue,c=null===(r=a[Rm])||void 0===r?void 0:r.arrayValue,u=nf((null===(i=null==l?void 0:l.values)||void 0===i?void 0:i.length)||0,(null===(s=null==c?void 0:c.values)||void 0===s?void 0:s.length)||0);return 0!==u?u:Lm(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===xm.mapValue&&t===xm.mapValue)return 0;if(e===xm.mapValue)return 1;if(t===xm.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=rf(r[o],s[o]);if(0!==e)return e;const t=Om(n[r[o]],i[s[o]]);if(0!==t)return t}return nf(r.length,s.length)}(e.mapValue,t.mapValue);default:throw $p()}}function Dm(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return nf(e,t);const n=pm(e),r=pm(t),i=nf(n.seconds,r.seconds);return 0!==i?i:nf(n.nanos,r.nanos)}function Lm(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Om(n[i],r[i]);if(e)return e}return nf(n.length,r.length)}function jm(e){return Mm(e)}function Mm(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=pm(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return mm(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return vf.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Mm(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${Mm(e.fields[i])}`;return n+"}"}(e.mapValue):$p()}function Fm(e){return!!e&&"integerValue"in e}function Um(e){return!!e&&"arrayValue"in e}function Vm(e){return!!e&&"mapValue"in e}function $m(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[Tm])||void 0===n?void 0:n.stringValue)===Im}function Bm(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return nm(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Bm(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Bm(e.arrayValue.values[n]);return t}return Object.assign({},e)}function zm(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===_m}class Hm{constructor(e){this.value=e}static empty(){return new Hm({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Vm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Bm(t)}setAll(e){let t=gf.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Bm(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Vm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Am(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Vm(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){nm(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new Hm(Bm(this.value))}}class qm{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new qm(e,0,df.min(),df.min(),df.min(),Hm.empty(),0)}static newFoundDocument(e,t,n,r){return new qm(e,1,t,df.min(),n,r,0)}static newNoDocument(e,t){return new qm(e,2,t,df.min(),df.min(),Hm.empty(),0)}static newUnknownDocument(e,t){return new qm(e,3,t,df.min(),df.min(),Hm.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(df.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Hm.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Hm.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=df.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof qm&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new qm(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Wm{constructor(e,t){this.position=e,this.inclusive=t}}function Km(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?vf.comparator(vf.fromName(o.referenceValue),n.key):Om(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Gm(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Am(e.position[n],t.position[n]))return!1;return!0}class Jm{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Ym(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Qm{}class Xm extends Qm{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new og(e,t,n):"array-contains"===t?new ug(e,n):"in"===t?new dg(e,n):"not-in"===t?new hg(e,n):"array-contains-any"===t?new pg(e,n):new Xm(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new ag(e,n):new lg(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Om(t,this.value)):null!==t&&Pm(this.value)===Pm(t)&&this.matchesComparison(Om(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return $p()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Zm extends Qm{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new Zm(e,t)}matches(e){return eg(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ce||(this.ce=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function eg(e){return"and"===e.op}function tg(e){return ng(e)&&eg(e)}function ng(e){for(const t of e.filters)if(t instanceof Zm)return!1;return!0}function rg(e){if(e instanceof Xm)return e.field.canonicalString()+e.op.toString()+jm(e.value);if(tg(e))return e.filters.map((e=>rg(e))).join(",");{const t=e.filters.map((e=>rg(e))).join(",");return`${e.op}(${t})`}}function ig(e,t){return e instanceof Xm?function(e,t){return t instanceof Xm&&e.op===t.op&&e.field.isEqual(t.field)&&Am(e.value,t.value)}(e,t):e instanceof Zm?function(e,t){return t instanceof Zm&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&ig(n,t.filters[r])),!0)}(e,t):void $p()}function sg(e){return e instanceof Xm?function(e){return`${e.field.canonicalString()} ${e.op} ${jm(e.value)}`}(e):e instanceof Zm?function(e){return e.op.toString()+" {"+e.getFilters().map(sg).join(" ,")+"}"}(e):"Filter"}class og extends Xm{constructor(e,t,n){super(e,t,n),this.key=vf.fromName(n.referenceValue)}matches(e){const t=vf.comparator(e.key,this.key);return this.matchesComparison(t)}}class ag extends Xm{constructor(e,t){super(e,"in",t),this.keys=cg("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class lg extends Xm{constructor(e,t){super(e,"not-in",t),this.keys=cg("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function cg(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>vf.fromName(e.referenceValue)))}class ug extends Xm{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Um(t)&&Nm(t.arrayValue,this.value)}}class dg extends Xm{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Nm(this.value.arrayValue,t)}}class hg extends Xm{constructor(e,t){super(e,"not-in",t)}matches(e){if(Nm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Nm(this.value.arrayValue,t)}}class pg extends Xm{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Um(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Nm(this.value.arrayValue,e)))}}class fg{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.le=null}}function mg(e){return new fg(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function gg(e){const t=zp(e);if(null===t.le){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>rg(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Pf(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>jm(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>jm(e))).join(",")),t.le=e}return t.le}function vg(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Ym(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!ig(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Gm(e.startAt,t.startAt)&&Gm(e.endAt,t.endAt)}class yg{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function bg(e,t,n,r,i,s,o,a){return new yg(e,t,n,r,i,s,o,a)}function wg(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Sg(e){return null!==e.collectionGroup}function kg(e){const t=zp(e);if(null===t.he){t.he=[];const e=new Set;for(const i of t.explicitOrderBy)t.he.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new am(gf.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.he.push(new Jm(r,n))})),e.has(gf.keyField().canonicalString())||t.he.push(new Jm(gf.keyField(),n))}return t.he}function Cg(e){const t=zp(e);return t.Pe||(t.Pe=Eg(t,kg(e))),t.Pe}function Eg(e,t){if("F"===e.limitType)return mg(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new Jm(e.field,t)}));const n=e.endAt?new Wm(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Wm(e.startAt.position,e.startAt.inclusive):null;return mg(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Tg(e,t,n){return new yg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function _g(e,t){return vg(Cg(e),Cg(t))&&e.limitType===t.limitType}function xg(e){return`${gg(Cg(e))}|lt:${e.limitType}`}function Ig(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>sg(e))).join(", ")}]`),Pf(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>jm(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>jm(e))).join(",")),`Target(${t})`}(Cg(e))}; limitType=${e.limitType})`}function Rg(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):vf.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of kg(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Km(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,kg(e),t))&&!(e.endAt&&!function(e,t,n){const r=Km(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,kg(e),t))}(e,t)}function Pg(e){return(t,n)=>{let r=!1;for(const i of kg(e)){const e=Ag(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Ag(e,t,n){const r=e.field.isKeyField()?vf.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Om(r,i):$p()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return $p()}}class Ng{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){nm(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return rm(this.inner)}size(){return this.innerSize}}const Og=new im(vf.comparator);function Dg(){return Og}const Lg=new im(vf.comparator);function jg(){let e=Lg;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function Mg(e){let t=Lg;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function Fg(){return Vg()}function Ug(){return Vg()}function Vg(){return new Ng((e=>e.toString()),((e,t)=>e.isEqual(t)))}new im(vf.comparator);const $g=new am(vf.comparator);function Bg(){let e=$g;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const zg=new am(nf);function Hg(){return zg}function qg(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Af(t)?"-0":t}}function Wg(e){return{integerValue:""+e}}class Kg{constructor(){this._=void 0}}function Gg(e,t,n){return e instanceof Qg?function(e,t){const n={fields:{[vm]:{stringValue:gm},[bm]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&wm(t)&&(t=Sm(t)),t&&(n.fields[ym]=t),{mapValue:n}}(n,t):e instanceof Xg?Zg(e,t):e instanceof ev?tv(e,t):function(e,t){const n=Yg(e,t),r=rv(n)+rv(e.Ie);return Fm(n)&&Fm(e.Ie)?Wg(r):qg(e.serializer,r)}(e,t)}function Jg(e,t,n){return e instanceof Xg?Zg(e,t):e instanceof ev?tv(e,t):n}function Yg(e,t){return e instanceof nv?function(e){return Fm(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Qg extends Kg{}class Xg extends Kg{constructor(e){super(),this.elements=e}}function Zg(e,t){const n=iv(t);for(const r of e.elements)n.some((e=>Am(e,r)))||n.push(r);return{arrayValue:{values:n}}}class ev extends Kg{constructor(e){super(),this.elements=e}}function tv(e,t){let n=iv(t);for(const r of e.elements)n=n.filter((e=>!Am(e,r)));return{arrayValue:{values:n}}}class nv extends Kg{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function rv(e){return fm(e.integerValue||e.doubleValue)}function iv(e){return Um(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class sv{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new sv}static exists(e){return new sv(void 0,e)}static updateTime(e){return new sv(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ov(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class av{}function lv(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new vv(e.key,sv.none()):new hv(e.key,e.data,sv.none());{const n=e.data,r=Hm.empty();let i=new am(gf.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new pv(e.key,r,new cm(i.toArray()),sv.none())}}function cv(e,t,n){e instanceof hv?function(e,t,n){const r=e.value.clone(),i=mv(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof pv?function(e,t,n){if(!ov(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=mv(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(fv(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function uv(e,t,n,r){return e instanceof hv?function(e,t,n,r){if(!ov(e.precondition,t))return n;const i=e.value.clone(),s=gv(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof pv?function(e,t,n,r){if(!ov(e.precondition,t))return n;const i=gv(e.fieldTransforms,r,t),s=t.data;return s.setAll(fv(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return ov(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function dv(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&af(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Xg&&t instanceof Xg||e instanceof ev&&t instanceof ev?af(e.elements,t.elements,Am):e instanceof nv&&t instanceof nv?Am(e.Ie,t.Ie):e instanceof Qg&&t instanceof Qg}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class hv extends av{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class pv extends av{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function fv(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function mv(e,t,n){const r=new Map;Bp(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,Jg(o,a,n[i]))}return r}function gv(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Gg(e,s,t))}return r}class vv extends av{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class yv{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&cv(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=uv(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=uv(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Ug();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=lv(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(df.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Bg())}isEqual(e){return this.batchId===e.batchId&&af(this.mutations,e.mutations,((e,t)=>dv(e,t)))&&af(this.baseMutations,e.baseMutations,((e,t)=>dv(e,t)))}}class bv{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}var wv,Sv;function kv(e){if(void 0===e)return Fp("GRPC error has no .code"),Hp.UNKNOWN;switch(e){case wv.OK:return Hp.OK;case wv.CANCELLED:return Hp.CANCELLED;case wv.UNKNOWN:return Hp.UNKNOWN;case wv.DEADLINE_EXCEEDED:return Hp.DEADLINE_EXCEEDED;case wv.RESOURCE_EXHAUSTED:return Hp.RESOURCE_EXHAUSTED;case wv.INTERNAL:return Hp.INTERNAL;case wv.UNAVAILABLE:return Hp.UNAVAILABLE;case wv.UNAUTHENTICATED:return Hp.UNAUTHENTICATED;case wv.INVALID_ARGUMENT:return Hp.INVALID_ARGUMENT;case wv.NOT_FOUND:return Hp.NOT_FOUND;case wv.ALREADY_EXISTS:return Hp.ALREADY_EXISTS;case wv.PERMISSION_DENIED:return Hp.PERMISSION_DENIED;case wv.FAILED_PRECONDITION:return Hp.FAILED_PRECONDITION;case wv.ABORTED:return Hp.ABORTED;case wv.OUT_OF_RANGE:return Hp.OUT_OF_RANGE;case wv.UNIMPLEMENTED:return Hp.UNIMPLEMENTED;case wv.DATA_LOSS:return Hp.DATA_LOSS;default:return $p()}}(Sv=wv||(wv={}))[Sv.OK=0]="OK",Sv[Sv.CANCELLED=1]="CANCELLED",Sv[Sv.UNKNOWN=2]="UNKNOWN",Sv[Sv.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Sv[Sv.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Sv[Sv.NOT_FOUND=5]="NOT_FOUND",Sv[Sv.ALREADY_EXISTS=6]="ALREADY_EXISTS",Sv[Sv.PERMISSION_DENIED=7]="PERMISSION_DENIED",Sv[Sv.UNAUTHENTICATED=16]="UNAUTHENTICATED",Sv[Sv.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Sv[Sv.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Sv[Sv.ABORTED=10]="ABORTED",Sv[Sv.OUT_OF_RANGE=11]="OUT_OF_RANGE",Sv[Sv.UNIMPLEMENTED=12]="UNIMPLEMENTED",Sv[Sv.INTERNAL=13]="INTERNAL",Sv[Sv.UNAVAILABLE=14]="UNAVAILABLE",Sv[Sv.DATA_LOSS=15]="DATA_LOSS";new yp([4294967295,4294967295],0);Error;class Cv{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ev(e){return Bp(!!e),df.fromTimestamp(function(e){const t=pm(e);return new uf(t.seconds,t.nanos)}(e))}function Tv(e,t){const n=function(e){return new ff(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function _v(e){const t=ff.fromString(e);return Bp(Nv(t)),t}function xv(e){const t=_v(e);return 4===t.length?ff.emptyPath():Iv(t)}function Iv(e){return Bp(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Rv(e){let t=xv(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Bp(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Pv(e);return t instanceof Zm&&tg(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new Jm(Av(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Pf(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Wm(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Wm(n,t)}(n.endAt)),bg(t,i,o,s,a,"F",l,c)}function Pv(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Av(e.unaryFilter.field);return Xm.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Av(e.unaryFilter.field);return Xm.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Av(e.unaryFilter.field);return Xm.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Av(e.unaryFilter.field);return Xm.create(i,"!=",{nullValue:"NULL_VALUE"});default:return $p()}}(e):void 0!==e.fieldFilter?function(e){return Xm.create(Av(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return $p()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Zm.create(e.compositeFilter.filters.map((e=>Pv(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return $p()}}(e.compositeFilter.op))}(e):$p()}function Av(e){return gf.fromServerFormat(e.fieldPath)}function Nv(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Ov{constructor(e){this.Tt=e}}function Dv(e){const t=Rv({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Tg(t,t.limit,"L"):t}class Lv{constructor(){}At(e,t){this.Rt(e,t),t.Vt()}Rt(e,t){if("nullValue"in e)this.ft(t,5);else if("booleanValue"in e)this.ft(t,10),t.gt(e.booleanValue?1:0);else if("integerValue"in e)this.ft(t,15),t.gt(fm(e.integerValue));else if("doubleValue"in e){const n=fm(e.doubleValue);isNaN(n)?this.ft(t,13):(this.ft(t,15),Af(n)?t.gt(0):t.gt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.ft(t,20),"string"==typeof n&&(n=pm(n)),t.yt(`${n.seconds||""}`),t.gt(n.nanos||0)}else if("stringValue"in e)this.wt(e.stringValue,t),this.St(t);else if("bytesValue"in e)this.ft(t,30),t.bt(mm(e.bytesValue)),this.St(t);else if("referenceValue"in e)this.Dt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.ft(t,45),t.gt(n.latitude||0),t.gt(n.longitude||0)}else"mapValue"in e?zm(e)?this.ft(t,Number.MAX_SAFE_INTEGER):$m(e)?this.vt(e.mapValue,t):(this.Ct(e.mapValue,t),this.St(t)):"arrayValue"in e?(this.Ft(e.arrayValue,t),this.St(t)):$p()}wt(e,t){this.ft(t,25),this.Mt(e,t)}Mt(e,t){t.yt(e)}Ct(e,t){const n=e.fields||{};this.ft(t,55);for(const r of Object.keys(n))this.wt(r,t),this.Rt(n[r],t)}vt(e,t){var n,r;const i=e.fields||{};this.ft(t,53);const s=Rm,o=(null===(r=null===(n=i[s].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.ft(t,15),t.gt(fm(o)),this.wt(s,t),this.Rt(i[s],t)}Ft(e,t){const n=e.values||[];this.ft(t,50);for(const r of n)this.Rt(r,t)}Dt(e,t){this.ft(t,37),vf.fromName(e).path.forEach((e=>{this.ft(t,60),this.Mt(e,t)}))}ft(e,t){e.gt(t)}St(e){e.gt(2)}}Lv.xt=new Lv;class jv{constructor(){this.Tn=new Mv}addToCollectionParentIndex(e,t){return this.Tn.add(t),Tf.resolve()}getCollectionParents(e,t){return Tf.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return Tf.resolve()}deleteFieldIndex(e,t){return Tf.resolve()}deleteAllFieldIndexes(e){return Tf.resolve()}createTargetIndexes(e,t){return Tf.resolve()}getDocumentsMatchingTarget(e,t){return Tf.resolve(null)}getIndexType(e,t){return Tf.resolve(0)}getFieldIndexes(e,t){return Tf.resolve([])}getNextCollectionGroupToUpdate(e){return Tf.resolve(null)}getMinOffset(e,t){return Tf.resolve(kf.min())}getMinOffsetFromCollectionGroup(e,t){return Tf.resolve(kf.min())}updateCollectionGroup(e,t,n){return Tf.resolve()}updateIndexEntries(e,t){return Tf.resolve()}}class Mv{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new am(ff.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new am(ff.comparator)).toArray()}}new Uint8Array(0);const Fv=41943040;class Uv{static withCacheSize(e){return new Uv(e,Uv.DEFAULT_COLLECTION_PERCENTILE,Uv.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}Uv.DEFAULT_COLLECTION_PERCENTILE=10,Uv.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Uv.DEFAULT=new Uv(Fv,Uv.DEFAULT_COLLECTION_PERCENTILE,Uv.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Uv.DISABLED=new Uv(-1,0,0);class Vv{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new Vv(0)}static Kn(){return new Vv(-1)}}const $v=1048576;class Bv{constructor(){this.changes=new Ng((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,qm.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Tf.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class zv{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Hv{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&uv(n.mutation,e,cm.empty(),uf.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Bg()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Bg();const r=Fg();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=jg();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=Fg();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Bg())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=Dg();const s=Vg(),o=Vg();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof pv)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),uv(o.mutation,t,o.mutation.getFieldMask(),uf.now())):s.set(t.key,cm.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new zv(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=Vg();let r=new im(((e,t)=>e-t)),i=Bg();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||cm.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||Bg()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,c=Ug();l.forEach((e=>{if(!i.has(e)){const r=lv(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,c))}return Tf.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return vf.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Sg(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Tf.resolve(Fg());let o=yf,a=i;return s.next((t=>Tf.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?Tf.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,Bg()))).next((e=>({batchId:o,changes:Mg(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new vf(t)).next((e=>{let t=jg();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=jg();return this.indexManager.getCollectionParents(e,i).next((o=>Tf.forEach(o,(o=>{const a=function(e,t){return new yg(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,qm.newInvalidDocument(r)))}));let n=jg();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&uv(s.mutation,r,cm.empty(),uf.now()),Rg(t,r)&&(n=n.insert(e,r))})),n}))}}class qv{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return Tf.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Ev(e.createTime)}}(t)),Tf.resolve()}getNamedQuery(e,t){return Tf.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(e){return{name:e.name,query:Dv(e.bundledQuery),readTime:Ev(e.readTime)}}(t)),Tf.resolve()}}class Wv{constructor(){this.overlays=new im(vf.comparator),this.Rr=new Map}getOverlay(e,t){return Tf.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Fg();return Tf.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.Et(e,t,r)})),Tf.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Rr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.Rr.delete(n)),Tf.resolve()}getOverlaysForCollection(e,t,n){const r=Fg(),i=t.length+1,s=new vf(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Tf.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new im(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=Fg(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=Fg(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return Tf.resolve(o)}Et(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Rr.get(r.largestBatchId).delete(n.key);this.Rr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new bv(t,n));let i=this.Rr.get(t);void 0===i&&(i=Bg(),this.Rr.set(t,i)),this.Rr.set(t,i.add(n.key))}}class Kv{constructor(){this.sessionToken=dm.EMPTY_BYTE_STRING}getSessionToken(e){return Tf.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Tf.resolve()}}class Gv{constructor(){this.Vr=new am(Jv.mr),this.gr=new am(Jv.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const n=new Jv(e,t);this.Vr=this.Vr.add(n),this.gr=this.gr.add(n)}yr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.wr(new Jv(e,t))}Sr(e,t){e.forEach((e=>this.removeReference(e,t)))}br(e){const t=new vf(new ff([])),n=new Jv(t,e),r=new Jv(t,e+1),i=[];return this.gr.forEachInRange([n,r],(e=>{this.wr(e),i.push(e.key)})),i}Dr(){this.Vr.forEach((e=>this.wr(e)))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new vf(new ff([])),n=new Jv(t,e),r=new Jv(t,e+1);let i=Bg();return this.gr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new Jv(e,0),n=this.Vr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Jv{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return vf.comparator(e.key,t.key)||nf(e.Cr,t.Cr)}static pr(e,t){return nf(e.Cr,t.Cr)||vf.comparator(e.key,t.key)}}class Yv{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new am(Jv.mr)}checkEmpty(e){return Tf.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new yv(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.Mr=this.Mr.add(new Jv(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Tf.resolve(s)}lookupMutationBatch(e,t){return Tf.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Nr(n),i=r<0?0:r;return Tf.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Tf.resolve(0===this.mutationQueue.length?Rf:this.Fr-1)}getAllMutationBatches(e){return Tf.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Jv(t,0),r=new Jv(t,Number.POSITIVE_INFINITY),i=[];return this.Mr.forEachInRange([n,r],(e=>{const t=this.Or(e.Cr);i.push(t)})),Tf.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new am(nf);return t.forEach((e=>{const t=new Jv(e,0),r=new Jv(e,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([t,r],(e=>{n=n.add(e.Cr)}))})),Tf.resolve(this.Br(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;vf.isDocumentKey(i)||(i=i.child(""));const s=new Jv(new vf(i),0);let o=new am(nf);return this.Mr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Cr)),!0)}),s),Tf.resolve(this.Br(o))}Br(e){const t=[];return e.forEach((e=>{const n=this.Or(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Bp(0===this.Lr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.Mr;return Tf.forEach(t.mutations,(r=>{const i=new Jv(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Mr=n}))}qn(e){}containsKey(e,t){const n=new Jv(t,0),r=this.Mr.firstAfterOrEqual(n);return Tf.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Tf.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Qv{constructor(e){this.kr=e,this.docs=new im(vf.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.kr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Tf.resolve(n?n.document.mutableCopy():qm.newInvalidDocument(t))}getEntries(e,t){let n=Dg();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():qm.newInvalidDocument(e))})),Tf.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Dg();const s=t.path,o=new vf(s.child("__id-9223372036854775808__")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||Cf(Sf(o),n)<=0||(r.has(o.key)||Rg(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return Tf.resolve(i)}getAllFromCollectionGroup(e,t,n,r){$p()}qr(e,t){return Tf.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new Xv(this)}getSize(e){return Tf.resolve(this.size)}}class Xv extends Bv{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.Ir.addEntry(e,r)):this.Ir.removeEntry(n)})),Tf.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}class Zv{constructor(e){this.persistence=e,this.Qr=new Ng((e=>gg(e)),vg),this.lastRemoteSnapshotVersion=df.min(),this.highestTargetId=0,this.$r=0,this.Ur=new Gv,this.targetCount=0,this.Kr=Vv.Un()}forEachTarget(e,t){return this.Qr.forEach(((e,n)=>t(n))),Tf.resolve()}getLastRemoteSnapshotVersion(e){return Tf.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Tf.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),Tf.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.$r&&(this.$r=t),Tf.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Kr=new Vv(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,Tf.resolve()}updateTargetData(e,t){return this.zn(t),Tf.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Ur.br(t.targetId),this.targetCount-=1,Tf.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Qr.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Qr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),Tf.waitFor(i).next((()=>r))}getTargetCount(e){return Tf.resolve(this.targetCount)}getTargetData(e,t){const n=this.Qr.get(t)||null;return Tf.resolve(n)}addMatchingKeys(e,t,n){return this.Ur.yr(t,n),Tf.resolve()}removeMatchingKeys(e,t,n){this.Ur.Sr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),Tf.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Ur.br(t),Tf.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Ur.vr(t);return Tf.resolve(n)}containsKey(e,t){return Tf.resolve(this.Ur.containsKey(t))}}class ey{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new If(0),this.zr=!1,this.zr=!0,this.jr=new Kv,this.referenceDelegate=e(this),this.Hr=new Zv(this),this.indexManager=new jv,this.remoteDocumentCache=function(e){return new Qv(e)}((e=>this.referenceDelegate.Jr(e))),this.serializer=new Ov(t),this.Yr=new qv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Wv,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Wr[e.toKey()];return n||(n=new Yv(t,this.referenceDelegate),this.Wr[e.toKey()]=n),n}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,n){Mp("MemoryPersistence","Starting transaction:",e);const r=new ty(this.Gr.next());return this.referenceDelegate.Zr(),n(r).next((e=>this.referenceDelegate.Xr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}ei(e,t){return Tf.or(Object.values(this.Wr).map((n=>()=>n.containsKey(e,t))))}}class ty extends Ef{constructor(e){super(),this.currentSequenceNumber=e}}class ny{constructor(e){this.persistence=e,this.ti=new Gv,this.ni=null}static ri(e){return new ny(e)}get ii(){if(this.ni)return this.ni;throw $p()}addReference(e,t,n){return this.ti.addReference(n,t),this.ii.delete(n.toString()),Tf.resolve()}removeReference(e,t,n){return this.ti.removeReference(n,t),this.ii.add(n.toString()),Tf.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),Tf.resolve()}removeTarget(e,t){this.ti.br(t.targetId).forEach((e=>this.ii.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.ii.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Tf.forEach(this.ii,(n=>{const r=vf.fromPath(n);return this.si(e,r).next((e=>{e||t.removeEntry(r,df.min())}))})).next((()=>(this.ni=null,t.apply(e))))}updateLimboDocument(e,t){return this.si(e,t).next((e=>{e?this.ii.delete(t.toString()):this.ii.add(t.toString())}))}Jr(e){return 0}si(e,t){return Tf.or([()=>Tf.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class ry{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Hi=n,this.Ji=r}static Yi(e,t){let n=Bg(),r=Bg();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new ry(e,t.fromCache,n,r)}}class iy{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class sy{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=No()?8:_f(Po())>0?6:4}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.rs(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.ss(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new iy;return this._s(e,t,n).next((r=>{if(i.result=r,this.Xi)return this.us(e,t,n,r.size)}))})).next((()=>i.result))}us(e,t,n,r){return n.documentReadCount<this.es?(jp()<=Zo.DEBUG&&Mp("QueryEngine","SDK will not create cache indexes for query:",Ig(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),Tf.resolve()):(jp()<=Zo.DEBUG&&Mp("QueryEngine","Query:",Ig(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.ts*r?(jp()<=Zo.DEBUG&&Mp("QueryEngine","The SDK decides to create cache indexes for query:",Ig(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Cg(t))):Tf.resolve())}rs(e,t){if(wg(t))return Tf.resolve(null);let n=Cg(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=Tg(t,null,"F"),n=Cg(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=Bg(...r);return this.ns.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.cs(t,r);return this.ls(t,s,i,n.readTime)?this.rs(e,Tg(t,null,"F")):this.hs(e,s,t,n)}))))})))))}ss(e,t,n,r){return wg(t)||r.isEqual(df.min())?Tf.resolve(null):this.ns.getDocuments(e,n).next((i=>{const s=this.cs(t,i);return this.ls(t,s,n,r)?Tf.resolve(null):(jp()<=Zo.DEBUG&&Mp("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ig(t)),this.hs(e,s,t,wf(r,yf)).next((e=>e)))}))}cs(e,t){let n=new am(Pg(e));return t.forEach(((t,r)=>{Rg(e,r)&&(n=n.add(r))})),n}ls(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}_s(e,t,n){return jp()<=Zo.DEBUG&&Mp("QueryEngine","Using full collection scan to execute query:",Ig(t)),this.ns.getDocumentsMatchingQuery(e,t,kf.min(),n)}hs(e,t,n,r){return this.ns.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}const oy="LocalStore";class ay{constructor(e,t,n,r){this.persistence=e,this.Ps=t,this.serializer=r,this.Ts=new im(nf),this.Is=new Ng((e=>gg(e)),vg),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(n)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Hv(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ts)))}}function ly(e,t,n,r){return new ay(e,t,n,r)}async function cy(e,t){const n=zp(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.As(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=Bg();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({Rs:e,removedBatchIds:i,addedBatchIds:s})))}))}))}class uy{constructor(){this.activeTargetIds=Hg()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class dy{constructor(){this.ho=new uy,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,n){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new uy,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class hy{To(e){}shutdown(){}}const py="ConnectivityMonitor";class fy{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){Mp(py,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){Mp(py,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let my=null;function gy(){return null===my?my=268435456+Math.round(2147483648*Math.random()):my++,"0x"+my.toString(16)}const vy="RestConnection",yy={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class by{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${n}/databases/${r}`,this.wo=this.databaseId.database===Cm?`project_id=${n}`:`project_id=${n}&database_id=${r}`}So(e,t,n,r,i){const s=gy(),o=this.bo(e,t.toUriEncodedString());Mp(vy,`Sending RPC '${e}' ${s}:`,o,n);const a={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(a,r,i),this.vo(e,o,a,n).then((t=>(Mp(vy,`Received RPC '${e}' ${s}: `,t),t)),(t=>{throw Up(vy,`RPC '${e}' ${s} failed with error: `,t,"url: ",o,"request:",n),t}))}Co(e,t,n,r,i,s){return this.So(e,t,n,r,i)}Do(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Dp,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}bo(e,t){const n=yy[e];return`${this.po}/v1/${t}:${n}`}terminate(){}}class wy{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}const Sy="WebChannelConnection";class ky extends by{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,n,r){const i=gy();return new Promise(((s,o)=>{const a=new Sp;a.setWithCredentials(!0),a.listenOnce(Cp.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case Ep.NO_ERROR:const t=a.getResponseJson();Mp(Sy,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),s(t);break;case Ep.TIMEOUT:Mp(Sy,`RPC '${e}' ${i} timed out`),o(new qp(Hp.DEADLINE_EXCEEDED,"Request time out"));break;case Ep.HTTP_ERROR:const n=a.getStatus();if(Mp(Sy,`RPC '${e}' ${i} failed with status:`,n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Hp).indexOf(t)>=0?t:Hp.UNKNOWN}(t.status);o(new qp(e,t.message))}else o(new qp(Hp.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new qp(Hp.UNAVAILABLE,"Connection failed."));break;default:$p()}}finally{Mp(Sy,`RPC '${e}' ${i} completed.`)}}));const l=JSON.stringify(r);Mp(Sy,`RPC '${e}' ${i} sending request:`,r),a.send(t,"POST",l,n,15)}))}Wo(e,t,n){const r=gy(),i=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Ip(),o=xp(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Do(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");Mp(Sy,`Creating RPC '${e}' stream ${r}: ${c}`,a);const u=s.createWebChannel(c,a);let d=!1,h=!1;const p=new wy({Fo:t=>{h?Mp(Sy,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(d||(Mp(Sy,`Opening RPC '${e}' stream ${r} transport.`),u.open(),d=!0),Mp(Sy,`RPC '${e}' stream ${r} sending:`,t),u.send(t))},Mo:()=>u.close()}),f=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return f(u,kp.EventType.OPEN,(()=>{h||(Mp(Sy,`RPC '${e}' stream ${r} transport opened.`),p.Qo())})),f(u,kp.EventType.CLOSE,(()=>{h||(h=!0,Mp(Sy,`RPC '${e}' stream ${r} transport closed`),p.Uo())})),f(u,kp.EventType.ERROR,(t=>{h||(h=!0,Up(Sy,`RPC '${e}' stream ${r} transport errored:`,t),p.Uo(new qp(Hp.UNAVAILABLE,"The operation could not be completed")))})),f(u,kp.EventType.MESSAGE,(t=>{var n;if(!h){const i=t.data[0];Bp(!!i);const s=i,o=(null==s?void 0:s.error)||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){Mp(Sy,`RPC '${e}' stream ${r} received error:`,o);const t=o.status;let n=function(e){const t=wv[e];if(void 0!==t)return kv(t)}(t),i=o.message;void 0===n&&(n=Hp.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),h=!0,p.Uo(new qp(n,i)),u.close()}else Mp(Sy,`RPC '${e}' stream ${r} received:`,i),p.Ko(i)}})),f(o,_p.STAT_EVENT,(t=>{t.stat===Tp.PROXY?Mp(Sy,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===Tp.NOPROXY&&Mp(Sy,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{p.$o()}),0),p}}function Cy(){return"undefined"!=typeof document?document:null}function Ey(e){return new Cv(e,!0)}class Ty{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Ti=e,this.timerId=t,this.Go=n,this.zo=r,this.jo=i,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),n=Math.max(0,Date.now()-this.Yo),r=Math.max(0,t-n);r>0&&Mp("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,r,(()=>(this.Yo=Date.now(),e()))),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){null!==this.Jo&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){null!==this.Jo&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}class _y{}class xy extends _y{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.F_=!1}M_(){if(this.F_)throw new qp(Hp.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,n,r){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,o]=i;return this.connection.So(e,Tv(t,n),r,s,o)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Hp.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new qp(Hp.UNKNOWN,e.toString())}))}Co(e,t,n,r,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[o,a]=s;return this.connection.Co(e,Tv(t,n),r,o,a,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Hp.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new qp(Hp.UNKNOWN,e.toString())}))}terminate(){this.F_=!0,this.connection.terminate()}}class Iy{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){0===this.x_&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve()))))}q_(e){"Online"===this.state?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,"Online"===e&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Fp(t),this.N_=!1):Mp("OnlineStateTracker",t)}Q_(){null!==this.O_&&(this.O_.cancel(),this.O_=null)}}const Ry="RemoteStore";class Py{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=i,this.z_.To((e=>{n.enqueueAndForget((async()=>{Oy(this)&&(Mp(Ry,"Restarting streams for network reachability change."),await async function(e){const t=zp(e);t.W_.add(4),await Ny(t),t.j_.set("Unknown"),t.W_.delete(4),await Ay(t)}(this))}))})),this.j_=new Iy(n,r)}}async function Ay(e){if(Oy(e))for(const t of e.G_)await t(!0)}async function Ny(e){for(const t of e.G_)await t(!1)}function Oy(e){return 0===zp(e).W_.size}async function Dy(e,t){const n=zp(e);t?(n.W_.delete(2),await Ay(n)):t||(n.W_.add(2),await Ny(n),n.j_.set("Unknown"))}class Ly{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Wp,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new Ly(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new qp(Hp.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}class jy{constructor(){this.queries=My(),this.onlineState="Unknown",this.ia=new Set}terminate(){!function(e,t){const n=zp(e),r=n.queries;n.queries=My(),r.forEach(((e,n)=>{for(const r of n.ta)r.onError(t)}))}(this,new qp(Hp.ABORTED,"Firestore shutting down"))}}function My(){return new Ng((e=>xg(e)),_g)}function Fy(e){e.ia.forEach((e=>{e.next()}))}var Uy,Vy;(Vy=Uy||(Uy={}))._a="default",Vy.Cache="cache";const $y="SyncEngine";class By{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.La={},this.ka=new Ng((e=>xg(e)),_g),this.qa=new Map,this.Qa=new Set,this.$a=new im(vf.comparator),this.Ua=new Map,this.Ka=new Gv,this.Wa={},this.Ga=new Map,this.za=Vv.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return!0===this.ja}}function zy(e,t,n){const r=zp(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ka.forEach(((n,r)=>{const i=r.view.sa(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=zp(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.ta)i.sa(t)&&(r=!0)})),r&&Fy(n)}(r.eventManager,t),e.length&&r.La.p_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Hy(e,t,n){const r=zp(e),i=[],s=[],o=[];r.ka.isEmpty()||(r.ka.forEach(((e,a)=>{o.push(r.Ha(a,t,n).then((e=>{var t;if((e||n)&&r.isPrimaryClient){const i=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(a.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(a.targetId,i?"current":"not-current")}if(e){i.push(e);const t=ry.Yi(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.La.p_(i),await async function(e,t){const n=zp(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>Tf.forEach(t,(t=>Tf.forEach(t.Hi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>Tf.forEach(t.Ji,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!xf(e))throw e;Mp(oy,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ts.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ts=n.Ts.insert(e,i)}}}(r.localStore,s))}async function qy(e,t){const n=zp(e);if(!n.currentUser.isEqual(t)){Mp($y,"User change. New user:",t.toKey());const e=await cy(n.localStore,t);n.currentUser=t,function(e,t){e.Ga.forEach((e=>{e.forEach((e=>{e.reject(new qp(Hp.CANCELLED,t))}))})),e.Ga.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Hy(n,e.Rs)}}class Wy{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ey(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return ly(this.persistence,new sy,e.initialUser,this.serializer)}Xa(e){return new ey(ny.ri,this.serializer)}Za(e){return new dy}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Wy.provider={build:()=>new Wy};class Ky{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>zy(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=qy.bind(null,this.syncEngine),await Dy(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new jy}createDatastore(e){const t=Ey(e.databaseInfo.databaseId),n=function(e){return new ky(e)}(e.databaseInfo);return function(e,t,n,r){return new xy(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Py(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>zy(this.syncEngine,e,0)),fy.D()?new fy:new hy)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new By(e,t,n,r,i,s);return o&&(a.ja=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=zp(e);Mp(Ry,"RemoteStore shutting down."),t.W_.add(5),await Ny(t),t.z_.shutdown(),t.j_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}Ky.provider={build:()=>new Ky};function Gy(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Jy=new Map;function Yy(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":$p()}function Qy(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new qp(Hp.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Yy(e);throw new qp(Hp.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}const Xy="firestore.googleapis.com",Zy=!0;class eb{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new qp(Hp.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Xy,this.ssl=Zy}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:Zy;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=Fv;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<$v)throw new qp(Hp.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new qp(Hp.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Gy(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new qp(Hp.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new qp(Hp.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new qp(Hp.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class tb{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new eb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new qp(Hp.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new qp(Hp.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new eb(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Gp;switch(e.type){case"firstParty":return new Xp(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new qp(Hp.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Jy.get(e);t&&(Mp("ComponentProvider","Removing Datastore"),Jy.delete(e),t.terminate())}(this),Promise.resolve()}}function nb(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=Qy(e,tb))._getSettings(),o=Object.assign(Object.assign({},s),{emulatorOptions:e._getEmulatorOptions()}),a=`${t}:${n}`;s.host!==Xy&&s.host!==a&&Up("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l=Object.assign(Object.assign({},s),{host:a,ssl:!1,emulatorOptions:r});if(!Fo(l,o)&&(e._setSettings(l),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Op.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[ko(JSON.stringify({alg:"none",type:"JWT"})),ko(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new qp(Hp.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Op(s)}e._authCredentials=new Jp(new Kp(t,n))}}const rb="AsyncQueue";class ib{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new Ty(this,"async_queue_retry"),this.Su=()=>{const e=Cy();e&&Mp(rb,"Visibility state changed to "+e.visibilityState),this.a_.t_()},this.bu=e;const t=Cy();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=Cy();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise((()=>{}));const t=new Wp;return this.vu((()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Vu.push(e),this.Cu())))}async Cu(){if(0!==this.Vu.length){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!xf(e))throw e;Mp(rb,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo((()=>this.Cu()))}}vu(e){const t=this.bu.then((()=>(this.pu=!0,e().catch((e=>{this.gu=e,this.pu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Fp("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.pu=!1,e))))));return this.bu=t,t}enqueueAfterDelay(e,t,n){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const r=Ly.createAndSchedule(this,e,t,n,(e=>this.Fu(e)));return this.fu.push(r),r}Du(){this.gu&&$p()}verifyOperationInProgress(){}async Mu(){let e;do{e=this.bu,await e}while(e!==this.bu)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then((()=>{this.fu.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.fu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Mu()}))}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}class sb extends tb{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new ib,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ib(e),this._firestoreClient=void 0,await e}}}new RegExp("[~\\*/\\[\\]]");new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Dp=e}(cl),il(new Ko("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new sb(new Yp(e.getProvider("auth-internal")),new ef(s,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new qp(Hp.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Em(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),hl(Ap,Np,e),hl(Ap,Np,"esm2017")}();(function(e,t){const n="object"==typeof e?e:dl(),r="string"==typeof e?e:t||Cm,i=sl(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const e=(e=>{const t=_o(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]})("firestore");e&&nb(i,...e)}})(ul({apiKey:"AIzaSyBhWy_Lwyrr4isMoItVw07izKH7-0RKpMM",authDomain:"whatsapp-16bff.firebaseapp.com",projectId:"whatsapp-16bff",storageBucket:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyBhWy_Lwyrr4isMoItVw07izKH7-0RKpMM",REACT_APP_STREAM_API_KEY:"sqtepgt3s5px"}.STORAGE_BUCKET,messagingSenderId:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyBhWy_Lwyrr4isMoItVw07izKH7-0RKpMM",REACT_APP_STREAM_API_KEY:"sqtepgt3s5px"}.MESSAGING_SENDER_ID,appId:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyBhWy_Lwyrr4isMoItVw07izKH7-0RKpMM",REACT_APP_STREAM_API_KEY:"sqtepgt3s5px"}.APP_ID,measurementId:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyBhWy_Lwyrr4isMoItVw07izKH7-0RKpMM",REACT_APP_STREAM_API_KEY:"sqtepgt3s5px"}.MEASURMENT_ID})),n.p;const ob=zr((0,Pr.jsx)("path",{d:"M20.01 15.38c-1.23 0-2.42-.2-3.53-.56-.35-.12-.74-.03-1.01.24l-1.57 1.97c-2.83-1.35-5.48-3.9-6.89-6.83l1.95-1.66c.27-.28.35-.67.24-1.02-.37-1.11-.56-2.3-.56-3.53 0-.54-.45-.99-.99-.99H4.19C3.65 3 3 3.24 3 3.99 3 13.28 10.73 21 20.01 21c.71 0 .99-.63.99-1.18v-3.45c0-.54-.45-.99-.99-.99"}),"Call"),ab=zr((0,Pr.jsx)("path",{d:"M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11zM14 13h-3v3H9v-3H6v-2h3V8h2v3h3z"}),"VideoCall"),lb=zr((0,Pr.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBack");const cb=function(e){let{handleBack:t,user:n,onCall:r,initiateCall:i,connected:s,calledTo:a,showOutGoing:l}=e;const[c,d]=(0,o.useState)(),[h,p]=(0,o.useState)();return(0,o.useEffect)((()=>{!async function(){const e=await async function(e){try{const t=await fetch(`${u}/getUser?userId=${e}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return await t.json()}catch(t){return console.log("Error fetching user:",t),null}}(a);d(e)}()}),[a]),(0,Pr.jsxs)("div",{className:"header-bar",children:[(0,Pr.jsxs)("div",{className:"row",children:[(0,Pr.jsx)("button",{className:"back-btn",onClick:()=>{t(!0)},children:(0,Pr.jsx)(lb,{})}),(0,Pr.jsx)("img",{src:null===c||void 0===c?void 0:c.photoURL,alt:"no-image",className:"avatar"}),(0,Pr.jsx)("h2",{children:null===c||void 0===c?void 0:c.displayName})]}),(0,Pr.jsxs)("div",{className:"row",children:[(0,Pr.jsx)("button",{className:"btn-chatBar",children:(0,Pr.jsx)(ob,{className:"call-icon-style"})}),(0,Pr.jsx)("button",{onClick:()=>{l(),i(a,n)},disabled:!s,className:"btn-chatBar",children:(0,Pr.jsx)(ab,{className:"call-icon-style"})})]})]})};function ub(){const{innerWidth:e,innerHeight:t}=window;return{width:e,height:t}}const db=e=>{let{onSendMessage:t}=e;const[n,r]=(0,o.useState)("");return(0,Pr.jsx)("div",{className:"text-input-bar",children:(0,Pr.jsxs)("form",{onSubmit:e=>{e.preventDefault(),""!==n.trim()&&(t(n),r(""))},className:"input-form",children:[(0,Pr.jsxs)("div",{className:"input-container",children:[(0,Pr.jsx)("button",{type:"button",className:"emoji-button",children:"\ud83d\ude0a"}),(0,Pr.jsx)("input",{type:"text",value:n,onChange:e=>r(e.target.value),placeholder:"Type a message...",className:"message-input"}),(0,Pr.jsx)("button",{type:"button",className:"attachment-button",children:"\ud83d\udcce"})]}),(0,Pr.jsx)("button",{type:"submit",className:"send-button",children:(0,Pr.jsx)("svg",{viewBox:"0 0 24 24",width:"24",height:"24",fill:"white",children:(0,Pr.jsx)("path",{d:"M1.101 21.757L23.8 12.028 1.101 2.3l.011 7.912 13.623 1.816-13.623 1.817-.011 7.912z"})})})]})})};const hb=function(e){let{split_screen:t,updateAllChat:n,setAllChats:r,allChats:i,handleOnClick:s,handleBack:a,chat:l,currChatUser:c,currChatUserID:d,user:h,onCall:p,showOutGoing:f,setIsAddUserOpen:m,isAddUserOpen:g}=e;const v=(0,o.useRef)(null),[y,b]=(0,o.useState)(l),{initiateCall:w,connected:S,sendMessage:k,messages:C,setMessages:E}=ho();(0,o.useEffect)((()=>{(()=>{var e;null===(e=v.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})})()}),[y]),(0,o.useEffect)((()=>{b(l)}),[l]);const T=(0,o.useRef)({});function _(){var e="AM",t=String(Date.now()).slice(0,4),n=parseInt(t[0]+t[1]);n>12&&(e="PM");var r=t[2]+t[3];return String(n%12)+":"+r+" "+e}return(0,o.useEffect)((()=>{if(!t)return Object.keys(C).length>0&&function(e,t,n,r){if(!e||0===Object.keys(e).length)return;const i=[...t];let s=!1;const o=[];for(const l in e){const t=JSON.stringify(e[l]);if(T.current[l]===t)continue;let n=-1;for(let e=0;e<i.length;e++)if(i[e].id==l){n=e;break}if(-1===n)continue;const r=i[n];r.data||(r.data={}),r.data.chat||(r.data.chat=[]);const c=e[l];if(c&&c.length>0){for(let e=0;e<c.length;e++)c[e]&&(r.data.chat.push({isUser:!1,message:(a=c[e]).message,sender:a.sender,timestamp:"5:43 PM"}),s=!0);T.current[l]=t,o.push(l)}}var a;s&&n&&n(i),o.length>0&&r&&r((e=>{const t={...e};return o.forEach((e=>{delete t[e]})),t}))}(C,i,r,E),()=>{T.current={}}}),[C,i,r,E,t]),o.useEffect((()=>{b(l)}),[l]),""!=d?(0,Pr.jsxs)("div",{className:"Page",children:[(0,Pr.jsx)(cb,{handleBack:a,user:c,onCall:p,initiateCall:w,connected:S,calledTo:d,showOutGoing:f}),(0,Pr.jsxs)("div",{className:"chat-container",children:[y.map(((e,t)=>(0,Pr.jsxs)("div",{className:"chat-message "+(e.isUser?"received":"sent"),children:[e.message,(0,Pr.jsx)("span",{className:"timestamp",children:e.timestamp})]},t))),(0,Pr.jsx)("div",{ref:v})]}),(0,Pr.jsx)(db,{onSendMessage:function(e){let t={sender:null===h||void 0===h?void 0:h.uid,message:e,timestamp:_(),isUser:!0};const n=new FormData;n.append("message",e),n.append("timestamp",_()),fetch(u+"/sendText?senderID="+h.uid+"&recieverID="+d,{method:"PUT",body:n}).then((e=>e.json())).then((e=>console.log(e))).catch((e=>console.log(e))),k({type:"message_sent",message:t,sender:null===h||void 0===h?void 0:h.uid,receiver:d}),b([...y,t])}})]}):(0,Pr.jsx)("div",{className:"empty-chat-container",children:(0,Pr.jsxs)("div",{className:"empty-chat-content",children:[(0,Pr.jsx)("img",{src:"/chat-placeholder.png",alt:"Start chatting",className:"empty-chat-illustration"}),(0,Pr.jsx)("h2",{children:"No conversation selected"}),(0,Pr.jsx)("p",{children:"Choose a contact from the sidebar to start chatting"}),(0,Pr.jsx)("div",{className:"empty-chat-actions",children:(0,Pr.jsxs)("button",{className:"new-chat-button",onClick:()=>{m(!0)},children:[(0,Pr.jsx)("span",{className:"icon",children:"+"}),(0,Pr.jsx)("span",{children:"New conversation"})]})})]})})};let pb=!0,fb=!0;function mb(e,t,n){const r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}function gb(e,t,n){if(!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(e,r){if(e!==t)return i.apply(this,arguments);const s=e=>{const t=n(e);t&&(r.handleEvent?r.handleEvent(t):r(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(r,s),i.apply(this,[e,s])};const s=r.removeEventListener;r.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[t])return s.apply(this,arguments);if(!this._eventMap[t].has(n))return s.apply(this,arguments);const r=this._eventMap[t].get(n);return this._eventMap[t].delete(n),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,s.apply(this,[e,r])},Object.defineProperty(r,"on"+t,{get(){return this["_on"+t]},set(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}function vb(e){return"boolean"!==typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(pb=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function yb(e){return"boolean"!==typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(fb=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function bb(){if("object"===typeof window){if(pb)return;"undefined"!==typeof console&&"function"===typeof console.log&&console.log.apply(console,arguments)}}function wb(e,t){fb&&console.warn(e+" is deprecated, please use "+t+" instead.")}function Sb(e){return"[object Object]"===Object.prototype.toString.call(e)}function kb(e){return Sb(e)?Object.keys(e).reduce((function(t,n){const r=Sb(e[n]),i=r?kb(e[n]):e[n],s=r&&!Object.keys(i).length;return void 0===i||s?t:Object.assign(t,{[n]:i})}),{}):e}function Cb(e,t,n){t&&!n.has(t.id)&&(n.set(t.id,t),Object.keys(t).forEach((r=>{r.endsWith("Id")?Cb(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach((t=>{Cb(e,e.get(t),n)}))})))}function Eb(e,t,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(null===t)return i;const s=[];return e.forEach((e=>{"track"===e.type&&e.trackIdentifier===t.id&&s.push(e)})),s.forEach((t=>{e.forEach((n=>{n.type===r&&n.trackId===t.id&&Cb(e,n,i)}))})),i}const Tb=bb;function _b(e,t){const n=e&&e.navigator;if(!n.mediaDevices)return;const r=function(e){if("object"!==typeof e||e.mandatory||e.optional)return e;const t={};return Object.keys(e).forEach((n=>{if("require"===n||"advanced"===n||"mediaSource"===n)return;const r="object"===typeof e[n]?e[n]:{ideal:e[n]};void 0!==r.exact&&"number"===typeof r.exact&&(r.min=r.max=r.exact);const i=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){t.optional=t.optional||[];let e={};"number"===typeof r.ideal?(e[i("min",n)]=r.ideal,t.optional.push(e),e={},e[i("max",n)]=r.ideal,t.optional.push(e)):(e[i("",n)]=r.ideal,t.optional.push(e))}void 0!==r.exact&&"number"!==typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[i("",n)]=r.exact):["min","max"].forEach((e=>{void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[i(e,n)]=r[e])}))})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},i=function(e,i){if(t.version>=61)return i(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"===typeof e.audio){const t=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};t((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),t(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=r(e.audio)}if(e&&"object"===typeof e.video){let s=e.video.facingMode;s=s&&("object"===typeof s?s:{ideal:s});const o=t.version<66;if(s&&("user"===s.exact||"environment"===s.exact||"user"===s.ideal||"environment"===s.ideal)&&(!n.mediaDevices.getSupportedConstraints||!n.mediaDevices.getSupportedConstraints().facingMode||o)){let t;if(delete e.video.facingMode,"environment"===s.exact||"environment"===s.ideal?t=["back","rear"]:"user"!==s.exact&&"user"!==s.ideal||(t=["front"]),t)return n.mediaDevices.enumerateDevices().then((n=>{let o=(n=n.filter((e=>"videoinput"===e.kind))).find((e=>t.some((t=>e.label.toLowerCase().includes(t)))));return!o&&n.length&&t.includes("back")&&(o=n[n.length-1]),o&&(e.video.deviceId=s.exact?{exact:o.deviceId}:{ideal:o.deviceId}),e.video=r(e.video),Tb("chrome: "+JSON.stringify(e)),i(e)}))}e.video=r(e.video)}return Tb("chrome: "+JSON.stringify(e)),i(e)},s=function(e){return t.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(n.getUserMedia=function(e,t,r){i(e,(e=>{n.webkitGetUserMedia(e,t,(e=>{r&&r(s(e))}))}))}.bind(n),n.mediaDevices.getUserMedia){const e=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(t){return i(t,(t=>e(t).then((e=>{if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach((e=>{e.stop()})),new DOMException("","NotFoundError");return e}),(e=>Promise.reject(s(e))))))}}}function xb(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"===typeof t?e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then((t=>{const r=n.video&&n.video.width,i=n.video&&n.video.height,s=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:s||3}},r&&(n.video.mandatory.maxWidth=r),i&&(n.video.mandatory.maxHeight=i),e.navigator.mediaDevices.getUserMedia(n)}))}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}function Ib(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function Rb(e){if("object"===typeof e&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=t=>{t.stream.addEventListener("addtrack",(n=>{let r;r=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((e=>e.track&&e.track.id===n.track.id)):{track:n.track};const i=new Event("track");i.track=n.track,i.receiver=r,i.transceiver={receiver:r},i.streams=[t.stream],this.dispatchEvent(i)})),t.stream.getTracks().forEach((n=>{let r;r=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((e=>e.track&&e.track.id===n.id)):{track:n};const i=new Event("track");i.track=n,i.receiver=r,i.transceiver={receiver:r},i.streams=[t.stream],this.dispatchEvent(i)}))},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else gb(e,"track",(e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e)))}function Pb(e){if("object"===typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){let i=n.apply(this,arguments);return i||(i=t(this,e),this._senders.push(i)),i};const r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){r.apply(this,arguments);const t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._senders=this._senders||[],n.apply(this,[e]),e.getTracks().forEach((e=>{this._senders.push(t(this,e))}))};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._senders=this._senders||[],r.apply(this,[e]),e.getTracks().forEach((e=>{const t=this._senders.find((t=>t.track===e));t&&this._senders.splice(this._senders.indexOf(t),1)}))}}else if("object"===typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function Ab(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,n,r]=arguments;if(arguments.length>0&&"function"===typeof e)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!==typeof e))return t.apply(this,[]);const i=function(e){const t={};return e.result().forEach((e=>{const n={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach((t=>{n[t]=e.stat(t)})),t[n.id]=n})),t},s=function(e){return new Map(Object.keys(e).map((t=>[t,e[t]])))};if(arguments.length>=2){const r=function(e){n(s(i(e)))};return t.apply(this,[r,e])}return new Promise(((e,n)=>{t.apply(this,[function(t){e(s(i(t)))},n])})).then(n,r)}}function Nb(e){if(!("object"===typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){const e=this;return this._pc.getStats().then((t=>Eb(t,e.track,!0)))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e}),gb(e,"track",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){const e=this;return this._pc.getStats().then((t=>Eb(t,e.track,!1)))}}if(!("getStats"in e.RTCRtpSender.prototype)||!("getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const e=arguments[0];let t,n,r;return this.getSenders().forEach((n=>{n.track===e&&(t?r=!0:t=n)})),this.getReceivers().forEach((t=>(t.track===e&&(n?r=!0:n=t),t.track===e))),r||t&&n?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():n?n.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function Ob(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((e=>this._shimmedLocalStreams[e][0]))};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const r=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(r)&&this._shimmedLocalStreams[n.id].push(r):this._shimmedLocalStreams[n.id]=[n,r],r};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((e=>{if(this.getSenders().find((t=>t.track===e)))throw new DOMException("Track already exists.","InvalidAccessError")}));const t=this.getSenders();n.apply(this,arguments);const r=this.getSenders().filter((e=>-1===t.indexOf(e)));this._shimmedLocalStreams[e.id]=[e].concat(r)};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],r.apply(this,arguments)};const i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach((t=>{const n=this._shimmedLocalStreams[t].indexOf(e);-1!==n&&this._shimmedLocalStreams[t].splice(n,1),1===this._shimmedLocalStreams[t].length&&delete this._shimmedLocalStreams[t]})),i.apply(this,arguments)}}function Db(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return Ob(e);const n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const e=n.apply(this);return this._reverseStreams=this._reverseStreams||{},e.map((e=>this._reverseStreams[e.id]))};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach((e=>{if(this.getSenders().find((t=>t.track===e)))throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[t.id]){const n=new e.MediaStream(t.getTracks());this._streams[t.id]=n,this._reverseStreams[n.id]=t,t=n}r.apply(this,[t])};const i=e.RTCPeerConnection.prototype.removeStream;function s(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((t=>{const r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(i.id,"g"),r.id)})),new RTCSessionDescription({type:t.type,sdp:n})}e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const r=[].slice.call(arguments,1);if(1!==r.length||!r[0].getTracks().find((e=>e===t)))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find((e=>e.track===t)))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const i=this._streams[n.id];if(i)i.addTrack(t),Promise.resolve().then((()=>{this.dispatchEvent(new Event("negotiationneeded"))}));else{const r=new e.MediaStream([t]);this._streams[n.id]=r,this._reverseStreams[r.id]=n,this.addStream(r)}return this.getSenders().find((e=>e.track===t))},["createOffer","createAnswer"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){const e=arguments;return arguments.length&&"function"===typeof arguments[0]?n.apply(this,[t=>{const n=s(this,t);e[0].apply(null,[n])},t=>{e[1]&&e[1].apply(null,t)},arguments[2]]):n.apply(this,arguments).then((e=>s(this,e)))}};e.RTCPeerConnection.prototype[t]=r[t]}));const o=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=function(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((t=>{const r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(r.id,"g"),i.id)})),new RTCSessionDescription({type:t.type,sdp:n})}(this,arguments[0]),o.apply(this,arguments)):o.apply(this,arguments)};const a=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const e=a.get.apply(this);return""===e.type?e:s(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(e._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let t;this._streams=this._streams||{},Object.keys(this._streams).forEach((n=>{this._streams[n].getTracks().find((t=>e.track===t))&&(t=this._streams[n])})),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Lb(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=r[t]}))}function jb(e,t){gb(e,"negotiationneeded",(e=>{const n=e.target;if(!(t.version<72||n.getConfiguration&&"plan-b"===n.getConfiguration().sdpSemantics)||"stable"===n.signalingState)return e}))}function Mb(e,t){const n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(e,t,r){wb("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(t,r)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const e=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},t=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(n){return"object"===typeof n&&"object"===typeof n.audio&&(n=JSON.parse(JSON.stringify(n)),e(n.audio,"autoGainControl","mozAutoGainControl"),e(n.audio,"noiseSuppression","mozNoiseSuppression")),t(n)},r&&r.prototype.getSettings){const t=r.prototype.getSettings;r.prototype.getSettings=function(){const n=t.apply(this,arguments);return e(n,"mozAutoGainControl","autoGainControl"),e(n,"mozNoiseSuppression","noiseSuppression"),n}}if(r&&r.prototype.applyConstraints){const t=r.prototype.applyConstraints;r.prototype.applyConstraints=function(n){return"audio"===this.kind&&"object"===typeof n&&(n=JSON.parse(JSON.stringify(n)),e(n,"autoGainControl","mozAutoGainControl"),e(n,"noiseSuppression","mozNoiseSuppression")),t.apply(this,[n])}}}}function Fb(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){const e=new DOMException("getDisplayMedia without video constraints is undefined");return e.name="NotFoundError",e.code=8,Promise.reject(e)}return!0===n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)})}function Ub(e){"object"===typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Vb(e,t){if("object"!==typeof e||!e.RTCPeerConnection&&!e.mozRTCPeerConnection)return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=r[t]}));const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,i,s]=arguments;return r.apply(this,[e||null]).then((e=>{if(t.version<53&&!i)try{e.forEach((e=>{e.type=n[e.type]||e.type}))}catch(r){if("TypeError"!==r.name)throw r;e.forEach(((t,r)=>{e.set(r,Object.assign({},t,{type:n[t.type]||t.type}))}))}return e})).then(i,s)}}function $b(e){if("object"!==typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function Bb(e){if("object"!==typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e}),gb(e,"track",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function zb(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){wb("removeStream","removeTrack"),this.getSenders().forEach((t=>{t.track&&e.getTracks().includes(t.track)&&this.removeTrack(t)}))})}function Hb(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function qb(e){if("object"!==typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let e=arguments[1]&&arguments[1].sendEncodings;void 0===e&&(e=[]),e=[...e];const n=e.length>0;n&&e.forEach((e=>{if("rid"in e){if(!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.")}if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")}));const r=t.apply(this,arguments);if(n){const{sender:t}=r,n=t.getParameters();(!("encodings"in n)||1===n.encodings.length&&0===Object.keys(n.encodings[0]).length)&&(n.encodings=e,t.sendEncodings=e,this.setParametersPromises.push(t.setParameters(n).then((()=>{delete t.sendEncodings})).catch((()=>{delete t.sendEncodings}))))}return r})}function Wb(e){if("object"!==typeof e||!e.RTCRtpSender)return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}function Kb(e){if("object"!==typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((()=>t.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):t.apply(this,arguments)}}function Gb(e){if("object"!==typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((()=>t.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):t.apply(this,arguments)}}function Jb(e){if("object"===typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach((n=>t.call(this,n,e))),e.getVideoTracks().forEach((n=>t.call(this,n,e)))},e.RTCPeerConnection.prototype.addTrack=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r&&r.forEach((e=>{this._localStreams?this._localStreams.includes(e)||this._localStreams.push(e):this._localStreams=[e]})),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);const t=this._localStreams.indexOf(e);if(-1===t)return;this._localStreams.splice(t,1);const n=e.getTracks();this.getSenders().forEach((e=>{n.includes(e.track)&&this.removeTrack(e)}))})}}function Yb(e){if("object"===typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(e){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=e=>{e.streams.forEach((e=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(e))return;this._remoteStreams.push(e);const t=new Event("addstream");t.stream=e,this.dispatchEvent(t)}))})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((t=>{if(e._remoteStreams||(e._remoteStreams=[]),e._remoteStreams.indexOf(t)>=0)return;e._remoteStreams.push(t);const n=new Event("addstream");n.stream=t,e.dispatchEvent(n)}))}),t.apply(e,arguments)}}}function Qb(e){if("object"!==typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,i=t.setLocalDescription,s=t.setRemoteDescription,o=t.addIceCandidate;t.createOffer=function(e,t){const r=arguments.length>=2?arguments[2]:arguments[0],i=n.apply(this,[r]);return t?(i.then(e,t),Promise.resolve()):i},t.createAnswer=function(e,t){const n=arguments.length>=2?arguments[2]:arguments[0],i=r.apply(this,[n]);return t?(i.then(e,t),Promise.resolve()):i};let a=function(e,t,n){const r=i.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r};t.setLocalDescription=a,a=function(e,t,n){const r=s.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.setRemoteDescription=a,a=function(e,t,n){const r=o.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.addIceCandidate=a}function Xb(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const e=t.mediaDevices,n=e.getUserMedia.bind(e);t.mediaDevices.getUserMedia=e=>n(Zb(e))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,r){t.mediaDevices.getUserMedia(e).then(n,r)}.bind(t))}function Zb(e){return e&&void 0!==e.video?Object.assign({},e,{video:kb(e.video)}):e}function ew(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){const t=[];for(let n=0;n<e.iceServers.length;n++){let r=e.iceServers[n];void 0===r.urls&&r.url?(wb("RTCIceServer.url","RTCIceServer.urls"),r=JSON.parse(JSON.stringify(r)),r.urls=r.url,delete r.url,t.push(r)):t.push(e.iceServers[n])}e.iceServers=t}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:()=>t.generateCertificate})}function tw(e){"object"===typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function nw(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){"undefined"!==typeof e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);const t=this.getTransceivers().find((e=>"audio"===e.receiver.track.kind));!1===e.offerToReceiveAudio&&t?"sendrecv"===t.direction?t.setDirection?t.setDirection("sendonly"):t.direction="sendonly":"recvonly"===t.direction&&(t.setDirection?t.setDirection("inactive"):t.direction="inactive"):!0!==e.offerToReceiveAudio||t||this.addTransceiver("audio",{direction:"recvonly"}),"undefined"!==typeof e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);const n=this.getTransceivers().find((e=>"video"===e.receiver.track.kind));!1===e.offerToReceiveVideo&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveVideo||n||this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function rw(e){"object"!==typeof e||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var iw=n(8824),sw=n.n(iw);function ow(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"===typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substring(2)),e.candidate&&e.candidate.length){const n=new t(e),r=sw().parseCandidate(e.candidate);for(const e in r)e in n||Object.defineProperty(n,e,{value:r[e]});return n.toJSON=function(){return{candidate:n.candidate,sdpMid:n.sdpMid,sdpMLineIndex:n.sdpMLineIndex,usernameFragment:n.usernameFragment}},n}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,gb(e,"icecandidate",(t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t)))}function aw(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||gb(e,"icecandidate",(e=>{if(e.candidate){const t=sw().parseCandidate(e.candidate.candidate);"relay"===t.type&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[t.priority>>24])}return e}))}function lw(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return"undefined"===typeof this._sctp?null:this._sctp}});const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76){const{sdpSemantics:e}=this.getConfiguration();"plan-b"===e&&Object.defineProperty(this,"sctp",{get(){return"undefined"===typeof this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(function(e){if(!e||!e.sdp)return!1;const t=sw().splitSections(e.sdp);return t.shift(),t.some((e=>{const t=sw().parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")}))}(arguments[0])){const e=function(e){const t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;const n=parseInt(t[1],10);return n!==n?-1:n}(arguments[0]),n=function(e){let n=65536;return"firefox"===t.browser&&(n=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),n}(e),r=function(e,n){let r=65536;"firefox"===t.browser&&57===t.version&&(r=65535);const i=sw().matchPrefix(e.sdp,"a=max-message-size:");return i.length>0?r=parseInt(i[0].substring(19),10):"firefox"===t.browser&&-1!==n&&(r=2147483637),r}(arguments[0],e);let i;i=0===n&&0===r?Number.POSITIVE_INFINITY:0===n||0===r?Math.max(n,r):Math.min(n,r);const s={};Object.defineProperty(s,"maxMessageSize",{get:()=>i}),this._sctp=s}return n.apply(this,arguments)}}function cw(e){if(!e.RTCPeerConnection||!("createDataChannel"in e.RTCPeerConnection.prototype))return;function t(e,t){const n=e.send;e.send=function(){const r=arguments[0],i=r.length||r.size||r.byteLength;if("open"===e.readyState&&t.sctp&&i>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}const n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const e=n.apply(this,arguments);return t(e,this),e},gb(e,"datachannel",(e=>(t(e.channel,e.target),e)))}function uw(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((e=>{const n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=e=>{const t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;const n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}}))}function dw(e,t){if(!e.RTCPeerConnection)return;if("chrome"===t.browser&&t.version>=71)return;if("safari"===t.browser&&t.version>=605)return;const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf("\na=extmap-allow-mixed")){const n=t.sdp.split("\n").filter((e=>"a=extmap-allow-mixed"!==e.trim())).join("\n");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:n}):t.sdp=n}return n.apply(this,arguments)}}function hw(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const n=e.RTCPeerConnection.prototype.addIceCandidate;n&&0!==n.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function pw(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const n=e.RTCPeerConnection.prototype.setLocalDescription;n&&0!==n.length&&(e.RTCPeerConnection.prototype.setLocalDescription=function(){let e=arguments[0]||{};if("object"!==typeof e||e.type&&e.sdp)return n.apply(this,arguments);if(e={type:e.type,sdp:e.sdp},!e.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":e.type="offer";break;default:e.type="answer"}if(e.sdp||"offer"!==e.type&&"answer"!==e.type)return n.apply(this,[e]);return("offer"===e.type?this.createOffer:this.createAnswer).apply(this).then((e=>n.apply(this,[e])))})}!function(){let{window:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const o=bb,a=function(e){const t={browser:null,version:null};if("undefined"===typeof e||!e.navigator||!e.navigator.userAgent)return t.browser="Not a browser.",t;const{navigator:n}=e;if(n.mozGetUserMedia)t.browser="firefox",t.version=mb(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection)t.browser="chrome",t.version=mb(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!e.RTCPeerConnection||!n.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=mb(n.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t}(n),l={browserDetails:a,commonShim:i,extractVersion:mb,disableLog:vb,disableWarnings:yb,sdp:iw};switch(a.browser){case"chrome":if(!e||!Lb||!s.shimChrome)return o("Chrome shim is not included in this adapter release."),l;if(null===a.version)return o("Chrome shim can not determine version, not shimming."),l;o("adapter.js shimming chrome."),l.browserShim=e,hw(n,a),pw(n),_b(n,a),Ib(n),Lb(n,a),Rb(n),Db(n,a),Pb(n),Ab(n),Nb(n),jb(n,a),ow(n),aw(n),uw(n),lw(n,a),cw(n),dw(n,a);break;case"firefox":if(!t||!Vb||!s.shimFirefox)return o("Firefox shim is not included in this adapter release."),l;o("adapter.js shimming firefox."),l.browserShim=t,hw(n,a),pw(n),Mb(n,a),Vb(n,a),Ub(n),zb(n),$b(n),Bb(n),Hb(n),qb(n),Wb(n),Kb(n),Gb(n),ow(n),uw(n),lw(n,a),cw(n);break;case"safari":if(!r||!s.shimSafari)return o("Safari shim is not included in this adapter release."),l;o("adapter.js shimming safari."),l.browserShim=r,hw(n,a),pw(n),ew(n),nw(n),Qb(n),Jb(n),Yb(n),tw(n),Xb(n),rw(n),ow(n),aw(n),lw(n,a),cw(n),dw(n,a);break;default:o("Unsupported browser!")}}({window:"undefined"===typeof window?void 0:window});const fw=Symbol.for("protobuf-ts/message-type");function mw(e){let t=!1;const n=[];for(let r=0;r<e.length;r++){let i=e.charAt(r);"_"==i?t=!0:/\d/.test(i)?(n.push(i),t=!0):t?(n.push(i.toUpperCase()),t=!1):0==r?n.push(i.toLowerCase()):n.push(i)}return n.join("")}var gw,vw,yw;function bw(e){var t,n,r,i;return e.localName=null!==(t=e.localName)&&void 0!==t?t:mw(e.name),e.jsonName=null!==(n=e.jsonName)&&void 0!==n?n:mw(e.name),e.repeat=null!==(r=e.repeat)&&void 0!==r?r:yw.NO,e.opt=null!==(i=e.opt)&&void 0!==i?i:!e.repeat&&(!e.oneof&&"message"==e.kind),e}function ww(e){if("object"!=typeof e||null===e||!e.hasOwnProperty("oneofKind"))return!1;switch(typeof e.oneofKind){case"string":return void 0!==e[e.oneofKind]&&2==Object.keys(e).length;case"undefined":return 1==Object.keys(e).length;default:return!1}}!function(e){e[e.DOUBLE=1]="DOUBLE",e[e.FLOAT=2]="FLOAT",e[e.INT64=3]="INT64",e[e.UINT64=4]="UINT64",e[e.INT32=5]="INT32",e[e.FIXED64=6]="FIXED64",e[e.FIXED32=7]="FIXED32",e[e.BOOL=8]="BOOL",e[e.STRING=9]="STRING",e[e.BYTES=12]="BYTES",e[e.UINT32=13]="UINT32",e[e.SFIXED32=15]="SFIXED32",e[e.SFIXED64=16]="SFIXED64",e[e.SINT32=17]="SINT32",e[e.SINT64=18]="SINT64"}(gw||(gw={})),function(e){e[e.BIGINT=0]="BIGINT",e[e.STRING=1]="STRING",e[e.NUMBER=2]="NUMBER"}(vw||(vw={})),function(e){e[e.NO=0]="NO",e[e.PACKED=1]="PACKED",e[e.UNPACKED=2]="UNPACKED"}(yw||(yw={}));class Sw{constructor(e){var t;this.fields=null!==(t=e.fields)&&void 0!==t?t:[]}prepare(){if(this.data)return;const e=[],t=[],n=[];for(let r of this.fields)if(r.oneof)n.includes(r.oneof)||(n.push(r.oneof),e.push(r.oneof),t.push(r.oneof));else switch(t.push(r.localName),r.kind){case"scalar":case"enum":r.opt&&!r.repeat||e.push(r.localName);break;case"message":r.repeat&&e.push(r.localName);break;case"map":e.push(r.localName)}this.data={req:e,known:t,oneofs:Object.values(n)}}is(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t<0)return!0;if(null===e||void 0===e||"object"!=typeof e)return!1;this.prepare();let r=Object.keys(e),i=this.data;if(r.length<i.req.length||i.req.some((e=>!r.includes(e))))return!1;if(!n&&r.some((e=>!i.known.includes(e))))return!1;if(t<1)return!0;for(const s of i.oneofs){const r=e[s];if(!ww(r))return!1;if(void 0===r.oneofKind)continue;const i=this.fields.find((e=>e.localName===r.oneofKind));if(!i)return!1;if(!this.field(r[r.oneofKind],i,n,t))return!1}for(const s of this.fields)if(void 0===s.oneof&&!this.field(e[s.localName],s,n,t))return!1;return!0}field(e,t,n,r){let i=t.repeat;switch(t.kind){case"scalar":return void 0===e?t.opt:i?this.scalars(e,t.T,r,t.L):this.scalar(e,t.T,t.L);case"enum":return void 0===e?t.opt:i?this.scalars(e,gw.INT32,r):this.scalar(e,gw.INT32);case"message":return void 0===e||(i?this.messages(e,t.T(),n,r):this.message(e,t.T(),n,r));case"map":if("object"!=typeof e||null===e)return!1;if(r<2)return!0;if(!this.mapKeys(e,t.K,r))return!1;switch(t.V.kind){case"scalar":return this.scalars(Object.values(e),t.V.T,r,t.V.L);case"enum":return this.scalars(Object.values(e),gw.INT32,r);case"message":return this.messages(Object.values(e),t.V.T(),n,r)}}return!0}message(e,t,n,r){return n?t.isAssignable(e,r):t.is(e,r)}messages(e,t,n,r){if(!Array.isArray(e))return!1;if(r<2)return!0;if(n){for(let i=0;i<e.length&&i<r;i++)if(!t.isAssignable(e[i],r-1))return!1}else for(let i=0;i<e.length&&i<r;i++)if(!t.is(e[i],r-1))return!1;return!0}scalar(e,t,n){let r=typeof e;switch(t){case gw.UINT64:case gw.FIXED64:case gw.INT64:case gw.SFIXED64:case gw.SINT64:switch(n){case vw.BIGINT:return"bigint"==r;case vw.NUMBER:return"number"==r&&!isNaN(e);default:return"string"==r}case gw.BOOL:return"boolean"==r;case gw.STRING:return"string"==r;case gw.BYTES:return e instanceof Uint8Array;case gw.DOUBLE:case gw.FLOAT:return"number"==r&&!isNaN(e);default:return"number"==r&&Number.isInteger(e)}}scalars(e,t,n,r){if(!Array.isArray(e))return!1;if(n<2)return!0;if(Array.isArray(e))for(let i=0;i<e.length&&i<n;i++)if(!this.scalar(e[i],t,r))return!1;return!0}mapKeys(e,t,n){let r=Object.keys(e);switch(t){case gw.INT32:case gw.FIXED32:case gw.SFIXED32:case gw.SINT32:case gw.UINT32:return this.scalars(r.slice(0,n).map((e=>parseInt(e))),t,n);case gw.BOOL:return this.scalars(r.slice(0,n).map((e=>"true"==e||"false"!=e&&e)),t,n);default:return this.scalars(r,t,n,vw.STRING)}}}function kw(e){let t=typeof e;if("object"==t){if(Array.isArray(e))return"array";if(null===e)return"null"}return t}function Cw(e){return null!==e&&"object"==typeof e&&!Array.isArray(e)}let Ew="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),Tw=[];for(let n=0;n<Ew.length;n++)Tw[Ew[n].charCodeAt(0)]=n;function _w(){let e=0,t=0;for(let r=0;r<28;r+=7){let n=this.buf[this.pos++];if(e|=(127&n)<<r,0==(128&n))return this.assertBounds(),[e,t]}let n=this.buf[this.pos++];if(e|=(15&n)<<28,t=(112&n)>>4,0==(128&n))return this.assertBounds(),[e,t];for(let r=3;r<=31;r+=7){let n=this.buf[this.pos++];if(t|=(127&n)<<r,0==(128&n))return this.assertBounds(),[e,t]}throw new Error("invalid varint")}function xw(e,t,n){for(let s=0;s<28;s+=7){const r=e>>>s,i=!(r>>>7==0&&0==t),o=255&(i?128|r:r);if(n.push(o),!i)return}const r=e>>>28&15|(7&t)<<4,i=!(t>>3==0);if(n.push(255&(i?128|r:r)),i){for(let e=3;e<31;e+=7){const r=t>>>e,i=!(r>>>7==0),s=255&(i?128|r:r);if(n.push(s),!i)return}n.push(t>>>31&1)}}Tw["-".charCodeAt(0)]=Ew.indexOf("+"),Tw["_".charCodeAt(0)]=Ew.indexOf("/");const Iw=4294967296;function Rw(e){let t="-"==e[0];t&&(e=e.slice(1));const n=1e6;let r=0,i=0;function s(t,s){const o=Number(e.slice(t,s));i*=n,r=r*n+o,r>=Iw&&(i+=r/Iw|0,r%=Iw)}return s(-24,-18),s(-18,-12),s(-12,-6),s(-6),[t,r,i]}function Pw(e,t){if(t>>>0<=2097151)return""+(Iw*t+(e>>>0));let n=(e>>>24|t<<8)>>>0&16777215,r=t>>16&65535,i=(16777215&e)+6777216*n+6710656*r,s=n+8147497*r,o=2*r,a=1e7;function l(e,t){let n=e?String(e):"";return t?"0000000".slice(n.length)+n:n}return i>=a&&(s+=Math.floor(i/a),i%=a),s>=a&&(o+=Math.floor(s/a),s%=a),l(o,0)+l(s,o)+l(i,1)}function Aw(e,t){if(e>=0){for(;e>127;)t.push(127&e|128),e>>>=7;t.push(e)}else{for(let n=0;n<9;n++)t.push(127&e|128),e>>=7;t.push(1)}}function Nw(){let e=this.buf[this.pos++],t=127&e;if(0==(128&e))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(127&e)<<7,0==(128&e))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(127&e)<<14,0==(128&e))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(127&e)<<21,0==(128&e))return this.assertBounds(),t;e=this.buf[this.pos++],t|=(15&e)<<28;for(let n=5;0!==(128&e)&&n<10;n++)e=this.buf[this.pos++];if(0!=(128&e))throw new Error("invalid varint");return this.assertBounds(),t>>>0}let Ow;function Dw(e){if(!e)throw new Error("BigInt unavailable, see https://github.com/timostamm/protobuf-ts/blob/v1.0.8/MANUAL.md#bigint-support")}!function(){const e=new DataView(new ArrayBuffer(8)),t=void 0!==globalThis.BigInt&&"function"===typeof e.getBigInt64&&"function"===typeof e.getBigUint64&&"function"===typeof e.setBigInt64&&"function"===typeof e.setBigUint64;Ow=t?{MIN:BigInt("-9223372036854775808"),MAX:BigInt("9223372036854775807"),UMIN:BigInt("0"),UMAX:BigInt("18446744073709551615"),C:BigInt,V:e}:void 0}();const Lw=/^-?[0-9]+$/,jw=4294967296,Mw=2147483648;class Fw{constructor(e,t){this.lo=0|e,this.hi=0|t}isZero(){return 0==this.lo&&0==this.hi}toNumber(){let e=this.hi*jw+(this.lo>>>0);if(!Number.isSafeInteger(e))throw new Error("cannot convert to safe number");return e}}class Uw extends Fw{static from(e){if(Ow)switch(typeof e){case"string":if("0"==e)return this.ZERO;if(""==e)throw new Error("string is no integer");e=Ow.C(e);case"number":if(0===e)return this.ZERO;e=Ow.C(e);case"bigint":if(!e)return this.ZERO;if(e<Ow.UMIN)throw new Error("signed value for ulong");if(e>Ow.UMAX)throw new Error("ulong too large");return Ow.V.setBigUint64(0,e,!0),new Uw(Ow.V.getInt32(0,!0),Ow.V.getInt32(4,!0))}else switch(typeof e){case"string":if("0"==e)return this.ZERO;if(e=e.trim(),!Lw.test(e))throw new Error("string is no integer");let[t,n,r]=Rw(e);if(t)throw new Error("signed value for ulong");return new Uw(n,r);case"number":if(0==e)return this.ZERO;if(!Number.isSafeInteger(e))throw new Error("number is no integer");if(e<0)throw new Error("signed value for ulong");return new Uw(e,e/jw)}throw new Error("unknown value "+typeof e)}toString(){return Ow?this.toBigInt().toString():Pw(this.lo,this.hi)}toBigInt(){return Dw(Ow),Ow.V.setInt32(0,this.lo,!0),Ow.V.setInt32(4,this.hi,!0),Ow.V.getBigUint64(0,!0)}}Uw.ZERO=new Uw(0,0);class Vw extends Fw{static from(e){if(Ow)switch(typeof e){case"string":if("0"==e)return this.ZERO;if(""==e)throw new Error("string is no integer");e=Ow.C(e);case"number":if(0===e)return this.ZERO;e=Ow.C(e);case"bigint":if(!e)return this.ZERO;if(e<Ow.MIN)throw new Error("signed long too small");if(e>Ow.MAX)throw new Error("signed long too large");return Ow.V.setBigInt64(0,e,!0),new Vw(Ow.V.getInt32(0,!0),Ow.V.getInt32(4,!0))}else switch(typeof e){case"string":if("0"==e)return this.ZERO;if(e=e.trim(),!Lw.test(e))throw new Error("string is no integer");let[t,n,r]=Rw(e);if(t){if(r>Mw||r==Mw&&0!=n)throw new Error("signed long too small")}else if(r>=Mw)throw new Error("signed long too large");let i=new Vw(n,r);return t?i.negate():i;case"number":if(0==e)return this.ZERO;if(!Number.isSafeInteger(e))throw new Error("number is no integer");return e>0?new Vw(e,e/jw):new Vw(-e,-e/jw).negate()}throw new Error("unknown value "+typeof e)}isNegative(){return 0!==(this.hi&Mw)}negate(){let e=~this.hi,t=this.lo;return t?t=1+~t:e+=1,new Vw(t,e)}toString(){if(Ow)return this.toBigInt().toString();if(this.isNegative()){let e=this.negate();return"-"+Pw(e.lo,e.hi)}return Pw(this.lo,this.hi)}toBigInt(){return Dw(Ow),Ow.V.setInt32(0,this.lo,!0),Ow.V.setInt32(4,this.hi,!0),Ow.V.getBigInt64(0,!0)}}function $w(e,t){if(!e)throw new Error(t)}Vw.ZERO=new Vw(0,0);function Bw(e){if("number"!==typeof e)throw new Error("invalid int 32: "+typeof e);if(!Number.isInteger(e)||e>2147483647||e<-2147483648)throw new Error("invalid int 32: "+e)}function zw(e){if("number"!==typeof e)throw new Error("invalid uint 32: "+typeof e);if(!Number.isInteger(e)||e>4294967295||e<0)throw new Error("invalid uint 32: "+e)}function Hw(e){if("number"!==typeof e)throw new Error("invalid float 32: "+typeof e);if(Number.isFinite(e)&&(e>34028234663852886e22||e<-34028234663852886e22))throw new Error("invalid float 32: "+e)}function qw(e,t){switch(t){case vw.BIGINT:return e.toBigInt();case vw.NUMBER:return e.toNumber();default:return e.toString()}}class Ww{constructor(e){this.info=e}prepare(){var e;if(void 0===this.fMap){this.fMap={};const t=null!==(e=this.info.fields)&&void 0!==e?e:[];for(const e of t)this.fMap[e.name]=e,this.fMap[e.jsonName]=e,this.fMap[e.localName]=e}}assert(e,t,n){if(!e){let e=kw(n);throw"number"!=e&&"boolean"!=e||(e=n.toString()),new Error(`Cannot parse JSON ${e} for ${this.info.typeName}#${t}`)}}read(e,t,n){this.prepare();const r=[];for(const[i,s]of Object.entries(e)){const e=this.fMap[i];if(!e){if(!n.ignoreUnknownFields)throw new Error(`Found unknown field while reading ${this.info.typeName} from JSON format. JSON key: ${i}`);continue}const o=e.localName;let a;if(e.oneof){if(null===s&&("enum"!==e.kind||"google.protobuf.NullValue"!==e.T()[0]))continue;if(r.includes(e.oneof))throw new Error(`Multiple members of the oneof group "${e.oneof}" of ${this.info.typeName} are present in JSON.`);r.push(e.oneof),a=t[e.oneof]={oneofKind:o}}else a=t;if("map"==e.kind){if(null===s)continue;this.assert(Cw(s),e.name,s);const t=a[o];for(const[r,i]of Object.entries(s)){let s;switch(this.assert(null!==i,e.name+" map value",null),e.V.kind){case"message":s=e.V.T().internalJsonRead(i,n);break;case"enum":if(s=this.enum(e.V.T(),i,e.name,n.ignoreUnknownFields),!1===s)continue;break;case"scalar":s=this.scalar(i,e.V.T,e.V.L,e.name)}this.assert(void 0!==s,e.name+" map value",i);let o=r;e.K==gw.BOOL&&(o="true"==o||"false"!=o&&o),o=this.scalar(o,e.K,vw.STRING,e.name).toString(),t[o]=s}}else if(e.repeat){if(null===s)continue;this.assert(Array.isArray(s),e.name,s);const t=a[o];for(const r of s){let i;switch(this.assert(null!==r,e.name,null),e.kind){case"message":i=e.T().internalJsonRead(r,n);break;case"enum":if(i=this.enum(e.T(),r,e.name,n.ignoreUnknownFields),!1===i)continue;break;case"scalar":i=this.scalar(r,e.T,e.L,e.name)}this.assert(void 0!==i,e.name,s),t.push(i)}}else switch(e.kind){case"message":if(null===s&&"google.protobuf.Value"!=e.T().typeName){this.assert(void 0===e.oneof,e.name+" (oneof member)",null);continue}a[o]=e.T().internalJsonRead(s,n,a[o]);break;case"enum":if(null===s)continue;let t=this.enum(e.T(),s,e.name,n.ignoreUnknownFields);if(!1===t)continue;a[o]=t;break;case"scalar":if(null===s)continue;a[o]=this.scalar(s,e.T,e.L,e.name)}}}enum(e,t,n,r){if("google.protobuf.NullValue"==e[0]&&$w(null===t||"NULL_VALUE"===t,`Unable to parse field ${this.info.typeName}#${n}, enum ${e[0]} only accepts null.`),null===t)return 0;switch(typeof t){case"number":return $w(Number.isInteger(t),`Unable to parse field ${this.info.typeName}#${n}, enum can only be integral number, got ${t}.`),t;case"string":let i=t;e[2]&&t.substring(0,e[2].length)===e[2]&&(i=t.substring(e[2].length));let s=e[1][i];return("undefined"!==typeof s||!r)&&($w("number"==typeof s,`Unable to parse field ${this.info.typeName}#${n}, enum ${e[0]} has no value for "${t}".`),s)}$w(!1,`Unable to parse field ${this.info.typeName}#${n}, cannot parse enum value from ${typeof t}".`)}scalar(e,t,n,r){let i;try{switch(t){case gw.DOUBLE:case gw.FLOAT:if(null===e)return 0;if("NaN"===e)return Number.NaN;if("Infinity"===e)return Number.POSITIVE_INFINITY;if("-Infinity"===e)return Number.NEGATIVE_INFINITY;if(""===e){i="empty string";break}if("string"==typeof e&&e.trim().length!==e.length){i="extra whitespace";break}if("string"!=typeof e&&"number"!=typeof e)break;let r=Number(e);if(Number.isNaN(r)){i="not a number";break}if(!Number.isFinite(r)){i="too large or small";break}return t==gw.FLOAT&&Hw(r),r;case gw.INT32:case gw.FIXED32:case gw.SFIXED32:case gw.SINT32:case gw.UINT32:if(null===e)return 0;let s;if("number"==typeof e?s=e:""===e?i="empty string":"string"==typeof e&&(e.trim().length!==e.length?i="extra whitespace":s=Number(e)),void 0===s)break;return t==gw.UINT32?zw(s):Bw(s),s;case gw.INT64:case gw.SFIXED64:case gw.SINT64:if(null===e)return qw(Vw.ZERO,n);if("number"!=typeof e&&"string"!=typeof e)break;return qw(Vw.from(e),n);case gw.FIXED64:case gw.UINT64:if(null===e)return qw(Uw.ZERO,n);if("number"!=typeof e&&"string"!=typeof e)break;return qw(Uw.from(e),n);case gw.BOOL:if(null===e)return!1;if("boolean"!==typeof e)break;return e;case gw.STRING:if(null===e)return"";if("string"!==typeof e){i="extra whitespace";break}try{encodeURIComponent(e)}catch(i){i="invalid UTF8";break}return e;case gw.BYTES:if(null===e||""===e)return new Uint8Array(0);if("string"!==typeof e)break;return function(e){let t=3*e.length/4;"="==e[e.length-2]?t-=2:"="==e[e.length-1]&&(t-=1);let n,r=new Uint8Array(t),i=0,s=0,o=0;for(let a=0;a<e.length;a++){if(n=Tw[e.charCodeAt(a)],void 0===n)switch(e[a]){case"=":s=0;case"\n":case"\r":case"\t":case" ":continue;default:throw Error("invalid base64 string.")}switch(s){case 0:o=n,s=1;break;case 1:r[i++]=o<<2|(48&n)>>4,o=n,s=2;break;case 2:r[i++]=(15&o)<<4|(60&n)>>2,o=n,s=3;break;case 3:r[i++]=(3&o)<<6|n,s=0}}if(1==s)throw Error("invalid base64 string.");return r.subarray(0,i)}(e)}}catch(s){i=s.message}this.assert(!1,r+(i?" - "+i:""),e)}}class Kw{constructor(e){var t;this.fields=null!==(t=e.fields)&&void 0!==t?t:[]}write(e,t){const n={},r=e;for(const i of this.fields){if(!i.oneof){let e=this.field(i,r[i.localName],t);void 0!==e&&(n[t.useProtoFieldName?i.name:i.jsonName]=e);continue}const e=r[i.oneof];if(e.oneofKind!==i.localName)continue;const s="scalar"==i.kind||"enum"==i.kind?Object.assign(Object.assign({},t),{emitDefaultValues:!0}):t;let o=this.field(i,e[i.localName],s);$w(void 0!==o),n[t.useProtoFieldName?i.name:i.jsonName]=o}return n}field(e,t,n){let r;if("map"==e.kind){$w("object"==typeof t&&null!==t);const i={};switch(e.V.kind){case"scalar":for(const[n,o]of Object.entries(t)){const t=this.scalar(e.V.T,o,e.name,!1,!0);$w(void 0!==t),i[n.toString()]=t}break;case"message":const r=e.V.T();for(const[o,a]of Object.entries(t)){const t=this.message(r,a,e.name,n);$w(void 0!==t),i[o.toString()]=t}break;case"enum":const s=e.V.T();for(const[o,a]of Object.entries(t)){$w(void 0===a||"number"==typeof a);const t=this.enum(s,a,e.name,!1,!0,n.enumAsInteger);$w(void 0!==t),i[o.toString()]=t}}(n.emitDefaultValues||Object.keys(i).length>0)&&(r=i)}else if(e.repeat){$w(Array.isArray(t));const i=[];switch(e.kind){case"scalar":for(let n=0;n<t.length;n++){const r=this.scalar(e.T,t[n],e.name,e.opt,!0);$w(void 0!==r),i.push(r)}break;case"enum":const r=e.T();for(let o=0;o<t.length;o++){$w(void 0===t[o]||"number"==typeof t[o]);const s=this.enum(r,t[o],e.name,e.opt,!0,n.enumAsInteger);$w(void 0!==s),i.push(s)}break;case"message":const s=e.T();for(let o=0;o<t.length;o++){const r=this.message(s,t[o],e.name,n);$w(void 0!==r),i.push(r)}}(n.emitDefaultValues||i.length>0||n.emitDefaultValues)&&(r=i)}else switch(e.kind){case"scalar":r=this.scalar(e.T,t,e.name,e.opt,n.emitDefaultValues);break;case"enum":r=this.enum(e.T(),t,e.name,e.opt,n.emitDefaultValues,n.enumAsInteger);break;case"message":r=this.message(e.T(),t,e.name,n)}return r}enum(e,t,n,r,i,s){if("google.protobuf.NullValue"==e[0])return i||r?null:void 0;if(void 0!==t){if(0!==t||i||r)return $w("number"==typeof t),$w(Number.isInteger(t)),s||!e[1].hasOwnProperty(t)?t:e[2]?e[2]+e[1][t]:e[1][t]}else $w(r)}message(e,t,n,r){return void 0===t?r.emitDefaultValues?null:void 0:e.internalJsonWrite(t,r)}scalar(e,t,n,r,i){if(void 0===t)return void $w(r);const s=i||r;switch(e){case gw.INT32:case gw.SFIXED32:case gw.SINT32:return 0===t?s?0:void 0:(Bw(t),t);case gw.FIXED32:case gw.UINT32:return 0===t?s?0:void 0:(zw(t),t);case gw.FLOAT:Hw(t);case gw.DOUBLE:return 0===t?s?0:void 0:($w("number"==typeof t),Number.isNaN(t)?"NaN":t===Number.POSITIVE_INFINITY?"Infinity":t===Number.NEGATIVE_INFINITY?"-Infinity":t);case gw.STRING:return""===t?s?"":void 0:($w("string"==typeof t),t);case gw.BOOL:return!1===t?!s&&void 0:($w("boolean"==typeof t),t);case gw.UINT64:case gw.FIXED64:$w("number"==typeof t||"string"==typeof t||"bigint"==typeof t);let e=Uw.from(t);if(e.isZero()&&!s)return;return e.toString();case gw.INT64:case gw.SFIXED64:case gw.SINT64:$w("number"==typeof t||"string"==typeof t||"bigint"==typeof t);let n=Vw.from(t);if(n.isZero()&&!s)return;return n.toString();case gw.BYTES:return $w(t instanceof Uint8Array),t.byteLength?function(e){let t,n="",r=0,i=0;for(let s=0;s<e.length;s++)switch(t=e[s],r){case 0:n+=Ew[t>>2],i=(3&t)<<4,r=1;break;case 1:n+=Ew[i|t>>4],i=(15&t)<<2,r=2;break;case 2:n+=Ew[i|t>>6],n+=Ew[63&t],r=0}return r&&(n+=Ew[i],n+="=",1==r&&(n+="=")),n}(t):s?"":void 0}}}var Gw,Jw;function Yw(e,t){return Object.assign(Object.assign({},e),t)}function Qw(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vw.STRING;switch(e){case gw.BOOL:return!1;case gw.UINT64:case gw.FIXED64:return qw(Uw.ZERO,t);case gw.INT64:case gw.SFIXED64:case gw.SINT64:return qw(Vw.ZERO,t);case gw.DOUBLE:case gw.FLOAT:return 0;case gw.BYTES:return new Uint8Array(0);case gw.STRING:return"";default:return 0}}!function(e){e.symbol=Symbol.for("protobuf-ts/unknown"),e.onRead=(n,r,i,s,o)=>{(t(r)?r[e.symbol]:r[e.symbol]=[]).push({no:i,wireType:s,data:o})},e.onWrite=(t,n,r)=>{for(let{no:i,wireType:s,data:o}of e.list(n))r.tag(i,s).raw(o)},e.list=(n,r)=>{if(t(n)){let t=n[e.symbol];return r?t.filter((e=>e.no==r)):t}return[]},e.last=(t,n)=>e.list(t,n).slice(-1)[0];const t=t=>t&&Array.isArray(t[e.symbol])}(Gw||(Gw={})),function(e){e[e.Varint=0]="Varint",e[e.Bit64=1]="Bit64",e[e.LengthDelimited=2]="LengthDelimited",e[e.StartGroup=3]="StartGroup",e[e.EndGroup=4]="EndGroup",e[e.Bit32=5]="Bit32"}(Jw||(Jw={}));class Xw{constructor(e){this.info=e}prepare(){var e;if(!this.fieldNoToField){const t=null!==(e=this.info.fields)&&void 0!==e?e:[];this.fieldNoToField=new Map(t.map((e=>[e.no,e])))}}read(e,t,n,r){this.prepare();const i=void 0===r?e.len:e.pos+r;for(;e.pos<i;){const[r,i]=e.tag(),s=this.fieldNoToField.get(r);if(!s){let s=n.readUnknownField;if("throw"==s)throw new Error(`Unknown field ${r} (wire type ${i}) for ${this.info.typeName}`);let o=e.skip(i);!1!==s&&(!0===s?Gw.onRead:s)(this.info.typeName,t,r,i,o);continue}let o=t,a=s.repeat,l=s.localName;switch(s.oneof&&(o=o[s.oneof],o.oneofKind!==l&&(o=t[s.oneof]={oneofKind:l})),s.kind){case"scalar":case"enum":let t="enum"==s.kind?gw.INT32:s.T,r="scalar"==s.kind?s.L:void 0;if(a){let n=o[l];if(i==Jw.LengthDelimited&&t!=gw.STRING&&t!=gw.BYTES){let i=e.uint32()+e.pos;for(;e.pos<i;)n.push(this.scalar(e,t,r))}else n.push(this.scalar(e,t,r))}else o[l]=this.scalar(e,t,r);break;case"message":if(a){let t=o[l],r=s.T().internalBinaryRead(e,e.uint32(),n);t.push(r)}else o[l]=s.T().internalBinaryRead(e,e.uint32(),n,o[l]);break;case"map":let[c,u]=this.mapEntry(s,e,n);o[l][c]=u}}}mapEntry(e,t,n){let r,i,s=t.uint32(),o=t.pos+s;for(;t.pos<o;){let[s,o]=t.tag();switch(s){case 1:r=e.K==gw.BOOL?t.bool().toString():this.scalar(t,e.K,vw.STRING);break;case 2:switch(e.V.kind){case"scalar":i=this.scalar(t,e.V.T,e.V.L);break;case"enum":i=t.int32();break;case"message":i=e.V.T().internalBinaryRead(t,t.uint32(),n)}break;default:throw new Error(`Unknown field ${s} (wire type ${o}) in map entry for ${this.info.typeName}#${e.name}`)}}if(void 0===r){let t=Qw(e.K);r=e.K==gw.BOOL?t.toString():t}if(void 0===i)switch(e.V.kind){case"scalar":i=Qw(e.V.T,e.V.L);break;case"enum":i=0;break;case"message":i=e.V.T().create()}return[r,i]}scalar(e,t,n){switch(t){case gw.INT32:return e.int32();case gw.STRING:return e.string();case gw.BOOL:return e.bool();case gw.DOUBLE:return e.double();case gw.FLOAT:return e.float();case gw.INT64:return qw(e.int64(),n);case gw.UINT64:return qw(e.uint64(),n);case gw.FIXED64:return qw(e.fixed64(),n);case gw.FIXED32:return e.fixed32();case gw.BYTES:return e.bytes();case gw.UINT32:return e.uint32();case gw.SFIXED32:return e.sfixed32();case gw.SFIXED64:return qw(e.sfixed64(),n);case gw.SINT32:return e.sint32();case gw.SINT64:return qw(e.sint64(),n)}}}class Zw{constructor(e){this.info=e}prepare(){if(!this.fields){const e=this.info.fields?this.info.fields.concat():[];this.fields=e.sort(((e,t)=>e.no-t.no))}}write(e,t,n){this.prepare();for(const i of this.fields){let r,s,o=i.repeat,a=i.localName;if(i.oneof){const t=e[i.oneof];if(t.oneofKind!==a)continue;r=t[a],s=!0}else r=e[a],s=!1;switch(i.kind){case"scalar":case"enum":let e="enum"==i.kind?gw.INT32:i.T;if(o)if($w(Array.isArray(r)),o==yw.PACKED)this.packed(t,e,i.no,r);else for(const n of r)this.scalar(t,e,i.no,n,!0);else void 0===r?$w(i.opt):this.scalar(t,e,i.no,r,s||i.opt);break;case"message":if(o){$w(Array.isArray(r));for(const e of r)this.message(t,n,i.T(),i.no,e)}else this.message(t,n,i.T(),i.no,r);break;case"map":$w("object"==typeof r&&null!==r);for(const[s,o]of Object.entries(r))this.mapEntry(t,n,i,s,o)}}let r=n.writeUnknownFields;!1!==r&&(!0===r?Gw.onWrite:r)(this.info.typeName,e,t)}mapEntry(e,t,n,r,i){e.tag(n.no,Jw.LengthDelimited),e.fork();let s=r;switch(n.K){case gw.INT32:case gw.FIXED32:case gw.UINT32:case gw.SFIXED32:case gw.SINT32:s=Number.parseInt(r);break;case gw.BOOL:$w("true"==r||"false"==r),s="true"==r}switch(this.scalar(e,n.K,1,s,!0),n.V.kind){case"scalar":this.scalar(e,n.V.T,2,i,!0);break;case"enum":this.scalar(e,gw.INT32,2,i,!0);break;case"message":this.message(e,t,n.V.T(),2,i)}e.join()}message(e,t,n,r,i){void 0!==i&&(n.internalBinaryWrite(i,e.tag(r,Jw.LengthDelimited).fork(),t),e.join())}scalar(e,t,n,r,i){let[s,o,a]=this.scalarInfo(t,r);a&&!i||(e.tag(n,s),e[o](r))}packed(e,t,n,r){if(!r.length)return;$w(t!==gw.BYTES&&t!==gw.STRING),e.tag(n,Jw.LengthDelimited),e.fork();let[,i]=this.scalarInfo(t);for(let s=0;s<r.length;s++)e[i](r[s]);e.join()}scalarInfo(e,t){let n,r=Jw.Varint,i=void 0===t,s=0===t;switch(e){case gw.INT32:n="int32";break;case gw.STRING:s=i||!t.length,r=Jw.LengthDelimited,n="string";break;case gw.BOOL:s=!1===t,n="bool";break;case gw.UINT32:n="uint32";break;case gw.DOUBLE:r=Jw.Bit64,n="double";break;case gw.FLOAT:r=Jw.Bit32,n="float";break;case gw.INT64:s=i||Vw.from(t).isZero(),n="int64";break;case gw.UINT64:s=i||Uw.from(t).isZero(),n="uint64";break;case gw.FIXED64:s=i||Uw.from(t).isZero(),r=Jw.Bit64,n="fixed64";break;case gw.BYTES:s=i||!t.byteLength,r=Jw.LengthDelimited,n="bytes";break;case gw.FIXED32:r=Jw.Bit32,n="fixed32";break;case gw.SFIXED32:r=Jw.Bit32,n="sfixed32";break;case gw.SFIXED64:s=i||Vw.from(t).isZero(),r=Jw.Bit64,n="sfixed64";break;case gw.SINT32:n="sint32";break;case gw.SINT64:s=i||Vw.from(t).isZero(),n="sint64"}return[r,n,i||s]}}function eS(e,t,n){let r,i,s=n;for(let o of e.fields){let e=o.localName;if(o.oneof){const n=s[o.oneof];if(void 0==(null===n||void 0===n?void 0:n.oneofKind))continue;if(r=n[e],i=t[o.oneof],i.oneofKind=n.oneofKind,void 0==r){delete i[e];continue}}else if(r=s[e],i=t,void 0==r)continue;switch(o.repeat&&(i[e].length=r.length),o.kind){case"scalar":case"enum":if(o.repeat)for(let n=0;n<r.length;n++)i[e][n]=r[n];else i[e]=r;break;case"message":let t=o.T();if(o.repeat)for(let n=0;n<r.length;n++)i[e][n]=t.create(r[n]);else void 0===i[e]?i[e]=t.create(r):t.mergePartial(i[e],r);break;case"map":switch(o.V.kind){case"scalar":case"enum":Object.assign(i[e],r);break;case"message":let t=o.V.T();for(let n of Object.keys(r))i[e][n]=t.create(r[n])}}}}const tS={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0},nS={ignoreUnknownFields:!1};function rS(e,t){var n,r;let i=Object.assign(Object.assign({},e),t);return i.typeRegistry=[...null!==(n=null===e||void 0===e?void 0:e.typeRegistry)&&void 0!==n?n:[],...null!==(r=null===t||void 0===t?void 0:t.typeRegistry)&&void 0!==r?r:[]],i}const iS=Object.values;function sS(e,t,n){if(t===n)return!0;if(e!==gw.BYTES)return!1;let r=t,i=n;if(r.length!==i.length)return!1;for(let s=0;s<r.length;s++)if(r[s]!=i[s])return!1;return!0}function oS(e,t,n){if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(!sS(e,t[r],n[r]))return!1;return!0}function aS(e,t,n){if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(!e.equals(t[r],n[r]))return!1;return!0}const lS={writeUnknownFields:!0,writerFactory:()=>new cS};class cS{constructor(e){this.stack=[],this.textEncoder=null!==e&&void 0!==e?e:new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let r=0;r<this.chunks.length;r++)e+=this.chunks[r].length;let t=new Uint8Array(e),n=0;for(let r=0;r<this.chunks.length;r++)t.set(this.chunks[r],n),n+=this.chunks[r].length;return this.chunks=[],t}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),t=this.stack.pop();if(!t)throw new Error("invalid state, fork stack empty");return this.chunks=t.chunks,this.buf=t.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,t){return this.uint32((e<<3|t)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(zw(e);e>127;)this.buf.push(127&e|128),e>>>=7;return this.buf.push(e),this}int32(e){return Bw(e),Aw(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let t=this.textEncoder.encode(e);return this.uint32(t.byteLength),this.raw(t)}float(e){Hw(e);let t=new Uint8Array(4);return new DataView(t.buffer).setFloat32(0,e,!0),this.raw(t)}double(e){let t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e,!0),this.raw(t)}fixed32(e){zw(e);let t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,e,!0),this.raw(t)}sfixed32(e){Bw(e);let t=new Uint8Array(4);return new DataView(t.buffer).setInt32(0,e,!0),this.raw(t)}sint32(e){return Bw(e),Aw(e=(e<<1^e>>31)>>>0,this.buf),this}sfixed64(e){let t=new Uint8Array(8),n=new DataView(t.buffer),r=Vw.from(e);return n.setInt32(0,r.lo,!0),n.setInt32(4,r.hi,!0),this.raw(t)}fixed64(e){let t=new Uint8Array(8),n=new DataView(t.buffer),r=Uw.from(e);return n.setInt32(0,r.lo,!0),n.setInt32(4,r.hi,!0),this.raw(t)}int64(e){let t=Vw.from(e);return xw(t.lo,t.hi,this.buf),this}sint64(e){let t=Vw.from(e),n=t.hi>>31;return xw(t.lo<<1^n,(t.hi<<1|t.lo>>>31)^n,this.buf),this}uint64(e){let t=Uw.from(e);return xw(t.lo,t.hi,this.buf),this}}const uS={readUnknownField:!0,readerFactory:e=>new dS(e)};class dS{constructor(e,t){this.varint64=_w,this.uint32=Nw,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=null!==t&&void 0!==t?t:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0})}tag(){let e=this.uint32(),t=e>>>3,n=7&e;if(t<=0||n<0||n>5)throw new Error("illegal tag: field no "+t+" wire type "+n);return[t,n]}skip(e){let t=this.pos;switch(e){case Jw.Varint:for(;128&this.buf[this.pos++];);break;case Jw.Bit64:this.pos+=4;case Jw.Bit32:this.pos+=4;break;case Jw.LengthDelimited:let t=this.uint32();this.pos+=t;break;case Jw.StartGroup:let n;for(;(n=this.tag()[1])!==Jw.EndGroup;)this.skip(n);break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(t,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return 0|this.uint32()}sint32(){let e=this.uint32();return e>>>1^-(1&e)}int64(){return new Vw(...this.varint64())}uint64(){return new Uw(...this.varint64())}sint64(){let[e,t]=this.varint64(),n=-(1&e);return e=(e>>>1|(1&t)<<31)^n,t=t>>>1^n,new Vw(e,t)}bool(){let[e,t]=this.varint64();return 0!==e||0!==t}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return new Uw(this.sfixed32(),this.sfixed32())}sfixed64(){return new Vw(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),t=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(t,t+e)}string(){return this.textDecoder.decode(this.bytes())}}const hS=Object.getOwnPropertyDescriptors(Object.getPrototypeOf({}));class pS{constructor(e,t,n){this.defaultCheckDepth=16,this.typeName=e,this.fields=t.map(bw),this.options=null!==n&&void 0!==n?n:{},this.messagePrototype=Object.create(null,Object.assign(Object.assign({},hS),{[fw]:{value:this}})),this.refTypeCheck=new Sw(this),this.refJsonReader=new Ww(this),this.refJsonWriter=new Kw(this),this.refBinReader=new Xw(this),this.refBinWriter=new Zw(this)}create(e){let t=function(e){const t=e.messagePrototype?Object.create(e.messagePrototype):Object.defineProperty({},fw,{value:e});for(let n of e.fields){let e=n.localName;if(!n.opt)if(n.oneof)t[n.oneof]={oneofKind:void 0};else if(n.repeat)t[e]=[];else switch(n.kind){case"scalar":t[e]=Qw(n.T,n.L);break;case"enum":t[e]=0;break;case"map":t[e]={}}}return t}(this);return void 0!==e&&eS(this,t,e),t}clone(e){let t=this.create();return eS(this,t,e),t}equals(e,t){return function(e,t,n){if(t===n)return!0;if(!t||!n)return!1;for(let r of e.fields){let e=r.localName,i=r.oneof?t[r.oneof][e]:t[e],s=r.oneof?n[r.oneof][e]:n[e];switch(r.kind){case"enum":case"scalar":let e="enum"==r.kind?gw.INT32:r.T;if(!(r.repeat?oS(e,i,s):sS(e,i,s)))return!1;break;case"map":if(!("message"==r.V.kind?aS(r.V.T(),iS(i),iS(s)):oS("enum"==r.V.kind?gw.INT32:r.V.T,iS(i),iS(s))))return!1;break;case"message":let t=r.T();if(!(r.repeat?aS(t,i,s):t.equals(i,s)))return!1}}return!0}(this,e,t)}is(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.defaultCheckDepth;return this.refTypeCheck.is(e,t,!1)}isAssignable(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.defaultCheckDepth;return this.refTypeCheck.is(e,t,!0)}mergePartial(e,t){eS(this,e,t)}fromBinary(e,t){let n=function(e){return e?Object.assign(Object.assign({},uS),e):uS}(t);return this.internalBinaryRead(n.readerFactory(e),e.byteLength,n)}fromJson(e,t){return this.internalJsonRead(e,function(e){return e?Object.assign(Object.assign({},nS),e):nS}(t))}fromJsonString(e,t){let n=JSON.parse(e);return this.fromJson(n,t)}toJson(e,t){return this.internalJsonWrite(e,function(e){return e?Object.assign(Object.assign({},tS),e):tS}(t))}toJsonString(e,t){var n;let r=this.toJson(e,t);return JSON.stringify(r,null,null!==(n=null===t||void 0===t?void 0:t.prettySpaces)&&void 0!==n?n:0)}toBinary(e,t){let n=function(e){return e?Object.assign(Object.assign({},lS),e):lS}(t);return this.internalBinaryWrite(e,n.writerFactory(),n).finish()}internalJsonRead(e,t,n){if(null!==e&&"object"==typeof e&&!Array.isArray(e)){let r=null!==n&&void 0!==n?n:this.create();return this.refJsonReader.read(e,r,t),r}throw new Error(`Unable to parse message ${this.typeName} from JSON ${kw(e)}.`)}internalJsonWrite(e,t){return this.refJsonWriter.write(e,t)}internalBinaryWrite(e,t,n){return this.refBinWriter.write(e,t,n),t}internalBinaryRead(e,t,n,r){let i=null!==r&&void 0!==r?r:this.create();return this.refBinReader.read(e,i,n,t),i}}function fS(e,t,n,r,i){var s,o,a,l;if("unary"==e){let e=(e,n,r)=>t.unary(e,n,r);for(const t of(null!==(s=r.interceptors)&&void 0!==s?s:[]).filter((e=>e.interceptUnary)).reverse()){const n=e;e=(e,r,i)=>t.interceptUnary(n,e,r,i)}return e(n,i,r)}if("serverStreaming"==e){let e=(e,n,r)=>t.serverStreaming(e,n,r);for(const t of(null!==(o=r.interceptors)&&void 0!==o?o:[]).filter((e=>e.interceptServerStreaming)).reverse()){const n=e;e=(e,r,i)=>t.interceptServerStreaming(n,e,r,i)}return e(n,i,r)}if("clientStreaming"==e){let e=(e,n)=>t.clientStreaming(e,n);for(const t of(null!==(a=r.interceptors)&&void 0!==a?a:[]).filter((e=>e.interceptClientStreaming)).reverse()){const n=e;e=(e,r)=>t.interceptClientStreaming(n,e,r)}return e(n,r)}if("duplex"==e){let e=(e,n)=>t.duplex(e,n);for(const t of(null!==(l=r.interceptors)&&void 0!==l?l:[]).filter((e=>e.interceptDuplex)).reverse()){const n=e;e=(e,r)=>t.interceptDuplex(n,e,r)}return e(n,r)}!function(e,t){throw new Error(null!==t&&void 0!==t?t:"Unexpected object: "+e)}(e)}class mS extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"UNKNOWN",n=arguments.length>2?arguments[2]:void 0;super(e),this.name="RpcError",Object.setPrototypeOf(this,new.target.prototype),this.code=t,this.meta=null!==n&&void 0!==n?n:{}}toString(){const e=[this.name+": "+this.message];this.code&&(e.push(""),e.push("Code: "+this.code)),this.serviceName&&this.methodName&&e.push("Method: "+this.serviceName+"/"+this.methodName);let t=Object.entries(this.meta);if(t.length){e.push(""),e.push("Meta:");for(let[n,r]of t)e.push(`  ${n}: ${r}`)}return e.join("\n")}}function gS(e,t){return function(){return e.apply(t,arguments)}}const{toString:vS}=Object.prototype,{getPrototypeOf:yS}=Object,bS=(wS=Object.create(null),e=>{const t=vS.call(e);return wS[t]||(wS[t]=t.slice(8,-1).toLowerCase())});var wS;const SS=e=>(e=e.toLowerCase(),t=>bS(t)===e),kS=e=>t=>typeof t===e,{isArray:CS}=Array,ES=kS("undefined");const TS=SS("ArrayBuffer");const _S=kS("string"),xS=kS("function"),IS=kS("number"),RS=e=>null!==e&&"object"===typeof e,PS=e=>{if("object"!==bS(e))return!1;const t=yS(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},AS=SS("Date"),NS=SS("File"),OS=SS("Blob"),DS=SS("FileList"),LS=SS("URLSearchParams"),[jS,MS,FS,US]=["ReadableStream","Request","Response","Headers"].map(SS);function VS(e,t){let n,r,{allOwnKeys:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),CS(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{const r=i?Object.getOwnPropertyNames(e):Object.keys(e),s=r.length;let o;for(n=0;n<s;n++)o=r[n],t.call(null,e[o],o,e)}}function $S(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,i=n.length;for(;i-- >0;)if(r=n[i],t===r.toLowerCase())return r;return null}const BS="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,zS=e=>!ES(e)&&e!==BS;const HS=(qS="undefined"!==typeof Uint8Array&&yS(Uint8Array),e=>qS&&e instanceof qS);var qS;const WS=SS("HTMLFormElement"),KS=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),GS=SS("RegExp"),JS=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};VS(n,((n,i)=>{let s;!1!==(s=t(n,i,e))&&(r[i]=s||n)})),Object.defineProperties(e,r)};const YS=SS("AsyncFunction"),QS=(XS="function"===typeof setImmediate,ZS=xS(BS.postMessage),XS?setImmediate:ZS?((e,t)=>(BS.addEventListener("message",(n=>{let{source:r,data:i}=n;r===BS&&i===e&&t.length&&t.shift()()}),!1),n=>{t.push(n),BS.postMessage(e,"*")}))(`axios@${Math.random()}`,[]):e=>setTimeout(e));var XS,ZS;const ek="undefined"!==typeof queueMicrotask?queueMicrotask.bind(BS):"undefined"!==typeof process&&process.nextTick||QS,tk={isArray:CS,isArrayBuffer:TS,isBuffer:function(e){return null!==e&&!ES(e)&&null!==e.constructor&&!ES(e.constructor)&&xS(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||xS(e.append)&&("formdata"===(t=bS(e))||"object"===t&&xS(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&TS(e.buffer),t},isString:_S,isNumber:IS,isBoolean:e=>!0===e||!1===e,isObject:RS,isPlainObject:PS,isReadableStream:jS,isRequest:MS,isResponse:FS,isHeaders:US,isUndefined:ES,isDate:AS,isFile:NS,isBlob:OS,isRegExp:GS,isFunction:xS,isStream:e=>RS(e)&&xS(e.pipe),isURLSearchParams:LS,isTypedArray:HS,isFileList:DS,forEach:VS,merge:function e(){const{caseless:t}=zS(this)&&this||{},n={},r=(r,i)=>{const s=t&&$S(n,i)||i;PS(n[s])&&PS(r)?n[s]=e(n[s],r):PS(r)?n[s]=e({},r):CS(r)?n[s]=r.slice():n[s]=r};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&VS(arguments[i],r);return n},extend:function(e,t,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return VS(t,((t,r)=>{n&&xS(t)?e[r]=gS(t,n):e[r]=t}),{allOwnKeys:r}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let i,s,o;const a={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),s=i.length;s-- >0;)o=i[s],r&&!r(o,e,t)||a[o]||(t[o]=e[o],a[o]=!0);e=!1!==n&&yS(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:bS,kindOfTest:SS,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(CS(e))return e;let t=e.length;if(!IS(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:WS,hasOwnProperty:KS,hasOwnProp:KS,reduceDescriptors:JS,freezeMethods:e=>{JS(e,((t,n)=>{if(xS(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];xS(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach((e=>{n[e]=!0}))};return CS(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:$S,global:BS,isContextDefined:zS,isSpecCompliantForm:function(e){return!!(e&&xS(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(RS(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const i=CS(e)?[]:{};return VS(e,((e,t)=>{const s=n(e,r+1);!ES(s)&&(i[t]=s)})),t[r]=void 0,i}}return e};return n(e,0)},isAsyncFn:YS,isThenable:e=>e&&(RS(e)||xS(e))&&xS(e.then)&&xS(e.catch),setImmediate:QS,asap:ek};function nk(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}tk.inherits(nk,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:tk.toJSONObject(this.config),code:this.code,status:this.status}}});const rk=nk.prototype,ik={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{ik[e]={value:e}})),Object.defineProperties(nk,ik),Object.defineProperty(rk,"isAxiosError",{value:!0}),nk.from=(e,t,n,r,i,s)=>{const o=Object.create(rk);return tk.toFlatObject(e,o,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),nk.call(o,e.message,t,n,r,i),o.cause=e,o.name=e.name,s&&Object.assign(o,s),o};const sk=nk;function ok(e){return tk.isPlainObject(e)||tk.isArray(e)}function ak(e){return tk.endsWith(e,"[]")?e.slice(0,-2):e}function lk(e,t,n){return e?e.concat(t).map((function(e,t){return e=ak(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const ck=tk.toFlatObject(tk,{},null,(function(e){return/^is[A-Z]/.test(e)}));const uk=function(e,t,n){if(!tk.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=tk.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!tk.isUndefined(t[e])}))).metaTokens,i=n.visitor||c,s=n.dots,o=n.indexes,a=(n.Blob||"undefined"!==typeof Blob&&Blob)&&tk.isSpecCompliantForm(t);if(!tk.isFunction(i))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(tk.isDate(e))return e.toISOString();if(!a&&tk.isBlob(e))throw new sk("Blob is not supported. Use a Buffer instead.");return tk.isArrayBuffer(e)||tk.isTypedArray(e)?a&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,i){let a=e;if(e&&!i&&"object"===typeof e)if(tk.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(tk.isArray(e)&&function(e){return tk.isArray(e)&&!e.some(ok)}(e)||(tk.isFileList(e)||tk.endsWith(n,"[]"))&&(a=tk.toArray(e)))return n=ak(n),a.forEach((function(e,r){!tk.isUndefined(e)&&null!==e&&t.append(!0===o?lk([n],r,s):null===o?n:n+"[]",l(e))})),!1;return!!ok(e)||(t.append(lk(i,n,s),l(e)),!1)}const u=[],d=Object.assign(ck,{defaultVisitor:c,convertValue:l,isVisitable:ok});if(!tk.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!tk.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+r.join("."));u.push(n),tk.forEach(n,(function(n,s){!0===(!(tk.isUndefined(n)||null===n)&&i.call(t,n,tk.isString(s)?s.trim():s,r,d))&&e(n,r?r.concat(s):[s])})),u.pop()}}(e),t};function dk(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function hk(e,t){this._pairs=[],e&&uk(e,this,t)}const pk=hk.prototype;pk.append=function(e,t){this._pairs.push([e,t])},pk.toString=function(e){const t=e?function(t){return e.call(this,t,dk)}:dk;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const fk=hk;function mk(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function gk(e,t,n){if(!t)return e;const r=n&&n.encode||mk;tk.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let s;if(s=i?i(t,n):tk.isURLSearchParams(t)?t.toString():new fk(t,n).toString(r),s){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}const vk=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){tk.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},yk={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},bk={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:fk,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},wk="undefined"!==typeof window&&"undefined"!==typeof document,Sk="object"===typeof navigator&&navigator||void 0,kk=wk&&(!Sk||["ReactNative","NativeScript","NS"].indexOf(Sk.product)<0),Ck="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,Ek=wk&&window.location.href||"http://localhost",Tk={...s,...bk};const _k=function(e){function t(e,n,r,i){let s=e[i++];if("__proto__"===s)return!0;const o=Number.isFinite(+s),a=i>=e.length;if(s=!s&&tk.isArray(r)?r.length:s,a)return tk.hasOwnProp(r,s)?r[s]=[r[s],n]:r[s]=n,!o;r[s]&&tk.isObject(r[s])||(r[s]=[]);return t(e,n,r[s],i)&&tk.isArray(r[s])&&(r[s]=function(e){const t={},n=Object.keys(e);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],t[s]=e[s];return t}(r[s])),!o}if(tk.isFormData(e)&&tk.isFunction(e.entries)){const n={};return tk.forEachEntry(e,((e,r)=>{t(function(e){return tk.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,n,0)})),n}return null};const xk={transitional:yk,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,i=tk.isObject(e);i&&tk.isHTMLForm(e)&&(e=new FormData(e));if(tk.isFormData(e))return r?JSON.stringify(_k(e)):e;if(tk.isArrayBuffer(e)||tk.isBuffer(e)||tk.isStream(e)||tk.isFile(e)||tk.isBlob(e)||tk.isReadableStream(e))return e;if(tk.isArrayBufferView(e))return e.buffer;if(tk.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let s;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return uk(e,new Tk.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return Tk.isNode&&tk.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((s=tk.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return uk(s?{"files[]":e}:e,t&&new t,this.formSerializer)}}return i||r?(t.setContentType("application/json",!1),function(e,t,n){if(tk.isString(e))try{return(t||JSON.parse)(e),tk.trim(e)}catch(r){if("SyntaxError"!==r.name)throw r}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||xk.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(tk.isResponse(e)||tk.isReadableStream(e))return e;if(e&&tk.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(i){if(n){if("SyntaxError"===i.name)throw sk.from(i,sk.ERR_BAD_RESPONSE,this,null,this.response);throw i}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Tk.classes.FormData,Blob:Tk.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};tk.forEach(["delete","get","head","post","put","patch"],(e=>{xk.headers[e]={}}));const Ik=xk,Rk=tk.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Pk=Symbol("internals");function Ak(e){return e&&String(e).trim().toLowerCase()}function Nk(e){return!1===e||null==e?e:tk.isArray(e)?e.map(Nk):String(e)}function Ok(e,t,n,r,i){return tk.isFunction(r)?r.call(this,t,n):(i&&(t=n),tk.isString(t)?tk.isString(r)?-1!==t.indexOf(r):tk.isRegExp(r)?r.test(t):void 0:void 0)}class Dk{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function i(e,t,n){const i=Ak(t);if(!i)throw new Error("header name must be a non-empty string");const s=tk.findKey(r,i);(!s||void 0===r[s]||!0===n||void 0===n&&!1!==r[s])&&(r[s||t]=Nk(e))}const s=(e,t)=>tk.forEach(e,((e,n)=>i(e,n,t)));if(tk.isPlainObject(e)||e instanceof this.constructor)s(e,t);else if(tk.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))s((e=>{const t={};let n,r,i;return e&&e.split("\n").forEach((function(e){i=e.indexOf(":"),n=e.substring(0,i).trim().toLowerCase(),r=e.substring(i+1).trim(),!n||t[n]&&Rk[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)})),t})(e),t);else if(tk.isHeaders(e))for(const[o,a]of e.entries())i(a,o,n);else null!=e&&i(t,e,n);return this}get(e,t){if(e=Ak(e)){const n=tk.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(tk.isFunction(t))return t.call(this,e,n);if(tk.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Ak(e)){const n=tk.findKey(this,e);return!(!n||void 0===this[n]||t&&!Ok(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function i(e){if(e=Ak(e)){const i=tk.findKey(n,e);!i||t&&!Ok(0,n[i],i,t)||(delete n[i],r=!0)}}return tk.isArray(e)?e.forEach(i):i(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const i=t[n];e&&!Ok(0,this[i],i,e,!0)||(delete this[i],r=!0)}return r}normalize(e){const t=this,n={};return tk.forEach(this,((r,i)=>{const s=tk.findKey(n,i);if(s)return t[s]=Nk(r),void delete t[i];const o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(i):String(i).trim();o!==i&&delete t[i],t[o]=Nk(r),n[o]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return tk.forEach(this,((n,r)=>{null!=n&&!1!==n&&(t[r]=e&&tk.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,n]=e;return t+": "+n})).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[Pk]=this[Pk]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=Ak(e);t[r]||(!function(e,t){const n=tk.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[r]=!0)}return tk.isArray(e)?e.forEach(r):r(e),this}}Dk.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),tk.reduceDescriptors(Dk.prototype,((e,t)=>{let{value:n}=e,r=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[r]=e}}})),tk.freezeMethods(Dk);const Lk=Dk;function jk(e,t){const n=this||Ik,r=t||n,i=Lk.from(r.headers);let s=r.data;return tk.forEach(e,(function(e){s=e.call(n,s,i.normalize(),t?t.status:void 0)})),i.normalize(),s}function Mk(e){return!(!e||!e.__CANCEL__)}function Fk(e,t,n){sk.call(this,null==e?"canceled":e,sk.ERR_CANCELED,t,n),this.name="CanceledError"}tk.inherits(Fk,sk,{__CANCEL__:!0});const Uk=Fk;function Vk(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new sk("Request failed with status code "+n.status,[sk.ERR_BAD_REQUEST,sk.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}const $k=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i,s=0,o=0;return t=void 0!==t?t:1e3,function(a){const l=Date.now(),c=r[o];i||(i=l),n[s]=a,r[s]=l;let u=o,d=0;for(;u!==s;)d+=n[u++],u%=e;if(s=(s+1)%e,s===o&&(o=(o+1)%e),l-i<t)return;const h=c&&l-c;return h?Math.round(1e3*d/h):void 0}};const Bk=function(e,t){let n,r,i=0,s=1e3/t;const o=function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();i=s,n=null,r&&(clearTimeout(r),r=null),e.apply(null,t)};return[function(){const e=Date.now(),t=e-i;for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];t>=s?o(l,e):(n=l,r||(r=setTimeout((()=>{r=null,o(n)}),s-t)))},()=>n&&o(n)]},zk=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=0;const i=$k(50,250);return Bk((n=>{const s=n.loaded,o=n.lengthComputable?n.total:void 0,a=s-r,l=i(a);r=s;e({loaded:s,total:o,progress:o?s/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&s<=o?(o-s)/l:void 0,event:n,lengthComputable:null!=o,[t?"download":"upload"]:!0})}),n)},Hk=(e,t)=>{const n=null!=e;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},qk=e=>function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return tk.asap((()=>e(...n)))},Wk=Tk.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,Tk.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(Tk.origin),Tk.navigator&&/(msie|trident)/i.test(Tk.navigator.userAgent)):()=>!0,Kk=Tk.hasStandardBrowserEnv?{write(e,t,n,r,i,s){const o=[e+"="+encodeURIComponent(t)];tk.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),tk.isString(r)&&o.push("path="+r),tk.isString(i)&&o.push("domain="+i),!0===s&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Gk(e,t,n){let r=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(r||0==n)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Jk=e=>e instanceof Lk?{...e}:e;function Yk(e,t){t=t||{};const n={};function r(e,t,n,r){return tk.isPlainObject(e)&&tk.isPlainObject(t)?tk.merge.call({caseless:r},e,t):tk.isPlainObject(t)?tk.merge({},t):tk.isArray(t)?t.slice():t}function i(e,t,n,i){return tk.isUndefined(t)?tk.isUndefined(e)?void 0:r(void 0,e,0,i):r(e,t,0,i)}function s(e,t){if(!tk.isUndefined(t))return r(void 0,t)}function o(e,t){return tk.isUndefined(t)?tk.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function a(n,i,s){return s in t?r(n,i):s in e?r(void 0,n):void 0}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(e,t,n)=>i(Jk(e),Jk(t),0,!0)};return tk.forEach(Object.keys(Object.assign({},e,t)),(function(r){const s=l[r]||i,o=s(e[r],t[r],r);tk.isUndefined(o)&&s!==a||(n[r]=o)})),n}const Qk=e=>{const t=Yk({},e);let n,{data:r,withXSRFToken:i,xsrfHeaderName:s,xsrfCookieName:o,headers:a,auth:l}=t;if(t.headers=a=Lk.from(a),t.url=gk(Gk(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&a.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),tk.isFormData(r))if(Tk.hasStandardBrowserEnv||Tk.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(!1!==(n=a.getContentType())){const[e,...t]=n?n.split(";").map((e=>e.trim())).filter(Boolean):[];a.setContentType([e||"multipart/form-data",...t].join("; "))}if(Tk.hasStandardBrowserEnv&&(i&&tk.isFunction(i)&&(i=i(t)),i||!1!==i&&Wk(t.url))){const e=s&&o&&Kk.read(o);e&&a.set(s,e)}return t},Xk="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){const r=Qk(e);let i=r.data;const s=Lk.from(r.headers).normalize();let o,a,l,c,u,{responseType:d,onUploadProgress:h,onDownloadProgress:p}=r;function f(){c&&c(),u&&u(),r.cancelToken&&r.cancelToken.unsubscribe(o),r.signal&&r.signal.removeEventListener("abort",o)}let m=new XMLHttpRequest;function g(){if(!m)return;const r=Lk.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders());Vk((function(e){t(e),f()}),(function(e){n(e),f()}),{data:d&&"text"!==d&&"json"!==d?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:r,config:e,request:m}),m=null}m.open(r.method.toUpperCase(),r.url,!0),m.timeout=r.timeout,"onloadend"in m?m.onloadend=g:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(g)},m.onabort=function(){m&&(n(new sk("Request aborted",sk.ECONNABORTED,e,m)),m=null)},m.onerror=function(){n(new sk("Network Error",sk.ERR_NETWORK,e,m)),m=null},m.ontimeout=function(){let t=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const i=r.transitional||yk;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),n(new sk(t,i.clarifyTimeoutError?sk.ETIMEDOUT:sk.ECONNABORTED,e,m)),m=null},void 0===i&&s.setContentType(null),"setRequestHeader"in m&&tk.forEach(s.toJSON(),(function(e,t){m.setRequestHeader(t,e)})),tk.isUndefined(r.withCredentials)||(m.withCredentials=!!r.withCredentials),d&&"json"!==d&&(m.responseType=r.responseType),p&&([l,u]=zk(p,!0),m.addEventListener("progress",l)),h&&m.upload&&([a,c]=zk(h),m.upload.addEventListener("progress",a),m.upload.addEventListener("loadend",c)),(r.cancelToken||r.signal)&&(o=t=>{m&&(n(!t||t.type?new Uk(null,e,m):t),m.abort(),m=null)},r.cancelToken&&r.cancelToken.subscribe(o),r.signal&&(r.signal.aborted?o():r.signal.addEventListener("abort",o)));const v=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);v&&-1===Tk.protocols.indexOf(v)?n(new sk("Unsupported protocol "+v+":",sk.ERR_BAD_REQUEST,e)):m.send(i||null)}))},Zk=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,r=new AbortController;const i=function(e){if(!n){n=!0,o();const t=e instanceof Error?e:this.reason;r.abort(t instanceof sk?t:new Uk(t instanceof Error?t.message:t))}};let s=t&&setTimeout((()=>{s=null,i(new sk(`timeout ${t} of ms exceeded`,sk.ETIMEDOUT))}),t);const o=()=>{e&&(s&&clearTimeout(s),s=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(i):e.removeEventListener("abort",i)})),e=null)};e.forEach((e=>e.addEventListener("abort",i)));const{signal:a}=r;return a.unsubscribe=()=>tk.asap(o),a}},eC=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let r,i=0;for(;i<n;)r=i+t,yield e.slice(i,r),i=r},tC=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}},nC=(e,t,n,r)=>{const i=async function*(e,t){for await(const n of tC(e))yield*eC(n,t)}(e,t);let s,o=0,a=e=>{s||(s=!0,r&&r(e))};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await i.next();if(t)return a(),void e.close();let s=r.byteLength;if(n){let e=o+=s;n(e)}e.enqueue(new Uint8Array(r))}catch(t){throw a(t),t}},cancel:e=>(a(e),i.return())},{highWaterMark:2})},rC="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,iC=rC&&"function"===typeof ReadableStream,sC=rC&&("function"===typeof TextEncoder?(oC=new TextEncoder,e=>oC.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var oC;const aC=function(e){try{for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return!!e(...n)}catch(i){return!1}},lC=iC&&aC((()=>{let e=!1;const t=new Request(Tk.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),cC=iC&&aC((()=>tk.isReadableStream(new Response("").body))),uC={stream:cC&&(e=>e.body)};var dC;rC&&(dC=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!uC[e]&&(uC[e]=tk.isFunction(dC[e])?t=>t[e]():(t,n)=>{throw new sk(`Response type '${e}' is not supported`,sk.ERR_NOT_SUPPORT,n)})})));const hC=async(e,t)=>{const n=tk.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(tk.isBlob(e))return e.size;if(tk.isSpecCompliantForm(e)){const t=new Request(Tk.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return tk.isArrayBufferView(e)||tk.isArrayBuffer(e)?e.byteLength:(tk.isURLSearchParams(e)&&(e+=""),tk.isString(e)?(await sC(e)).byteLength:void 0)})(t):n},pC=rC&&(async e=>{let{url:t,method:n,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:u,withCredentials:d="same-origin",fetchOptions:h}=Qk(e);c=c?(c+"").toLowerCase():"text";let p,f=Zk([i,s&&s.toAbortSignal()],o);const m=f&&f.unsubscribe&&(()=>{f.unsubscribe()});let g;try{if(l&&lC&&"get"!==n&&"head"!==n&&0!==(g=await hC(u,r))){let e,n=new Request(t,{method:"POST",body:r,duplex:"half"});if(tk.isFormData(r)&&(e=n.headers.get("content-type"))&&u.setContentType(e),n.body){const[e,t]=Hk(g,zk(qk(l)));r=nC(n.body,65536,e,t)}}tk.isString(d)||(d=d?"include":"omit");const i="credentials"in Request.prototype;p=new Request(t,{...h,signal:f,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",credentials:i?d:void 0});let s=await fetch(p);const o=cC&&("stream"===c||"response"===c);if(cC&&(a||o&&m)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=s[t]}));const t=tk.toFiniteNumber(s.headers.get("content-length")),[n,r]=a&&Hk(t,zk(qk(a),!0))||[];s=new Response(nC(s.body,65536,n,(()=>{r&&r(),m&&m()})),e)}c=c||"text";let v=await uC[tk.findKey(uC,c)||"text"](s,e);return!o&&m&&m(),await new Promise(((t,n)=>{Vk(t,n,{data:v,headers:Lk.from(s.headers),status:s.status,statusText:s.statusText,config:e,request:p})}))}catch(v){if(m&&m(),v&&"TypeError"===v.name&&/fetch/i.test(v.message))throw Object.assign(new sk("Network Error",sk.ERR_NETWORK,e,p),{cause:v.cause||v});throw sk.from(v,v&&v.code,e,p)}}),fC={http:null,xhr:Xk,fetch:pC};tk.forEach(fC,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(n){}Object.defineProperty(e,"adapterName",{value:t})}}));const mC=e=>`- ${e}`,gC=e=>tk.isFunction(e)||null===e||!1===e,vC=e=>{e=tk.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let s=0;s<t;s++){let t;if(n=e[s],r=n,!gC(n)&&(r=fC[(t=String(n)).toLowerCase()],void 0===r))throw new sk(`Unknown adapter '${t}'`);if(r)break;i[t||"#"+s]=r}if(!r){const e=Object.entries(i).map((e=>{let[t,n]=e;return`adapter ${t} `+(!1===n?"is not supported by the environment":"is not available in the build")}));let n=t?e.length>1?"since :\n"+e.map(mC).join("\n"):" "+mC(e[0]):"as no adapter specified";throw new sk("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return r};function yC(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Uk(null,e)}function bC(e){yC(e),e.headers=Lk.from(e.headers),e.data=jk.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return vC(e.adapter||Ik.adapter)(e).then((function(t){return yC(e),t.data=jk.call(e,e.transformResponse,t),t.headers=Lk.from(t.headers),t}),(function(t){return Mk(t)||(yC(e),t&&t.response&&(t.response.data=jk.call(e,e.transformResponse,t.response),t.response.headers=Lk.from(t.response.headers))),Promise.reject(t)}))}const wC="1.8.4",SC={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{SC[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const kC={};SC.transitional=function(e,t,n){function r(e,t){return"[Axios v1.8.4] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,i,s)=>{if(!1===e)throw new sk(r(i," has been removed"+(t?" in "+t:"")),sk.ERR_DEPRECATED);return t&&!kC[i]&&(kC[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,s)}},SC.spelling=function(e){return(t,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};const CC={assertOptions:function(e,t,n){if("object"!==typeof e)throw new sk("options must be an object",sk.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const s=r[i],o=t[s];if(o){const t=e[s],n=void 0===t||o(t,s,e);if(!0!==n)throw new sk("option "+s+" must be "+n,sk.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new sk("Unknown option "+s,sk.ERR_BAD_OPTION)}},validators:SC},EC=CC.validators;class TC{constructor(e){this.defaults=e,this.interceptors={request:new vk,response:new vk}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(r){}}throw n}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=Yk(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:i}=t;void 0!==n&&CC.assertOptions(n,{silentJSONParsing:EC.transitional(EC.boolean),forcedJSONParsing:EC.transitional(EC.boolean),clarifyTimeoutError:EC.transitional(EC.boolean)},!1),null!=r&&(tk.isFunction(r)?t.paramsSerializer={serialize:r}:CC.assertOptions(r,{encode:EC.function,serialize:EC.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),CC.assertOptions(t,{baseUrl:EC.spelling("baseURL"),withXsrfToken:EC.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let s=i&&tk.merge(i.common,i[t.method]);i&&tk.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete i[e]})),t.headers=Lk.concat(s,i);const o=[];let a=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,o.unshift(e.fulfilled,e.rejected))}));const l=[];let c;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let u,d=0;if(!a){const e=[bC.bind(this),void 0];for(e.unshift.apply(e,o),e.push.apply(e,l),u=e.length,c=Promise.resolve(t);d<u;)c=c.then(e[d++],e[d++]);return c}u=o.length;let h=t;for(d=0;d<u;){const e=o[d++],t=o[d++];try{h=e(h)}catch(p){t.call(this,p);break}}try{c=bC.call(this,h)}catch(p){return Promise.reject(p)}for(d=0,u=l.length;d<u;)c=c.then(l[d++],l[d++]);return c}getUri(e){return gk(Gk((e=Yk(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}tk.forEach(["delete","get","head","options"],(function(e){TC.prototype[e]=function(t,n){return this.request(Yk(n||{},{method:e,url:t,data:(n||{}).data}))}})),tk.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(Yk(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}TC.prototype[e]=t(),TC.prototype[e+"Form"]=t(!0)}));const _C=TC;class xC{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const r=new Promise((e=>{n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,r,i){n.reason||(n.reason=new Uk(e,r,i),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new xC((function(t){e=t})),cancel:e}}}const IC=xC;const RC={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(RC).forEach((e=>{let[t,n]=e;RC[n]=t}));const PC=RC;const AC=function e(t){const n=new _C(t),r=gS(_C.prototype.request,n);return tk.extend(r,_C.prototype,n,{allOwnKeys:!0}),tk.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(Yk(t,n))},r}(Ik);AC.Axios=_C,AC.CanceledError=Uk,AC.CancelToken=IC,AC.isCancel=Mk,AC.VERSION=wC,AC.toFormData=uk,AC.AxiosError=sk,AC.Cancel=AC.CanceledError,AC.all=function(e){return Promise.all(e)},AC.spread=function(e){return function(t){return e.apply(null,t)}},AC.isAxiosError=function(e){return tk.isObject(e)&&!0===e.isAxiosError},AC.mergeConfig=Yk,AC.AxiosHeaders=Lk,AC.formToJSON=e=>_k(tk.isHTMLForm(e)?new FormData(e):e),AC.getAdapter=vC,AC.HttpStatusCode=PC,AC.default=AC;const NC=AC;var OC,DC;function LC(e,t,n){if(n)for(let[r,i]of Object.entries(n))if("string"==typeof i)e.append(r,i);else for(let t of i)e.append(r,t);return e.set("Content-Type",t?"application/json":"application/protobuf"),e.set("Accept",t?"application/json":"application/protobuf, application/json"),e}function jC(e,t){if(!e)return;let n=t;for(let[r,i]of Object.entries(e))i instanceof Date?n[r]=new Date(i.getTime()):Array.isArray(i)?n[r]=i.concat():n[r]=i}!function(e){e[e.cancelled=0]="cancelled",e[e.unknown=1]="unknown",e[e.invalid_argument=2]="invalid_argument",e[e.malformed=3]="malformed",e[e.deadline_exceeded=4]="deadline_exceeded",e[e.not_found=5]="not_found",e[e.bad_route=6]="bad_route",e[e.already_exists=7]="already_exists",e[e.permission_denied=8]="permission_denied",e[e.unauthenticated=9]="unauthenticated",e[e.resource_exhausted=10]="resource_exhausted",e[e.failed_precondition=11]="failed_precondition",e[e.aborted=12]="aborted",e[e.out_of_range=13]="out_of_range",e[e.unimplemented=14]="unimplemented",e[e.internal=15]="internal",e[e.unavailable=16]="unavailable",e[e.dataloss=17]="dataloss"}(OC||(OC={})),function(e){e[e.PENDING=0]="PENDING",e[e.REJECTED=1]="REJECTED",e[e.RESOLVED=2]="RESOLVED"}(DC||(DC={}));class MC{constructor(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._state=DC.PENDING,this._promise=new Promise(((e,t)=>{this._resolve=e,this._reject=t})),e&&this._promise.catch((e=>{}))}get state(){return this._state}get promise(){return this._promise}resolve(e){if(this.state!==DC.PENDING)throw new Error(`cannot resolve ${DC[this.state].toLowerCase()}`);this._resolve(e),this._state=DC.RESOLVED}reject(e){if(this.state!==DC.PENDING)throw new Error(`cannot reject ${DC[this.state].toLowerCase()}`);this._reject(e),this._state=DC.REJECTED}resolvePending(e){this._state===DC.PENDING&&this.resolve(e)}rejectPending(e){this._state===DC.PENDING&&this.reject(e)}}var FC=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{l(r.next(e))}catch(t){s(t)}}function a(e){try{l(r.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))};class UC{constructor(e,t,n,r,i,s,o){this.method=e,this.requestHeaders=t,this.request=n,this.headers=r,this.response=i,this.status=s,this.trailers=o}then(e,t){return this.promiseFinished().then((t=>e?Promise.resolve(e(t)):t),(e=>t?Promise.resolve(t(e)):Promise.reject(e)))}promiseFinished(){return FC(this,void 0,void 0,(function*(){let[e,t,n,r]=yield Promise.all([this.headers,this.response,this.status,this.trailers]);return{method:this.method,requestHeaders:this.requestHeaders,request:this.request,headers:e,response:t,status:n,trailers:r}}))}}class VC{constructor(e){this.defaultOptions=e}mergeOptions(e){return function(e,t){if(!t)return e;let n={};jC(e,n),jC(t,n);for(let r of Object.keys(t)){let i=t[r];switch(r){case"jsonOptions":n.jsonOptions=rS(e.jsonOptions,n.jsonOptions);break;case"binaryOptions":n.binaryOptions=Yw(e.binaryOptions,n.binaryOptions);break;case"meta":n.meta={},jC(e.meta,n.meta),jC(t.meta,n.meta);break;case"interceptors":n.interceptors=e.interceptors?e.interceptors.concat(i):i.concat()}}return n}(this.defaultOptions,e)}unary(e,t,n){var r,i,s;let o=n,a=this.makeUrl(e,o),l=null!==(r=o.fetchInit)&&void 0!==r?r:{},c=o.sendJson?e.I.toJsonString(t,o.jsonOptions):e.I.toBinary(t,o.binaryOptions),u=new MC,d=new MC,h=new MC,p=new MC;return globalThis.fetch(a,Object.assign(Object.assign({},l),{method:"POST",headers:LC(new globalThis.Headers,!!o.sendJson,o.meta),body:c,signal:null!==(i=n.abort)&&void 0!==i?i:null})).then((t=>{let n;u.resolve(function(e){let t={};return e.forEach(((e,n)=>{"content-type"!==n.toLowerCase()&&"content-length"!==n.toLowerCase()&&(t.hasOwnProperty(n)?t[n].push(e):t[n]=e)})),t}(t.headers));try{n=t.type}catch(r){}switch(n){case"error":case"opaque":case"opaqueredirect":throw new mS(`fetch response type ${t.type}`,OC[OC.unknown])}return t.ok?o.sendJson?t.json().then((t=>e.O.fromJson(t,o.jsonOptions)),(()=>{throw new mS("unable to read response body as json",OC[OC.dataloss])})):t.arrayBuffer().then((t=>e.O.fromBinary(new Uint8Array(t),o.binaryOptions)),(()=>{throw new mS("unable to read response body",OC[OC.dataloss])})):t.json().then((e=>{throw function(e){if(!Cw(e)||"string"!==typeof e.code||"string"!==typeof e.msg)return new mS("cannot read twirp error response",OC[OC.internal]);let t={};if(Cw(e.meta))for(let[n,r]of Object.entries(e.meta))"string"==typeof r&&(t[n]=r);return new mS(e.msg,e.code,t)}(e)}),(()=>{throw new mS("received HTTP "+t.status+", unable to read response body as json",OC[OC.internal])}))}),(e=>{if(e instanceof Error&&"AbortError"===e.name)throw new mS(e.message,OC[OC.cancelled]);throw new mS(e instanceof Error?e.message:e)})).then((e=>{d.resolve(e),h.resolve({code:"OK",detail:""}),p.resolve({})})).catch((t=>{let n=t instanceof mS?t:new mS(t instanceof Error?t.message:t,OC[OC.internal]);n.methodName=e.name,n.serviceName=e.service.typeName,u.rejectPending(n),d.rejectPending(n),h.rejectPending(n),p.rejectPending(n)})),new UC(e,null!==(s=o.meta)&&void 0!==s?s:{},t,u.promise,d.promise,h.promise,p.promise)}makeUrl(e,t){let n=t.baseUrl;n.endsWith("/")&&(n=n.substring(0,n.length-1));let r=e.name;return!0!==t.useProtoMethodName&&(r=mw(r),r=r.substring(0,1).toUpperCase()+r.substring(1)),`${n}/${e.service.typeName}/${r}`}clientStreaming(e){const t=new mS("Client streaming is not supported by Twirp",OC[OC.unimplemented]);throw t.methodName=e.name,t.serviceName=e.service.typeName,t}duplex(e){const t=new mS("Duplex streaming is not supported by Twirp",OC[OC.unimplemented]);throw t.methodName=e.name,t.serviceName=e.service.typeName,t}serverStreaming(e){const t=new mS("Server streaming is not supported by Twirp",OC[OC.unimplemented]);throw t.methodName=e.name,t.serviceName=e.service.typeName,t}}function $C(e){return"function"===typeof e}function BC(e){var t=e((function(e){Error.call(e),e.stack=(new Error).stack}));return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var zC=BC((function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}}));function HC(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var qC=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var e,t,n,r,i;if(!this.closed){this.closed=!0;var s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var o=Il(s),a=o.next();!a.done;a=o.next()){a.value.remove(this)}}catch(p){e={error:p}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}else s.remove(this);var l=this.initialTeardown;if($C(l))try{l()}catch(f){i=f instanceof zC?f.errors:[f]}var c=this._finalizers;if(c){this._finalizers=null;try{for(var u=Il(c),d=u.next();!d.done;d=u.next()){var h=d.value;try{GC(h)}catch(m){i=null!==i&&void 0!==i?i:[],m instanceof zC?i=Pl(Pl([],Rl(i)),Rl(m.errors)):i.push(m)}}}catch(g){n={error:g}}finally{try{d&&!d.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}if(i)throw new zC(i)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)GC(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&HC(t,e)},e.prototype.remove=function(t){var n=this._finalizers;n&&HC(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=function(){var t=new e;return t.closed=!0,t}(),e}(),WC=qC.EMPTY;function KC(e){return e instanceof qC||e&&"closed"in e&&$C(e.remove)&&$C(e.add)&&$C(e.unsubscribe)}function GC(e){$C(e)?e():e.unsubscribe()}var JC={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},YC={setTimeout:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=YC.delegate;return(null===i||void 0===i?void 0:i.setTimeout)?i.setTimeout.apply(i,Pl([e,t],Rl(n))):setTimeout.apply(void 0,Pl([e,t],Rl(n)))},clearTimeout:function(e){var t=YC.delegate;return((null===t||void 0===t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function QC(e){YC.setTimeout((function(){var t=JC.onUnhandledError;if(!t)throw e;t(e)}))}function XC(){}var ZC=eE("C",void 0,void 0);function eE(e,t,n){return{kind:e,value:t,error:n}}var tE=null;function nE(e){if(JC.useDeprecatedSynchronousErrorHandling){var t=!tE;if(t&&(tE={errorThrown:!1,error:null}),e(),t){var n=tE,r=n.errorThrown,i=n.error;if(tE=null,r)throw i}}else e()}var rE=function(e){function t(t){var n=e.call(this)||this;return n.isStopped=!1,t?(n.destination=t,KC(t)&&t.add(n)):n.destination=uE,n}return El(t,e),t.create=function(e,t,n){return new aE(e,t,n)},t.prototype.next=function(e){this.isStopped?cE(function(e){return eE("N",e,void 0)}(e),this):this._next(e)},t.prototype.error=function(e){this.isStopped?cE(function(e){return eE("E",void 0,e)}(e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?cE(ZC,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(qC),iE=Function.prototype.bind;function sE(e,t){return iE.call(e,t)}var oE=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(n){lE(n)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(n){lE(n)}else lE(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(t){lE(t)}},e}(),aE=function(e){function t(t,n,r){var i,s,o=e.call(this)||this;$C(t)||!t?i={next:null!==t&&void 0!==t?t:void 0,error:null!==n&&void 0!==n?n:void 0,complete:null!==r&&void 0!==r?r:void 0}:o&&JC.useDeprecatedNextContext?((s=Object.create(t)).unsubscribe=function(){return o.unsubscribe()},i={next:t.next&&sE(t.next,s),error:t.error&&sE(t.error,s),complete:t.complete&&sE(t.complete,s)}):i=t;return o.destination=new oE(i),o}return El(t,e),t}(rE);function lE(e){var t;JC.useDeprecatedSynchronousErrorHandling?(t=e,JC.useDeprecatedSynchronousErrorHandling&&tE&&(tE.errorThrown=!0,tE.error=t)):QC(e)}function cE(e,t){var n=JC.onStoppedNotification;n&&YC.setTimeout((function(){return n(e,t)}))}var uE={closed:!0,next:XC,error:function(e){throw e},complete:XC},dE="function"===typeof Symbol&&Symbol.observable||"@@observable";function hE(e){return e}function pE(e){return 0===e.length?hE:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}var fE=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r,i=this,s=(r=e)&&r instanceof rE||function(e){return e&&$C(e.next)&&$C(e.error)&&$C(e.complete)}(r)&&KC(r)?e:new aE(e,t,n);return nE((function(){var e=i,t=e.operator,n=e.source;s.add(t?t.call(s,n):n?i._subscribe(s):i._trySubscribe(s))})),s},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=mE(t))((function(t,r){var i=new aE({next:function(t){try{e(t)}catch(n){r(n),i.unsubscribe()}},error:r,complete:t});n.subscribe(i)}))},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[dE]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return pE(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=mE(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}();function mE(e){var t;return null!==(t=null!==e&&void 0!==e?e:JC.Promise)&&void 0!==t?t:Promise}var gE=BC((function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),vE=function(e){function t(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return El(t,e),t.prototype.lift=function(e){var t=new yE(this,this);return t.operator=e,t},t.prototype._throwIfClosed=function(){if(this.closed)throw new gE},t.prototype.next=function(e){var t=this;nE((function(){var n,r;if(t._throwIfClosed(),!t.isStopped){t.currentObservers||(t.currentObservers=Array.from(t.observers));try{for(var i=Il(t.currentObservers),s=i.next();!s.done;s=i.next()){s.value.next(e)}}catch(o){n={error:o}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}}))},t.prototype.error=function(e){var t=this;nE((function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=e;for(var n=t.observers;n.length;)n.shift().error(e)}}))},t.prototype.complete=function(){var e=this;nE((function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var t=e.observers;t.length;)t.shift().complete()}}))},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var t=this,n=this,r=n.hasError,i=n.isStopped,s=n.observers;return r||i?WC:(this.currentObservers=null,s.push(e),new qC((function(){t.currentObservers=null,HC(s,e)})))},t.prototype._checkFinalizedStatuses=function(e){var t=this,n=t.hasError,r=t.thrownError,i=t.isStopped;n?e.error(r):i&&e.complete()},t.prototype.asObservable=function(){var e=new fE;return e.source=this,e},t.create=function(e,t){return new yE(e,t)},t}(fE),yE=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return El(t,e),t.prototype.next=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===n||n.call(t,e)},t.prototype.error=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===n||n.call(t,e)},t.prototype.complete=function(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)},t.prototype._subscribe=function(e){var t,n;return null!==(n=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==n?n:WC},t}(vE),bE={now:function(){return(bE.delegate||Date).now()},delegate:void 0},wE=function(e){function t(t,n,r){void 0===t&&(t=1/0),void 0===n&&(n=1/0),void 0===r&&(r=bE);var i=e.call(this)||this;return i._bufferSize=t,i._windowTime=n,i._timestampProvider=r,i._buffer=[],i._infiniteTimeWindow=!0,i._infiniteTimeWindow=n===1/0,i._bufferSize=Math.max(1,t),i._windowTime=Math.max(1,n),i}return El(t,e),t.prototype.next=function(t){var n=this,r=n.isStopped,i=n._buffer,s=n._infiniteTimeWindow,o=n._timestampProvider,a=n._windowTime;r||(i.push(t),!s&&i.push(o.now()+a)),this._trimBuffer(),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){this._throwIfClosed(),this._trimBuffer();for(var t=this._innerSubscribe(e),n=this._infiniteTimeWindow,r=this._buffer.slice(),i=0;i<r.length&&!e.closed;i+=n?1:2)e.next(r[i]);return this._checkFinalizedStatuses(e),t},t.prototype._trimBuffer=function(){var e=this,t=e._bufferSize,n=e._timestampProvider,r=e._buffer,i=e._infiniteTimeWindow,s=(i?1:2)*t;if(t<1/0&&s<r.length&&r.splice(0,r.length-s),!i){for(var o=n.now(),a=0,l=1;l<r.length&&r[l]<=o;l+=2)a=l;a&&r.splice(0,a+1)}},t}(vE),SE=Array.isArray,kE=Object.getPrototypeOf,CE=Object.prototype,EE=Object.keys;function TE(e){if(1===e.length){var t=e[0];if(SE(t))return{args:t,keys:null};if((r=t)&&"object"===typeof r&&kE(r)===CE){var n=EE(t);return{args:n.map((function(e){return t[e]})),keys:n}}}var r;return{args:e,keys:null}}var _E=function(e){return e&&"number"===typeof e.length&&"function"!==typeof e};function xE(e){return $C(null===e||void 0===e?void 0:e.then)}function IE(e){return $C(e[dE])}function RE(e){return Symbol.asyncIterator&&$C(null===e||void 0===e?void 0:e[Symbol.asyncIterator])}function PE(e){return new TypeError("You provided "+(null!==e&&"object"===typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var AE="function"===typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function NE(e){return $C(null===e||void 0===e?void 0:e[AE])}function OE(e){return Nl(this,arguments,(function(){var t,n,r;return xl(this,(function(i){switch(i.label){case 0:t=e.getReader(),i.label=1;case 1:i.trys.push([1,,9,10]),i.label=2;case 2:return[4,Al(t.read())];case 3:return n=i.sent(),r=n.value,n.done?[4,Al(void 0)]:[3,5];case 4:return[2,i.sent()];case 5:return[4,Al(r)];case 6:return[4,i.sent()];case 7:return i.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}}))}))}function DE(e){return $C(null===e||void 0===e?void 0:e.getReader)}function LE(e){if(e instanceof fE)return e;if(null!=e){if(IE(e))return i=e,new fE((function(e){var t=i[dE]();if($C(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if(_E(e))return r=e,new fE((function(e){for(var t=0;t<r.length&&!e.closed;t++)e.next(r[t]);e.complete()}));if(xE(e))return n=e,new fE((function(e){n.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,QC)}));if(RE(e))return jE(e);if(NE(e))return t=e,new fE((function(e){var n,r;try{for(var i=Il(t),s=i.next();!s.done;s=i.next()){var o=s.value;if(e.next(o),e.closed)return}}catch(a){n={error:a}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}e.complete()}));if(DE(e))return jE(OE(e))}var t,n,r,i;throw PE(e)}function jE(e){return new fE((function(t){(function(e,t){var n,r,i,s;return _l(this,void 0,void 0,(function(){var o,a;return xl(this,(function(l){switch(l.label){case 0:l.trys.push([0,5,6,11]),n=Ol(e),l.label=1;case 1:return[4,n.next()];case 2:if((r=l.sent()).done)return[3,4];if(o=r.value,t.next(o),t.closed)return[2];l.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=l.sent(),i={error:a},[3,11];case 6:return l.trys.push([6,,9,10]),r&&!r.done&&(s=n.return)?[4,s.call(n)]:[3,8];case 7:l.sent(),l.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}}))}))})(e,t).catch((function(e){return t.error(e)}))}))}function ME(e,t,n,r,i){void 0===r&&(r=0),void 0===i&&(i=!1);var s=t.schedule((function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()}),r);if(e.add(s),!i)return s}function FE(e){return function(t){if(function(e){return $C(null===e||void 0===e?void 0:e.lift)}(t))return t.lift((function(t){try{return e(t,this)}catch(n){this.error(n)}}));throw new TypeError("Unable to lift unknown Observable type")}}function UE(e,t,n,r,i){return new VE(e,t,n,r,i)}var VE=function(e){function t(t,n,r,i,s,o){var a=e.call(this,t)||this;return a.onFinalize=s,a.shouldUnsubscribe=o,a._next=n?function(e){try{n(e)}catch(r){t.error(r)}}:e.prototype._next,a._error=i?function(e){try{i(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,a._complete=r?function(){try{r()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,a}return El(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}},t}(rE);function $E(e,t){return void 0===t&&(t=0),FE((function(n,r){n.subscribe(UE(r,(function(n){return ME(r,e,(function(){return r.next(n)}),t)}),(function(){return ME(r,e,(function(){return r.complete()}),t)}),(function(n){return ME(r,e,(function(){return r.error(n)}),t)})))}))}function BE(e,t){return void 0===t&&(t=0),FE((function(n,r){r.add(e.schedule((function(){return n.subscribe(r)}),t))}))}function zE(e,t){if(!e)throw new Error("Iterable cannot be null");return new fE((function(n){ME(n,t,(function(){var r=e[Symbol.asyncIterator]();ME(n,t,(function(){r.next().then((function(e){e.done?n.complete():n.next(e.value)}))}),0,!0)}))}))}function HE(e,t){if(null!=e){if(IE(e))return function(e,t){return LE(e).pipe(BE(t),$E(t))}(e,t);if(_E(e))return function(e,t){return new fE((function(n){var r=0;return t.schedule((function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())}))}))}(e,t);if(xE(e))return function(e,t){return LE(e).pipe(BE(t),$E(t))}(e,t);if(RE(e))return zE(e,t);if(NE(e))return function(e,t){return new fE((function(n){var r;return ME(n,t,(function(){r=e[AE](),ME(n,t,(function(){var e,t,i;try{t=(e=r.next()).value,i=e.done}catch(s){return void n.error(s)}i?n.complete():n.next(t)}),0,!0)})),function(){return $C(null===r||void 0===r?void 0:r.return)&&r.return()}}))}(e,t);if(DE(e))return function(e,t){return zE(OE(e),t)}(e,t)}throw PE(e)}function qE(e,t){return t?HE(e,t):LE(e)}function WE(e,t){return FE((function(n,r){var i=0;n.subscribe(UE(r,(function(n){r.next(e.call(t,n,i++))})))}))}var KE=Array.isArray;function GE(e){return WE((function(t){return function(e,t){return KE(t)?e.apply(void 0,Pl([],Rl(t))):e(t)}(e,t)}))}function JE(e){return e[e.length-1]}function YE(e){return(t=JE(e))&&$C(t.schedule)?e.pop():void 0;var t}function QE(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=YE(e),r=function(e){return $C(JE(e))?e.pop():void 0}(e),i=TE(e),s=i.args,o=i.keys;if(0===s.length)return qE([],n);var a=new fE(function(e,t,n){void 0===n&&(n=hE);return function(r){XE(t,(function(){for(var i=e.length,s=new Array(i),o=i,a=i,l=function(i){XE(t,(function(){var l=qE(e[i],t),c=!1;l.subscribe(UE(r,(function(e){s[i]=e,c||(c=!0,a--),a||r.next(n(s.slice()))}),(function(){--o||r.complete()})))}),r)},c=0;c<i;c++)l(c)}),r)}}(s,n,o?function(e){return function(e,t){return e.reduce((function(e,n,r){return e[n]=t[r],e}),{})}(o,e)}:hE));return r?a.pipe(GE(r)):a}function XE(e,t,n){e?ME(n,e,t):t()}var ZE=function(e){function t(t){var n=e.call(this)||this;return n._value=t,n}return El(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return!n.closed&&t.next(this._value),n},t.prototype.getValue=function(){var e=this,t=e.hasError,n=e.thrownError,r=e._value;if(t)throw n;return this._throwIfClosed(),r},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(vE);function eT(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!0!==t){if(!1!==t){var i=new aE({next:function(){i.unsubscribe(),e()}});return LE(t.apply(void 0,Pl([],Rl(n)))).subscribe(i)}}else e()}function tT(e,t,n){var r,i,s,o,a=!1;return e&&"object"===typeof e?(r=e.bufferSize,o=void 0===r?1/0:r,i=e.windowTime,t=void 0===i?1/0:i,a=void 0!==(s=e.refCount)&&s,n=e.scheduler):o=null!==e&&void 0!==e?e:1/0,function(e){void 0===e&&(e={});var t=e.connector,n=void 0===t?function(){return new vE}:t,r=e.resetOnError,i=void 0===r||r,s=e.resetOnComplete,o=void 0===s||s,a=e.resetOnRefCountZero,l=void 0===a||a;return function(e){var t,r,s,a=0,c=!1,u=!1,d=function(){null===r||void 0===r||r.unsubscribe(),r=void 0},h=function(){d(),t=s=void 0,c=u=!1},p=function(){var e=t;h(),null===e||void 0===e||e.unsubscribe()};return FE((function(e,f){a++,u||c||d();var m=s=null!==s&&void 0!==s?s:n();f.add((function(){0!==--a||u||c||(r=eT(p,l))})),m.subscribe(f),!t&&a>0&&(t=new aE({next:function(e){return m.next(e)},error:function(e){u=!0,d(),r=eT(h,i,e),m.error(e)},complete:function(){c=!0,d(),r=eT(h,o),m.complete()}}),LE(e).subscribe(t))}))(e)}}({connector:function(){return new wE(o,t,n)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:a})}function nT(e,t){return void 0===t&&(t=hE),e=null!==e&&void 0!==e?e:rT,FE((function(n,r){var i,s=!0;n.subscribe(UE(r,(function(n){var o=t(n);!s&&e(i,o)||(s=!1,i=o,r.next(n))})))}))}function rT(e,t){return e===t}function iT(e,t){return void 0===t&&(t=!1),FE((function(n,r){var i=0;n.subscribe(UE(r,(function(n){var s=e(n,i++);(s||t)&&r.next(n),!s&&r.complete()})))}))}function sT(e,t){return nT((function(n,r){return t?t(n[e],r[e]):n[e]===r[e]}))}function oT(e,t,n){return n?oT(e,t).pipe(GE(n)):new fE((function(n){var r=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.next(1===e.length?e[0]:e)},i=e(r);return $C(t)?function(){return t(r,i)}:void 0}))}function aT(e,t,n){return void 0===n&&(n=1/0),$C(t)?aT((function(n,r){return WE((function(e,i){return t(n,e,r,i)}))(LE(e(n,r)))}),n):("number"===typeof t&&(n=t),FE((function(t,r){return function(e,t,n,r,i,s,o,a){var l=[],c=0,u=0,d=!1,h=function(){!d||l.length||c||t.complete()},p=function(e){return c<r?f(e):l.push(e)},f=function(e){s&&t.next(e),c++;var a=!1;LE(n(e,u++)).subscribe(UE(t,(function(e){null===i||void 0===i||i(e),s?p(e):t.next(e)}),(function(){a=!0}),void 0,(function(){if(a)try{c--;for(var e=function(){var e=l.shift();o?ME(t,o,(function(){return f(e)})):f(e)};l.length&&c<r;)e();h()}catch(n){t.error(n)}})))};return e.subscribe(UE(t,p,(function(){d=!0,h()}))),function(){null===a||void 0===a||a()}}(t,r,e,n)})))}var lT=["addListener","removeListener"],cT=["addEventListener","removeEventListener"],uT=["on","off"];function dT(e,t,n,r){if($C(n)&&(r=n,n=void 0),r)return dT(e,t,n).pipe(GE(r));var i=Rl(function(e){return $C(e.addEventListener)&&$C(e.removeEventListener)}(e)?cT.map((function(r){return function(i){return e[r](t,i,n)}})):function(e){return $C(e.addListener)&&$C(e.removeListener)}(e)?lT.map(hT(e,t)):function(e){return $C(e.on)&&$C(e.off)}(e)?uT.map(hT(e,t)):[],2),s=i[0],o=i[1];if(!s&&_E(e))return aT((function(e){return dT(e,t,n)}))(LE(e));if(!s)throw new TypeError("Invalid event target");return new fE((function(e){var t=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.next(1<t.length?t:t[0])};return s(t),function(){return o(t)}}))}function hT(e,t){return function(n){return function(r){return e[n](t,r)}}}var pT=function(e){function t(t,n){return e.call(this)||this}return El(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(qC),fT={setInterval:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=fT.delegate;return(null===i||void 0===i?void 0:i.setInterval)?i.setInterval.apply(i,Pl([e,t],Rl(n))):setInterval.apply(void 0,Pl([e,t],Rl(n)))},clearInterval:function(e){var t=fT.delegate;return((null===t||void 0===t?void 0:t.clearInterval)||clearInterval)(e)},delegate:void 0},mT=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.pending=!1,r}return El(t,e),t.prototype.schedule=function(e,t){var n;if(void 0===t&&(t=0),this.closed)return this;this.state=e;var r=this.id,i=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(i,r,t)),this.pending=!0,this.delay=t,this.id=null!==(n=this.id)&&void 0!==n?n:this.requestAsyncId(i,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),fT.setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!=n&&this.delay===n&&!1===this.pending)return t;null!=t&&fT.clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n,r=!1;try{this.work(e)}catch(i){r=!0,n=i||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),n},t.prototype.unsubscribe=function(){if(!this.closed){var t=this.id,n=this.scheduler,r=n.actions;this.work=this.state=this.scheduler=null,this.pending=!1,HC(r,this),null!=t&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(pT),gT=function(){function e(t,n){void 0===n&&(n=e.now),this.schedulerActionCtor=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.schedulerActionCtor(this,e).schedule(n,t)},e.now=bE.now,e}(),vT=function(e){function t(t,n){void 0===n&&(n=gT.now);var r=e.call(this,t,n)||this;return r.actions=[],r._active=!1,r}return El(t,e),t.prototype.flush=function(e){var t=this.actions;if(this._active)t.push(e);else{var n;this._active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}(gT),yT=new vT(mT);function bT(e){return void 0===e&&(e=1/0),aT(hE,e)}var wT=new fE((function(e){return e.complete()}));function ST(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=YE(e),r=function(e,t){return"number"===typeof JE(e)?e.pop():t}(e,1/0),i=e;return i.length?1===i.length?LE(i[0]):bT(r)(qE(i,n)):wT}function kT(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return bT(1)(qE(e,YE(e)))}function CT(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=YE(e);return FE((function(t,r){(n?kT(e,t,n):kT(e,t)).subscribe(r)}))}function ET(e,t){return $C(t)?aT(e,t,1):aT(e,1)}function TT(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return qE(e,YE(e))}var _T=n(9640),xT=n(4121);const IT="disabled",RT="auto-on",PT="block-users",AT="create-reaction",NT="enable-noise-cancellation",OT="join-backstage",DT="mute-users",LT="pin-for-everyone",jT="screenshare",MT="send-audio",FT="send-video",UT="start-record-call",VT="stop-record-call",$T="update-call-permissions";class BT extends Error{}var zT;!function(e){e[e.NULL_VALUE=0]="NULL_VALUE"}(zT||(zT={}));const HT=new class extends pS{constructor(){super("google.protobuf.Struct",[{no:1,name:"fields",kind:"map",K:9,V:{kind:"message",T:()=>qT}}])}internalJsonWrite(e,t){let n={};for(let[r,i]of Object.entries(e.fields))n[r]=qT.toJson(i);return n}internalJsonRead(e,t,n){if(!Cw(e))throw new globalThis.Error("Unable to parse message "+this.typeName+" from JSON "+kw(e)+".");n||(n=this.create());for(let[r,i]of globalThis.Object.entries(e))n.fields[r]=qT.fromJson(i);return n}};const qT=new class extends pS{constructor(){super("google.protobuf.Value",[{no:1,name:"null_value",kind:"enum",oneof:"kind",T:()=>["google.protobuf.NullValue",zT]},{no:2,name:"number_value",kind:"scalar",oneof:"kind",T:1},{no:3,name:"string_value",kind:"scalar",oneof:"kind",T:9},{no:4,name:"bool_value",kind:"scalar",oneof:"kind",T:8},{no:5,name:"struct_value",kind:"message",oneof:"kind",T:()=>HT},{no:6,name:"list_value",kind:"message",oneof:"kind",T:()=>WT}])}internalJsonWrite(e,t){if(void 0===e.kind.oneofKind)throw new globalThis.Error;switch(e.kind.oneofKind){case void 0:throw new globalThis.Error;case"boolValue":return e.kind.boolValue;case"nullValue":return null;case"numberValue":let t=e.kind.numberValue;if("number"==typeof t&&!Number.isFinite(t))throw new globalThis.Error;return t;case"stringValue":return e.kind.stringValue;case"listValue":let n=this.fields.find((e=>6===e.no));if("message"!==n?.kind)throw new globalThis.Error;return n.T().toJson(e.kind.listValue);case"structValue":let r=this.fields.find((e=>5===e.no));if("message"!==r?.kind)throw new globalThis.Error;return r.T().toJson(e.kind.structValue)}}internalJsonRead(e,t,n){switch(n||(n=this.create()),typeof e){case"number":n.kind={oneofKind:"numberValue",numberValue:e};break;case"string":n.kind={oneofKind:"stringValue",stringValue:e};break;case"boolean":n.kind={oneofKind:"boolValue",boolValue:e};break;case"object":null===e?n.kind={oneofKind:"nullValue",nullValue:zT.NULL_VALUE}:globalThis.Array.isArray(e)?n.kind={oneofKind:"listValue",listValue:WT.fromJson(e)}:n.kind={oneofKind:"structValue",structValue:HT.fromJson(e)};break;default:throw new globalThis.Error("Unable to parse "+this.typeName+" from JSON "+kw(e))}return n}};const WT=new class extends pS{constructor(){super("google.protobuf.ListValue",[{no:1,name:"values",kind:"message",repeat:1,T:()=>qT}])}internalJsonWrite(e,t){return e.values.map((e=>qT.toJson(e)))}internalJsonRead(e,t,n){if(!globalThis.Array.isArray(e))throw new globalThis.Error("Unable to parse "+this.typeName+" from JSON "+kw(e));n||(n=this.create());let r=e.map((e=>qT.fromJson(e)));return n.values.push(...r),n}};const KT=new class extends pS{constructor(){super("google.protobuf.Timestamp",[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}])}now(){const e=this.create(),t=Date.now();return e.seconds=Vw.from(Math.floor(t/1e3)).toString(),e.nanos=t%1e3*1e6,e}toDate(e){return new Date(1e3*Vw.from(e.seconds).toNumber()+Math.ceil(e.nanos/1e6))}fromDate(e){const t=this.create(),n=e.getTime();return t.seconds=Vw.from(Math.floor(n/1e3)).toString(),t.nanos=n%1e3*1e6,t}internalJsonWrite(e,t){let n=1e3*Vw.from(e.seconds).toNumber();if(n<Date.parse("0001-01-01T00:00:00Z")||n>Date.parse("9999-12-31T23:59:59Z"))throw new Error("Unable to encode Timestamp to JSON. Must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive.");if(e.nanos<0)throw new Error("Unable to encode invalid Timestamp to JSON. Nanos must not be negative.");let r="Z";if(e.nanos>0){let t=(e.nanos+1e9).toString().substring(1);r="000000"===t.substring(3)?"."+t.substring(0,3)+"Z":"000"===t.substring(6)?"."+t.substring(0,6)+"Z":"."+t+"Z"}return new Date(n).toISOString().replace(".000Z",r)}internalJsonRead(e,t,n){if("string"!==typeof e)throw new Error("Unable to parse Timestamp from JSON "+kw(e)+".");let r=e.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!r)throw new Error("Unable to parse Timestamp from JSON. Invalid format.");let i=Date.parse(r[1]+"-"+r[2]+"-"+r[3]+"T"+r[4]+":"+r[5]+":"+r[6]+(r[8]?r[8]:"Z"));if(Number.isNaN(i))throw new Error("Unable to parse Timestamp from JSON. Invalid value.");if(i<Date.parse("0001-01-01T00:00:00Z")||i>Date.parse("9999-12-31T23:59:59Z"))throw new globalThis.Error("Unable to parse Timestamp from JSON. Must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive.");return n||(n=this.create()),n.seconds=Vw.from(i/1e3).toString(),n.nanos=0,r[7]&&(n.nanos=parseInt("1"+r[7]+"0".repeat(9-r[7].length))-1e9),n}};var GT,JT,YT,QT,XT,ZT,e_,t_,n_,r_,i_,s_;!function(e){e[e.PUBLISHER_UNSPECIFIED=0]="PUBLISHER_UNSPECIFIED",e[e.SUBSCRIBER=1]="SUBSCRIBER"}(GT||(GT={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.POOR=1]="POOR",e[e.GOOD=2]="GOOD",e[e.EXCELLENT=3]="EXCELLENT"}(JT||(JT={})),function(e){e[e.LOW_UNSPECIFIED=0]="LOW_UNSPECIFIED",e[e.MID=1]="MID",e[e.HIGH=2]="HIGH",e[e.OFF=3]="OFF"}(YT||(YT={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.AUDIO=1]="AUDIO",e[e.VIDEO=2]="VIDEO",e[e.SCREEN_SHARE=3]="SCREEN_SHARE",e[e.SCREEN_SHARE_AUDIO=4]="SCREEN_SHARE_AUDIO"}(QT||(QT={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.PUBLISH_TRACK_NOT_FOUND=100]="PUBLISH_TRACK_NOT_FOUND",e[e.PUBLISH_TRACKS_MISMATCH=101]="PUBLISH_TRACKS_MISMATCH",e[e.PUBLISH_TRACK_OUT_OF_ORDER=102]="PUBLISH_TRACK_OUT_OF_ORDER",e[e.PUBLISH_TRACK_VIDEO_LAYER_NOT_FOUND=103]="PUBLISH_TRACK_VIDEO_LAYER_NOT_FOUND",e[e.LIVE_ENDED=104]="LIVE_ENDED",e[e.PARTICIPANT_NOT_FOUND=200]="PARTICIPANT_NOT_FOUND",e[e.PARTICIPANT_MIGRATING_OUT=201]="PARTICIPANT_MIGRATING_OUT",e[e.PARTICIPANT_MIGRATION_FAILED=202]="PARTICIPANT_MIGRATION_FAILED",e[e.PARTICIPANT_MIGRATING=203]="PARTICIPANT_MIGRATING",e[e.PARTICIPANT_RECONNECT_FAILED=204]="PARTICIPANT_RECONNECT_FAILED",e[e.PARTICIPANT_MEDIA_TRANSPORT_FAILURE=205]="PARTICIPANT_MEDIA_TRANSPORT_FAILURE",e[e.CALL_NOT_FOUND=300]="CALL_NOT_FOUND",e[e.REQUEST_VALIDATION_FAILED=400]="REQUEST_VALIDATION_FAILED",e[e.UNAUTHENTICATED=401]="UNAUTHENTICATED",e[e.PERMISSION_DENIED=403]="PERMISSION_DENIED",e[e.TOO_MANY_REQUESTS=429]="TOO_MANY_REQUESTS",e[e.INTERNAL_SERVER_ERROR=500]="INTERNAL_SERVER_ERROR",e[e.SFU_SHUTTING_DOWN=600]="SFU_SHUTTING_DOWN",e[e.SFU_FULL=700]="SFU_FULL"}(XT||(XT={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.REACT=1]="REACT",e[e.ANGULAR=2]="ANGULAR",e[e.ANDROID=3]="ANDROID",e[e.IOS=4]="IOS",e[e.FLUTTER=5]="FLUTTER",e[e.REACT_NATIVE=6]="REACT_NATIVE",e[e.UNITY=7]="UNITY",e[e.GO=8]="GO",e[e.PLAIN_JAVASCRIPT=9]="PLAIN_JAVASCRIPT"}(ZT||(ZT={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.USER_MUTED=1]="USER_MUTED",e[e.PERMISSION_REVOKED=2]="PERMISSION_REVOKED",e[e.MODERATION=3]="MODERATION"}(e_||(e_={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.SHUTTING_DOWN=1]="SHUTTING_DOWN",e[e.REBALANCE=2]="REBALANCE"}(t_||(t_={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.ENDED=1]="ENDED",e[e.LIVE_ENDED=2]="LIVE_ENDED",e[e.KICKED=3]="KICKED",e[e.SESSION_ENDED=4]="SESSION_ENDED"}(n_||(n_={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.DISCONNECT=1]="DISCONNECT",e[e.FAST=2]="FAST",e[e.REJOIN=3]="REJOIN",e[e.MIGRATE=4]="MIGRATE"}(r_||(r_={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.NONE=1]="NONE",e[e.LIGHT=2]="LIGHT",e[e.MODERATE=3]="MODERATE",e[e.SEVERE=4]="SEVERE",e[e.CRITICAL=5]="CRITICAL",e[e.EMERGENCY=6]="EMERGENCY",e[e.SHUTDOWN=7]="SHUTDOWN"}(i_||(i_={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.NOMINAL=1]="NOMINAL",e[e.FAIR=2]="FAIR",e[e.SERIOUS=3]="SERIOUS",e[e.CRITICAL=4]="CRITICAL"}(s_||(s_={}));const o_=new class extends pS{constructor(){super("stream.video.sfu.models.CallState",[{no:1,name:"participants",kind:"message",repeat:1,T:()=>c_},{no:2,name:"started_at",kind:"message",T:()=>KT},{no:3,name:"participant_count",kind:"message",T:()=>a_},{no:4,name:"pins",kind:"message",repeat:1,T:()=>l_}])}};const a_=new class extends pS{constructor(){super("stream.video.sfu.models.ParticipantCount",[{no:1,name:"total",kind:"scalar",T:13},{no:2,name:"anonymous",kind:"scalar",T:13}])}};const l_=new class extends pS{constructor(){super("stream.video.sfu.models.Pin",[{no:1,name:"user_id",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9}])}};const c_=new class extends pS{constructor(){super("stream.video.sfu.models.Participant",[{no:1,name:"user_id",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"published_tracks",kind:"enum",repeat:1,T:()=>["stream.video.sfu.models.TrackType",QT,"TRACK_TYPE_"]},{no:4,name:"joined_at",kind:"message",T:()=>KT},{no:5,name:"track_lookup_prefix",kind:"scalar",T:9},{no:6,name:"connection_quality",kind:"enum",T:()=>["stream.video.sfu.models.ConnectionQuality",JT,"CONNECTION_QUALITY_"]},{no:7,name:"is_speaking",kind:"scalar",T:8},{no:8,name:"is_dominant_speaker",kind:"scalar",T:8},{no:9,name:"audio_level",kind:"scalar",T:2},{no:10,name:"name",kind:"scalar",T:9},{no:11,name:"image",kind:"scalar",T:9},{no:12,name:"custom",kind:"message",T:()=>HT},{no:13,name:"roles",kind:"scalar",repeat:2,T:9}])}};const u_=new class extends pS{constructor(){super("stream.video.sfu.models.StreamQuality",[{no:1,name:"video_quality",kind:"enum",T:()=>["stream.video.sfu.models.VideoQuality",YT,"VIDEO_QUALITY_"]},{no:2,name:"user_id",kind:"scalar",T:9}])}};const d_=new class extends pS{constructor(){super("stream.video.sfu.models.VideoDimension",[{no:1,name:"width",kind:"scalar",T:13},{no:2,name:"height",kind:"scalar",T:13}])}};const h_=new class extends pS{constructor(){super("stream.video.sfu.models.VideoLayer",[{no:1,name:"rid",kind:"scalar",T:9},{no:2,name:"video_dimension",kind:"message",T:()=>d_},{no:4,name:"bitrate",kind:"scalar",T:13},{no:5,name:"fps",kind:"scalar",T:13},{no:6,name:"quality",kind:"enum",T:()=>["stream.video.sfu.models.VideoQuality",YT,"VIDEO_QUALITY_"]}])}};const p_=new class extends pS{constructor(){super("stream.video.sfu.models.SubscribeOption",[{no:1,name:"track_type",kind:"enum",T:()=>["stream.video.sfu.models.TrackType",QT,"TRACK_TYPE_"]},{no:2,name:"codecs",kind:"message",repeat:1,T:()=>m_}])}};const f_=new class extends pS{constructor(){super("stream.video.sfu.models.PublishOption",[{no:1,name:"track_type",kind:"enum",T:()=>["stream.video.sfu.models.TrackType",QT,"TRACK_TYPE_"]},{no:2,name:"codec",kind:"message",T:()=>m_},{no:3,name:"bitrate",kind:"scalar",T:5},{no:4,name:"fps",kind:"scalar",T:5},{no:5,name:"max_spatial_layers",kind:"scalar",T:5},{no:6,name:"max_temporal_layers",kind:"scalar",T:5},{no:7,name:"video_dimension",kind:"message",T:()=>d_},{no:8,name:"id",kind:"scalar",T:5}])}};const m_=new class extends pS{constructor(){super("stream.video.sfu.models.Codec",[{no:16,name:"payload_type",kind:"scalar",T:13},{no:10,name:"name",kind:"scalar",T:9},{no:14,name:"clock_rate",kind:"scalar",T:13},{no:15,name:"encoding_parameters",kind:"scalar",T:9},{no:12,name:"fmtp",kind:"scalar",T:9}])}};const g_=new class extends pS{constructor(){super("stream.video.sfu.models.ICETrickle",[{no:1,name:"peer_type",kind:"enum",T:()=>["stream.video.sfu.models.PeerType",GT,"PEER_TYPE_"]},{no:2,name:"ice_candidate",kind:"scalar",T:9},{no:3,name:"session_id",kind:"scalar",T:9}])}};const v_=new class extends pS{constructor(){super("stream.video.sfu.models.TrackInfo",[{no:1,name:"track_id",kind:"scalar",T:9},{no:2,name:"track_type",kind:"enum",T:()=>["stream.video.sfu.models.TrackType",QT,"TRACK_TYPE_"]},{no:5,name:"layers",kind:"message",repeat:1,T:()=>h_},{no:6,name:"mid",kind:"scalar",T:9},{no:7,name:"dtx",kind:"scalar",T:8},{no:8,name:"stereo",kind:"scalar",T:8},{no:9,name:"red",kind:"scalar",T:8},{no:10,name:"muted",kind:"scalar",T:8},{no:11,name:"codec",kind:"message",T:()=>m_},{no:12,name:"publish_option_id",kind:"scalar",T:5}])}};const y_=new class extends pS{constructor(){super("stream.video.sfu.models.Error",[{no:1,name:"code",kind:"enum",T:()=>["stream.video.sfu.models.ErrorCode",XT,"ERROR_CODE_"]},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"should_retry",kind:"scalar",T:8}])}};const b_=new class extends pS{constructor(){super("stream.video.sfu.models.ClientDetails",[{no:1,name:"sdk",kind:"message",T:()=>w_},{no:2,name:"os",kind:"message",T:()=>S_},{no:3,name:"browser",kind:"message",T:()=>k_},{no:4,name:"device",kind:"message",T:()=>C_}])}};const w_=new class extends pS{constructor(){super("stream.video.sfu.models.Sdk",[{no:1,name:"type",kind:"enum",T:()=>["stream.video.sfu.models.SdkType",ZT,"SDK_TYPE_"]},{no:2,name:"major",kind:"scalar",T:9},{no:3,name:"minor",kind:"scalar",T:9},{no:4,name:"patch",kind:"scalar",T:9}])}};const S_=new class extends pS{constructor(){super("stream.video.sfu.models.OS",[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"architecture",kind:"scalar",T:9}])}};const k_=new class extends pS{constructor(){super("stream.video.sfu.models.Browser",[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"version",kind:"scalar",T:9}])}};const C_=new class extends pS{constructor(){super("stream.video.sfu.models.Device",[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"version",kind:"scalar",T:9}])}};const E_=new class extends pS{constructor(){super("stream.video.sfu.models.Call",[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"id",kind:"scalar",T:9},{no:3,name:"created_by_user_id",kind:"scalar",T:9},{no:4,name:"host_user_id",kind:"scalar",T:9},{no:5,name:"custom",kind:"message",T:()=>HT},{no:6,name:"created_at",kind:"message",T:()=>KT},{no:7,name:"updated_at",kind:"message",T:()=>KT}])}};const T_=new class extends pS{constructor(){super("stream.video.sfu.models.CallGrants",[{no:1,name:"can_publish_audio",kind:"scalar",T:8},{no:2,name:"can_publish_video",kind:"scalar",T:8},{no:3,name:"can_screenshare",kind:"scalar",T:8}])}};const __=new class extends pS{constructor(){super("stream.video.sfu.models.InputDevices",[{no:1,name:"available_devices",kind:"scalar",repeat:2,T:9},{no:2,name:"current_device",kind:"scalar",T:9},{no:3,name:"is_permitted",kind:"scalar",T:8}])}};const x_=new class extends pS{constructor(){super("stream.video.sfu.models.AndroidState",[{no:1,name:"thermal_state",kind:"enum",T:()=>["stream.video.sfu.models.AndroidThermalState",i_,"ANDROID_THERMAL_STATE_"]},{no:2,name:"is_power_saver_mode",kind:"scalar",T:8}])}};const I_=new class extends pS{constructor(){super("stream.video.sfu.models.AppleState",[{no:1,name:"thermal_state",kind:"enum",T:()=>["stream.video.sfu.models.AppleThermalState",s_,"APPLE_THERMAL_STATE_"]},{no:2,name:"is_low_power_mode_enabled",kind:"scalar",T:8}])}};var R_=Object.freeze({__proto__:null,AndroidState:x_,get AndroidThermalState(){return i_},AppleState:I_,get AppleThermalState(){return s_},Browser:k_,Call:E_,get CallEndedReason(){return n_},CallGrants:T_,CallState:o_,ClientDetails:b_,Codec:m_,get ConnectionQuality(){return JT},Device:C_,Error:y_,get ErrorCode(){return XT},get GoAwayReason(){return t_},ICETrickle:g_,InputDevices:__,OS:S_,Participant:c_,ParticipantCount:a_,get PeerType(){return GT},Pin:l_,PublishOption:f_,Sdk:w_,get SdkType(){return ZT},StreamQuality:u_,SubscribeOption:p_,TrackInfo:v_,get TrackType(){return QT},get TrackUnpublishReason(){return e_},VideoDimension:d_,VideoLayer:h_,get VideoQuality(){return YT},get WebsocketReconnectStrategy(){return r_}});const P_=new class extends pS{constructor(){super("stream.video.sfu.signal.StartNoiseCancellationRequest",[{no:1,name:"session_id",kind:"scalar",T:9}])}};const A_=new class extends pS{constructor(){super("stream.video.sfu.signal.StartNoiseCancellationResponse",[{no:1,name:"error",kind:"message",T:()=>y_}])}};const N_=new class extends pS{constructor(){super("stream.video.sfu.signal.StopNoiseCancellationRequest",[{no:1,name:"session_id",kind:"scalar",T:9}])}};const O_=new class extends pS{constructor(){super("stream.video.sfu.signal.StopNoiseCancellationResponse",[{no:1,name:"error",kind:"message",T:()=>y_}])}};const D_=new class extends pS{constructor(){super("stream.video.sfu.signal.Reconnection",[{no:1,name:"time_seconds",kind:"scalar",T:2},{no:2,name:"strategy",kind:"enum",T:()=>["stream.video.sfu.models.WebsocketReconnectStrategy",r_,"WEBSOCKET_RECONNECT_STRATEGY_"]}])}};const L_=new class extends pS{constructor(){super("stream.video.sfu.signal.Telemetry",[{no:1,name:"connection_time_seconds",kind:"scalar",oneof:"data",T:2},{no:2,name:"reconnection",kind:"message",oneof:"data",T:()=>D_}])}};const j_=new class extends pS{constructor(){super("stream.video.sfu.signal.SendStatsRequest",[{no:1,name:"session_id",kind:"scalar",T:9},{no:2,name:"subscriber_stats",kind:"scalar",T:9},{no:3,name:"publisher_stats",kind:"scalar",T:9},{no:4,name:"webrtc_version",kind:"scalar",T:9},{no:5,name:"sdk",kind:"scalar",T:9},{no:6,name:"sdk_version",kind:"scalar",T:9},{no:7,name:"audio_devices",kind:"message",T:()=>__},{no:8,name:"video_devices",kind:"message",T:()=>__},{no:9,name:"android",kind:"message",oneof:"deviceState",T:()=>x_},{no:10,name:"apple",kind:"message",oneof:"deviceState",T:()=>I_},{no:11,name:"telemetry",kind:"message",T:()=>L_}])}};const M_=new class extends pS{constructor(){super("stream.video.sfu.signal.SendStatsResponse",[{no:1,name:"error",kind:"message",T:()=>y_}])}};const F_=new class extends pS{constructor(){super("stream.video.sfu.signal.ICERestartRequest",[{no:1,name:"session_id",kind:"scalar",T:9},{no:2,name:"peer_type",kind:"enum",T:()=>["stream.video.sfu.models.PeerType",GT,"PEER_TYPE_"]}])}};const U_=new class extends pS{constructor(){super("stream.video.sfu.signal.ICERestartResponse",[{no:1,name:"error",kind:"message",T:()=>y_}])}};const V_=new class extends pS{constructor(){super("stream.video.sfu.signal.UpdateMuteStatesRequest",[{no:1,name:"session_id",kind:"scalar",T:9},{no:3,name:"mute_states",kind:"message",repeat:1,T:()=>B_}])}};const $_=new class extends pS{constructor(){super("stream.video.sfu.signal.UpdateMuteStatesResponse",[{no:4,name:"error",kind:"message",T:()=>y_}])}};const B_=new class extends pS{constructor(){super("stream.video.sfu.signal.TrackMuteState",[{no:1,name:"track_type",kind:"enum",T:()=>["stream.video.sfu.models.TrackType",QT,"TRACK_TYPE_"]},{no:2,name:"muted",kind:"scalar",T:8}])}};new class extends pS{constructor(){super("stream.video.sfu.signal.AudioMuteChanged",[{no:1,name:"muted",kind:"scalar",T:8}])}};new class extends pS{constructor(){super("stream.video.sfu.signal.VideoMuteChanged",[{no:2,name:"muted",kind:"scalar",T:8}])}};const z_=new class extends pS{constructor(){super("stream.video.sfu.signal.UpdateSubscriptionsRequest",[{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"tracks",kind:"message",repeat:1,T:()=>q_}])}};const H_=new class extends pS{constructor(){super("stream.video.sfu.signal.UpdateSubscriptionsResponse",[{no:4,name:"error",kind:"message",T:()=>y_}])}};const q_=new class extends pS{constructor(){super("stream.video.sfu.signal.TrackSubscriptionDetails",[{no:1,name:"user_id",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"track_type",kind:"enum",T:()=>["stream.video.sfu.models.TrackType",QT,"TRACK_TYPE_"]},{no:4,name:"dimension",kind:"message",T:()=>d_}])}};const W_=new class extends pS{constructor(){super("stream.video.sfu.signal.SendAnswerRequest",[{no:1,name:"peer_type",kind:"enum",T:()=>["stream.video.sfu.models.PeerType",GT,"PEER_TYPE_"]},{no:2,name:"sdp",kind:"scalar",T:9},{no:3,name:"session_id",kind:"scalar",T:9}])}};const K_=new class extends pS{constructor(){super("stream.video.sfu.signal.SendAnswerResponse",[{no:4,name:"error",kind:"message",T:()=>y_}])}};const G_=new class extends pS{constructor(){super("stream.video.sfu.signal.ICETrickleResponse",[{no:4,name:"error",kind:"message",T:()=>y_}])}};const J_=new class extends pS{constructor(){super("stream.video.sfu.signal.SetPublisherRequest",[{no:1,name:"sdp",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"tracks",kind:"message",repeat:1,T:()=>v_}])}};const Y_=new class extends pS{constructor(){super("stream.video.sfu.signal.SetPublisherResponse",[{no:1,name:"sdp",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"ice_restart",kind:"scalar",T:8},{no:4,name:"error",kind:"message",T:()=>y_}])}},Q_=new class{constructor(e,t,n){this.typeName=e,this.methods=t.map((e=>function(e,t){var n,r,i;let s=e;return s.service=t,s.localName=null!==(n=s.localName)&&void 0!==n?n:mw(s.name),s.serverStreaming=!!s.serverStreaming,s.clientStreaming=!!s.clientStreaming,s.options=null!==(r=s.options)&&void 0!==r?r:{},s.idempotency=null!==(i=s.idempotency)&&void 0!==i?i:void 0,s}(e,this))),this.options=null!==n&&void 0!==n?n:{}}}("stream.video.sfu.signal.SignalServer",[{name:"SetPublisher",options:{},I:J_,O:Y_},{name:"SendAnswer",options:{},I:W_,O:K_},{name:"IceTrickle",options:{},I:g_,O:G_},{name:"UpdateSubscriptions",options:{},I:z_,O:H_},{name:"UpdateMuteStates",options:{},I:V_,O:$_},{name:"IceRestart",options:{},I:F_,O:U_},{name:"SendStats",options:{},I:j_,O:M_},{name:"StartNoiseCancellation",options:{},I:P_,O:A_},{name:"StopNoiseCancellation",options:{},I:N_,O:O_}]);const X_=new class extends pS{constructor(){super("stream.video.sfu.event.SfuEvent",[{no:1,name:"subscriber_offer",kind:"message",oneof:"eventPayload",T:()=>vx},{no:2,name:"publisher_answer",kind:"message",oneof:"eventPayload",T:()=>yx},{no:3,name:"connection_quality_changed",kind:"message",oneof:"eventPayload",T:()=>bx},{no:4,name:"audio_level_changed",kind:"message",oneof:"eventPayload",T:()=>Cx},{no:5,name:"ice_trickle",kind:"message",oneof:"eventPayload",T:()=>g_},{no:6,name:"change_publish_quality",kind:"message",oneof:"eventPayload",T:()=>xx},{no:10,name:"participant_joined",kind:"message",oneof:"eventPayload",T:()=>fx},{no:11,name:"participant_left",kind:"message",oneof:"eventPayload",T:()=>mx},{no:12,name:"dominant_speaker_changed",kind:"message",oneof:"eventPayload",T:()=>Sx},{no:13,name:"join_response",kind:"message",oneof:"eventPayload",T:()=>px},{no:14,name:"health_check_response",kind:"message",oneof:"eventPayload",T:()=>ax},{no:16,name:"track_published",kind:"message",oneof:"eventPayload",T:()=>lx},{no:17,name:"track_unpublished",kind:"message",oneof:"eventPayload",T:()=>cx},{no:18,name:"error",kind:"message",oneof:"eventPayload",T:()=>nx},{no:19,name:"call_grants_updated",kind:"message",oneof:"eventPayload",T:()=>Ix},{no:20,name:"go_away",kind:"message",oneof:"eventPayload",T:()=>Rx},{no:21,name:"ice_restart",kind:"message",oneof:"eventPayload",T:()=>rx},{no:22,name:"pins_updated",kind:"message",oneof:"eventPayload",T:()=>tx},{no:23,name:"call_ended",kind:"message",oneof:"eventPayload",T:()=>Px},{no:24,name:"participant_updated",kind:"message",oneof:"eventPayload",T:()=>gx},{no:25,name:"participant_migration_complete",kind:"message",oneof:"eventPayload",T:()=>ex},{no:27,name:"change_publish_options",kind:"message",oneof:"eventPayload",T:()=>Z_}])}};const Z_=new class extends pS{constructor(){super("stream.video.sfu.event.ChangePublishOptions",[{no:1,name:"publish_options",kind:"message",repeat:1,T:()=>f_},{no:2,name:"reason",kind:"scalar",T:9}])}};new class extends pS{constructor(){super("stream.video.sfu.event.ChangePublishOptionsComplete",[])}};const ex=new class extends pS{constructor(){super("stream.video.sfu.event.ParticipantMigrationComplete",[])}};const tx=new class extends pS{constructor(){super("stream.video.sfu.event.PinsChanged",[{no:1,name:"pins",kind:"message",repeat:1,T:()=>l_}])}};const nx=new class extends pS{constructor(){super("stream.video.sfu.event.Error",[{no:4,name:"error",kind:"message",T:()=>y_},{no:5,name:"reconnect_strategy",kind:"enum",T:()=>["stream.video.sfu.models.WebsocketReconnectStrategy",r_,"WEBSOCKET_RECONNECT_STRATEGY_"]}])}};new class extends pS{constructor(){super("stream.video.sfu.event.ICETrickle",[{no:1,name:"peer_type",kind:"enum",T:()=>["stream.video.sfu.models.PeerType",GT,"PEER_TYPE_"]},{no:2,name:"ice_candidate",kind:"scalar",T:9}])}};const rx=new class extends pS{constructor(){super("stream.video.sfu.event.ICERestart",[{no:1,name:"peer_type",kind:"enum",T:()=>["stream.video.sfu.models.PeerType",GT,"PEER_TYPE_"]}])}};const ix=new class extends pS{constructor(){super("stream.video.sfu.event.SfuRequest",[{no:1,name:"join_request",kind:"message",oneof:"requestPayload",T:()=>ux},{no:2,name:"health_check_request",kind:"message",oneof:"requestPayload",T:()=>ox},{no:3,name:"leave_call_request",kind:"message",oneof:"requestPayload",T:()=>sx}])}};const sx=new class extends pS{constructor(){super("stream.video.sfu.event.LeaveCallRequest",[{no:1,name:"session_id",kind:"scalar",T:9},{no:2,name:"reason",kind:"scalar",T:9}])}};const ox=new class extends pS{constructor(){super("stream.video.sfu.event.HealthCheckRequest",[])}};const ax=new class extends pS{constructor(){super("stream.video.sfu.event.HealthCheckResponse",[{no:1,name:"participant_count",kind:"message",T:()=>a_}])}};const lx=new class extends pS{constructor(){super("stream.video.sfu.event.TrackPublished",[{no:1,name:"user_id",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"type",kind:"enum",T:()=>["stream.video.sfu.models.TrackType",QT,"TRACK_TYPE_"]},{no:4,name:"participant",kind:"message",T:()=>c_}])}};const cx=new class extends pS{constructor(){super("stream.video.sfu.event.TrackUnpublished",[{no:1,name:"user_id",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"type",kind:"enum",T:()=>["stream.video.sfu.models.TrackType",QT,"TRACK_TYPE_"]},{no:4,name:"cause",kind:"enum",T:()=>["stream.video.sfu.models.TrackUnpublishReason",e_,"TRACK_UNPUBLISH_REASON_"]},{no:5,name:"participant",kind:"message",T:()=>c_}])}};const ux=new class extends pS{constructor(){super("stream.video.sfu.event.JoinRequest",[{no:1,name:"token",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"subscriber_sdp",kind:"scalar",T:9},{no:8,name:"publisher_sdp",kind:"scalar",T:9},{no:4,name:"client_details",kind:"message",T:()=>b_},{no:5,name:"migration",kind:"message",T:()=>hx},{no:6,name:"fast_reconnect",kind:"scalar",T:8},{no:7,name:"reconnect_details",kind:"message",T:()=>dx},{no:9,name:"preferred_publish_options",kind:"message",repeat:1,T:()=>f_},{no:10,name:"preferred_subscribe_options",kind:"message",repeat:1,T:()=>p_}])}};const dx=new class extends pS{constructor(){super("stream.video.sfu.event.ReconnectDetails",[{no:1,name:"strategy",kind:"enum",T:()=>["stream.video.sfu.models.WebsocketReconnectStrategy",r_,"WEBSOCKET_RECONNECT_STRATEGY_"]},{no:3,name:"announced_tracks",kind:"message",repeat:1,T:()=>v_},{no:4,name:"subscriptions",kind:"message",repeat:1,T:()=>q_},{no:5,name:"reconnect_attempt",kind:"scalar",T:13},{no:6,name:"from_sfu_id",kind:"scalar",T:9},{no:7,name:"previous_session_id",kind:"scalar",T:9}])}};const hx=new class extends pS{constructor(){super("stream.video.sfu.event.Migration",[{no:1,name:"from_sfu_id",kind:"scalar",T:9},{no:2,name:"announced_tracks",kind:"message",repeat:1,T:()=>v_},{no:3,name:"subscriptions",kind:"message",repeat:1,T:()=>q_}])}};const px=new class extends pS{constructor(){super("stream.video.sfu.event.JoinResponse",[{no:1,name:"call_state",kind:"message",T:()=>o_},{no:2,name:"reconnected",kind:"scalar",T:8},{no:3,name:"fast_reconnect_deadline_seconds",kind:"scalar",T:5},{no:4,name:"publish_options",kind:"message",repeat:1,T:()=>f_}])}};const fx=new class extends pS{constructor(){super("stream.video.sfu.event.ParticipantJoined",[{no:1,name:"call_cid",kind:"scalar",T:9},{no:2,name:"participant",kind:"message",T:()=>c_}])}};const mx=new class extends pS{constructor(){super("stream.video.sfu.event.ParticipantLeft",[{no:1,name:"call_cid",kind:"scalar",T:9},{no:2,name:"participant",kind:"message",T:()=>c_}])}};const gx=new class extends pS{constructor(){super("stream.video.sfu.event.ParticipantUpdated",[{no:1,name:"call_cid",kind:"scalar",T:9},{no:2,name:"participant",kind:"message",T:()=>c_}])}};const vx=new class extends pS{constructor(){super("stream.video.sfu.event.SubscriberOffer",[{no:1,name:"ice_restart",kind:"scalar",T:8},{no:2,name:"sdp",kind:"scalar",T:9}])}};const yx=new class extends pS{constructor(){super("stream.video.sfu.event.PublisherAnswer",[{no:1,name:"sdp",kind:"scalar",T:9}])}};const bx=new class extends pS{constructor(){super("stream.video.sfu.event.ConnectionQualityChanged",[{no:1,name:"connection_quality_updates",kind:"message",repeat:1,T:()=>wx}])}};const wx=new class extends pS{constructor(){super("stream.video.sfu.event.ConnectionQualityInfo",[{no:1,name:"user_id",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"connection_quality",kind:"enum",T:()=>["stream.video.sfu.models.ConnectionQuality",JT,"CONNECTION_QUALITY_"]}])}};const Sx=new class extends pS{constructor(){super("stream.video.sfu.event.DominantSpeakerChanged",[{no:1,name:"user_id",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9}])}};const kx=new class extends pS{constructor(){super("stream.video.sfu.event.AudioLevel",[{no:1,name:"user_id",kind:"scalar",T:9},{no:2,name:"session_id",kind:"scalar",T:9},{no:3,name:"level",kind:"scalar",T:2},{no:4,name:"is_speaking",kind:"scalar",T:8}])}};const Cx=new class extends pS{constructor(){super("stream.video.sfu.event.AudioLevelChanged",[{no:1,name:"audio_levels",kind:"message",repeat:1,T:()=>kx}])}};const Ex=new class extends pS{constructor(){super("stream.video.sfu.event.AudioSender",[{no:2,name:"codec",kind:"message",T:()=>m_},{no:3,name:"track_type",kind:"enum",T:()=>["stream.video.sfu.models.TrackType",QT,"TRACK_TYPE_"]},{no:4,name:"publish_option_id",kind:"scalar",T:5}])}};const Tx=new class extends pS{constructor(){super("stream.video.sfu.event.VideoLayerSetting",[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"active",kind:"scalar",T:8},{no:3,name:"max_bitrate",kind:"scalar",T:5},{no:4,name:"scale_resolution_down_by",kind:"scalar",T:2},{no:6,name:"codec",kind:"message",T:()=>m_},{no:7,name:"max_framerate",kind:"scalar",T:13},{no:8,name:"scalability_mode",kind:"scalar",T:9}])}};const _x=new class extends pS{constructor(){super("stream.video.sfu.event.VideoSender",[{no:2,name:"codec",kind:"message",T:()=>m_},{no:3,name:"layers",kind:"message",repeat:1,T:()=>Tx},{no:4,name:"track_type",kind:"enum",T:()=>["stream.video.sfu.models.TrackType",QT,"TRACK_TYPE_"]},{no:5,name:"publish_option_id",kind:"scalar",T:5}])}};const xx=new class extends pS{constructor(){super("stream.video.sfu.event.ChangePublishQuality",[{no:1,name:"audio_senders",kind:"message",repeat:1,T:()=>Ex},{no:2,name:"video_senders",kind:"message",repeat:1,T:()=>_x}])}};const Ix=new class extends pS{constructor(){super("stream.video.sfu.event.CallGrantsUpdated",[{no:1,name:"current_grants",kind:"message",T:()=>T_},{no:2,name:"message",kind:"scalar",T:9}])}};const Rx=new class extends pS{constructor(){super("stream.video.sfu.event.GoAway",[{no:1,name:"reason",kind:"enum",T:()=>["stream.video.sfu.models.GoAwayReason",t_,"GO_AWAY_REASON_"]}])}};const Px=new class extends pS{constructor(){super("stream.video.sfu.event.CallEnded",[{no:1,name:"reason",kind:"enum",T:()=>["stream.video.sfu.models.CallEndedReason",n_,"CALL_ENDED_REASON_"]}])}};var Ax,Nx;!function(e){e.UNKNOWN="UNKNOWN",e.VISIBLE="VISIBLE",e.INVISIBLE="INVISIBLE"}(Ax||(Ax={})),function(e){e[e.IMMEDIATE=20]="IMMEDIATE",e[e.FAST=100]="FAST",e[e.MEDIUM=600]="MEDIUM",e[e.SLOW=1200]="SLOW"}(Nx||(Nx={}));class Ox{constructor(e){this._transport=e,this.typeName=Q_.typeName,this.methods=Q_.methods,this.options=Q_.options}setPublisher(e,t){const n=this.methods[0],r=this._transport.mergeOptions(t);return fS("unary",this._transport,n,r,e)}sendAnswer(e,t){const n=this.methods[1],r=this._transport.mergeOptions(t);return fS("unary",this._transport,n,r,e)}iceTrickle(e,t){const n=this.methods[2],r=this._transport.mergeOptions(t);return fS("unary",this._transport,n,r,e)}updateSubscriptions(e,t){const n=this.methods[3],r=this._transport.mergeOptions(t);return fS("unary",this._transport,n,r,e)}updateMuteStates(e,t){const n=this.methods[4],r=this._transport.mergeOptions(t);return fS("unary",this._transport,n,r,e)}iceRestart(e,t){const n=this.methods[5],r=this._transport.mergeOptions(t);return fS("unary",this._transport,n,r,e)}sendStats(e,t){const n=this.methods[6],r=this._transport.mergeOptions(t);return fS("unary",this._transport,n,r,e)}startNoiseCancellation(e,t){const n=this.methods[7],r=this._transport.mergeOptions(t);return fS("unary",this._transport,n,r,e)}stopNoiseCancellation(e,t){const n=this.methods[8],r=this._transport.mergeOptions(t);return fS("unary",this._transport,n,r,e)}}const Dx={baseUrl:"",sendJson:!0,timeout:5e3,jsonOptions:{ignoreUnknownFields:!0}},Lx=(e,t)=>({interceptUnary:(n,r,i,s)=>{let o;try{o=n(r,i,s)}finally{e(t,`Invoked SFU RPC method ${r.name}`,{request:o?.request,headers:o?.requestHeaders,response:o?.response})}return o}}),jx=e=>new Promise((t=>setTimeout(t,e)));function Mx(e){return e&&("[object Function]"===Object.prototype.toString.call(e)||"function"===typeof e||e instanceof Function)}const Fx=40,Ux=1e3;function Vx(e){const t=Math.min(500+2e3*e,5e3),n=Math.min(Math.max(250,2e3*(e-1)),5e3);return Math.floor(Math.random()*(t-n)+n)}function $x(e){let t="";for(let n=0;n<e.length;n++)t+=e[n].toString(16).padStart(2,"0");return t}function Bx(){const e=function(e){const t=new Uint8Array(e);return zx(t),t}(16);return e[6]=15&e[6]|64,e[8]=191&e[8]|128,[$x(e.subarray(0,4)),$x(e.subarray(4,6)),$x(e.subarray(6,8)),$x(e.subarray(8,10)),$x(e.subarray(10,16))].join("-")}const zx="undefined"!==typeof crypto&&crypto.getRandomValues?crypto.getRandomValues.bind(crypto):function(e){const t=Math.pow(2,8*e.byteLength/e.length);for(let n=0;n<e.length;n++)e[n]=Math.random()*t};function Hx(e){"undefined"!==typeof window&&window.addEventListener&&(window.addEventListener("offline",e),window.addEventListener("online",e))}function qx(e){"undefined"!==typeof window&&window.removeEventListener&&(window.removeEventListener("offline",e),window.removeEventListener("online",e))}const Wx=()=>"undefined"!==typeof navigator&&"reactnative"===navigator.product?.toLowerCase(),Kx=Object.freeze({trace:0,debug:1,info:2,warn:3,error:4});let Gx,Jx="info";const Yx=function(e,t){let n;switch(e){case"error":if(Wx()){t=`ERROR: ${t}`,n=console.info;break}n=console.error;break;case"warn":if(Wx()){t=`WARN: ${t}`,n=console.info;break}n=console.warn;break;case"info":n=console.info;break;case"trace":n=console.trace;break;default:n=console.log}for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];n(t,...i)},Qx=e=>{Jx=e},Xx=()=>Jx,Zx=e=>{const t=Gx||Yx,n=(e||[]).filter(Boolean).join(":");return function(e,r){if(Kx[e]>=Kx[Jx]){for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];t(e,`[${n}]: ${r}`,...s)}}},eI=async(e,t)=>{let n,r=0;do{r>0&&await jx(Vx(r));try{n=await e()}catch(i){if(i instanceof mS&&i.code===OC[OC.cancelled]||(t?.aborted??!1))throw i;Zx(["sfu-client","rpc"])("debug",`rpc failed (${r})`,i),r++}}while(!n||n.response.error?.shouldRetry);return n},tI=async e=>{const t=new RTCPeerConnection;t.addTransceiver("video",{direction:e}),t.addTransceiver("audio",{direction:e});const n=(await t.createOffer()).sdp??"";return t.getTransceivers().forEach((e=>{e.stop?.()})),t.close(),n},nI=e=>!!e&&("vp9"===(e=e.toLowerCase())||"av1"===e||"video/vp9"===e||"video/av1"===e),rI={subscriberOffer:void 0,publisherAnswer:void 0,connectionQualityChanged:void 0,audioLevelChanged:void 0,iceTrickle:void 0,changePublishQuality:void 0,participantJoined:void 0,participantLeft:void 0,dominantSpeakerChanged:void 0,joinResponse:void 0,healthCheckResponse:void 0,trackPublished:void 0,trackUnpublished:void 0,error:void 0,callGrantsUpdated:void 0,goAway:void 0,iceRestart:void 0,pinsUpdated:void 0,callEnded:void 0,participantUpdated:void 0,participantMigrationComplete:void 0,changePublishOptions:void 0},iI=e=>Object.prototype.hasOwnProperty.call(rI,e);class sI{constructor(){var e=this;this.logger=Zx(["Dispatcher"]),this.subscribers={},this.dispatch=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0";const r=t.eventPayload.oneofKind;if(!r)return;const i=t.eventPayload[r];e.logger("debug",`Dispatching ${r}, tag=${n}`,i);const s=e.subscribers[r];if(s)for(const a of s)try{a(i)}catch(o){e.logger("warn","Listener failed with error",o)}},this.on=(e,t)=>{var n;return((n=this.subscribers)[e]??(n[e]=[])).push(t),()=>{this.off(e,t)}},this.off=(e,t)=>{this.subscribers[e]=(this.subscribers[e]||[]).filter((e=>e!==t))}}}class oI{constructor(){this.subscriberCandidates=new wE,this.publisherCandidates=new wE,this.push=e=>{const t=aI(e);if(t)if(e.peerType===GT.SUBSCRIBER)this.subscriberCandidates.next(t);else if(e.peerType===GT.PUBLISHER_UNSPECIFIED)this.publisherCandidates.next(t);else{Zx(["sfu-client"])("warn","ICETrickle, Unknown peer type",e)}},this.dispose=()=>{this.subscriberCandidates.complete(),this.publisherCandidates.complete()}}}const aI=e=>{try{return JSON.parse(e.iceCandidate)}catch(t){return void Zx(["sfu-client"])("error","Failed to parse ICE Trickle",t,e)}},lI=dI((function(e,t){let n=!1;return{cb:()=>t().finally((()=>{n||uI.delete(e)})),onContinued:()=>n=!0}})),cI=dI((function(e,t){const n=new AbortController;return{cb:()=>n.signal.aborted?Promise.resolve("canceled"):t(n.signal).finally((()=>{n.signal.aborted||uI.delete(e)})),onContinued:()=>n.abort()}})),uI=new Map;function dI(e){return function(t,n){const{cb:r,onContinued:i}=e(t,n),s=uI.get(t);s?.onContinued();const o=s?s.promise.then(r,r):r();return uI.set(t,{promise:o,onContinued:i}),o}}const hI=e=>{let t,n;if(QE([e]).subscribe({next:e=>{let[n]=e;t=n},error:e=>{n=e}}).unsubscribe(),n)throw n;return t},pI=(e,t)=>{const n=(e=>"function"===typeof e)(t)?t(hI(e)):t;return e.next(n),n},fI=(e,t)=>{const n=e.getValue(),r=pI(e,t);return{lastValue:n,value:r,rollback:()=>pI(e,n)}},mI=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e=>Zx(["RxUtils"])("warn","An observable emitted an error",e);const r=e.subscribe({next:t,error:n});return()=>{r.unsubscribe()}},gI=(e,t)=>{const n=Symbol();return mI(e,(e=>{lI(n,(()=>t(e)))}))};var vI,yI=Object.freeze({__proto__:null,createSafeAsyncSubscription:gI,createSubscription:mI,getCurrentValue:hI,setCurrentValue:pI,updateValue:fI});!function(e){e.UNKNOWN="unknown",e.IDLE="idle",e.RINGING="ringing",e.JOINING="joining",e.JOINED="joined",e.LEFT="left",e.RECONNECTING="reconnecting",e.MIGRATING="migrating",e.RECONNECTING_FAILED="reconnecting-failed",e.OFFLINE="offline"}(vI||(vI={}));class bI{constructor(){this.connectedUserSubject=new ZE(void 0),this.callsSubject=new ZE([]),this.setConnectedUser=e=>pI(this.connectedUserSubject,e),this.setCalls=e=>pI(this.callsSubject,e),this.registerCall=e=>{this.calls.find((t=>t.cid===e.cid))||this.setCalls((t=>[...t,e]))},this.unregisterCall=e=>(Zx(["client-state"])("trace",`Unregistering call: ${e.cid}`),this.setCalls((t=>t.filter((t=>t!==e))))),this.findCall=(e,t)=>this.calls.find((n=>n.type===e&&n.id===t)),this.connectedUserSubject.subscribe((async e=>{if(!e){const e=Zx(["client-state"]);for(const t of this.calls)t.state.callingState!==vI.LEFT&&(e("info",`User disconnected, leaving call: ${t.cid}`),await t.leave({reason:"client.disconnectUser() called"}).catch((n=>{e("error",`Error leaving call: ${t.cid}`,n)})))}}))}get connectedUser(){return hI(this.connectedUserSubject)}get calls(){return hI(this.callsSubject)}}class wI{constructor(e){this.getCurrentValue=hI,this.connectedUser$=e.connectedUserSubject.asObservable(),this.calls$=e.callsSubject.asObservable()}get connectedUser(){return hI(this.connectedUser$)}get calls(){return hI(this.calls$)}}const SI=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(e,n)=>{for(const r of t){const t=r(e,n);if(0!==t)return t}return 0}},kI=e=>t=>(n,r)=>e(n,r)?t(n,r):0,CI=e=>e.publishedTracks.includes(QT.VIDEO),EI=e=>e.publishedTracks.includes(QT.AUDIO),TI=e=>e.publishedTracks.includes(QT.SCREEN_SHARE),_I=e=>e.publishedTracks.includes(QT.SCREEN_SHARE_AUDIO),xI=e=>!!e.pin&&(e.pin.isLocalPin||e.pin.pinnedAt>0),II=(e,t)=>e.isDominantSpeaker&&!t.isDominantSpeaker?-1:!e.isDominantSpeaker&&t.isDominantSpeaker?1:0,RI=(e,t)=>e.isSpeaking&&!t.isSpeaking?-1:!e.isSpeaking&&t.isSpeaking?1:0,PI=(e,t)=>TI(e)&&!TI(t)?-1:!TI(e)&&TI(t)?1:0,AI=(e,t)=>CI(e)&&!CI(t)?-1:!CI(e)&&CI(t)?1:0,NI=(e,t)=>EI(e)&&!EI(t)?-1:!EI(e)&&EI(t)?1:0,OI=(e,t)=>{if(e.pin&&t.pin){if(!e.pin.isLocalPin&&t.pin.isLocalPin)return-1;if(e.pin.isLocalPin&&!t.pin.isLocalPin)return 1;if(e.pin.pinnedAt>t.pin.pinnedAt)return-1;if(e.pin.pinnedAt<t.pin.pinnedAt)return 1}return e.pin&&!t.pin?-1:!e.pin&&t.pin?1:0},DI=e=>(t,n)=>t.reaction?.type===e&&n.reaction?.type!==e?-1:t.reaction?.type!==e&&n.reaction?.type===e?1:0,LI=(e,t)=>(e.roles||[]).some((e=>t.includes(e))),jI=kI(((e,t)=>e.viewportVisibilityState?.videoTrack===Ax.INVISIBLE||t.viewportVisibilityState?.videoTrack===Ax.INVISIBLE)),MI=kI(((e,t)=>e.viewportVisibilityState?.videoTrack===Ax.INVISIBLE||e.viewportVisibilityState?.videoTrack===Ax.UNKNOWN||t.viewportVisibilityState?.videoTrack===Ax.INVISIBLE||t.viewportVisibilityState?.videoTrack===Ax.UNKNOWN)),FI=SI(OI,PI,jI(SI(II,RI,DI("raised-hand"),AI,NI))),UI=SI(OI,PI,II,jI(SI(RI,DI("raised-hand"),AI,NI))),VI=SI(OI,MI(SI(II,RI,DI("raised-hand"),AI,NI))),$I=SI(jI(SI(II,RI,DI("raised-hand"),AI,NI)),function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(e,n)=>LI(e,t)&&!LI(n,t)?-1:!LI(e,t)&&LI(n,t)?1:0}("admin","host","speaker")),BI={broadcasting:!1,hls:{playlist_url:"",status:""},rtmps:[]};class zI{constructor(){this.backstageSubject=new ZE(!0),this.blockedUserIdsSubject=new ZE([]),this.createdAtSubject=new ZE(new Date),this.endedAtSubject=new ZE(void 0),this.startsAtSubject=new ZE(void 0),this.updatedAtSubject=new ZE(new Date),this.createdBySubject=new ZE(void 0),this.customSubject=new ZE({}),this.egressSubject=new ZE(void 0),this.ingressSubject=new ZE(void 0),this.recordingSubject=new ZE(!1),this.sessionSubject=new ZE(void 0),this.settingsSubject=new ZE(void 0),this.transcribingSubject=new ZE(!1),this.captioningSubject=new ZE(!1),this.endedBySubject=new ZE(void 0),this.thumbnailsSubject=new ZE(void 0),this.membersSubject=new ZE([]),this.ownCapabilitiesSubject=new ZE([]),this.callingStateSubject=new ZE(vI.UNKNOWN),this.startedAtSubject=new ZE(void 0),this.participantCountSubject=new ZE(0),this.anonymousParticipantCountSubject=new ZE(0),this.participantsSubject=new ZE([]),this.callStatsReportSubject=new ZE(void 0),this.closedCaptionsSubject=new ZE([]),this.orphanedTracks=[],this.logger=Zx(["CallState"]),this.sortParticipantsBy=FI,this.closedCaptionsTasks=new Map,this.dispose=()=>{for(const[e,t]of this.closedCaptionsTasks.entries())clearTimeout(t),this.closedCaptionsTasks.delete(e)},this.setSortParticipantsBy=e=>{this.sortParticipantsBy=e,this.setCurrentValue(this.participantsSubject,(e=>e))},this.getCurrentValue=hI,this.setCurrentValue=pI,this.setParticipantCount=e=>this.setCurrentValue(this.participantCountSubject,e),this.setStartedAt=e=>this.setCurrentValue(this.startedAtSubject,e),this.setCaptioning=e=>fI(this.captioningSubject,e),this.setAnonymousParticipantCount=e=>this.setCurrentValue(this.anonymousParticipantCountSubject,e),this.setParticipants=e=>this.setCurrentValue(this.participantsSubject,e),this.setCallingState=e=>this.setCurrentValue(this.callingStateSubject,e),this.setCallStatsReport=e=>this.setCurrentValue(this.callStatsReportSubject,e),this.setMembers=e=>{this.setCurrentValue(this.membersSubject,e)},this.setOwnCapabilities=e=>this.setCurrentValue(this.ownCapabilitiesSubject,e),this.setEndedAt=e=>this.setCurrentValue(this.endedAtSubject,e),this.findParticipantBySessionId=e=>this.participants.find((t=>t.sessionId===e)),this.getParticipantLookupBySessionId=()=>this.participants.reduce(((e,t)=>(e[t.sessionId]=t,e)),{}),this.updateParticipant=(e,t)=>{const n=this.findParticipantBySessionId(e);if(!n)return void this.logger("warn",`Participant with sessionId ${e} not found`);const r="function"===typeof t?t(n):t,i={...n,...r};return this.setParticipants((t=>t.map((t=>t.sessionId===e?i:t))))},this.updateOrAddParticipant=(e,t)=>this.setParticipants((n=>{let r=!0;const i=n.map((n=>n.sessionId===e?(r=!1,{...n,...t}):n));return r&&i.push(t),i})),this.updateParticipants=e=>0===Object.keys(e).length?this.participants:this.setParticipants((t=>t.map((t=>{const n=e[t.sessionId];return n?{...t,...n}:t})))),this.updateParticipantTracks=(e,t)=>this.updateParticipants(Object.entries(t).reduce(((t,n)=>{let[r,i]=n;i.dimension&&(i.dimension.height=Math.ceil(i.dimension.height),i.dimension.width=Math.ceil(i.dimension.width));const s="videoTrack"===e?"videoDimension":"screenShareTrack"===e?"screenShareDimension":void 0;return s&&(t[r]={[s]:i.dimension}),t}),{})),this.updateFromEvent=e=>{const t=this.eventHandlers[e.type];t&&t(e)},this.setServerSidePins=e=>{const t=e.reduce(((e,t)=>(e[t.sessionId]=Date.now(),e)),{});return this.setParticipants((e=>e.map((e=>{const n=t[e.sessionId];return n?{...e,pin:{isLocalPin:!1,pinnedAt:n}}:e.pin&&!e.pin.isLocalPin?{...e,pin:void 0}:e}))))},this.registerOrphanedTrack=e=>{this.orphanedTracks.push(e)},this.removeOrphanedTrack=e=>{this.orphanedTracks=this.orphanedTracks.filter((t=>t.id!==e))},this.takeOrphanedTracks=e=>{const t=this.orphanedTracks.filter((t=>t.trackLookupPrefix===e));return t.length>0&&(this.orphanedTracks=this.orphanedTracks.filter((t=>t.trackLookupPrefix!==e))),t},this.updateClosedCaptionSettings=e=>{this.closedCaptionsSettings={...this.closedCaptionsSettings,...e}},this.updateFromCallResponse=e=>{this.setCurrentValue(this.backstageSubject,e.backstage),this.setCurrentValue(this.blockedUserIdsSubject,e.blocked_user_ids),this.setCurrentValue(this.createdAtSubject,new Date(e.created_at)),this.setCurrentValue(this.updatedAtSubject,new Date(e.updated_at)),this.setCurrentValue(this.startsAtSubject,e.starts_at?new Date(e.starts_at):void 0),this.setEndedAt(e.ended_at?new Date(e.ended_at):void 0),this.setCurrentValue(this.createdBySubject,e.created_by),this.setCurrentValue(this.customSubject,e.custom),this.setCurrentValue(this.egressSubject,e.egress),this.setCurrentValue(this.ingressSubject,e.ingress),this.setCurrentValue(this.recordingSubject,e.recording);const t=this.setCurrentValue(this.sessionSubject,e.session);this.updateParticipantCountFromSession(t),this.setCurrentValue(this.settingsSubject,e.settings),this.setCurrentValue(this.transcribingSubject,e.transcribing),this.setCurrentValue(this.captioningSubject,e.captioning),this.setCurrentValue(this.thumbnailsSubject,e.thumbnails)},this.updateFromSfuCallState=(e,t,n)=>{const{participants:r,participantCount:i,startedAt:s,pins:o}=e,a=n?.announcedTracks.map((e=>e.trackType))??[];this.setParticipants((()=>{const e=this.getParticipantLookupBySessionId();return r.map((n=>{const r=e[n.sessionId],i=n.sessionId===t;return Object.assign({},r,n,{isLocalParticipant:i,publishedTracks:i?a:n.publishedTracks,viewportVisibilityState:r?.viewportVisibilityState??{videoTrack:Ax.UNKNOWN,screenShareTrack:Ax.UNKNOWN}})}))})),this.setParticipantCount(i?.total||0),this.setAnonymousParticipantCount(i?.anonymous||0),this.setStartedAt(s?KT.toDate(s):new Date),this.setServerSidePins(o)},this.updateFromMemberRemoved=e=>{this.updateFromCallResponse(e.call),this.setCurrentValue(this.membersSubject,(t=>t.filter((t=>-1===e.members.indexOf(t.user_id)))))},this.updateFromMemberAdded=e=>{this.updateFromCallResponse(e.call),this.setCurrentValue(this.membersSubject,(t=>[...t,...e.members]))},this.updateFromHLSBroadcastStopped=()=>{this.setCurrentValue(this.egressSubject,(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:BI;return{...e,broadcasting:!1,hls:{...e.hls,status:""}}}))},this.updateFromHLSBroadcastingFailed=()=>{this.setCurrentValue(this.egressSubject,(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:BI;return{...e,broadcasting:!1,hls:{...e.hls,status:""}}}))},this.updateParticipantCountFromSession=e=>{if(!e||this.callingState===vI.JOINED)return;const t=Object.values(e.participants_count_by_role).reduce(((e,t)=>e+t),0),n=Math.max(t,e.participants.length);this.setParticipantCount(n),this.setAnonymousParticipantCount(e.anonymous_participant_count||0)},this.updateFromSessionParticipantCountUpdate=e=>{const t=this.setCurrentValue(this.sessionSubject,(t=>t?{...t,anonymous_participant_count:e.anonymous_participant_count,participants_count_by_role:e.participants_count_by_role}:t));this.updateParticipantCountFromSession(t)},this.updateFromSessionParticipantLeft=e=>{const t=this.setCurrentValue(this.sessionSubject,(t=>{if(!t)return t;const{participants:n,participants_count_by_role:r}=t,{user:i,user_session_id:s}=e.participant;return{...t,participants:n.filter((e=>e.user_session_id!==s)),participants_count_by_role:{...r,[i.role]:Math.max(0,(r[i.role]||0)-1)}}}));this.updateParticipantCountFromSession(t)},this.updateFromSessionParticipantJoined=e=>{const t=this.setCurrentValue(this.sessionSubject,(t=>{if(!t)return t;const{participants:n,participants_count_by_role:r}=t,{user:i,user_session_id:s}=e.participant;let o=!0;const a=n.map((t=>t.user_session_id===s?(o=!1,e.participant):t));o&&a.push(e.participant);const l=o?1:0;return{...t,participants:a,participants_count_by_role:{...r,[i.role]:(r[i.role]||0)+l}}}));this.updateParticipantCountFromSession(t)},this.updateMembers=e=>{this.updateFromCallResponse(e.call),this.setCurrentValue(this.membersSubject,(t=>t.map((t=>{const n=e.members.find((e=>e.user_id===t.user_id));return n||t}))))},this.updateParticipantReaction=e=>{const{user:t,custom:n,type:r,emoji_code:i}=e.reaction;this.setParticipants((e=>e.map((e=>e.userId!==t.id?e:{...e,reaction:{type:r,emoji_code:i,custom:n}}))))},this.unblockUser=e=>{this.setCurrentValue(this.blockedUserIdsSubject,(t=>t?t.filter((t=>t!==e.user.id)):t))},this.blockUser=e=>{this.setCurrentValue(this.blockedUserIdsSubject,(t=>[...t||[],e.user.id]))},this.updateOwnCapabilities=e=>{e.user.id===this.localParticipant?.userId&&this.setCurrentValue(this.ownCapabilitiesSubject,e.own_capabilities)},this.updateFromClosedCaptions=e=>{this.setCurrentValue(this.closedCaptionsSubject,(t=>{const{closed_caption:n}=e,r=e=>`${e.speaker_id}/${e.start_time}`,i=r(n);if(t.some((e=>r(e)===i)))return t;const s=[...t,n],{visibilityDurationMs:o=2700,maxVisibleCaptions:a=2}=this.closedCaptionsSettings||{};if(o>0){const e=setTimeout((()=>{this.setCurrentValue(this.closedCaptionsSubject,(e=>e.filter((e=>e!==n)))),this.closedCaptionsTasks.delete(i)}),o);this.closedCaptionsTasks.set(i,e);for(let t=0;t<s.length-a;t++){const e=r(s[t]),n=this.closedCaptionsTasks.get(e);clearTimeout(n),this.closedCaptionsTasks.delete(e)}}return s.slice(-a)}))},this.participants$=this.participantsSubject.asObservable().pipe(WE((e=>e.sort(this.sortParticipantsBy))),tT({bufferSize:1,refCount:!0})),this.localParticipant$=this.participants$.pipe(WE((e=>e.find((e=>e.isLocalParticipant)))),tT({bufferSize:1,refCount:!0})),this.remoteParticipants$=this.participants$.pipe(WE((e=>e.filter((e=>!e.isLocalParticipant)))),tT({bufferSize:1,refCount:!0})),this.pinnedParticipants$=this.participants$.pipe(WE((e=>e.filter((e=>!!e.pin)))),tT({bufferSize:1,refCount:!0})),this.dominantSpeaker$=this.participants$.pipe(WE((e=>e.find((e=>e.isDominantSpeaker)))),tT({bufferSize:1,refCount:!0})),this.hasOngoingScreenShare$=this.participants$.pipe(WE((e=>e.some((e=>TI(e))))),nT(),tT({bufferSize:1,refCount:!0})),this.createdAt$=this.createdAtSubject.asObservable(),this.endedAt$=this.endedAtSubject.asObservable(),this.startsAt$=this.startsAtSubject.asObservable(),this.startedAt$=this.startedAtSubject.asObservable(),this.updatedAt$=this.updatedAtSubject.asObservable(),this.callStatsReport$=this.callStatsReportSubject.asObservable(),this.members$=this.membersSubject.asObservable(),this.createdBy$=this.createdBySubject.asObservable(),this.custom$=this.customSubject.asObservable(),this.egress$=this.egressSubject.asObservable(),this.ingress$=this.ingressSubject.asObservable(),this.session$=this.sessionSubject.asObservable(),this.settings$=this.settingsSubject.asObservable(),this.endedBy$=this.endedBySubject.asObservable(),this.thumbnails$=this.thumbnailsSubject.asObservable(),this.closedCaptions$=this.closedCaptionsSubject.asObservable();const e=(e,t)=>{if(e.length!==t.length)return!1;for(const n of e)if(!t.includes(n))return!1;for(const n of t)if(!e.includes(n))return!1;return!0},t=(e,t)=>e.asObservable().pipe(nT(t));this.anonymousParticipantCount$=t(this.anonymousParticipantCountSubject),this.blockedUserIds$=t(this.blockedUserIdsSubject,e),this.backstage$=t(this.backstageSubject),this.callingState$=t(this.callingStateSubject),this.ownCapabilities$=t(this.ownCapabilitiesSubject,e),this.participantCount$=t(this.participantCountSubject),this.recording$=t(this.recordingSubject),this.transcribing$=t(this.transcribingSubject),this.captioning$=t(this.captioningSubject),this.eventHandlers={"call.permission_request":void 0,"call.recording_ready":void 0,"call.rtmp_broadcast_failed":void 0,"call.rtmp_broadcast_started":void 0,"call.rtmp_broadcast_stopped":void 0,"call.transcription_ready":void 0,"call.user_muted":void 0,"connection.error":void 0,"connection.ok":void 0,"health.check":void 0,"user.updated":void 0,custom:void 0,"call.accepted":e=>this.updateFromCallResponse(e.call),"call.blocked_user":this.blockUser,"call.closed_caption":this.updateFromClosedCaptions,"call.closed_captions_failed":()=>{this.setCurrentValue(this.captioningSubject,!1)},"call.closed_captions_started":()=>{this.setCurrentValue(this.captioningSubject,!0)},"call.closed_captions_stopped":()=>{this.setCurrentValue(this.captioningSubject,!1)},"call.created":e=>this.updateFromCallResponse(e.call),"call.deleted":e=>this.updateFromCallResponse(e.call),"call.ended":e=>{this.updateFromCallResponse(e.call),this.setCurrentValue(this.endedBySubject,e.user)},"call.hls_broadcasting_failed":this.updateFromHLSBroadcastingFailed,"call.hls_broadcasting_started":e=>{this.updateFromCallResponse(e.call)},"call.hls_broadcasting_stopped":this.updateFromHLSBroadcastStopped,"call.live_started":e=>this.updateFromCallResponse(e.call),"call.member_added":this.updateFromMemberAdded,"call.member_removed":this.updateFromMemberRemoved,"call.member_updated_permission":this.updateMembers,"call.member_updated":this.updateMembers,"call.notification":e=>{this.updateFromCallResponse(e.call),this.setMembers(e.members)},"call.permissions_updated":this.updateOwnCapabilities,"call.reaction_new":this.updateParticipantReaction,"call.recording_started":()=>this.setCurrentValue(this.recordingSubject,!0),"call.recording_stopped":()=>this.setCurrentValue(this.recordingSubject,!1),"call.recording_failed":()=>this.setCurrentValue(this.recordingSubject,!1),"call.rejected":e=>this.updateFromCallResponse(e.call),"call.ring":e=>this.updateFromCallResponse(e.call),"call.missed":e=>this.updateFromCallResponse(e.call),"call.session_ended":e=>this.updateFromCallResponse(e.call),"call.session_participant_count_updated":this.updateFromSessionParticipantCountUpdate,"call.session_participant_joined":this.updateFromSessionParticipantJoined,"call.session_participant_left":this.updateFromSessionParticipantLeft,"call.session_started":e=>this.updateFromCallResponse(e.call),"call.transcription_started":()=>{this.setCurrentValue(this.transcribingSubject,!0)},"call.transcription_stopped":()=>{this.setCurrentValue(this.transcribingSubject,!1)},"call.transcription_failed":()=>{this.setCurrentValue(this.transcribingSubject,!1)},"call.unblocked_user":this.unblockUser,"call.updated":e=>this.updateFromCallResponse(e.call)}}get participantCount(){return this.getCurrentValue(this.participantCount$)}get startedAt(){return this.getCurrentValue(this.startedAt$)}get captioning(){return this.getCurrentValue(this.captioning$)}get anonymousParticipantCount(){return this.getCurrentValue(this.anonymousParticipantCount$)}get participants(){return this.getCurrentValue(this.participants$)}get localParticipant(){return this.getCurrentValue(this.localParticipant$)}get remoteParticipants(){return this.getCurrentValue(this.remoteParticipants$)}get dominantSpeaker(){return this.getCurrentValue(this.dominantSpeaker$)}get pinnedParticipants(){return this.getCurrentValue(this.pinnedParticipants$)}get hasOngoingScreenShare(){return this.getCurrentValue(this.hasOngoingScreenShare$)}get callingState(){return this.getCurrentValue(this.callingState$)}get callStatsReport(){return this.getCurrentValue(this.callStatsReport$)}get members(){return this.getCurrentValue(this.members$)}get ownCapabilities(){return this.getCurrentValue(this.ownCapabilities$)}get backstage(){return this.getCurrentValue(this.backstage$)}get blockedUserIds(){return this.getCurrentValue(this.blockedUserIds$)}get createdAt(){return this.getCurrentValue(this.createdAt$)}get endedAt(){return this.getCurrentValue(this.endedAt$)}get startsAt(){return this.getCurrentValue(this.startsAt$)}get updatedAt(){return this.getCurrentValue(this.updatedAt$)}get createdBy(){return this.getCurrentValue(this.createdBy$)}get custom(){return this.getCurrentValue(this.custom$)}get egress(){return this.getCurrentValue(this.egress$)}get ingress(){return this.getCurrentValue(this.ingress$)}get recording(){return this.getCurrentValue(this.recording$)}get session(){return this.getCurrentValue(this.session$)}get settings(){return this.getCurrentValue(this.settings$)}get transcribing(){return this.getCurrentValue(this.transcribing$)}get endedBy(){return this.getCurrentValue(this.endedBy$)}get thumbnails(){return this.getCurrentValue(this.thumbnails$)}get closedCaptions(){return this.getCurrentValue(this.closedCaptions$)}}class HI{constructor(e,t){let{sfuClient:n,connectionConfig:r,state:i,dispatcher:s,onUnrecoverableError:o,logTag:a}=t;this.isIceRestarting=!1,this.isDisposed=!1,this.subscriptions=[],this.on=(e,t)=>{this.subscriptions.push(this.dispatcher.on(e,(n=>{lI(`pc.${e}`,(async()=>t(n))).catch((t=>{this.isDisposed||this.logger("warn",`Error handling ${e}`,t)}))})))},this.addTrickledIceCandidates=()=>{const{iceTrickleBuffer:e}=this.sfuClient,t=this.peerType===GT.SUBSCRIBER?e.subscriberCandidates:e.publisherCandidates;this.unsubscribeIceTrickle?.(),this.unsubscribeIceTrickle=gI(t,(async e=>this.pc.addIceCandidate(e).catch((t=>{this.isDisposed||this.logger("warn","ICE candidate error",t,e)}))))},this.setSfuClient=e=>{this.sfuClient=e},this.getStats=e=>this.pc.getStats(e),this.onIceCandidate=e=>{const{candidate:t}=e;if(!t)return void this.logger("debug","null ice candidate");const n=this.toJSON(t);this.sfuClient.iceTrickle({peerType:this.peerType,iceCandidate:n}).catch((e=>{this.isDisposed||this.logger("warn","ICETrickle failed",e)}))},this.toJSON=e=>{if(!e.usernameFragment){const t=e.candidate.split(" "),n=t.findIndex((e=>"ufrag"===e))+1,r=t[n];return JSON.stringify({...e,usernameFragment:r})}return JSON.stringify(e.toJSON())},this.onIceConnectionStateChange=()=>{const e=this.pc.iceConnectionState;this.logger("debug","ICE connection state changed",e),this.state.callingState!==vI.OFFLINE&&this.state.callingState!==vI.RECONNECTING&&(this.isIceRestarting||"failed"!==e&&"disconnected"!==e||(this.logger("debug","Attempting to restart ICE"),this.restartIce().catch((e=>{this.isDisposed||(this.logger("error","ICE restart failed",e),this.onUnrecoverableError?.())}))))},this.onIceCandidateError=e=>{const t=e instanceof RTCPeerConnectionIceErrorEvent&&`${e.errorCode}: ${e.errorText}`,n=this.pc.iceConnectionState,r="connected"===n||"checking"===n?"debug":"warn";this.logger(r,"ICE Candidate error",t)},this.onIceGatherChange=()=>{this.logger("debug","ICE Gathering State",this.pc.iceGatheringState)},this.onSignalingChange=()=>{this.logger("debug","Signaling state changed",this.pc.signalingState)},this.peerType=e,this.sfuClient=n,this.state=i,this.dispatcher=s,this.onUnrecoverableError=o,this.logger=Zx([e===GT.SUBSCRIBER?"Subscriber":"Publisher",a]),this.pc=new RTCPeerConnection(r),this.pc.addEventListener("icecandidate",this.onIceCandidate),this.pc.addEventListener("icecandidateerror",this.onIceCandidateError),this.pc.addEventListener("iceconnectionstatechange",this.onIceConnectionStateChange),this.pc.addEventListener("icegatheringstatechange",this.onIceGatherChange),this.pc.addEventListener("signalingstatechange",this.onSignalingChange)}dispose(){this.onUnrecoverableError=void 0,this.isDisposed=!0,this.detachEventHandlers(),this.pc.close()}detachEventHandlers(){this.pc.removeEventListener("icecandidate",this.onIceCandidate),this.pc.removeEventListener("icecandidateerror",this.onIceCandidateError),this.pc.removeEventListener("signalingstatechange",this.onSignalingChange),this.pc.removeEventListener("iceconnectionstatechange",this.onIceConnectionStateChange),this.pc.removeEventListener("icegatheringstatechange",this.onIceGatherChange),this.unsubscribeIceTrickle?.(),this.subscriptions.forEach((e=>e()))}}class qI{constructor(){var e=this;this.cache=[],this.layers=[],this.transceiverOrder=[],this.add=(e,t)=>{this.cache.push({publishOption:e,transceiver:t}),this.transceiverOrder.push(t)},this.get=e=>this.findTransceiver(e)?.transceiver,this.has=e=>!!this.get(e),this.find=e=>this.cache.find(e),this.items=()=>this.cache,this.indexOf=e=>this.transceiverOrder.indexOf(e),this.getLayers=e=>{const t=this.layers.find((t=>t.publishOption.id===e.id&&t.publishOption.trackType===e.trackType));return t?.layers},this.setLayers=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const r=e.findLayer(t);r?r.layers=n:e.layers.push({publishOption:t,layers:n})},this.findTransceiver=e=>this.cache.find((t=>t.publishOption.id===e.id&&t.publishOption.trackType===e.trackType)),this.findLayer=e=>this.layers.find((t=>t.publishOption.id===e.id&&t.publishOption.trackType===e.trackType))}}const WI=(e,t)=>{Zx(["helpers"])("warn",t,e)},KI=e=>{switch(e){case QT.SCREEN_SHARE:return"screenShareStream";case QT.SCREEN_SHARE_AUDIO:return"screenShareAudioStream";case QT.VIDEO:return"videoStream";case QT.AUDIO:return"audioStream";case QT.UNSPECIFIED:throw new Error("Track type is unspecified");default:WI(e,"Unknown track type")}},GI=e=>e===QT.AUDIO||e===QT.SCREEN_SHARE_AUDIO,JI={q:3e5,h:75e4,f:125e4},YI=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((e=>{return{rid:e.rid||"",bitrate:e.maxBitrate||0,fps:e.maxFramerate||0,quality:(t=e.rid||"","q"===t?YT.LOW_UNSPECIFIED:"h"===t?YT.MID:YT.HIGH),videoDimension:{width:e.width,height:e.height}};var t}))},QI=(e,t)=>{if(GI(t.trackType))return;const n=[],r=e.getSettings(),{width:i=0,height:s=0}=r,{bitrate:o,codec:a,fps:l,maxSpatialLayers:c=3,maxTemporalLayers:u=3,videoDimension:d={width:1280,height:720}}=t,h=XI(d,i,s,o);let p=1,f=1;const m=nI(a?.name);for(const v of["f","h","q"].slice(0,c)){const e={active:!0,rid:v,width:Math.round(i/p),height:Math.round(s/p),maxBitrate:Math.round(h/f)||JI[v],maxFramerate:l};m?e.scalabilityMode=`L${g=c}T${u}${g>1?"_KEY":""}`:e.scaleResolutionDownBy=p,p*=2,f*=2,n.unshift(e)}var g;return ZI(r,n)},XI=(e,t,n,r)=>{const{width:i,height:s}=e;if(t<i||n<s){const e=t*n/(i*s);return Math.round(r*e)}return r},ZI=(e,t)=>{let n;const r=Math.max(e.width||0,e.height||0);n=r<=320?t.filter((e=>"f"===e.rid)):r<=640?t.filter((e=>"h"!==e.rid)):t;const i=["q","h","f"];return n.map(((e,t)=>({...e,rid:i[t]})))},eR=(e,t,n)=>{if(e.mid)return e.mid;if(!n)return String(t);const r=e.sender.track,i=(0,_T.qg)(n).media.find((e=>e.type===r.kind&&(e.msid?.includes(r.id)??!0)));return"undefined"!==typeof i?.mid?String(i.mid):t<0?"":String(t)};class tR extends HI{constructor(e){var t;let{publishOptions:n,...r}=e;super(GT.PUBLISHER_UNSPECIFIED,r),t=this,this.transceiverCache=new qI,this.clonedTracks=new Set,this.publish=async(e,t)=>{if(!this.publishOptions.some((e=>e.trackType===t)))throw new Error(`No publish options found for ${QT[t]}`);for(const n of this.publishOptions){if(n.trackType!==t)continue;const r=this.cloneTrack(e),i=this.transceiverCache.get(n);if(i){const e=i.sender.track;await i.sender.replaceTrack(r),Wx()||this.stopTrack(e)}else await this.addTransceiver(r,n)}},this.addTransceiver=async(e,t)=>{const n=QI(e,t),r=nI(t.codec?.name)?(e=>{if(!e)return;const t=e=>t=>t.rid===e;return[{...e.find(t("f"))||e.find(t("h"))||e.find(t("q")),rid:"q"}]})(n):n,i=this.pc.addTransceiver(e,{direction:"sendonly",sendEncodings:r}),s=t.trackType;this.logger("debug",`Added ${QT[s]} transceiver`),this.transceiverCache.add(t,i),await this.negotiate()},this.syncPublishOptions=async()=>{for(const e of this.publishOptions){const{trackType:t}=e;if(!this.isPublishing(t))continue;if(this.transceiverCache.has(e))continue;const n=this.transceiverCache.find((e=>!!e.transceiver.sender.track&&e.publishOption.trackType===t));if(!n||!n.transceiver)continue;const r=this.cloneTrack(n.transceiver.sender.track);await this.addTransceiver(r,e)}for(const e of this.transceiverCache.items()){const{publishOption:t,transceiver:n}=e;this.publishOptions.some((e=>e.id===t.id&&e.trackType===t.trackType))||(this.stopTrack(n.sender.track),await n.sender.replaceTrack(null))}},this.isPublishing=e=>{for(const t of this.transceiverCache.items()){if(t.publishOption.trackType!==e)continue;const n=t.transceiver.sender.track;if(n&&("live"===n.readyState&&n.enabled))return!0}return!1},this.getTrackType=e=>{for(const t of this.transceiverCache.items()){const{publishOption:n,transceiver:r}=t;if(r.sender.track?.id===e)return n.trackType}},this.stopTracks=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];for(const i of t.transceiverCache.items()){const{publishOption:e,transceiver:r}=i;n.includes(e.trackType)&&t.stopTrack(r.sender.track)}},this.stopAllTracks=()=>{for(const{transceiver:e}of this.transceiverCache.items())this.stopTrack(e.sender.track);for(const e of this.clonedTracks)this.stopTrack(e)},this.changePublishQuality=async e=>{const{trackType:t,layers:n,publishOptionId:r}=e,i=n.filter((e=>e.active)),s="Update publish quality:";this.logger("info",`${s} requested layers by SFU:`,i);const o=this.transceiverCache.find((e=>e.publishOption.id===r&&e.publishOption.trackType===t)),a=o?.transceiver.sender;if(!a)return this.logger("warn",`${s} no video sender found.`);const l=a.getParameters();if(0===l.encodings.length)return this.logger("warn",`${s} there are no encodings set.`);const c=o?.publishOption.codec?.name,u=c&&nI(c);let d=!1;for(const p of l.encodings){const e=u?i[0]:i.find((e=>e.name===p.rid))??(1===l.encodings.length?i[0]:void 0),t=!!e?.active;if(t!==p.active&&(p.active=t,d=!0),!e)continue;const{maxFramerate:n,scaleResolutionDownBy:r,maxBitrate:s,scalabilityMode:o}=e;r>=1&&r!==p.scaleResolutionDownBy&&(p.scaleResolutionDownBy=r,d=!0),s>0&&s!==p.maxBitrate&&(p.maxBitrate=s,d=!0),n>0&&n!==p.maxFramerate&&(p.maxFramerate=n,d=!0),o&&o!==p.scalabilityMode&&(p.scalabilityMode=o,d=!0)}const h=l.encodings.filter((e=>e.active));if(!d)return this.logger("info",`${s} no change:`,h);await a.setParameters(l),this.logger("info",`${s} enabled rids:`,h)},this.restartIce=async()=>{this.logger("debug","Restarting ICE connection");const e=this.pc.signalingState;this.isIceRestarting||"have-local-offer"===e?this.logger("debug","ICE restart is already in progress"):await this.negotiate({iceRestart:!0})},this.negotiate=async e=>lI("publisher.negotiate",(async()=>{const t=await this.pc.createOffer(e),n=this.getAnnouncedTracks(t.sdp);if(!n.length)throw new Error("Can't negotiate without any tracks");try{this.isIceRestarting=e?.iceRestart??!1,await this.pc.setLocalDescription(t);const{sdp:r=""}=t,{response:i}=await this.sfuClient.setPublisher({sdp:r,tracks:n});if(i.error)throw new Error(i.error.message);const{sdp:s}=i;await this.pc.setRemoteDescription({type:"answer",sdp:s})}finally{this.isIceRestarting=!1}this.addTrickledIceCandidates()})),this.getPublishedTracks=()=>{const e=[];for(const{transceiver:t}of this.transceiverCache.items()){const n=t.sender.track;n&&"live"===n.readyState&&e.push(n)}return e},this.getAnnouncedTracks=e=>{const t=[];for(const n of this.transceiverCache.items()){const{transceiver:r,publishOption:i}=n;r.sender.track&&t.push(this.toTrackInfo(r,i,e))}return t},this.getAnnouncedTracksForReconnect=()=>{const e=this.pc.localDescription?.sdp,t=[];for(const n of this.publishOptions){const r=this.transceiverCache.get(n);r&&r.sender.track&&t.push(this.toTrackInfo(r,n,e))}return t},this.toTrackInfo=(e,t,n)=>{const r=e.sender.track,i="live"===r.readyState,s=i?QI(r,t):this.transceiverCache.getLayers(t);this.transceiverCache.setLayers(t,s);const o=GI(t.trackType),a=o&&2===r.getSettings().channelCount,l=this.transceiverCache.indexOf(e),c=this.state.settings?.audio;return{trackId:r.id,layers:YI(s),trackType:t.trackType,mid:eR(e,l,n),stereo:a,dtx:o&&!!c?.opus_dtx_enabled,red:o&&!!c?.redundant_coding_enabled,muted:!i,codec:t.codec,publishOptionId:t.id}},this.cloneTrack=e=>{const t=e.clone();return this.clonedTracks.add(t),t},this.stopTrack=e=>{e&&(e.stop(),this.clonedTracks.delete(e))},this.publishOptions=n,this.on("iceRestart",(e=>{e.peerType===GT.PUBLISHER_UNSPECIFIED&&this.restartIce().catch((e=>{this.logger("warn","ICERestart failed",e),this.onUnrecoverableError?.()}))})),this.on("changePublishQuality",(async e=>{for(const t of e.videoSenders)await this.changePublishQuality(t)})),this.on("changePublishOptions",(e=>(this.publishOptions=e.publishOptions,this.syncPublishOptions())))}dispose(){super.dispose(),this.stopAllTracks(),this.clonedTracks.clear()}}class nR extends HI{constructor(e){super(GT.SUBSCRIBER,e),this.restartIce=async()=>{if(this.logger("debug","Restarting ICE connection"),"have-remote-offer"===this.pc.signalingState)return void this.logger("debug","ICE restart is already in progress");if("new"===this.pc.connectionState)return void this.logger("debug","ICE connection is not yet established, skipping restart.");const e=this.isIceRestarting;try{this.isIceRestarting=!0,await this.sfuClient.iceRestart({peerType:GT.SUBSCRIBER})}catch(t){throw this.isIceRestarting=e,t}},this.handleOnTrack=e=>{const[t]=e.streams,[n,r]=t.id.split(":"),i=this.state.participants.find((e=>e.trackLookupPrefix===n));this.logger("debug",`[onTrack]: Got remote ${r} track for userId: ${i?.userId}`,e.track.id,e.track);const s=`${i?.userId} ${r}:${n}`;e.track.addEventListener("mute",(()=>{this.logger("info",`[onTrack]: Track muted: ${s}`)})),e.track.addEventListener("unmute",(()=>{this.logger("info",`[onTrack]: Track unmuted: ${s}`)})),e.track.addEventListener("ended",(()=>{this.logger("info",`[onTrack]: Track ended: ${s}`),this.state.removeOrphanedTrack(t.id)}));const o=(e=>{switch(e){case"TRACK_TYPE_AUDIO":return QT.AUDIO;case"TRACK_TYPE_VIDEO":return QT.VIDEO;case"TRACK_TYPE_SCREEN_SHARE":return QT.SCREEN_SHARE;case"TRACK_TYPE_SCREEN_SHARE_AUDIO":return QT.SCREEN_SHARE_AUDIO;default:return}})(r);if(!o)return this.logger("error",`Unknown track type: ${r}`);if(!i)return this.logger("warn",`[onTrack]: Received track for unknown participant: ${n}`,e),void this.state.registerOrphanedTrack({id:t.id,trackLookupPrefix:n,track:t,trackType:o});const a=KI(o);if(!a)return void this.logger("error",`Unknown track type: ${r}`);const l=i[a];this.state.updateParticipant(i.sessionId,{[a]:t}),l&&(this.logger("info",`[onTrack]: Cleaning up previous remote ${e.track.kind} tracks for userId: ${i.userId}`),l.getTracks().forEach((e=>{e.stop(),l.removeTrack(e)})))},this.negotiate=async e=>{this.logger("info","Received subscriberOffer",e),await this.pc.setRemoteDescription({type:"offer",sdp:e.sdp}),this.addTrickledIceCandidates();const t=await this.pc.createAnswer();await this.pc.setLocalDescription(t),await this.sfuClient.sendAnswer({peerType:GT.SUBSCRIBER,sdp:t.sdp||""}),this.isIceRestarting=!1},this.pc.addEventListener("track",this.handleOnTrack),this.on("subscriberOffer",(async e=>this.negotiate(e).catch((e=>{this.logger("error","Negotiation failed.",e)}))))}detachEventHandlers(){super.detachEventHandlers(),this.pc.removeEventListener("track",this.handleOnTrack)}}function rR(e){let t=!0;const n=e.then((e=>({status:"resolved",result:e})),(e=>({status:"rejected",error:e}))).finally((()=>t=!1)),r=()=>n.then((e=>{if("rejected"===e.status)throw e.error;return e.result}));return r.checkPending=()=>t,r}const iR=()=>{let e,t;const n=new Promise(((n,r)=>{e=n,t=r}));let r=!1,i=!1;return{promise:n,resolve:t=>{r=!0,e(t)},reject:e=>{i=!0,t(e)},isResolved:r,isRejected:i}},sR=Symbol("uninitialized");function oR(e){let t=sR;return()=>(t===sR&&(t=e()),t)}const aR={src:"const timerIdMapping = new Map();\nself.addEventListener('message', (event) => {\n    const request = event.data;\n    switch (request.type) {\n        case 'setTimeout':\n        case 'setInterval':\n            timerIdMapping.set(request.id, (request.type === 'setTimeout' ? setTimeout : setInterval)(() => {\n                tick(request.id);\n                if (request.type === 'setTimeout') {\n                    timerIdMapping.delete(request.id);\n                }\n            }, request.timeout));\n            break;\n        case 'clearTimeout':\n        case 'clearInterval':\n            (request.type === 'clearTimeout' ? clearTimeout : clearInterval)(timerIdMapping.get(request.id));\n            timerIdMapping.delete(request.id);\n            break;\n    }\n});\nfunction tick(id) {\n    const message = { type: 'tick', id };\n    self.postMessage(message);\n}"};class lR{constructor(){this.currentTimerId=1,this.callbacks=new Map,this.fallback=!1}setup(){let{useTimerWorker:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e)try{const e=new Blob([aR.src],{type:"application/javascript; charset=utf-8"}),t=URL.createObjectURL(e);this.worker=new Worker(t,{name:"str-timer-worker"}),this.worker.addEventListener("message",(e=>{const{type:t,id:n}=e.data;"tick"===t&&this.callbacks.get(n)?.()}))}catch(t){Zx(["timer-worker"])("error",t),this.fallback=!0}else this.fallback=!0}destroy(){this.callbacks.clear(),this.worker?.terminate(),this.worker=void 0,this.fallback=!1}get ready(){return this.fallback||Boolean(this.worker)}setInterval(e,t){return this.setTimer("setInterval",e,t)}clearInterval(e){this.clearTimer("clearInterval",e)}setTimeout(e,t){return this.setTimer("setTimeout",e,t)}clearTimeout(e){this.clearTimer("clearTimeout",e)}setTimer(e,t,n){if(this.ready||this.setup(),this.fallback)return("setTimeout"===e?setTimeout:setInterval)(t,n);const r=this.getTimerId();return this.callbacks.set(r,(()=>{t(),"setTimeout"===e&&this.callbacks.delete(r)})),this.sendMessage({type:e,id:r,timeout:n}),r}clearTimer(e,t){t&&(this.ready||this.setup(),this.fallback?("clearTimeout"===e?clearTimeout:clearInterval)(t):(this.callbacks.delete(t),this.sendMessage({type:e,id:t})))}getTimerId(){return this.currentTimerId++}sendMessage(e){if(!this.worker)throw new Error("Cannot use timer worker before it's set up");this.worker.postMessage(e)}}let cR=!1;const uR=oR((()=>{const e=new lR;return e.setup({useTimerWorker:cR}),e}));class dR{constructor(e){var t=this;let{dispatcher:n,credentials:r,sessionId:i,logTag:s,joinResponseTimeout:o=5e3,onSignalClose:a,streamClient:l}=e;this.iceTrickleBuffer=new oI,this.isLeaving=!1,this.pingIntervalInMs=1e4,this.unhealthyTimeoutInMs=this.pingIntervalInMs+5e3,this.joinResponseTask=iR(),this.abortController=new AbortController,this.createWebSocket=()=>{this.signalWs=(e=>{const{endpoint:t,onMessage:n,logTag:r}=e,i=Zx(["SfuClientWS",r]);i("debug","Creating signaling WS channel:",t);const s=new WebSocket(t);return s.binaryType="arraybuffer",s.addEventListener("error",(e=>{i("error","Signaling WS channel error",e)})),s.addEventListener("close",(e=>{i("info","Signaling WS channel is closed",e)})),s.addEventListener("open",(e=>{i("info","Signaling WS channel is open",e)})),s.addEventListener("message",(e=>{try{const t=e.data instanceof ArrayBuffer?X_.fromBinary(new Uint8Array(e.data)):X_.fromJsonString(e.data.toString());n(t)}catch(t){i("error","Failed to decode a message. Check whether the Proto models match.",{event:e,error:t})}})),s})({logTag:this.logTag,endpoint:`${this.credentials.server.ws_endpoint}?tag=${this.logTag}`,onMessage:e=>{this.lastMessageTimestamp=new Date,this.scheduleConnectionCheck(),this.dispatcher.dispatch(e,this.logTag)}}),this.signalReady=rR(Promise.race([new Promise(((e,t)=>{const n=()=>{this.signalWs.removeEventListener("open",n),e(this.signalWs)};this.signalWs.addEventListener("open",n),this.signalWs.addEventListener("close",(()=>{this.handleWebSocketClose(),t(new Error("SFU WS closed unexpectedly"))}))})),new Promise(((e,t)=>{setTimeout((()=>t(new Error("SFU WS connection timed out"))),this.joinResponseTimeout)}))]))},this.cleanUpWebSocket=()=>{this.signalWs.removeEventListener("close",this.handleWebSocketClose)},this.handleWebSocketClose=()=>{this.signalWs.removeEventListener("close",this.handleWebSocketClose),uR().clearInterval(this.keepAliveInterval),clearTimeout(this.connectionCheckTimeout),this.onSignalClose?.()},this.close=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dR.NORMAL_CLOSURE,n=arguments.length>1?arguments[1]:void 0;t.signalWs.readyState===WebSocket.OPEN&&(t.logger("debug",`Closing SFU WS connection: ${e} - ${n}`),t.signalWs.close(e,`js-client: ${n}`),t.cleanUpWebSocket()),t.dispose()},this.dispose=()=>{this.logger("debug","Disposing SFU client"),this.unsubscribeIceTrickle(),this.unsubscribeNetworkChanged(),clearInterval(this.keepAliveInterval),clearTimeout(this.connectionCheckTimeout),clearTimeout(this.migrateAwayTimeout),this.abortController.abort(),this.migrationTask?.resolve(),this.iceTrickleBuffer.dispose()},this.leaveAndClose=async e=>{await this.joinTask;try{this.isLeaving=!0,await this.notifyLeave(e)}catch(t){this.logger("debug","Error notifying SFU about leaving call",t)}this.close(dR.NORMAL_CLOSURE,e.substring(0,115))},this.updateSubscriptions=async e=>(await this.joinTask,eI((()=>this.rpc.updateSubscriptions({sessionId:this.sessionId,tracks:e})),this.abortController.signal)),this.setPublisher=async e=>(await this.joinTask,eI((()=>this.rpc.setPublisher({...e,sessionId:this.sessionId})),this.abortController.signal)),this.sendAnswer=async e=>(await this.joinTask,eI((()=>this.rpc.sendAnswer({...e,sessionId:this.sessionId})),this.abortController.signal)),this.iceTrickle=async e=>(await this.joinTask,eI((()=>this.rpc.iceTrickle({...e,sessionId:this.sessionId})),this.abortController.signal)),this.iceRestart=async e=>(await this.joinTask,eI((()=>this.rpc.iceRestart({...e,sessionId:this.sessionId})),this.abortController.signal)),this.updateMuteStates=async e=>(await this.joinTask,eI((()=>this.rpc.updateMuteStates({muteStates:e,sessionId:this.sessionId})),this.abortController.signal)),this.sendStats=async e=>(await this.joinTask,eI((()=>this.rpc.sendStats({...e,sessionId:this.sessionId})),this.abortController.signal)),this.startNoiseCancellation=async()=>(await this.joinTask,eI((()=>this.rpc.startNoiseCancellation({sessionId:this.sessionId})),this.abortController.signal)),this.stopNoiseCancellation=async()=>(await this.joinTask,eI((()=>this.rpc.stopNoiseCancellation({sessionId:this.sessionId})),this.abortController.signal)),this.enterMigration=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.isLeaving=!0;const{timeout:n=7e3}=e;t.migrationTask?.reject(new Error("Cancelled previous migration"));const r=t.migrationTask=iR(),i=t.dispatcher.on("participantMigrationComplete",(()=>{i(),clearTimeout(t.migrateAwayTimeout),r.resolve()}));return t.migrateAwayTimeout=setTimeout((()=>{i(),r.reject(new Error(`Migration (${t.logTag}) failed to complete in ${n}ms`))}),n),r.promise},this.join=async e=>{await this.signalReady(),(this.joinResponseTask.isResolved||this.joinResponseTask.isRejected)&&(this.joinResponseTask=iR());const t=this.joinResponseTask;let n;const r=this.dispatcher.on("joinResponse",(e=>{this.logger("debug","Received joinResponse",e),clearTimeout(n),r(),this.keepAlive(),t.resolve(e)}));return n=setTimeout((()=>{r(),t.reject(new Error('Waiting for "joinResponse" has timed out'))}),this.joinResponseTimeout),await this.send(ix.create({requestPayload:{oneofKind:"joinRequest",joinRequest:ux.create({...e,sessionId:this.sessionId,token:this.credentials.token})}})),t.promise},this.ping=async()=>this.send(ix.create({requestPayload:{oneofKind:"healthCheckRequest",healthCheckRequest:{}}})),this.notifyLeave=async e=>this.send(ix.create({requestPayload:{oneofKind:"leaveCallRequest",leaveCallRequest:{sessionId:this.sessionId,reason:e}}})),this.send=async e=>{await this.signalReady();const t=ix.toJson(e);this.signalWs.readyState===WebSocket.OPEN?(this.logger("debug",`Sending message to: ${this.edgeName}`,t),this.signalWs.send(ix.toBinary(e))):this.logger("debug","Signal WS is not open. Skipping message",t)},this.keepAlive=()=>{const e=uR();e.clearInterval(this.keepAliveInterval),this.keepAliveInterval=e.setInterval((()=>{this.ping().catch((e=>{this.logger("error","Error sending healthCheckRequest to SFU",e)}))}),this.pingIntervalInMs)},this.scheduleConnectionCheck=()=>{clearTimeout(this.connectionCheckTimeout),this.connectionCheckTimeout=setTimeout((()=>{if(this.lastMessageTimestamp){(new Date).getTime()-this.lastMessageTimestamp.getTime()>this.unhealthyTimeoutInMs&&this.close(dR.ERROR_CONNECTION_UNHEALTHY,`SFU connection unhealthy. Didn't receive any message for ${this.unhealthyTimeoutInMs}ms`)}}),this.unhealthyTimeoutInMs)},this.dispatcher=n,this.sessionId=i||Bx(),this.onSignalClose=a,this.credentials=r;const{server:c,token:u}=r;var d;this.edgeName=c.edge_name,this.joinResponseTimeout=o,this.logTag=s,this.logger=Zx(["SfuClient",s]),this.rpc=(e=>{const t=new VC({...Dx,...e});return new Ox(t)})({baseUrl:c.url,interceptors:[(d={Authorization:`Bearer ${u}`},{interceptUnary:(e,t,n,r)=>(r.meta={...r.meta,...d},e(t,n,r))}),"trace"===Xx()&&Lx(this.logger,"trace")].filter((e=>!!e))}),this.unsubscribeIceTrickle=n.on("iceTrickle",(e=>{this.iceTrickleBuffer.push(e)})),this.unsubscribeNetworkChanged=l.on("network.changed",(e=>{e.online?this.networkAvailableTask?.resolve():this.networkAvailableTask=iR()})),this.createWebSocket()}get isHealthy(){return this.signalWs.readyState===WebSocket.OPEN}get joinTask(){return this.joinResponseTask.promise}}dR.NORMAL_CLOSURE=1e3,dR.ERROR_CONNECTION_UNHEALTHY=4001,dR.DISPOSE_OLD_SOCKET=4002;const hR=e=>async function(t){if(t.user.id===e.currentUserId)return;const{state:n}=e;t.call.created_by.id===e.currentUserId&&n.callingState===vI.RINGING&&await e.join()},pR=e=>async function(t){if(t.user.id===e.currentUserId)return;const{call:n}=t,{session:r}=n;if(!r)return void e.logger("warn","No call session provided. Ignoring call.rejected event.",t);const i=r.rejected_by,{members:s,callingState:o}=e.state;if(o===vI.RINGING)if(e.isCreatedByMe){s.filter((t=>t.user_id!==e.currentUserId)).every((e=>i[e.user_id]))&&(e.logger("info","everyone rejected, leaving the call"),await e.leave({reason:"ring: everyone rejected"}))}else i[n.created_by.id]&&(e.logger("info","call creator rejected, leaving call"),await e.leave({reason:"ring: creator rejected"}));else e.logger("info","Call is not in ringing mode (it is either accepted or rejected already). Ignoring call.rejected event.",t)},fR=e=>function(){const{callingState:t}=e.state;t!==vI.IDLE&&t!==vI.LEFT&&e.leave({reason:"call.ended event received",reject:!1}).catch((t=>{e.logger("error","Failed to leave call after call.ended ",t)}))},mR=e=>e.on("callEnded",(async t=>{if(e.state.callingState!==vI.LEFT)try{e.state.setEndedAt(new Date);const n=n_[t.reason];await e.leave({reason:`callEnded received: ${n}`})}catch(n){e.logger("error","Failed to leave call after being ended by the SFU",n)}})),gR=e=>function(t){const{currentGrants:n}=t;if(n){const{canPublishAudio:t,canPublishVideo:r,canScreenshare:i}=n,s={[MT]:t,[FT]:r,[jT]:i},o=e.ownCapabilities.filter((e=>!1!==s[e]));Object.entries(s).forEach((e=>{let[t,n]=e;n&&!o.includes(t)&&o.push(t)})),e.setOwnCapabilities(o)}},vR=(e,t)=>e.on("connectionQualityChanged",(e=>{const{connectionQualityUpdates:n}=e;n&&t.updateParticipants(n.reduce(((e,t)=>{const{sessionId:n,connectionQuality:r}=t;return e[n]={connectionQuality:r},e}),{}))})),yR=(e,t)=>e.on("healthCheckResponse",(e=>{const{participantCount:n}=e;n&&(t.setParticipantCount(n.total),t.setAnonymousParticipantCount(n.anonymous))})),bR=(e,t)=>e.on("error",(e=>{e.error&&e.error.code!==XT.LIVE_ENDED||t.permissionsContext.hasPermission(OT)||t.leave({reason:"live ended"}).catch((e=>{t.logger("error","Failed to leave call after live ended",e)}))})),wR=e=>e.on("error",(e=>{if(!e.error)return;const t=Zx(["SfuClient"]),{error:n,reconnectStrategy:r}=e;t("error","SFU reported error",{code:XT[n.code],reconnectStrategy:r_[r],message:n.message,shouldRetry:n.shouldRetry})})),SR=e=>function(t){const{pins:n}=t;e.setServerSidePins(n)},kR=e=>e.on("trackUnpublished",(async t=>{const{cause:n,type:r,sessionId:i}=t,{localParticipant:s}=e.state;if(n===e_.MODERATION&&i===s?.sessionId){const t=e.logger;t("info",`Local participant's ${QT[r]} track is muted remotely`);try{r===QT.VIDEO?await e.camera.disable():r===QT.AUDIO?await e.microphone.disable():r===QT.SCREEN_SHARE||r===QT.SCREEN_SHARE_AUDIO?await e.screenShare.disable():t("warn","Unsupported track type to soft mute",QT[r])}catch(o){t("error","Failed to stop publishing",o)}}})),CR=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(const i of n)e.includes(i)||e.push(i);return e},ER=e=>function(t){const{participant:n}=t;if(!n)return;const r=RR(e,n);e.updateOrAddParticipant(n.sessionId,Object.assign(n,r,{viewportVisibilityState:{videoTrack:Ax.UNKNOWN,screenShareTrack:Ax.UNKNOWN}}))},TR=e=>function(t){const{participant:n}=t;n&&e.setParticipants((e=>e.filter((e=>e.sessionId!==n.sessionId))))},_R=e=>function(t){const{participant:n}=t;n&&e.updateParticipant(n.sessionId,n)},xR=e=>function(t){const{type:n,sessionId:r}=t;if(t.participant){const n=RR(e,t.participant),i=Object.assign(t.participant,n);e.updateOrAddParticipant(r,i)}else e.updateParticipant(r,(e=>({publishedTracks:CR([...e.publishedTracks],n)})))},IR=e=>function(t){const{type:n,sessionId:r}=t;if(t.participant){const n=RR(e,t.participant),i=Object.assign(t.participant,n);e.updateOrAddParticipant(r,i)}else e.updateParticipant(r,(e=>({publishedTracks:e.publishedTracks.filter((e=>e!==n))})))},RR=(e,t)=>{const n=e.takeOrphanedTracks(t.trackLookupPrefix);if(!n.length)return;const r={};for(const i of n){const e=KI(i.trackType);e&&(r[e]=i.track)}return r},PR=(e,t)=>e.on("dominantSpeakerChanged",(e=>{const{sessionId:n}=e;n!==t.dominantSpeaker?.sessionId&&t.setParticipants((e=>e.map((e=>e.sessionId===n?{...e,isDominantSpeaker:!0}:e.isDominantSpeaker?{...e,isDominantSpeaker:!1}:e))))})),AR=(e,t)=>e.on("audioLevelChanged",(e=>{const{audioLevels:n}=e;t.updateParticipants(n.reduce(((e,t)=>(e[t.sessionId]={audioLevel:t.level,isSpeaking:t.isSpeaking},e)),{}))})),NR=e=>{const t={"call.accepted":hR(e),"call.rejected":pR(e)},n=Object.keys(t).map((n=>{const r=n;return e.on(r,t[r])}));return()=>{n.forEach((e=>e()))}},OR=e=>{const t=[];return e.forEach((e=>{t.push(e)})),t},DR=e=>e&&e.type===ZT.REACT?"stream-react":e&&e.type===ZT.REACT_NATIVE?"stream-react-native":"stream-js",LR=e=>e?`${e.major}.${e.minor}.${e.patch}`:"0.0.0-development",jR=()=>"undefined"!==typeof navigator&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent||""),MR=()=>"undefined"!==typeof navigator&&navigator.userAgent?.includes("Firefox");var FR=Object.freeze({__proto__:null,isChrome:()=>"undefined"!==typeof navigator&&navigator.userAgent?.includes("Chrome"),isFirefox:MR,isSafari:jR});const UR=(e,t)=>{const{trackKind:n,kind:r,publisher:i}=t,s="subscriber"===r?"inbound-rtp":"outbound-rtp",o=OR(e);return{rawStats:e,streams:o.filter((e=>e.type===s&&e.kind===n)).map((e=>{const t=e,n=o.find((e=>"codec"===e.type&&e.id===t.codecId)),s=o.find((e=>"transport"===e.type&&e.id===t.transportId));let a,l;if(s&&"connected"===s.dtlsState){const e=o.find((e=>"candidate-pair"===e.type&&e.id===s.selectedCandidatePairId));a=e?.currentRoundTripTime}if("publisher"===r&&i){const e=MR(),n=o.find((n=>"media-source"===n.type&&(!!e||n.id===t.mediaSourceId)));n&&(l=i.getTrackType(n.trackIdentifier))}return{bytesSent:t.bytesSent,bytesReceived:t.bytesReceived,codec:n?.mimeType,currentRoundTripTime:a,frameHeight:t.frameHeight,frameWidth:t.frameWidth,framesPerSecond:t.framesPerSecond,jitter:t.jitter,kind:t.kind,mediaSourceId:t.mediaSourceId,qualityLimitationReason:t.qualityLimitationReason,rid:t.rid,ssrc:t.ssrc,trackType:l}})),timestamp:Date.now()}},VR=e=>({rawReport:e??{streams:[],timestamp:Date.now()},totalBytesSent:0,totalBytesReceived:0,averageJitterInMs:0,averageRoundTripTimeInMs:0,qualityLimitationReasons:"none",highestFrameWidth:0,highestFrameHeight:0,highestFramesPerSecond:0,codec:"",codecPerTrackType:{},timestamp:Date.now()}),$R=e=>{const t=VR(e);let n=-1;const r=new Set,i=e.streams,s=i.reduce(((e,t)=>{e.totalBytesSent+=t.bytesSent||0,e.totalBytesReceived+=t.bytesReceived||0,e.averageJitterInMs+=t.jitter||0,e.averageRoundTripTimeInMs+=t.currentRoundTripTime||0;const i=(s=t.frameWidth||0,o=t.frameHeight||0,s*o);var s,o;return i>n&&(e.highestFrameWidth=t.frameWidth||0,e.highestFrameHeight=t.frameHeight||0,e.highestFramesPerSecond=t.framesPerSecond||0,n=i),r.add(t.qualityLimitationReason||""),e}),t);i.length>0&&(s.averageJitterInMs=Math.round(s.averageJitterInMs/i.length*1e3),s.averageRoundTripTimeInMs=Math.round(s.averageRoundTripTimeInMs/i.length*1e3),s.codec=i[0].codec||"",s.codecPerTrackType=i.reduce(((e,t)=>(t.trackType&&(e[t.trackType]=t.codec||""),e)),{}));const o=[r.has("cpu")&&"cpu",r.has("bandwidth")&&"bandwidth",r.has("other")&&"other"].filter(Boolean).join(", ");return o&&(s.qualityLimitationReasons=o),s},[BR,zR,HR]="1.18.6".split(".");let qR,WR,KR,GR={type:ZT.PLAIN_JAVASCRIPT,major:BR,minor:zR,patch:HR},JR={oneofKind:void 0};const YR=()=>GR,QR=async()=>{if(Wx())return{sdk:GR,os:qR,device:WR};const e=navigator.userAgentData;let t;if(e&&e.getHighEntropyValues)try{t=await e.getHighEntropyValues(["platform","platformVersion"])}catch(a){}const n=new xT.UAParser(navigator.userAgent),{browser:r,os:i,device:s,cpu:o}=n.getResult();return{sdk:GR,browser:{name:r.name||navigator.userAgent,version:r.version||""},os:{name:t?.platform||i.name||"",version:t?.platformVersion||i.version||"",architecture:o.architecture||""},device:{name:[s.vendor,s.model,s.type].filter(Boolean).join(" "),version:""}}};class XR{constructor(e,t){let{options:n,clientDetails:r,subscriber:i,publisher:s,microphone:o,camera:a,state:l}=t;this.logger=Zx(["SfuStatsReporter"]),this.inputDevices=new Map,this.observeDevice=(e,t)=>{const{hasBrowserPermission$:n}=e.state;this.unsubscribeDevicePermissionsSubscription?.(),this.unsubscribeDevicePermissionsSubscription=mI(QE([n,this.state.ownCapabilities$]),(n=>{let[r,i]=n;this.unsubscribeListDevicesSubscription?.();const s="mic"===t?i.includes(MT):i.includes(FT);r&&s?this.unsubscribeListDevicesSubscription=mI(QE([e.listDevices(),e.state.selectedDevice$]),(e=>{let[n,r]=e;const i=n.find((e=>e.deviceId===r));this.inputDevices.set(t,{currentDevice:i?.label||r||"",availableDevices:n.map((e=>e.label)),isPermitted:!0})})):this.inputDevices.set(t,{currentDevice:"",availableDevices:[],isPermitted:!1})}))},this.sendConnectionTime=e=>{this.sendTelemetryData({data:{oneofKind:"connectionTimeSeconds",connectionTimeSeconds:e}})},this.sendReconnectionTime=(e,t)=>{this.sendTelemetryData({data:{oneofKind:"reconnection",reconnection:{strategy:e,timeSeconds:t}}})},this.sendTelemetryData=e=>{this.run(e).catch((e=>{this.logger("warn","Failed to send telemetry data",e)}))},this.run=async e=>{const[t,n]=await Promise.all([this.subscriber.getStats().then(OR).then(JSON.stringify),this.publisher?.getStats().then(OR).then(JSON.stringify)??"[]"]);await this.sfuClient.sendStats({sdk:this.sdkName,sdkVersion:this.sdkVersion,webrtcVersion:this.webRTCVersion,subscriberStats:t,publisherStats:n,audioDevices:this.inputDevices.get("mic"),videoDevices:this.inputDevices.get("camera"),deviceState:JR,telemetry:e})},this.start=()=>{this.options.reporting_interval_ms<=0||(this.observeDevice(this.microphone,"mic"),this.observeDevice(this.camera,"camera"),clearInterval(this.intervalId),this.intervalId=setInterval((()=>{this.run().catch((e=>{this.logger("warn","Failed to report stats",e)}))}),this.options.reporting_interval_ms))},this.stop=()=>{this.unsubscribeDevicePermissionsSubscription?.(),this.unsubscribeDevicePermissionsSubscription=void 0,this.unsubscribeListDevicesSubscription?.(),this.unsubscribeListDevicesSubscription=void 0,this.inputDevices.clear(),clearInterval(this.intervalId),this.intervalId=void 0},this.sfuClient=e,this.options=n,this.subscriber=i,this.publisher=s,this.microphone=o,this.camera=a,this.state=l;const{sdk:c,browser:u}=r;this.sdkName=DR(c),this.sdkVersion=LR(c);const d=KR;this.webRTCVersion=d?.version||`${u?.name||""}-${u?.version||""}`||"N/A"}}class ZR{constructor(){this.elementHandlerMap=new Map,this.observer=null,this.queueSet=new Set,this.setViewport=(e,t)=>(this.observer=new IntersectionObserver((e=>{e.forEach((e=>{const t=this.elementHandlerMap.get(e.target);t?.(e)}))}),{root:e,...t,threshold:t?.threshold??.35}),this.queueSet.size&&(this.queueSet.forEach((t=>{let[n,r]=t;e.contains(n)&&(this.observer.observe(n),this.elementHandlerMap.set(n,r))})),this.queueSet.clear()),()=>{this.observer?.disconnect(),this.observer=null,this.elementHandlerMap.clear()}),this.observe=(e,t)=>{const n=[e,t],r=()=>{this.elementHandlerMap.delete(e),this.observer?.unobserve(e),this.queueSet.delete(n)};return this.elementHandlerMap.has(e)?r:this.observer?(this.observer.root.contains(e)&&(this.elementHandlerMap.set(e,t),this.observer.observe(e)),r):(this.queueSet.add(n),r)}}}const eP={videoTrack:Ax.UNKNOWN,screenShareTrack:Ax.UNKNOWN},tP=Symbol("globalOverrideKey");class nP{constructor(e,t){var n=this;this.viewportTracker=new ZR,this.logger=Zx(["DynascaleManager"]),this.pendingSubscriptionsUpdate=null,this.videoTrackSubscriptionOverridesSubject=new ZE({}),this.videoTrackSubscriptionOverrides$=this.videoTrackSubscriptionOverridesSubject.asObservable(),this.incomingVideoSettings$=this.videoTrackSubscriptionOverrides$.pipe(WE((e=>{const{[tP]:t,...n}=e;return{enabled:!1!==t?.enabled,preferredResolution:t?.enabled?t.dimension:void 0,participants:Object.fromEntries(Object.entries(n).map((e=>{let[t,n]=e;return[t,{enabled:!1!==n?.enabled,preferredResolution:n?.enabled?n.dimension:void 0}]}))),isParticipantVideoEnabled:t=>e[t]?.enabled??e[tP]?.enabled??!0}})),tT(1)),this.setVideoTrackSubscriptionOverrides=(e,t)=>pI(this.videoTrackSubscriptionOverridesSubject,t?n=>({...n,...Object.fromEntries(t.map((t=>[t,e])))}):e?{[tP]:e}:{}),this.applyTrackSubscriptions=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nx.SLOW;n.pendingSubscriptionsUpdate&&clearTimeout(n.pendingSubscriptionsUpdate);const t=()=>{n.pendingSubscriptionsUpdate=null,n.sfuClient?.updateSubscriptions(n.trackSubscriptions).catch((e=>{n.logger("debug","Failed to update track subscriptions",e)}))};e?n.pendingSubscriptionsUpdate=setTimeout(t,e):t()},this.trackElementVisibility=(e,t,n)=>{const r=this.viewportTracker.observe(e,(r=>{this.callState.updateParticipant(t,(t=>{const i=t.viewportVisibilityState??eP,s=r.isIntersecting||document.fullscreenElement===e?Ax.VISIBLE:Ax.INVISIBLE;return{...t,viewportVisibilityState:{...i,[n]:s}}}))}));return()=>{r(),this.callState.updateParticipant(t,(e=>{const t=e.viewportVisibilityState??eP;return{...e,viewportVisibilityState:{...t,[n]:Ax.UNKNOWN}}}))}},this.setViewport=e=>this.viewportTracker.setViewport(e),this.bindVideoElement=(e,t,n)=>{const r=this.callState.findParticipantBySessionId(t);if(!r)return;const i=(e,i)=>{!i||0!==i.width&&0!==i.height||(this.logger("debug","Ignoring 0x0 dimension",r),i=void 0),this.callState.updateParticipantTracks(n,{[t]:{dimension:i}}),this.applyTrackSubscriptions(e)},s=this.callState.participants$.pipe(WE((e=>e.find((e=>e.sessionId===t)))),iT((e=>!!e)),nT(),tT({bufferSize:1,refCount:!0}));let o;const a=r.isLocalParticipant?null:s.pipe(WE((e=>e.viewportVisibilityState?.[n])),nT()).subscribe((t=>{if(o){if(o=t??Ax.UNKNOWN,t===Ax.INVISIBLE)return i(Nx.MEDIUM,void 0);i(Nx.MEDIUM,{width:e.clientWidth,height:e.clientHeight})}else o=t??Ax.UNKNOWN}));let l;const c=r.isLocalParticipant?null:new ResizeObserver((()=>{const t={width:e.clientWidth,height:e.clientHeight};if(!l)return void(l=t);if(l.width===t.width&&l.height===t.height||o===Ax.INVISIBLE)return;const n=Math.max(t.width/l.width,t.height/l.height)>1.2?Nx.IMMEDIATE:Nx.MEDIUM;i(n,{width:e.clientWidth,height:e.clientHeight}),l=t}));c?.observe(e);const u=r.isLocalParticipant?null:s.pipe(sT("publishedTracks"),WE((e=>"videoTrack"===n?CI(e):TI(e))),nT()).subscribe((t=>{t?i(Nx.IMMEDIATE,{width:e.clientWidth,height:e.clientHeight}):i(Nx.FAST,void 0)}));e.autoplay=!0,e.playsInline=!0,e.muted=!0;const d=s.pipe(sT("videoTrack"===n?"videoStream":"screenShareStream")).subscribe((t=>{const r="videoTrack"===n?t.videoStream:t.screenShareStream;e.srcObject!==r&&(e.srcObject=r??null,(jR()||MR())&&setTimeout((()=>{e.srcObject=r??null,e.play().catch((e=>{this.logger("warn","Failed to play stream",e)}))}),25))}));return()=>{i(Nx.FAST,void 0),a?.unsubscribe(),u?.unsubscribe(),d.unsubscribe(),c?.disconnect()}},this.bindAudioElement=(e,t,n)=>{const r=this.callState.findParticipantBySessionId(t);if(!r||r.isLocalParticipant)return;const i=this.callState.participants$.pipe(WE((e=>e.find((e=>e.sessionId===t)))),iT((e=>!!e)),nT(),tT({bufferSize:1,refCount:!0})),s=i.pipe(sT("screenShareAudioTrack"===n?"screenShareAudioStream":"audioStream")).subscribe((t=>{const r="screenShareAudioTrack"===n?t.screenShareAudioStream:t.audioStream;e.srcObject!==r&&setTimeout((()=>{if(e.srcObject=r??null,e.srcObject){e.play().catch((e=>{this.logger("warn","Failed to play stream",e)}));const{selectedDevice:t}=this.speaker.state;t&&"setSinkId"in e&&e.setSinkId(t)}}))})),o="setSinkId"in e?this.speaker.state.selectedDevice$.subscribe((t=>{t&&e.setSinkId(t)})):null,a=QE([this.speaker.state.volume$,i.pipe(sT("audioVolume"))]).subscribe((t=>{let[n,r]=t;e.volume=r.audioVolume??n}));return e.autoplay=!0,()=>{o?.unsubscribe(),a.unsubscribe(),s.unsubscribe()}},this.callState=e,this.speaker=t}setSfuClient(e){this.sfuClient=e}get trackSubscriptions(){const e=[];for(const t of this.callState.remoteParticipants){if(t.videoDimension&&CI(t)){const n=this.videoTrackSubscriptionOverrides[t.sessionId]??this.videoTrackSubscriptionOverrides[tP];!1!==n?.enabled&&e.push({userId:t.userId,sessionId:t.sessionId,trackType:QT.VIDEO,dimension:n?.dimension??t.videoDimension})}t.screenShareDimension&&TI(t)&&e.push({userId:t.userId,sessionId:t.sessionId,trackType:QT.SCREEN_SHARE,dimension:t.screenShareDimension}),_I(t)&&e.push({userId:t.userId,sessionId:t.sessionId,trackType:QT.SCREEN_SHARE_AUDIO})}return e}get videoTrackSubscriptionOverrides(){return hI(this.videoTrackSubscriptionOverrides$)}}class rP{constructor(){var e=this;this.permissions=[],this.setPermissions=e=>{this.permissions=e||[]},this.setCallSettings=e=>{this.settings=e},this.hasPermission=e=>this.permissions.includes(e),this.canPublish=e=>{switch(e){case QT.AUDIO:return this.hasPermission(MT);case QT.VIDEO:return this.hasPermission(FT);case QT.SCREEN_SHARE:case QT.SCREEN_SHARE_AUDIO:return this.hasPermission(jT);case QT.UNSPECIFIED:return!1;default:WI(e,"Unknown track type")}},this.canRequest=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.settings;if(!n)return!1;const{audio:r,video:i,screensharing:s}=n;switch(t){case MT:return r.access_request_enabled;case FT:return i.access_request_enabled;case jT:return s.access_request_enabled;default:return!1}}}}class iP{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{sortParticipantsBy:FI};this.name=e,this.options=t}}const sP=new class{constructor(e){this.register=e=>{this.callTypes[e.name]=e},this.unregister=e=>{delete this.callTypes[e]},this.get=e=>(this.callTypes[e]||this.register(new iP(e)),this.callTypes[e]),this.callTypes=e.reduce(((e,t)=>(e[t.name]=t,e)),{})}}([new iP("default",{sortParticipantsBy:FI}),new iP("development",{sortParticipantsBy:FI}),new iP("livestream",{sortParticipantsBy:$I}),new iP("audio_room",{sortParticipantsBy:$I})]);class oP{constructor(e){this.permission=e,this.disposeController=new AbortController,this.wasPrompted=!1,this.listeners=new Set,this.logger=Zx(["permissions"]);const t=this.disposeController.signal;this.ready=(async()=>{const n=e=>{this.setState("prompt")};if(Wx()||"undefined"===typeof navigator||!navigator.permissions?.query)return n();try{const n=await navigator.permissions.query({name:e.queryName});t.aborted||(this.setState(n.state),n.addEventListener("change",(()=>this.setState(n.state)),{signal:t}))}catch(r){n()}})()}dispose(){this.state=void 0,this.disposeController.abort()}async getState(){if(await this.ready,!this.state)throw new Error("BrowserPermission instance possibly disposed");return this.state}async prompt(){let{forcePrompt:e=!1,throwOnNotAllowed:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await lI(`permission-prompt-${this.permission.queryName}`,(async()=>{if("prompt"!==await this.getState()||this.wasPrompted&&!e){const e="granted"===this.state;if(!e&&t)throw new Error("Permission was not granted previously, and prompting again is not allowed");return e}try{this.wasPrompted=!0,this.setState("prompting");const e=await navigator.mediaDevices.getUserMedia(this.permission.constraints);return SP(e),this.setState("granted"),!0}catch(n){if(n&&"object"===typeof n&&"name"in n&&("NotAllowedError"===n.name||"SecurityError"===n.name)){if(this.logger("info","Browser permission was not granted",{permission:this.permission}),this.setState("denied"),t)throw n;return!1}throw this.logger("error","Failed to getUserMedia",{error:n,permission:this.permission}),this.setState("prompt"),n}}))}listen(e){return this.listeners.add(e),this.state&&e(this.state),()=>this.listeners.delete(e)}asObservable(){return this.getStateObservable().pipe(WE((e=>"denied"!==e)))}getIsPromptingObservable(){return this.getStateObservable().pipe(WE((e=>"prompting"===e)))}getStateObservable(){return oT((e=>this.listen(e)),((e,t)=>t()))}setState(e){this.state!==e&&(this.state=e,this.listeners.forEach((t=>t(e))))}}const aP=(e,t)=>qE((async()=>{let n=await navigator.mediaDevices.enumerateDevices();return n.some((e=>e.kind===t&&""===e.label))&&await e.prompt()&&(n=await navigator.mediaDevices.enumerateDevices()),n.filter((e=>e.kind===t&&""!==e.label&&"default"!==e.deviceId))})()),lP={audio:{autoGainControl:!0,noiseSuppression:!0,echoCancellation:!0}},cP={video:{width:1280,height:720}},uP=oR((()=>new oP({constraints:lP,queryName:"microphone"}))),dP=oR((()=>new oP({constraints:cP,queryName:"camera"}))),hP=oR((()=>{return navigator.mediaDevices.addEventListener?dT(navigator.mediaDevices,"devicechange").pipe(WE((()=>{})),(e=500,void 0===t&&(t=yT),FE((function(n,r){var i=null,s=null,o=null,a=function(){if(i){i.unsubscribe(),i=null;var e=s;s=null,r.next(e)}};function l(){var n=o+e,s=t.now();if(s<n)return i=this.schedule(void 0,n-s),void r.add(i);a()}n.subscribe(UE(r,(function(n){s=n,o=t.now(),i||(i=t.schedule(l,e),r.add(i))}),(function(){a(),r.complete()}),void 0,(function(){s=i=null})))})))):qE([]);var e,t})),pP=oR((()=>ST(hP(),uP().asObservable()).pipe(CT(void 0),ET((()=>aP(uP(),"audioinput"))),tT(1)))),fP=oR((()=>ST(hP(),dP().asObservable()).pipe(CT(void 0),ET((()=>aP(dP(),"videoinput"))),tT(1)))),mP=oR((()=>ST(hP(),uP().asObservable()).pipe(CT(void 0),ET((()=>aP(uP(),"audiooutput"))),tT(1)))),gP=async e=>{const t=await navigator.mediaDevices.getUserMedia(e);return MR()&&navigator.mediaDevices.dispatchEvent(new Event("devicechange")),t};function vP(e){if(!e||"object"!==typeof e)return!1;if("name"in e&&"string"===typeof e.name){const t=e.name;if(["OverconstrainedError","NotFoundError"].includes(t))return!0}if("message"in e&&"string"===typeof e.message){if(e.message.startsWith("OverconstrainedError"))return!0}return!1}const yP=async e=>{const t={audio:{...lP.audio,...e}};try{return await uP().prompt({throwOnNotAllowed:!0,forcePrompt:!0}),await gP(t)}catch(n){if(vP(n)&&e?.deviceId){const{deviceId:r,...i}=e;return Zx(["devices"])("warn","Failed to get audio stream, will try again with relaxed constraints",{error:n,constraints:t,relaxedConstraints:i}),yP(i)}throw Zx(["devices"])("error","Failed to get audio stream",{error:n,constraints:t}),n}},bP=async e=>{const t={video:{...cP.video,...e}};try{return await dP().prompt({throwOnNotAllowed:!0,forcePrompt:!0}),await gP(t)}catch(n){if(vP(n)&&e?.deviceId){const{deviceId:r,...i}=e;return Zx(["devices"])("warn","Failed to get video stream, will try again with relaxed constraints",{error:n,constraints:t,relaxedConstraints:i}),bP(i)}throw Zx(["devices"])("error","Failed to get video stream",{error:n,constraints:t}),n}},wP="undefined"!==typeof navigator&&"undefined"!==typeof navigator.mediaDevices?hP().pipe(CT(void 0),ET((()=>navigator.mediaDevices.enumerateDevices())),tT(1)):void 0,SP=e=>{e.active&&(e.getTracks().forEach((e=>{e.stop()})),"function"===typeof e.release&&e.release())},kP=()=>/Mobi/i.test(navigator.userAgent);class CP{constructor(e,t,n){this.call=e,this.state=t,this.trackType=n,this.stopOnLeave=!0,this.subscriptions=[],this.isTrackStoppedDueToTrackEnd=!1,this.filters=[],this.statusChangeConcurrencyTag=Symbol("statusChangeConcurrencyTag"),this.filterRegistrationConcurrencyTag=Symbol("filterRegistrationConcurrencyTag"),this.dispose=()=>{this.subscriptions.forEach((e=>e()))},this.logger=Zx([`${QT[n].toLowerCase()} manager`]),!wP||Wx()||this.trackType!==QT.AUDIO&&this.trackType!==QT.VIDEO||this.handleDisconnectedOrReplacedDevices()}listDevices(){return this.getDevices()}get enabled(){return"enabled"===this.state.status}async enable(){this.state.prevStatus=this.state.optimisticStatus,"enabled"!==this.state.optimisticStatus&&(this.state.setPendingStatus("enabled"),await cI(this.statusChangeConcurrencyTag,(async e=>{try{await this.unmuteStream(),this.state.setStatus("enabled")}finally{e.aborted||this.state.setPendingStatus(this.state.status)}})))}async disable(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.state.prevStatus=this.state.optimisticStatus,(e||"disabled"!==this.state.optimisticStatus)&&(this.state.setPendingStatus("disabled"),await cI(this.statusChangeConcurrencyTag,(async t=>{try{const t=e||"stop-tracks"===this.state.disableMode;await this.muteStream(t),this.state.setStatus("disabled")}finally{t.aborted||this.state.setPendingStatus(this.state.status)}})))}async statusChangeSettled(){await async function(e){let t;for(;t=uI.get(e);)await t.promise}(this.statusChangeConcurrencyTag)}async resume(){"enabled"===this.state.prevStatus&&"enabled"!==this.state.status&&await this.enable()}async toggle(){return"enabled"===this.state.optimisticStatus?await this.disable():await this.enable()}registerFilter(e){const t={start:e,stop:void 0};return{registered:lI(this.filterRegistrationConcurrencyTag,(async()=>{this.filters.push(t),await this.applySettingsToStream()})),unregister:()=>lI(this.filterRegistrationConcurrencyTag,(async()=>{t.stop?.(),this.filters=this.filters.filter((e=>e!==t)),await this.applySettingsToStream()}))}}setDefaultConstraints(e){this.state.setDefaultConstraints(e)}async select(e){if(Wx())throw new Error("This method is not supported in React Native. Please visit https://getstream.io/video/docs/reactnative/core/camera-and-microphone/#speaker-management for reference.");const t=this.state.selectedDevice;if(e!==t)try{this.state.setDevice(e),await this.applySettingsToStream()}catch(n){throw this.state.setDevice(t),n}}async applySettingsToStream(){await cI(this.statusChangeConcurrencyTag,(async()=>{this.enabled&&(await this.muteStream(),await this.unmuteStream())}))}publishStream(e){return this.call.publish(e,this.trackType)}stopPublishStream(){return this.call.stopPublish(this.trackType)}getTracks(){return this.state.mediaStream?.getTracks()??[]}async muteStream(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.state.mediaStream;if(!t)return;this.logger("debug",(e?"Stopping":"Disabling")+" stream"),this.call.state.callingState===vI.JOINED&&await this.stopPublishStream(),this.muteLocalStream(e);const n=this.getTracks().every((e=>"ended"===e.readyState));n&&("function"===typeof t.release&&t.release(),this.state.setMediaStream(void 0,void 0),this.filters.forEach((e=>e.stop?.())))}disableTracks(){this.getTracks().forEach((e=>{e.enabled&&(e.enabled=!1)}))}enableTracks(){this.getTracks().forEach((e=>{e.enabled||(e.enabled=!0)}))}stopTracks(){this.getTracks().forEach((e=>{"live"===e.readyState&&e.stop()}))}muteLocalStream(e){this.state.mediaStream&&(e?this.stopTracks():this.disableTracks())}async unmuteStream(){let e,t;if(this.logger("debug","Starting stream"),this.state.mediaStream&&this.getTracks().every((e=>"live"===e.readyState)))e=this.state.mediaStream,this.enableTracks();else{const n={...this.state.defaultConstraints,deviceId:this.state.selectedDevice?{exact:this.state.selectedDevice}:void 0},r=e=>async t=>{if(!e)return t;const n=await e;return t.getTracks().forEach((e=>{const t=e.stop;e.stop=function(){t.call(e),n.getTracks().forEach((t=>{t.kind===e.kind&&t.stop()}))}})),n.getTracks().forEach((e=>{const n=()=>{t.getTracks().forEach((t=>{e.kind===t.kind&&(t.stop(),t.dispatchEvent(new Event("ended")))}))};e.addEventListener("ended",n),this.subscriptions.push((()=>{e.removeEventListener("ended",n)}))})),t};t=this.getStream(n),e=await this.filters.reduce(((e,t)=>e.then((e=>{const{stop:n,output:r}=t.start(e);return t.stop=n,r})).then(r(e),(t=>(this.logger("warn","Filter failed to start and will be ignored",t),e)))),t)}if(this.call.state.callingState===vI.JOINED&&await this.publishStream(e),this.state.mediaStream!==e){this.state.setMediaStream(e,await t);const n=async()=>{await this.statusChangeSettled(),this.enabled&&(this.isTrackStoppedDueToTrackEnd=!0,setTimeout((()=>{this.isTrackStoppedDueToTrackEnd=!1}),2e3),await this.disable())},r=e=>()=>{kP()&&this.trackType===QT.VIDEO&&this.call.notifyTrackMuteState(e,this.trackType).catch((e=>{this.logger("warn","Error while notifying track mute state",e)}))};e.getTracks().forEach((e=>{const t=r(!0),i=r(!1);e.addEventListener("mute",t),e.addEventListener("unmute",i),e.addEventListener("ended",n),this.subscriptions.push((()=>{e.removeEventListener("mute",t),e.removeEventListener("unmute",i),e.removeEventListener("ended",n)}))}))}}get mediaDeviceKind(){return this.trackType===QT.AUDIO?"audioinput":this.trackType===QT.VIDEO?"videoinput":""}handleDisconnectedOrReplacedDevices(){this.subscriptions.push(mI(QE([wP.pipe(FE((function(e,t){var n,r=!1;e.subscribe(UE(t,(function(e){var i=n;n=e,r&&t.next([i,e]),r=!0})))}))),this.state.selectedDevice$]),(async e=>{let[[t,n],r]=e;try{if(!r)return;await this.statusChangeSettled();let e=!1,i=!1;const s=this.findDevice(n,r),o=this.findDevice(t,r);!s&&o?e=!0:s&&o&&s.deviceId===o.deviceId&&s.groupId!==o.groupId&&(i=!0),e&&(await this.disable(),await this.select(void 0)),i&&(this.isTrackStoppedDueToTrackEnd&&"disabled"===this.state.status?(await this.enable(),this.isTrackStoppedDueToTrackEnd=!1):await this.applySettingsToStream())}catch(i){this.logger("warn","Unexpected error while handling disconnected or replaced device",i)}})))}findDevice(e,t){const n=this.mediaDeviceKind;return e.find((e=>e.deviceId===t&&e.kind===n))}}class EP{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"stop-tracks",t=arguments.length>1?arguments[1]:void 0;this.disableMode=e,this.statusSubject=new ZE(void 0),this.optimisticStatusSubject=new ZE(void 0),this.mediaStreamSubject=new ZE(void 0),this.selectedDeviceSubject=new ZE(void 0),this.defaultConstraintsSubject=new ZE(void 0),this.mediaStream$=this.mediaStreamSubject.asObservable(),this.selectedDevice$=this.selectedDeviceSubject.asObservable().pipe(nT()),this.status$=this.statusSubject.asObservable().pipe(nT()),this.optimisticStatus$=this.optimisticStatusSubject.asObservable().pipe(nT()),this.defaultConstraints$=this.defaultConstraintsSubject.asObservable(),this.getCurrentValue=hI,this.setCurrentValue=pI,this.hasBrowserPermission$=t?t.asObservable().pipe(tT(1)):TT(!0),this.isPromptingPermission$=t?t.getIsPromptingObservable().pipe(tT(1)):TT(!1)}get status(){return this.getCurrentValue(this.status$)}get optimisticStatus(){return this.getCurrentValue(this.optimisticStatus$)}get selectedDevice(){return this.getCurrentValue(this.selectedDevice$)}get mediaStream(){return this.getCurrentValue(this.mediaStream$)}setStatus(e){this.setCurrentValue(this.statusSubject,e)}setPendingStatus(e){this.setCurrentValue(this.optimisticStatusSubject,e)}setMediaStream(e,t){this.setCurrentValue(this.mediaStreamSubject,e),t&&this.setDevice(this.getDeviceIdFromStream(t))}setDevice(e){this.setCurrentValue(this.selectedDeviceSubject,e)}get defaultConstraints(){return this.getCurrentValue(this.defaultConstraints$)}setDefaultConstraints(e){this.setCurrentValue(this.defaultConstraintsSubject,e)}}class TP extends EP{constructor(){super("stop-tracks",dP()),this.directionSubject=new ZE(void 0),this.direction$=this.directionSubject.asObservable().pipe(nT())}get direction(){return this.getCurrentValue(this.direction$)}setDirection(e){this.setCurrentValue(this.directionSubject,e)}setMediaStream(e,t){if(super.setMediaStream(e,t),e){const t=Wx()?this.direction:"environment"===e.getVideoTracks()[0]?.getSettings().facingMode?"back":"front";this.setDirection(t)}}getDeviceIdFromStream(e){const[t]=e.getVideoTracks();return t?.getSettings().deviceId}}class _P extends CP{constructor(e){super(e,new TP,QT.VIDEO),this.targetResolution={width:1280,height:720}}isDirectionSupportedByDevice(){return Wx()||kP()}async selectDirection(e){if(this.isDirectionSupportedByDevice())if(Wx()){const t=this.getTracks()[0];if(!t)return void this.logger("warn","No video track found to do direction selection");await t.applyConstraints({facingMode:"front"===e?"user":"environment"}),this.state.setDirection(e),this.state.setDevice(void 0)}else this.state.setDirection(e),this.state.setDevice(void 0),this.getTracks().forEach((e=>{e.stop()})),await this.unmuteStream();else this.logger("warn","Camera direction ignored for desktop devices")}async flip(){const e="front"===this.state.direction?"back":"front";await this.selectDirection(e)}async selectTargetResolution(e){if(this.targetResolution.height=e.height,this.targetResolution.width=e.width,"enabled"===this.state.optimisticStatus)try{await this.statusChangeSettled()}catch(t){this.logger("warn","could not apply target resolution",t)}if(this.enabled&&this.state.mediaStream){const[e]=this.state.mediaStream.getVideoTracks();if(!e)return;const{width:t,height:n}=e.getSettings();t===this.targetResolution.width&&n===this.targetResolution.height||(await this.applySettingsToStream(),this.logger("debug",`${t}x${n} target resolution applied to media stream`))}}async apply(e,t){const n=!!this.call.state.localParticipant?.videoStream,r=this.call.permissionsContext.hasPermission(MT);if(n||!r)return;await this.statusChangeSettled();const{target_resolution:i,camera_facing:s,camera_default_on:o}=e;if(await this.selectTargetResolution(i),this.state.direction||this.state.selectedDevice||this.state.setDirection("front"===s?"front":"back"),!t)return;const{mediaStream:a}=this.state;this.enabled&&a?await this.publishStream(a):void 0===this.state.status&&o&&await this.enable()}getDevices(){return fP()}getStream(e){return e.width=this.targetResolution.width,e.height=this.targetResolution.height,!e.deviceId&&this.state.direction&&this.isDirectionSupportedByDevice()&&(e.facingMode="front"===this.state.direction?"user":"environment"),bP(e)}}class xP extends EP{constructor(e){super(e,uP()),this.speakingWhileMutedSubject=new ZE(!1),this.speakingWhileMuted$=this.speakingWhileMutedSubject.asObservable().pipe(nT())}get speakingWhileMuted(){return this.getCurrentValue(this.speakingWhileMuted$)}setSpeakingWhileMuted(e){this.setCurrentValue(this.speakingWhileMutedSubject,e)}getDeviceIdFromStream(e){const[t]=e.getAudioTracks();return t?.getSettings().deviceId}}const IP=500,RP=150,PP=128;class AP{constructor(){this.pc1=new RTCPeerConnection({}),this.pc2=new RTCPeerConnection({})}async start(e){try{this.cleanupAudioStream();const t=await navigator.mediaDevices.getUserMedia({audio:!0});this.audioStream=t,this.pc1.addEventListener("icecandidate",(async e=>{await this.pc2.addIceCandidate(e.candidate)})),this.pc2.addEventListener("icecandidate",(async e=>{await this.pc1.addIceCandidate(e.candidate)})),this.pc2.addEventListener("track",(e=>{e.streams[0].getTracks().forEach((e=>{e._setVolume(0)}))})),t.getTracks().forEach((e=>this.pc1.addTrack(e,t)));const n=await this.pc1.createOffer({});await this.pc2.setRemoteDescription(n),await this.pc1.setLocalDescription(n);const r=await this.pc2.createAnswer();await this.pc1.setRemoteDescription(r),await this.pc2.setLocalDescription(r);const i=this.onSpeakingDetectedStateChange(e);return()=>{i(),this.stop()}}catch(t){return Zx(["RNSpeechDetector"])("error","error handling permissions: ",t),()=>{}}}stop(){this.pc1.close(),this.pc2.close(),this.cleanupAudioStream()}onSpeakingDetectedStateChange(e){let t,n,r,i=.13,s=!1,o=[];return t=setInterval((async()=>{try{const t=await this.pc1.getStats(),a=OR(t).find((e=>"media-source"===e.type&&"audio"===e.kind));if(a){const{audioLevel:t}=a;if(t){o.push(t),o.length>10&&o.shift();const a=o.reduce(((e,t)=>e+t),0)/o.length;a<1.1*i?r||(r=setTimeout((()=>{i=Math.min(.9*a,.13)}),5e3)):(clearTimeout(r),r=void 0),a>1.5*i&&(s||(s=!0,e({isSoundDetected:!0,audioLevel:t})),clearTimeout(n),n=setTimeout((()=>{s=!1,e({isSoundDetected:!1,audioLevel:0})}),500))}}}catch(t){Zx(["RNSpeechDetector"])("error","error checking audio level from stats",t)}}),100),()=>{clearInterval(t),clearTimeout(n),clearTimeout(r)}}cleanupAudioStream(){this.audioStream&&(this.audioStream.getTracks().forEach((e=>e.stop())),"function"===typeof this.audioStream.release&&this.audioStream.release())}}class NP extends CP{constructor(e){super(e,new xP(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"stop-tracks"),QT.AUDIO),this.speakingWhileMutedNotificationEnabled=!0,this.soundDetectorConcurrencyTag=Symbol("soundDetectorConcurrencyTag"),this.subscriptions.push(mI(QE([this.call.state.callingState$,this.call.state.ownCapabilities$,this.state.selectedDevice$,this.state.status$]),(async e=>{let[t,n,r,i]=e;try{if(t===vI.LEFT&&await this.stopSpeakingWhileMutedDetection(),t!==vI.JOINED)return;if(!this.speakingWhileMutedNotificationEnabled)return;n.includes(MT)&&"disabled"===i?await this.startSpeakingWhileMutedDetection(r):await this.stopSpeakingWhileMutedDetection()}catch(s){this.logger("warn","Could not enable speaking while muted",s)}}))),this.subscriptions.push(mI(this.call.state.callingState$,(e=>{if(!this.noiseCancellationRegistration||!this.noiseCancellation)return;this.call.state.settings?.audio.noise_cancellation?.mode===RT&&e===vI.JOINED?this.noiseCancellationRegistration.then((()=>this.noiseCancellation?.enable())).catch((e=>(this.logger("warn","Failed to enable noise cancellation",e),this.call.notifyNoiseCancellationStopped()))):e===vI.LEFT&&this.noiseCancellationRegistration.then((()=>this.noiseCancellation?.disable())).catch((e=>{this.logger("warn","Failed to disable noise cancellation",e)}))})))}async enableNoiseCancellation(e){if(Wx())throw new Error("Noise cancellation is not supported in React Native");const{ownCapabilities:t,settings:n}=this.call.state;if(!t.includes(NT))throw new Error("Noise cancellation is not available.");const r=n?.audio.noise_cancellation;if(!r||r.mode===IT)throw new Error("Noise cancellation is disabled for this call type.");try{this.noiseCancellation=e,this.noiseCancellationChangeUnsubscribe=this.noiseCancellation.on("change",(e=>{e?this.call.notifyNoiseCancellationStarting().catch((e=>{this.logger("warn","notifyNoiseCancellationStart failed",e)})):this.call.notifyNoiseCancellationStopped().catch((e=>{this.logger("warn","notifyNoiseCancellationStop failed",e)}))}));const t=this.registerFilter(e.toFilter());this.noiseCancellationRegistration=t.registered,this.unregisterNoiseCancellation=t.unregister,await this.noiseCancellationRegistration,r.mode===RT&&this.call.state.callingState===vI.JOINED&&e.enable()}catch(i){this.logger("warn","Failed to enable noise cancellation",i),await this.disableNoiseCancellation().catch((e=>{this.logger("warn","Failed to disable noise cancellation",e)}))}}async disableNoiseCancellation(){if(Wx())throw new Error("Noise cancellation is not supported in React Native");await(this.unregisterNoiseCancellation?.()??Promise.resolve()).then((()=>this.noiseCancellation?.disable())).then((()=>this.noiseCancellationChangeUnsubscribe?.())).catch((e=>{this.logger("warn","Failed to unregister noise cancellation",e)})),await this.call.notifyNoiseCancellationStopped()}async enableSpeakingWhileMutedNotification(){this.speakingWhileMutedNotificationEnabled=!0,"disabled"===this.state.status&&await this.startSpeakingWhileMutedDetection(this.state.selectedDevice)}async disableSpeakingWhileMutedNotification(){this.speakingWhileMutedNotificationEnabled=!1,await this.stopSpeakingWhileMutedDetection()}async apply(e,t){if(!t)return;const n=!!this.call.state.localParticipant?.audioStream,r=this.call.permissionsContext.hasPermission(MT);if(n||!r)return;await this.statusChangeSettled();const{mediaStream:i}=this.state;this.enabled&&i?await this.publishStream(i):void 0===this.state.status&&e.mic_default_on&&await this.enable()}getDevices(){return pP()}getStream(e){return yP(e)}async startSpeakingWhileMutedDetection(e){await lI(this.soundDetectorConcurrencyTag,(async()=>{if(await this.stopSpeakingWhileMutedDetection(),Wx()){this.rnSpeechDetector=new AP;const e=await this.rnSpeechDetector.start((e=>{this.state.setSpeakingWhileMuted(e.isSoundDetected)}));this.soundDetectorCleanup=()=>{e(),this.rnSpeechDetector=void 0}}else{const t=await this.getStream({deviceId:e});this.soundDetectorCleanup=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{detectionFrequencyInMs:r=IP,audioLevelThreshold:i=RP,fftSize:s=PP,destroyStreamOnStop:o=!0}=n,a=new AudioContext,l=a.createAnalyser();l.fftSize=s;const c=a.createMediaStreamSource(e);c.connect(l);const u=setInterval((()=>{const n=new Uint8Array(l.frequencyBinCount);l.getByteFrequencyData(n);const r=n.some((e=>e>=i)),s=n.reduce(((e,t)=>e+t),0)/n.length,o=s>i?100:Math.round(s/i*100);e.getAudioTracks()[0]?.enabled?t({isSoundDetected:r,audioLevel:o}):t({isSoundDetected:!1,audioLevel:0})}),r);return async function(){clearInterval(u),c.disconnect(),l.disconnect(),"closed"!==a.state&&await a.close(),o&&e.getTracks().forEach((t=>{t.stop(),e.removeTrack(t)}))}}(t,(e=>{this.state.setSpeakingWhileMuted(e.isSoundDetected)}))}}))}async stopSpeakingWhileMutedDetection(){await lI(this.soundDetectorConcurrencyTag,(async()=>{if(!this.soundDetectorCleanup)return;const e=this.soundDetectorCleanup;this.soundDetectorCleanup=void 0,this.state.setSpeakingWhileMuted(!1),await e()}))}}class OP extends EP{constructor(){super(...arguments),this.audioEnabledSubject=new ZE(!0),this.settingsSubject=new ZE(void 0),this.audioEnabled$=this.audioEnabledSubject.asObservable().pipe(nT()),this.settings$=this.settingsSubject.asObservable(),this.getDeviceIdFromStream=e=>{const[t]=e.getTracks();return t?.getSettings().deviceId}}get audioEnabled(){return this.getCurrentValue(this.audioEnabled$)}setAudioEnabled(e){this.setCurrentValue(this.audioEnabledSubject,e)}get settings(){return this.getCurrentValue(this.settings$)}setSettings(e){this.setCurrentValue(this.settingsSubject,e)}}class DP extends CP{constructor(e){super(e,new OP,QT.SCREEN_SHARE),this.subscriptions.push(mI(e.state.settings$,(e=>{const t=e?.screensharing.target_resolution;t&&this.setDefaultConstraints({video:{width:t.width,height:t.height}})})))}enableScreenShareAudio(){this.state.setAudioEnabled(!0)}async disableScreenShareAudio(){this.state.setAudioEnabled(!1),this.call.publisher?.isPublishing(QT.SCREEN_SHARE_AUDIO)&&await this.call.stopPublish(QT.SCREEN_SHARE_AUDIO)}getSettings(){return this.state.settings}setSettings(e){this.state.setSettings(e)}getDevices(){return TT([])}getStream(e){return this.state.audioEnabled||(e.audio=!1),(async e=>{try{return await navigator.mediaDevices.getDisplayMedia({video:!0,audio:{channelCount:{ideal:2},echoCancellation:!1,autoGainControl:!1,noiseSuppression:!1},systemAudio:"include",...e})}catch(t){throw Zx(["devices"])("error","Failed to get screen share stream",t),t}})(e)}async stopPublishStream(){return this.call.stopPublish(QT.SCREEN_SHARE,QT.SCREEN_SHARE_AUDIO)}async select(e){throw new Error("This method is not supported in for Screen Share")}}class LP{constructor(){this.selectedDeviceSubject=new ZE(""),this.volumeSubject=new ZE(1),this.isDeviceSelectionSupported="undefined"!==typeof document&&"setSinkId"in document.createElement("audio"),this.getCurrentValue=hI,this.setCurrentValue=pI,this.selectedDevice$=this.selectedDeviceSubject.asObservable().pipe(nT()),this.volume$=this.volumeSubject.asObservable().pipe(nT())}get selectedDevice(){return this.getCurrentValue(this.selectedDevice$)}get volume(){return this.getCurrentValue(this.volume$)}setDevice(e){this.setCurrentValue(this.selectedDeviceSubject,e)}setVolume(e){this.setCurrentValue(this.volumeSubject,e)}}class jP{constructor(e){this.state=new LP,this.subscriptions=[],this.dispose=()=>{this.subscriptions.forEach((e=>e.unsubscribe()))},this.call=e,wP&&!Wx()&&this.subscriptions.push(QE([wP,this.state.selectedDevice$]).subscribe((e=>{let[t,n]=e;if(!n)return;t.find((e=>e.deviceId===n&&"audiooutput"===e.kind))||this.select("")})))}listDevices(){if(Wx())throw new Error("This feature is not supported in React Native. Please visit https://getstream.io/video/docs/reactnative/core/camera-and-microphone/#speaker-management for more details");return mP()}select(e){if(Wx())throw new Error("This feature is not supported in React Native. Please visit https://getstream.io/video/docs/reactnative/core/camera-and-microphone/#speaker-management for more details");this.state.setDevice(e)}setVolume(e){if(Wx())throw new Error("This feature is not supported in React Native. Please visit https://getstream.io/video/docs/reactnative/core/camera-and-microphone/#speaker-management for more details");if(e&&(e<0||e>1))throw new Error("Volume must be between 0 and 1");this.state.setVolume(e)}setParticipantVolume(e,t){if(Wx())throw new Error("This feature is not supported in React Native. Please visit https://getstream.io/video/docs/reactnative/core/camera-and-microphone/#speaker-management for more details");if(t&&(t<0||t>1))throw new Error("Volume must be between 0 and 1, or undefined");this.call.state.updateParticipant(e,{audioVolume:t})}}class MP{constructor(e){var t=this;let{type:n,id:r,streamClient:i,members:s,ownCapabilities:o,sortParticipantsBy:a,clientStore:l,ringing:c=!1,watching:u=!1}=e;this.state=new zI,this.permissionsContext=new rP,this.dispatcher=new sI,this.sfuClientTag=0,this.reconnectConcurrencyTag=Symbol("reconnectConcurrencyTag"),this.reconnectAttempts=0,this.reconnectStrategy=r_.UNSPECIFIED,this.fastReconnectDeadlineSeconds=0,this.disconnectionTimeoutSeconds=0,this.lastOfflineTimestamp=0,this.trackPublishOrder=[],this.hasJoinedOnce=!1,this.deviceSettingsAppliedOnce=!1,this.initialized=!1,this.joinLeaveConcurrencyTag=Symbol("joinLeaveConcurrencyTag"),this.leaveCallHooks=new Set,this.streamClientEventHandlers=new Map,this.setup=async()=>{await lI(this.joinLeaveConcurrencyTag,(async()=>{this.initialized||(this.leaveCallHooks.add(this.on("all",(e=>{this.state.updateFromEvent(e)}))),this.leaveCallHooks.add(this.on("changePublishOptions",(e=>{this.currentPublishOptions=e.publishOptions}))),this.leaveCallHooks.add(((e,t)=>{const n=e.state,r=[e.on("call.ended",fR(e)),mR(e),bR(t,e),wR(t),vR(t,n),yR(t,n),e.on("participantJoined",ER(n)),e.on("participantLeft",TR(n)),e.on("participantUpdated",_R(n)),e.on("trackPublished",xR(n)),e.on("trackUnpublished",IR(n)),AR(t,n),PR(t,n),e.on("callGrantsUpdated",gR(n)),e.on("pinsUpdated",SR(n)),kR(e)];return e.ringing&&r.push(NR(e)),()=>{r.forEach((e=>e()))}})(this,this.dispatcher)),this.registerEffects(),this.registerReconnectHandlers(),this.state.callingState===vI.LEFT&&this.state.setCallingState(vI.IDLE),this.initialized=!0)}))},this.registerEffects=()=>{this.leaveCallHooks.add(mI(this.state.settings$,(e=>{e&&this.permissionsContext.setCallSettings(e)}))),this.leaveCallHooks.add(gI(this.state.ownCapabilities$,this.handleOwnCapabilitiesUpdated)),this.leaveCallHooks.add(mI(this.state.blockedUserIds$,(async e=>{if(!e||0===e.length)return;const t=this.currentUserId;t&&e.includes(t)&&(this.logger("info","Leaving call because of being blocked"),await this.leave({reason:"user blocked"}).catch((e=>{this.logger("error","Error leaving call after being blocked",e)})))}))),this.leaveCallHooks.add(mI(this.state.session$,(e=>{if(!this.ringing)return;const t=this.clientStore.connectedUser?.id;if(!t)return;const n=Boolean(e?.accepted_by[t]),r=Boolean(e?.rejected_by[t]);(n||r)&&this.cancelAutoDrop();var i;!(n&&this.state.callingState===vI.RINGING)&&!r||(i=this.joinLeaveConcurrencyTag,uI.has(i))||this.leave().catch((()=>{this.logger("error","Could not leave a call that was accepted or rejected elsewhere")}))}))),this.leaveCallHooks.add(mI(this.ringingSubject,(e=>{if(!e)return;const t=this.state.session,n=this.clientStore.connectedUser?.id,r=t?.ended_at,i=this.state.createdBy?.id,s=t?.rejected_by,o=t?.accepted_by;let a=!1;r?a=!0:i&&s?s[i]&&(a=!0):n&&s?s[n]&&(a=!0):n&&o&&o[n]&&(a=!0),a?this.state.callingState!==vI.IDLE&&this.state.setCallingState(vI.IDLE):(this.state.callingState===vI.IDLE&&this.state.setCallingState(vI.RINGING),this.scheduleAutoDrop(),this.leaveCallHooks.add(NR(this)))})))},this.handleOwnCapabilitiesUpdated=async e=>{if(this.permissionsContext.setPermissions(e),!this.publisher)return;const t={[MT]:QT.AUDIO,[FT]:QT.VIDEO,[jT]:QT.SCREEN_SHARE};for(const[r,i]of Object.entries(t)){if(!this.permissionsContext.hasPermission(r))try{switch(i){case QT.AUDIO:this.microphone.enabled&&await this.microphone.disable();break;case QT.VIDEO:this.camera.enabled&&await this.camera.disable();break;case QT.SCREEN_SHARE:this.screenShare.enabled&&await this.screenShare.disable()}}catch(n){this.logger("error","Can't disable mic/camera/screenshare after revoked permissions",n)}}},this.on=(e,t)=>{if(iI(e))return this.dispatcher.on(e,t);const n=this.streamClient.on(e,(e=>{const n=e;n.call_cid&&n.call_cid===this.cid&&t(n)}));return this.streamClientEventHandlers.set(t,n),()=>{this.off(e,t)}},this.off=(e,t)=>{if(iI(e))return this.dispatcher.off(e,t);const n=this.streamClientEventHandlers.get(t);n&&n()},this.leave=async function(){let{reject:e,reason:n="user is leaving the call"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};await lI(t.joinLeaveConcurrencyTag,(async()=>{const r=t.state.callingState;if(r===vI.LEFT)throw new Error("Cannot leave call that has already been left.");if(r===vI.JOINING){const e=()=>new Promise((e=>{t.state.callingState$.pipe(iT((e=>e!==vI.JOINED),!0)).subscribe((()=>e()))}));await e()}if(r===vI.RINGING&&!1!==e)if(e)await t.reject(n);else{const e=t.state.remoteParticipants.length>0;t.isCreatedByMe&&!e&&await t.reject("cancel")}t.statsReporter?.stop(),t.statsReporter=void 0,t.sfuStatsReporter?.stop(),t.sfuStatsReporter=void 0,t.subscriber?.dispose(),t.subscriber=void 0,t.publisher?.dispose(),t.publisher=void 0,await(t.sfuClient?.leaveAndClose(n)),t.sfuClient=void 0,t.dynascaleManager.setSfuClient(void 0),t.state.setCallingState(vI.LEFT),t.state.setParticipants([]),t.state.dispose(),t.leaveCallHooks.forEach((e=>e())),t.initialized=!1,t.hasJoinedOnce=!1,t.ringingSubject.next(!1),t.clientStore.unregisterCall(t),t.camera.dispose(),t.microphone.dispose(),t.screenShare.dispose(),t.speaker.dispose();const i=[];t.camera.stopOnLeave&&i.push(t.camera.disable(!0)),t.microphone.stopOnLeave&&i.push(t.microphone.disable(!0)),t.screenShare.stopOnLeave&&i.push(t.screenShare.disable(!0)),await Promise.all(i)}))},this.updateFromRingingEvent=async e=>{await this.setup();const{created_by:t,settings:n}=e.call,r=this.state.members.find((e=>e.user.id===t.id));r?this.state.setMembers([r,...e.members]):this.state.setMembers(e.members),this.state.updateFromCallResponse(e.call),this.watching=!0,this.ringingSubject.next(!0);const i=this.clientStore.calls.filter((e=>e.cid!==this.cid));this.clientStore.setCalls([this,...i]),await this.applyDeviceConfig(n,!1)},this.get=async e=>{await this.setup();const t=await this.streamClient.get(this.streamClientBasePath,e);return this.state.updateFromCallResponse(t.call),this.state.setMembers(t.members),this.state.setOwnCapabilities(t.own_capabilities),e?.ring&&this.ringingSubject.next(!0),this.streamClient._hasConnectionID()&&(this.watching=!0,this.clientStore.registerCall(this)),await this.applyDeviceConfig(t.call.settings,!1),t},this.getOrCreate=async e=>{await this.setup();const t=await this.streamClient.post(this.streamClientBasePath,e);return this.state.updateFromCallResponse(t.call),this.state.setMembers(t.members),this.state.setOwnCapabilities(t.own_capabilities),e?.ring&&this.ringingSubject.next(!0),this.streamClient._hasConnectionID()&&(this.watching=!0,this.clientStore.registerCall(this)),await this.applyDeviceConfig(t.call.settings,!1),t},this.create=async e=>this.getOrCreate(e),this.delete=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.streamClient.post(`${t.streamClientBasePath}/delete`,e)},this.ring=async()=>await this.get({ring:!0}),this.notify=async()=>await this.get({notify:!0}),this.accept=async()=>this.streamClient.post(`${this.streamClientBasePath}/accept`),this.reject=async e=>this.streamClient.post(`${this.streamClientBasePath}/reject`,{reason:e}),this.join=async e=>{const t=Date.now();await this.setup();const n=this.state.callingState;if([vI.JOINED,vI.JOINING].includes(n))throw new Error("Illegal State: call.join() shall be called only once");this.joinCallData=e,this.logger("debug","Starting join flow"),this.state.setCallingState(vI.JOINING);const r=this.reconnectStrategy===r_.MIGRATE,i=this.reconnectStrategy===r_.REJOIN,s=this.reconnectStrategy===r_.FAST;let o=this.sfuStatsReporter?.options;if(!this.credentials||!o||i||r)try{const t=await this.doJoinRequest(e);this.credentials=t.credentials,o=t.stats_options}catch(h){throw this.state.callingState===vI.OFFLINE||this.state.setCallingState(n),h}const a=this.sfuClient,l=a?.sessionId,c=!!a?.isHealthy,u=i||r||!c?new dR({logTag:String(this.sfuClientTag++),dispatcher:this.dispatcher,credentials:this.credentials,streamClient:this.streamClient,sessionId:i?void 0:l,onSignalClose:()=>this.handleSfuSignalClose(u)}):a;this.sfuClient=u,this.dynascaleManager.setSfuClient(u);const d=await QR();if(a!==u){const[t,r]=await Promise.all([tI("recvonly"),tI("sendonly")]),i=this.reconnectStrategy!==r_.UNSPECIFIED,o=i?this.getReconnectDetails(e?.migrating_from,l):void 0,a=i?this.currentPublishOptions||[]:this.getPreferredPublishOptions(),c=i?[]:this.getPreferredSubscribeOptions();try{const{callState:e,fastReconnectDeadlineSeconds:n,publishOptions:i}=await u.join({subscriberSdp:t,publisherSdp:r,clientDetails:d,fastReconnect:s,reconnectDetails:o,preferredPublishOptions:a,preferredSubscribeOptions:c});this.currentPublishOptions=i,this.fastReconnectDeadlineSeconds=n,e&&this.state.updateFromSfuCallState(e,u.sessionId,o)}catch(h){throw this.state.setCallingState(n),h}}if(r||this.state.setCallingState(vI.JOINED),this.hasJoinedOnce=!0,s)await this.restoreICE(u,{includeSubscriber:!1});else{const e=(e=>({iceServers:e.map((e=>({urls:e.urls,username:e.username,credential:e.password})))}))(this.credentials.ice_servers);this.initPublisherAndSubscriber({sfuClient:u,connectionConfig:e,clientDetails:d,statsOptions:o,publishOptions:this.currentPublishOptions||[],closePreviousInstances:!r})}if(i||s||r||this.sfuStatsReporter?.sendConnectionTime((Date.now()-t)/1e3),i){const e=r_[this.reconnectStrategy];await(a?.leaveAndClose(`Closing previous WS after reconnect with strategy: ${e}`))}else c||a?.close(dR.DISPOSE_OLD_SOCKET,"Closing unhealthy WS after reconnect");!this.deviceSettingsAppliedOnce&&this.state.settings&&(await this.applyDeviceConfig(this.state.settings,!0),this.deviceSettingsAppliedOnce=!0),delete this.joinCallData?.ring,delete this.joinCallData?.notify,this.reconnectStrategy=r_.UNSPECIFIED,this.logger("info",`Joined call ${this.cid}`)},this.getReconnectDetails=(e,t)=>{const n=this.reconnectStrategy,r=n===r_.REJOIN;return{strategy:n,announcedTracks:this.publisher?.getAnnouncedTracksForReconnect()||[],subscriptions:this.dynascaleManager.trackSubscriptions,reconnectAttempt:this.reconnectAttempts,fromSfuId:e||"",previousSessionId:r&&t||""}},this.getPreferredPublishOptions=()=>{const{preferredCodec:e,fmtpLine:t,preferredBitrate:n,maxSimulcastLayers:r}=this.clientPublishOptions||{};if(!e&&!n&&!r)return[];const i=e?m_.create({name:e.split("/").pop(),fmtp:t}):void 0,s=[f_.create({trackType:QT.VIDEO,codec:i,bitrate:n,maxSpatialLayers:r})],o=this.screenShare.getSettings();return o&&s.push(f_.create({trackType:QT.SCREEN_SHARE,fps:o.maxFramerate,bitrate:o.maxBitrate})),s},this.getPreferredSubscribeOptions=()=>{const{subscriberCodec:e,subscriberFmtpLine:t}=this.clientPublishOptions||{};return e&&t?[p_.create({trackType:QT.VIDEO,codecs:[{name:e.split("/").pop(),fmtp:t}]})]:[]},this.restoreICE=async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{includeSubscriber:r=!0,includePublisher:i=!0}=n;t.subscriber&&(t.subscriber.setSfuClient(e),r&&await t.subscriber.restartIce()),t.publisher&&(t.publisher.setSfuClient(e),i&&await t.publisher.restartIce())},this.initPublisherAndSubscriber=e=>{const{sfuClient:t,connectionConfig:n,clientDetails:r,statsOptions:i,publishOptions:s,closePreviousInstances:o}=e;o&&this.subscriber&&this.subscriber.dispose(),this.subscriber=new nR({sfuClient:t,dispatcher:this.dispatcher,state:this.state,connectionConfig:n,logTag:String(this.sfuClientTag),onUnrecoverableError:()=>{this.reconnect(r_.REJOIN).catch((e=>{this.logger("warn","[Reconnect] Error reconnecting after a subscriber error",e)}))}});"anonymous"===this.streamClient.user?.type||(o&&this.publisher&&this.publisher.dispose(),this.publisher=new tR({sfuClient:t,dispatcher:this.dispatcher,state:this.state,connectionConfig:n,publishOptions:s,logTag:String(this.sfuClientTag),onUnrecoverableError:()=>{this.reconnect(r_.REJOIN).catch((e=>{this.logger("warn","[Reconnect] Error reconnecting after a publisher error",e)}))}})),this.statsReporter?.stop(),this.statsReporter=(e=>{let{subscriber:t,publisher:n,state:r,datacenter:i,pollingIntervalInMs:s=2e3}=e;const o=Zx(["stats"]),a=async(e,r)=>"subscriber"===e&&t?t.getStats(r):"publisher"===e&&n?n.getStats(r):void 0,l=async(e,r)=>{const i="subscriber"===e?t:n;if(!i)return[];const s=[];for(const t of r){const n=await i.getStats(t),r=UR(n,{trackKind:t.kind,kind:e});s.push(r)}return s},c=new Set,u=async()=>{const e={};if(c.size>0){const t=new Set(c);for(const i of r.participants){if(!t.has(i.sessionId))continue;const{audioStream:r,isLocalParticipant:s,sessionId:a,userId:c,videoStream:u}=i,d=s?"publisher":"subscriber";try{const t=s?n?.getPublishedTracks()||[]:[...u?.getVideoTracks()||[],...r?.getAudioTracks()||[]];e[a]=await l(d,t)}catch(p){o("warn",`Failed to collect ${d} stats for ${c}`,p)}}}const[s,u]=await Promise.all([t.getStats().then((e=>UR(e,{kind:"subscriber",trackKind:"video",publisher:n}))).then($R),n?n.getStats().then((e=>UR(e,{kind:"publisher",trackKind:"video",publisher:n}))).then($R):VR()]),[d,h]=await Promise.all([a("subscriber"),n?a("publisher"):void 0]);r.setCallStatsReport({datacenter:i,publisherStats:u,subscriberStats:s,subscriberRawStats:d,publisherRawStats:h,participants:e,timestamp:Date.now()})};let d;if(s>0){const e=async()=>{await u().catch((e=>{o("debug","Failed to collect stats",e)})),d=setTimeout(e,s)};e()}return{getRawStatsForTrack:a,getStatsForStream:l,startReportingStatsFor:e=>{c.add(e),u()},stopReportingStatsFor:e=>{c.delete(e),u()},stop:()=>{d&&clearTimeout(d)}}})({subscriber:this.subscriber,publisher:this.publisher,state:this.state,datacenter:t.edgeName}),this.sfuStatsReporter?.stop(),i?.reporting_interval_ms>0&&(this.sfuStatsReporter=new XR(t,{clientDetails:r,options:i,subscriber:this.subscriber,publisher:this.publisher,microphone:this.microphone,camera:this.camera,state:this.state}),this.sfuStatsReporter.start())},this.doJoinRequest=async e=>{const t=await this.streamClient.getLocationHint(),n={...e,location:t},r=await this.streamClient.post(`${this.streamClientBasePath}/join`,n);this.state.updateFromCallResponse(r.call),this.state.setMembers(r.members),this.state.setOwnCapabilities(r.own_capabilities),e?.ring&&this.ringingSubject.next(!0);return this.reconnectStrategy!==r_.UNSPECIFIED||!this.ringing||this.isCreatedByMe||await this.accept(),this.streamClient._hasConnectionID()&&(this.watching=!0,this.clientStore.registerCall(this)),r},this.handleSfuSignalClose=e=>{this.logger("debug","[Reconnect] SFU signal connection closed"),this.state.callingState!==vI.JOINING&&(e.isLeaving||this.reconnect(r_.REJOIN).catch((e=>{this.logger("warn","[Reconnect] Error reconnecting",e)})))},this.reconnect=async e=>{if(this.state.callingState!==vI.RECONNECTING&&this.state.callingState!==vI.RECONNECTING_FAILED)return lI(this.reconnectConcurrencyTag,(async()=>{this.logger("info",`[Reconnect] Reconnecting with strategy ${r_[e]}`);let t=Date.now();this.reconnectStrategy=e;do{if(this.disconnectionTimeoutSeconds>0&&(Date.now()-t)/1e3>this.disconnectionTimeoutSeconds)return this.logger("warn","[Reconnect] Stopping reconnection attempts after reaching disconnection timeout"),void this.state.setCallingState(vI.RECONNECTING_FAILED);this.reconnectStrategy!==r_.FAST&&this.reconnectAttempts++;const e=r_[this.reconnectStrategy];try{switch(await(this.networkAvailableTask?.promise),this.reconnectStrategy){case r_.UNSPECIFIED:case r_.DISCONNECT:this.logger("debug",`[Reconnect] No-op strategy ${e}`);break;case r_.FAST:await this.reconnectFast();break;case r_.REJOIN:await this.reconnectRejoin();break;case r_.MIGRATE:await this.reconnectMigrate();break;default:WI(this.reconnectStrategy,"Unknown reconnection strategy")}break}catch(n){if(this.state.callingState===vI.OFFLINE){this.logger("trace","[Reconnect] Can't reconnect while offline, stopping reconnection attempts");break}if(n instanceof BT&&n.unrecoverable)return this.logger("warn","[Reconnect] Can't reconnect due to coordinator unrecoverable error",n),void this.state.setCallingState(vI.RECONNECTING_FAILED);this.logger("warn",`[Reconnect] ${e} (${this.reconnectAttempts}) failed. Attempting with REJOIN`,n),await jx(500),this.reconnectStrategy=r_.REJOIN}}while(this.state.callingState!==vI.JOINED&&this.state.callingState!==vI.RECONNECTING_FAILED&&this.state.callingState!==vI.LEFT)}))},this.reconnectFast=async()=>{const e=Date.now();this.reconnectStrategy=r_.FAST,this.state.setCallingState(vI.RECONNECTING),await this.join(this.joinCallData),this.sfuStatsReporter?.sendReconnectionTime(r_.FAST,(Date.now()-e)/1e3)},this.reconnectRejoin=async()=>{const e=Date.now();this.reconnectStrategy=r_.REJOIN,this.state.setCallingState(vI.RECONNECTING),await this.join(this.joinCallData),await this.restorePublishedTracks(),this.restoreSubscribedTracks(),this.sfuStatsReporter?.sendReconnectionTime(r_.REJOIN,(Date.now()-e)/1e3)},this.reconnectMigrate=async()=>{const e=Date.now(),t=this.sfuClient;if(!t)throw new Error("Cannot migrate without an active SFU client");this.reconnectStrategy=r_.MIGRATE,this.state.setCallingState(vI.MIGRATING);const n=this.subscriber,r=this.publisher;n?.detachEventHandlers(),r?.detachEventHandlers();const i=rR(t.enterMigration());try{const e=t.edgeName;await this.join({...this.joinCallData,migrating_from:e})}finally{delete this.joinCallData?.migrating_from}await this.restorePublishedTracks(),this.restoreSubscribedTracks();try{await i(),this.state.setCallingState(vI.JOINED)}finally{n?.dispose(),r?.dispose(),t.close()}this.sfuStatsReporter?.sendReconnectionTime(r_.MIGRATE,(Date.now()-e)/1e3)},this.registerReconnectHandlers=()=>{const e=this.on("goAway",(()=>{this.reconnect(r_.MIGRATE).catch((e=>{this.logger("warn","[Reconnect] Error reconnecting",e)}))})),t=this.on("error",(e=>{const{reconnectStrategy:t}=e;t!==r_.UNSPECIFIED&&(t===r_.DISCONNECT?this.leave({reason:"SFU instructed to disconnect"}).catch((e=>{this.logger("warn","Can't leave call after disconnect request",e)})):this.reconnect(t).catch((e=>{this.logger("warn","[Reconnect] Error reconnecting",e)})))})),n=this.streamClient.on("network.changed",(e=>{if(e.online)this.logger("debug","[Reconnect] Going online"),this.sfuClient?.close(dR.DISPOSE_OLD_SOCKET,"Closing WS to reconnect after going online"),this.networkAvailableTask?.resolve(),this.networkAvailableTask=void 0,this.sfuStatsReporter?.start();else{if(this.logger("debug","[Reconnect] Going offline"),!this.hasJoinedOnce)return;this.lastOfflineTimestamp=Date.now();const e=iR();e.promise.then((()=>{let e=r_.FAST;if(this.lastOfflineTimestamp){(Date.now()-this.lastOfflineTimestamp)/1e3>this.fastReconnectDeadlineSeconds&&(e=r_.REJOIN)}this.reconnect(e).catch((e=>{this.logger("warn","[Reconnect] Error reconnecting after going online",e)}))})),this.networkAvailableTask=e,this.sfuStatsReporter?.stop(),this.state.setCallingState(vI.OFFLINE)}}));this.leaveCallHooks.add(e),this.leaveCallHooks.add(t),this.leaveCallHooks.add(n)},this.restorePublishedTracks=async()=>{for(const e of this.trackPublishOrder){let t;switch(e){case QT.AUDIO:t=this.microphone.state.mediaStream;break;case QT.VIDEO:t=this.camera.state.mediaStream;break;case QT.SCREEN_SHARE:t=this.screenShare.state.mediaStream;break;case QT.SCREEN_SHARE_AUDIO:case QT.UNSPECIFIED:break;default:WI(e,"Unknown track type")}t&&await this.publish(t,e)}},this.restoreSubscribedTracks=()=>{const{remoteParticipants:e}=this.state;e.length<=0||this.dynascaleManager.applyTrackSubscriptions(void 0)},this.publishVideoStream=async e=>{await this.publish(e,QT.VIDEO)},this.publishAudioStream=async e=>{await this.publish(e,QT.AUDIO)},this.publishScreenShareStream=async e=>{await this.publish(e,QT.SCREEN_SHARE)},this.publish=async(e,t)=>{if(!this.sfuClient)throw new Error("Call not joined yet.");if(await this.sfuClient.joinTask,!this.permissionsContext.canPublish(t))throw new Error(`No permission to publish ${QT[t]}`);if(!this.publisher)throw new Error("Publisher is not initialized");const[n]=GI(t)?e.getAudioTracks():e.getVideoTracks();if(!n)throw new Error(`There is no ${QT[t]} track in the stream`);if("ended"===n.readyState)throw new Error("Can't publish ended tracks.");CR(this.trackPublishOrder,t),await this.publisher.publish(n,t);const r=[t];if(t===QT.SCREEN_SHARE){const[t]=e.getAudioTracks();t&&(CR(this.trackPublishOrder,QT.SCREEN_SHARE_AUDIO),await this.publisher.publish(t,QT.SCREEN_SHARE_AUDIO),r.push(QT.SCREEN_SHARE_AUDIO))}await this.updateLocalStreamState(e,...r)},this.stopPublish=async function(){if(t.sfuClient&&t.publisher){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.publisher.stopTracks(...n),await t.updateLocalStreamState(void 0,...n)}},this.updateLocalStreamState=async function(e){if(!t.sfuClient||!t.sfuClient.sessionId)return;for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];await t.notifyTrackMuteState(!e,...r);const{sessionId:s}=t.sfuClient;for(const o of r){const n=KI(o);n&&t.state.updateParticipant(s,(t=>({publishedTracks:e?CR([...t.publishedTracks],o):t.publishedTracks.filter((e=>e!==o)),[n]:e})))}},this.updatePublishOptions=e=>{this.logger("warn","[call.updatePublishOptions]: You are manually overriding the publish options for this call. This is not recommended, and it can cause call stability/compatibility issues. Use with caution."),this.state.callingState===vI.JOINED&&this.logger("warn","Updating publish options after joining the call does not have an effect"),this.clientPublishOptions={...this.clientPublishOptions,...e}},this.notifyNoiseCancellationStarting=async()=>this.sfuClient?.startNoiseCancellation().catch((e=>{this.logger("warn","Failed to notify start of noise cancellation",e)})),this.notifyNoiseCancellationStopped=async()=>this.sfuClient?.stopNoiseCancellation().catch((e=>{this.logger("warn","Failed to notify stop of noise cancellation",e)})),this.notifyTrackMuteState=async function(e){if(t.sfuClient){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];await t.sfuClient.updateMuteStates(r.map((t=>({trackType:t,muted:e}))))}},this.startReportingStatsFor=e=>this.statsReporter?.startReportingStatsFor(e),this.stopReportingStatsFor=e=>this.statsReporter?.stopReportingStatsFor(e),this.resetReaction=e=>{this.state.updateParticipant(e,{reaction:void 0})},this.setSortParticipantsBy=e=>this.state.setSortParticipantsBy(e),this.sendReaction=async e=>this.streamClient.post(`${this.streamClientBasePath}/reaction`,e),this.blockUser=async e=>this.streamClient.post(`${this.streamClientBasePath}/block`,{user_id:e}),this.unblockUser=async e=>this.streamClient.post(`${this.streamClientBasePath}/unblock`,{user_id:e}),this.muteSelf=e=>{const t=this.currentUserId;if(t)return this.muteUser(t,e)},this.muteOthers=e=>{const t=(e=>{switch(e){case"audio":return QT.AUDIO;case"video":return QT.VIDEO;case"screenshare":return QT.SCREEN_SHARE;case"screenshare_audio":return QT.SCREEN_SHARE_AUDIO;default:WI(e,"Unknown mute type")}})(e);if(!t)return;const n=[];for(const r of this.state.remoteParticipants)r.publishedTracks.includes(t)&&n.push(r.userId);return n.length>0?this.muteUser(n,e):void 0},this.muteUser=(e,t)=>this.streamClient.post(`${this.streamClientBasePath}/mute_users`,{user_ids:Array.isArray(e)?e:[e],[t]:!0}),this.muteAllUsers=e=>this.streamClient.post(`${this.streamClientBasePath}/mute_users`,{mute_all_users:!0,[e]:!0}),this.startRecording=async e=>this.streamClient.post(`${this.streamClientBasePath}/start_recording`,e||{}),this.stopRecording=async()=>this.streamClient.post(`${this.streamClientBasePath}/stop_recording`,{}),this.startTranscription=async e=>this.streamClient.post(`${this.streamClientBasePath}/start_transcription`,e),this.stopTranscription=async()=>this.streamClient.post(`${this.streamClientBasePath}/stop_transcription`),this.startClosedCaptions=async e=>{const t=this.state.setCaptioning(!0);try{return await this.streamClient.post(`${this.streamClientBasePath}/start_closed_captions`,e)}catch(n){throw t.rollback(),n}},this.stopClosedCaptions=async e=>{const t=this.state.setCaptioning(!1);try{return await this.streamClient.post(`${this.streamClientBasePath}/stop_closed_captions`,e)}catch(n){throw t.rollback(),n}},this.updateClosedCaptionSettings=e=>{this.state.updateClosedCaptionSettings(e)},this.requestPermissions=async e=>{const{permissions:t}=e;if(!t.every((e=>this.permissionsContext.canRequest(e))))throw new Error(`You are not allowed to request permissions: ${t.join(", ")}`);return this.streamClient.post(`${this.streamClientBasePath}/request_permission`,e)},this.grantPermissions=async(e,t)=>this.updateUserPermissions({user_id:e,grant_permissions:t}),this.revokePermissions=async(e,t)=>this.updateUserPermissions({user_id:e,revoke_permissions:t}),this.updateUserPermissions=async e=>this.streamClient.post(`${this.streamClientBasePath}/user_permissions`,e),this.goLive=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return t.streamClient.post(`${t.streamClientBasePath}/go_live`,e,n)},this.stopLive=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.streamClient.post(`${t.streamClientBasePath}/stop_live`,e)},this.startHLS=async()=>this.streamClient.post(`${this.streamClientBasePath}/start_broadcasting`,{}),this.stopHLS=async()=>this.streamClient.post(`${this.streamClientBasePath}/stop_broadcasting`,{}),this.startRTMPBroadcasts=async e=>this.streamClient.post(`${this.streamClientBasePath}/rtmp_broadcasts`,e),this.stopAllRTMPBroadcasts=async()=>this.streamClient.post(`${this.streamClientBasePath}/rtmp_broadcasts/stop`),this.stopRTMPBroadcast=async e=>this.streamClient.post(`${this.streamClientBasePath}/rtmp_broadcasts/${e}/stop`),this.startFrameRecording=async e=>this.streamClient.post(`${this.streamClientBasePath}/start_frame_recording`,e),this.stopFrameRecording=async()=>this.streamClient.post(`${this.streamClientBasePath}/stop_frame_recording`),this.update=async e=>{const t=await this.streamClient.patch(`${this.streamClientBasePath}`,e),{call:n,members:r,own_capabilities:i}=t;return this.state.updateFromCallResponse(n),this.state.setMembers(r),this.state.setOwnCapabilities(i),t},this.endCall=async()=>this.streamClient.post(`${this.streamClientBasePath}/mark_ended`),this.pin=e=>{this.state.updateParticipant(e,{pin:{isLocalPin:!0,pinnedAt:Date.now()}})},this.unpin=e=>{this.state.updateParticipant(e,{pin:void 0})},this.pinForEveryone=async e=>this.streamClient.post(`${this.streamClientBasePath}/pin`,e),this.unpinForEveryone=async e=>this.streamClient.post(`${this.streamClientBasePath}/unpin`,e),this.queryMembers=e=>this.streamClient.post("/call/members",{...e||{},id:this.id,type:this.type}),this.updateCallMembers=async e=>this.streamClient.post(`${this.streamClientBasePath}/members`,e),this.scheduleAutoDrop=()=>{this.cancelAutoDrop();const e=this.state.settings;if(!e)return;if(this.state.callingState!==vI.RINGING)return;const t=this.isCreatedByMe?e.ring.auto_cancel_timeout_ms:e.ring.incoming_call_timeout_ms;t<=0||(this.dropTimeout=setTimeout((()=>{this.state.callingState===vI.RINGING&&this.leave({reject:!0,reason:"timeout"}).catch((e=>{this.logger("error","Failed to drop call",e)}))}),t))},this.cancelAutoDrop=()=>{clearTimeout(this.dropTimeout),this.dropTimeout=void 0},this.queryRecordings=async e=>{let t=this.streamClientBasePath;return e&&(t=`${t}/${e}`),this.streamClient.get(`${t}/recordings`)},this.queryTranscriptions=async()=>this.streamClient.get(`${this.streamClientBasePath}/transcriptions`),this.getCallStats=async e=>{const t=`${this.streamClientBasePath}/stats/${e}`;return this.streamClient.get(t)},this.submitFeedback=async function(e){let{reason:n,custom:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{sdkName:i,sdkVersion:s,...o}=(e=>{const{sdk:t,...n}=e;return{sdkName:DR(t),sdkVersion:LR(t),...n}})(await QR());return t.streamClient.post(`${t.streamClientBasePath}/feedback`,{rating:e,reason:n,user_session_id:t.sfuClient?.sessionId,sdk:i,sdk_version:s,custom:{...r,"x-stream-platform-data":o}})},this.sendCustomEvent=async e=>this.streamClient.post(`${this.streamClientBasePath}/event`,{custom:e}),this.applyDeviceConfig=async(e,t)=>{await this.camera.apply(e.video,t).catch((e=>{this.logger("warn","Camera init failed",e)})),await this.microphone.apply(e.audio,t).catch((e=>{this.logger("warn","Mic init failed",e)}))},this.trackElementVisibility=(e,t,n)=>this.dynascaleManager.trackElementVisibility(e,t,n),this.setViewport=e=>this.dynascaleManager.setViewport(e),this.bindVideoElement=(e,t,n)=>{const r=this.dynascaleManager.bindVideoElement(e,t,n);if(r)return this.leaveCallHooks.add(r),()=>{this.leaveCallHooks.delete(r),r()}},this.bindAudioElement=function(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"audioTrack";const i=t.dynascaleManager.bindAudioElement(e,n,r);if(i)return t.leaveCallHooks.add(i),()=>{t.leaveCallHooks.delete(i),i()}},this.bindCallThumbnailElement=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=()=>{e.src=n.fallbackImageSource||"https://getstream.io/random_svg/?name=x&id=x"},i=mI(t.state.thumbnails$,(t=>{if(!t)return;e.addEventListener("error",r);const n=new URL(t.image_url);n.searchParams.set("w",String(e.clientWidth)),n.searchParams.set("h",String(e.clientHeight)),e.src=n.toString()}));return()=>{i(),e.removeEventListener("error",r)}},this.setPreferredIncomingVideoResolution=(e,t)=>{this.dynascaleManager.setVideoTrackSubscriptionOverrides(e?{enabled:!0,dimension:e}:void 0,t),this.dynascaleManager.applyTrackSubscriptions()},this.setIncomingVideoEnabled=e=>{this.dynascaleManager.setVideoTrackSubscriptionOverrides(e?void 0:{enabled:!1}),this.dynascaleManager.applyTrackSubscriptions()},this.setDisconnectionTimeout=e=>{this.disconnectionTimeoutSeconds=e},this.type=n,this.id=r,this.cid=`${n}:${r}`,this.ringingSubject=new ZE(c),this.watching=u,this.streamClient=i,this.clientStore=l,this.streamClientBasePath=`/call/${this.type}/${this.id}`,this.logger=Zx(["Call"]);const d=sP.get(n),h=a||d.options.sortParticipantsBy;h&&this.state.setSortParticipantsBy(h),this.state.setMembers(s||[]),this.state.setOwnCapabilities(o||[]),this.state.setCallingState(c?vI.RINGING:vI.IDLE),this.camera=new _P(this),this.microphone=new NP(this),this.speaker=new jP(this),this.screenShare=new DP(this),this.dynascaleManager=new nP(this.state,this.speaker)}get ringing(){return hI(this.ringingSubject)}get currentUserId(){return this.clientStore.connectedUser?.id}get isCreatedByMe(){return this.state.createdBy?.id===this.currentUserId}}class FP{constructor(e){var t=this;this._log=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"info";t.client.logger(r,`connection:${e}`,n)},this.setClient=e=>{this.client=e},this._buildUrl=()=>{const e=new URLSearchParams;return e.set("api_key",this.client.key),e.set("stream-auth-type",this.client.getAuthType()),e.set("X-Stream-Client",this.client.getUserAgent()),`${this.client.wsBaseURL}/connect?${e.toString()}`},this.onlineStatusChanged=e=>{"offline"===e.type?(this._log("onlineStatusChanged() - Status changing to offline"),this._setHealth(!1,!0)):"online"===e.type&&(this._log(`onlineStatusChanged() - Status changing to online. isHealthy: ${this.isHealthy}`),this.isHealthy||this._reconnect({interval:10}))},this.onopen=e=>{if(this.wsID!==e)return;const t=this.client.user;if(!t)return void this.client.logger("error","User not set, can't connect to WS");const n=this.client._getToken();if(!n)return void this.client.logger("error","Token not set, can't connect authenticate");const r=JSON.stringify({token:n,user_details:{id:t.id,name:t.name,image:t.image,custom:t.custom}});this._log(`onopen() - Sending auth message ${r}`,{},"trace"),this.ws?.send(r),this._log("onopen() - onopen callback",{wsID:e})},this.onmessage=(e,t)=>{if(this.wsID!==e)return;this._log("onmessage() - onmessage callback",{event:t,wsID:e});const n="string"===typeof t.data?JSON.parse(t.data):null;if(!this.isConnectionOpenResolved&&n&&"connection.error"===n.type&&(this.isConnectionOpenResolved=!0,n.error))this.rejectConnectionOpen?.(this._errorFromWSEvent(n,!1));else{if(this.lastEvent=new Date,!n||"health.check"!==n.type&&"connection.ok"!==n.type||this.scheduleNextPing(),n&&"connection.ok"===n.type&&(this.resolveConnectionOpen?.(n),this._setHealth(!0)),n&&"connection.error"===n.type&&n.error){const{code:e}=n.error;this.isHealthy=!1,this.isConnecting=!1,this.consecutiveFailures+=1,e!==Fx||this.client.tokenManager.isStatic()||(clearTimeout(this.connectionCheckTimeoutRef),this._log("connect() - WS failure due to expired token, so going to try to reload token and reconnect"),this._reconnect({refreshToken:!0}))}n&&(n.received_at=new Date,this.client.dispatchEvent(n)),this.scheduleConnectionCheck()}},this.onclose=(e,t)=>{if(this.wsID===e)if(this._log("onclose() - onclose callback - "+t.code,{event:t,wsID:e}),t.code===Ux){const e=new Error(`WS connection reject with error ${t.reason}`);e.reason=t.reason,e.code=t.code,e.wasClean=t.wasClean,e.target=t.target,this.rejectConnectionOpen?.(e),this._log(`onclose() - WS connection reject with error ${t.reason}`,{event:t})}else this.consecutiveFailures+=1,this.totalFailures+=1,this._setHealth(!1),this.isConnecting=!1,this.rejectConnectionOpen?.(this._errorFromWSEvent(t)),this._log("onclose() - WS connection closed. Calling reconnect ...",{event:t}),this._reconnect()},this.onerror=(e,t)=>{this.wsID===e&&(this.consecutiveFailures+=1,this.totalFailures+=1,this._setHealth(!1),this.isConnecting=!1,this.rejectConnectionOpen?.(new Error(`WebSocket error: ${t}`)),this._log("onerror() - WS connection resulted into error",{event:t}),this._reconnect())},this._setHealth=function(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e!==t.isHealthy&&(t.isHealthy=e,t.isHealthy||n?t.client.dispatchEvent({type:"connection.changed",online:t.isHealthy}):setTimeout((()=>{t.isHealthy||t.client.dispatchEvent({type:"connection.changed",online:t.isHealthy})}),5e3))},this._errorFromWSEvent=function(e){let n,r,i,s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(function(e){return void 0!==e.code}(e))n=e.code,i=e.reason,r=0;else{const{error:t}=e;n=t.code,i=t.message,r=t.StatusCode}const o=`WS failed with code: ${n} and reason: ${i}`;t._log(o,{event:e},"warn");const a=new Error(o);return a.code=n,a.StatusCode=r,a.isWSFailure=s,a},this._setupConnectionPromise=()=>{this.isConnectionOpenResolved=!1,this.connectionOpenSafe=rR(new Promise(((e,t)=>{this.resolveConnectionOpen=e,this.rejectConnectionOpen=t})))},this.scheduleNextPing=()=>{const e=uR();this.healthCheckTimeoutRef&&e.clearTimeout(this.healthCheckTimeoutRef),this.healthCheckTimeoutRef=e.setTimeout((()=>{const e=[{type:"health.check",client_id:this.client.clientID}];try{this.ws?.send(JSON.stringify(e))}catch(t){}}),this.pingInterval)},this.scheduleConnectionCheck=()=>{clearTimeout(this.connectionCheckTimeoutRef),this.connectionCheckTimeoutRef=setTimeout((()=>{const e=new Date;this.lastEvent&&e.getTime()-this.lastEvent.getTime()>this.connectionCheckTimeout&&(this._log("scheduleConnectionCheck - going to reconnect"),this._setHealth(!1),this._reconnect())}),this.connectionCheckTimeout)},this.client=e,this.consecutiveFailures=0,this.totalFailures=0,this.isConnecting=!1,this.isDisconnected=!1,this.isConnectionOpenResolved=!1,this.isHealthy=!1,this.wsID=1,this.lastEvent=null,this.pingInterval=25e3,this.connectionCheckTimeout=this.pingInterval+1e4,Hx(this.onlineStatusChanged)}async connect(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15e3;if(this.isConnecting)throw Error("You've called connect twice, can only attempt 1 connection at the time");this.isDisconnected=!1;try{const e=await this._connect();this.consecutiveFailures=0,this._log(`connect() - Established ws connection with healthcheck: ${e}`)}catch(t){if(this.isHealthy=!1,this.consecutiveFailures+=1,t.code!==Fx||this.client.tokenManager.isStatic()){if(!t.isWSFailure)throw new Error(JSON.stringify({code:t.code,StatusCode:t.StatusCode,message:t.message,isWSFailure:t.isWSFailure}))}else this._log("connect() - WS failure due to expired token, so going to try to reload token and reconnect"),this._reconnect({refreshToken:!0})}return await this._waitForHealthy(e)}async _waitForHealthy(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15e3;return Promise.race([(async()=>{for(let n=0;n<=e;n+=50)try{return await this.connectionOpen}catch(t){if(n===e)throw new Error(JSON.stringify({code:t.code,StatusCode:t.StatusCode,message:t.message,isWSFailure:t.isWSFailure}));await jx(50)}})(),(async()=>{throw await jx(e),this.isConnecting=!1,new Error(JSON.stringify({code:"",StatusCode:"",message:"initial WS connection could not be established",isWSFailure:!0}))})()])}disconnect(e){let t;this._log(`disconnect() - Closing the websocket connection for wsID ${this.wsID}`),this.wsID+=1,this.isConnecting=!1,this.isDisconnected=!0,this.healthCheckTimeoutRef&&uR().clearInterval(this.healthCheckTimeoutRef),this.connectionCheckTimeoutRef&&clearInterval(this.connectionCheckTimeoutRef),qx(this.onlineStatusChanged),this.isHealthy=!1;const{ws:n}=this;return n&&n.close&&n.readyState===n.OPEN?(t=new Promise((t=>{const r=e=>{this._log(`disconnect() - resolving isClosedPromise ${e?"with":"without"} close frame`,{event:e}),t()};n.onclose=r,setTimeout(r,null!=e?e:1e3)})),this._log("disconnect() - Manually closed connection by calling client.disconnect()"),n.close(Ux,"Manually closed connection by calling client.disconnect()")):(this._log("disconnect() - ws connection doesn't exist or it is already closed."),t=Promise.resolve()),delete this.ws,t}async _connect(){if(this.isConnecting)return;this.isConnecting=!0;let e=!1;try{this._log("_connect() - waiting for token"),await this.client.tokenManager.tokenReady(),e=!0}catch(t){}try{e||(this._log("_connect() - tokenProvider failed before, so going to retry"),await this.client.tokenManager.loadToken()),this.client.isConnectionIsPromisePending||this.client._setupConnectionIdPromise(),this._setupConnectionPromise();const t=this._buildUrl();this._log(`_connect() - Connecting to ${t}`);const n=this.client.options.WebSocketImpl??WebSocket;this.ws=new n(t),this.ws.onopen=this.onopen.bind(this,this.wsID),this.ws.onclose=this.onclose.bind(this,this.wsID),this.ws.onerror=this.onerror.bind(this,this.wsID),this.ws.onmessage=this.onmessage.bind(this,this.wsID);const r=await this.connectionOpen;if(this.isConnecting=!1,r)return this.connectionID=r.connection_id,this.client.resolveConnectionId?.(this.connectionID),r}catch(n){throw this.client._setupConnectionIdPromise(),this.isConnecting=!1,this._log("_connect() - Error - ",n),this.client.rejectConnectionId?.(n),n}}async _reconnect(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._log("_reconnect() - Initiating the reconnect"),this.isConnecting||this.isHealthy)return void this._log("_reconnect() - Abort (1) since already connecting or healthy");let t=e.interval;if(t||(t=Vx(this.consecutiveFailures)),await jx(t),this.isConnecting||this.isHealthy)this._log("_reconnect() - Abort (2) since already connecting or healthy");else if(this.isDisconnected)this._log("_reconnect() - Abort (3) since disconnect() is called");else{this._log("_reconnect() - Destroying current WS connection"),this._destroyCurrentWSConnection(),e.refreshToken&&await this.client.tokenManager.loadToken();try{await this._connect(),this._log("_reconnect() - Waiting for recoverCallBack"),this._log("_reconnect() - Finished recoverCallBack"),this.consecutiveFailures=0}catch(n){if(this.isHealthy=!1,this.consecutiveFailures+=1,n.code===Fx&&!this.client.tokenManager.isStatic())return this._log("_reconnect() - WS failure due to expired token, so going to try to reload token and reconnect"),this._reconnect({refreshToken:!0});n.isWSFailure&&(this._log("_reconnect() - WS failure, so going to try to reconnect"),this._reconnect())}this._log("_reconnect() - == END ==")}}_destroyCurrentWSConnection(){this.wsID+=1;try{this?.ws?.close()}catch(e){}}get connectionOpen(){return this.connectionOpenSafe?.()}}const UP=e=>{const t={},n=String.fromCharCode,r=e.length;let i,s,o,a,l=0,c=0,u="";for(i=0;i<64;i++)t["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(i)]=i;for(o=0;o<r;o++)for(s=t[e.charAt(o)],l=(l<<6)+s,c+=6;c>=8;)((a=l>>>(c-=8)&255)||o<r-2)&&(u+=n(a));return u};class VP{constructor(e){this.loadTokenPromise=null,this.type="static",this.setTokenOrProvider=async(e,t,n)=>{this.user=t,this.isAnonymous=n,this.validateToken(e),Mx(e)&&(this.tokenProvider=e,this.type="provider"),"string"===typeof e&&(this.token=e,this.type="static"),await this.loadToken()},this.reset=()=>{this.token=void 0,this.tokenProvider=void 0,this.type="static",this.user=void 0,this.loadTokenPromise=null},this.validateToken=e=>{if(!this.user||!this.isAnonymous||e){if(!this.secret&&!e)throw new Error("User token can not be empty");if("string"!==typeof e&&!Mx(e))throw new Error("User token should either be a string or a function");if("string"===typeof e){if(this.isAnonymous&&""===e)return;const t=function(e){const t=e.split(".");if(3!==t.length)return"";const n=t[1],r=UP(n);return JSON.parse(r).user_id}(e);if(null!=e&&(null==t||""===t||!this.isAnonymous&&t!==this.user.id))throw new Error("userToken does not have a user_id or is not matching with user.id")}}},this.tokenReady=()=>this.loadTokenPromise,this.loadToken=()=>(this.loadTokenPromise=new Promise((async(e,t)=>{if("static"===this.type)return e(this.token);if(this.tokenProvider&&"string"!==typeof this.tokenProvider){try{const e=await this.tokenProvider();this.validateToken(e),this.token=e}catch(n){return t(new Error(`Call to tokenProvider failed with message: ${n}`))}e(this.token)}})),this.loadTokenPromise),this.getToken=()=>{if(this.token)return this.token;if(this.user&&!this.token)return this.token;throw new Error("User token is not set. Either client.connectUser wasn't called or client.disconnect was called")},this.isStatic=()=>"static"===this.type,this.secret=e}}const $P=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"https://hint.stream-io-video.com/",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;const r=Zx(["location-hint"]);let i=0,s="ERR";do{const n=new AbortController,i=setTimeout((()=>n.abort()),t);try{const t=(await fetch(e,{method:"HEAD",signal:n.signal})).headers.get("x-amz-cf-pop")||"ERR";r("debug",`Location header: ${t}`),s=t.substring(0,3)}catch(o){r("warn",`Failed to get location hint from ${e}`,o),s="ERR"}finally{clearTimeout(i)}}while("ERR"===s&&++i<n);return s};class BP{constructor(e,t){var n=this;this.listeners={},this.getAuthType=()=>this.anonymous?"anonymous":"jwt",this.setBaseURL=e=>{this.baseURL=e,this.wsBaseURL=this.baseURL.replace("http","ws").replace(":3030",":8800")},this.getLocationHint=async(e,t)=>{const n=await this.locationHint;return n&&"ERR"!==n?n:(this.locationHint=$P(e??this.options.locationHintUrl,t??this.options.locationHintTimeout),this.locationHint)},this._getConnectionID=()=>this.wsConnection?.connectionID,this._hasConnectionID=()=>Boolean(this._getConnectionID()),this.connectUser=async(e,t)=>{if(!e.id)throw new Error('The "id" field on the user is missing');if(this.userID===e.id&&this.connectUserTask)return this.logger("warn","Consecutive calls to connectUser is detected, ideally you should only call this function once in your app."),this.connectUserTask;if(this.userID)throw new Error("Use client.disconnect() before trying to connect as a different user. connectUser was called twice.");!this.secret&&!this.node||this.options.allowServerSideConnect||this.logger("warn","Please do not use connectUser server side. Use our @stream-io/node-sdk instead: https://getstream.io/video/docs/api/"),this.userID=e.id,this.anonymous=!1,await this.tokenManager.setTokenOrProvider(t,e,!1),this._setUser(e),this.connectUserTask=this.openConnection();try{return Hx(this.updateNetworkConnectionStatus),await this.connectUserTask}catch(n){throw this.persistUserOnConnectionFailure?await this.closeConnection():await this.disconnectUser(),n}},this._setUser=e=>{this.user=e,this.userID=e.id,this._user={...e}},this.closeConnection=async e=>{await(this.wsConnection?.disconnect(e))},this.openConnection=async()=>{if(!this.userID)throw Error("UserWithId is not set on client, use client.connectUser or client.connectAnonymousUser instead");const e=this.wsPromiseSafe?.();if(this.wsConnection?.isConnecting&&e)return this.logger("info","client:openConnection() - connection already in progress"),await e;if(this.wsConnection?.isHealthy&&this._hasConnectionID())return void this.logger("info","client:openConnection() - openConnection called twice, healthy connection already exists");this._setupConnectionIdPromise(),this.clientID=`${this.userID}--${Bx()}`;const t=this.connect();return this.wsPromiseSafe=rR(t),await t},this.disconnectUser=async e=>{this.logger("info","client:disconnect() - Disconnecting the client"),delete this.user,delete this._user,delete this.userID,this.anonymous=!1,await this.closeConnection(e),qx(this.updateNetworkConnectionStatus),this.tokenManager.reset(),this.connectionIdPromiseSafe=void 0,this.rejectConnectionId=void 0,this.resolveConnectionId=void 0},this.connectGuestUser=async e=>{this.guestUserCreatePromise=this.doAxiosRequest("post","/guest",{user:e},{publicEndpoint:!0});const t=await this.guestUserCreatePromise;return this.guestUserCreatePromise.finally((()=>this.guestUserCreatePromise=void 0)),this.connectUser(t.user,t.access_token)},this.connectAnonymousUser=async(e,t)=>{Hx(this.updateNetworkConnectionStatus),this._setupConnectionIdPromise(),this.anonymous=!0,await this.tokenManager.setTokenOrProvider(t,e,!0),this._setUser(e),this.resolveConnectionId?.()},this.on=(e,t)=>(this.listeners[e]||(this.listeners[e]=[]),this.logger("debug",`Adding listener for ${e} event`),this.listeners[e]?.push(t),()=>{this.off(e,t)}),this.off=(e,t)=>{this.listeners[e]||(this.listeners[e]=[]),this.logger("debug",`Removing listener for ${e} event`),this.listeners[e]=this.listeners[e]?.filter((e=>e!==t))},this._setupConnectionIdPromise=()=>{this.connectionIdPromiseSafe=rR(new Promise(((e,t)=>{this.resolveConnectionId=e,this.rejectConnectionId=t})))},this._logApiRequest=(e,t,n,r)=>{"trace"===Xx()&&this.logger("trace",`client: ${e} - Request - ${t}`,{payload:n,config:r})},this._logApiResponse=(e,t,n)=>{"trace"===Xx()&&this.logger("trace",`client:${e} - Response - url: ${t} > status ${n.status}`,{response:n})},this._logApiError=(e,t,n)=>{this.logger("error",`client:${e} - Error - url: ${t}`,{url:t,error:n})},this.doAxiosRequest=async function(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!i.publicEndpoint){await Promise.all([n.tokenManager.tokenReady(),n.guestUserCreatePromise]);try{await n.connectionIdPromise}catch(o){await(n.wsConnection?._waitForHealthy()),await n.connectionIdPromise}}const s=n._enrichAxiosOptions(i);try{let i;switch(n._logApiRequest(e,t,r,s),e){case"get":i=await n.axiosInstance.get(t,s);break;case"delete":i=await n.axiosInstance.delete(t,s);break;case"post":i=await n.axiosInstance.post(t,r,s);break;case"put":i=await n.axiosInstance.put(t,r,s);break;case"patch":i=await n.axiosInstance.patch(t,r,s);break;case"options":i=await n.axiosInstance.options(t,s);break;default:throw new Error("Invalid request type")}return n._logApiResponse(e,t,i),n.consecutiveFailures=0,n.handleResponse(i)}catch(o){if(o.client_request_id=s.headers?.["x-client-request-id"],n.consecutiveFailures+=1,o.response)return n._logApiError(e,t,o.response),o.response.data.code!==Fx||n.tokenManager.isStatic()?n.handleResponse(o.response):(n.consecutiveFailures>1&&await jx(Vx(n.consecutiveFailures)),await n.tokenManager.loadToken(),await n.doAxiosRequest(e,t,r,i));throw n._logApiError(e,t,o),o}},this.get=(e,t)=>this.doAxiosRequest("get",e,null,{params:t}),this.put=(e,t,n)=>this.doAxiosRequest("put",e,t,{params:n}),this.post=(e,t,n)=>this.doAxiosRequest("post",e,t,{params:n}),this.patch=(e,t,n)=>this.doAxiosRequest("patch",e,t,{params:n}),this.delete=(e,t)=>this.doAxiosRequest("delete",e,null,{params:t}),this.errorFromResponse=e=>{const{data:t,status:n}=e,r=new BT;return r.message=`Stream error code ${t.code}: ${t.message}`,r.code=t.code,r.unrecoverable=t.unrecoverable,r.response=e,r.status=n,r},this.handleResponse=e=>{const t=e.data;if(function(e){return!e.status||e.status<200||300<=e.status}(e))throw this.errorFromResponse(e);return t},this.dispatchEvent=e=>{if(this.logger("debug",`Dispatching event: ${e.type}`,e),this.listeners){for(const t of this.listeners.all||[])t(e);for(const t of this.listeners[e.type]||[])t(e)}},this.connect=async()=>{if(!this.userID||!this._user)throw Error("Call connectUser or connectAnonymousUser before starting the connection");if(!this.wsBaseURL)throw Error("Websocket base url not set");if(!this.clientID)throw Error("clientID is not set");return this.wsConnection=new FP(this),this.logger("info","StreamClient.connect: this.wsConnection.connect()"),await this.wsConnection.connect(this.defaultWSTimeout)},this.getUserAgent=()=>{if(!this.cachedUserAgent){const{clientAppIdentifier:e={}}=this.options,{sdkName:t="js",sdkVersion:n="1.18.6",...r}=e;this.cachedUserAgent=[`stream-video-${t}-v${n}`,...Object.entries(r).map((e=>{let[t,n]=e;return`${t}=${n}`})),"client_bundle=browser-esm"].join("|")}return this.cachedUserAgent},this._enrichAxiosOptions=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{params:{},headers:{},config:{}};const t=e.publicEndpoint&&!n.user?void 0:n._getToken(),r=t?{Authorization:t}:void 0;return e.headers?.["x-client-request-id"]||(e.headers={...e.headers,"x-client-request-id":Bx()}),{params:{user_id:n.userID,connection_id:n._getConnectionID(),api_key:n.key,...e.params},headers:{...r,"stream-auth-type":e.publicEndpoint&&!n.user?"anonymous":n.getAuthType(),"X-Stream-Client":n.getUserAgent(),...e.headers},...e.config,...n.options.axiosRequestConfig}},this._getToken=()=>this.tokenManager?this.tokenManager.getToken():null,this.updateNetworkConnectionStatus=e=>{"offline"===e.type?(this.logger("debug","device went offline"),this.dispatchEvent({type:"network.changed",online:!1})):"online"===e.type&&(this.logger("debug","device went online"),this.dispatchEvent({type:"network.changed",online:!0}))},this.key=e,this.secret=t?.secret;const r=t||{browser:"undefined"!==typeof window};this.browser=r.browser||"undefined"!==typeof window,this.node=!this.browser,this.browser&&(this.locationHint=$P(t?.locationHintUrl,t?.locationHintTimeout,t?.locationHintMaxAttempts)),this.options={timeout:5e3,withCredentials:!1,...r},this.node&&!this.options.httpsAgent&&(this.options.httpsAgent=new null.Agent({keepAlive:!0,keepAliveMsecs:3e3})),this.setBaseURL(this.options.baseURL||"https://video.stream-io-api.com/video"),this.axiosInstance=NC.create({...this.options,baseURL:this.baseURL}),this.wsConnection=null,this.wsPromiseSafe=null,this.connectUserTask=null,this.anonymous=!1,this.persistUserOnConnectionFailure=this.options?.persistUserOnConnectionFailure,this.tokenManager=new VP(this.secret),this.consecutiveFailures=0,this.defaultWSTimeout=this.options.defaultWsTimeout??15e3,this.logger=Mx(r.logger)?r.logger:()=>null}get connectionIdPromise(){return this.connectionIdPromiseSafe?.()}get isConnectionIsPromisePending(){return this.connectionIdPromiseSafe?.checkPending()??!1}get wsPromise(){return this.wsPromiseSafe?.()}}const zP=(e,t)=>`${e}/${t.id}`,HP=(e,t)=>{const n=(e=>{const t=e?.clientAppIdentifier||{},n=YR();return n&&(t.sdkName=ZT[n.type].toLowerCase(),t.sdkVersion=`${n.major}.${n.minor}.${n.patch}`),t})(t),r=Zx(["coordinator"]);return new BP(e,{persistUserOnConnectionFailure:!0,...t,clientAppIdentifier:n,logger:r})};class qP{constructor(e,t){var n=this;this.effectsRegistered=!1,this.eventHandlersToUnregister=[],this.connectionConcurrencyTag=Symbol("connectionConcurrencyTag"),this.registerClientInstance=(e,t)=>{const n=zP(e,t);qP._instances.has(n)&&this.logger("warn",`A StreamVideoClient already exists for ${t.id}; Prefer using getOrCreateInstance method`),qP._instances.set(n,this)},this.registerEffects=()=>{this.effectsRegistered||(this.eventHandlersToUnregister.push(this.on("connection.changed",(e=>{if(!e.online)return;const t=this.writeableStateStore.calls.filter((e=>e.watching)).map((e=>e.cid));t.length<=0||(this.logger("info",`Rewatching calls ${t.join(", ")}`),this.queryCalls({watch:!0,filter_conditions:{cid:{$in:t}},sort:[{field:"cid",direction:1}]}).catch((e=>{this.logger("error","Failed to re-watch calls",e)})))}))),this.eventHandlersToUnregister.push(this.on("call.created",(e=>{const{call:t,members:n}=e;if(this.state.connectedUser?.id===t.created_by.id)return void this.logger("warn","Received `call.created` sent by the current user");this.logger("info",`New call created and registered: ${t.cid}`);const r=new MP({streamClient:this.streamClient,type:t.type,id:t.id,members:n,clientStore:this.writeableStateStore});r.state.updateFromCallResponse(t),this.writeableStateStore.registerCall(r)}))),this.eventHandlersToUnregister.push(this.on("call.ring",(async e=>{const{call:t,members:n}=e;if(this.state.connectedUser?.id===t.created_by.id)return void this.logger("debug","Received `call.ring` sent by the current user so ignoring the event");const r=this.writeableStateStore.findCall(t.type,t.id);if(r)await r.updateFromRingingEvent(e);else{const e=new MP({streamClient:this.streamClient,type:t.type,id:t.id,members:n,clientStore:this.writeableStateStore,ringing:!0});await e.get()}}))),this.effectsRegistered=!0)},this.connectUser=async(e,t)=>{if("anonymous"===e.type)return e.id="!anon",this.connectAnonymousUser(e,t);const n=await lI(this.connectionConcurrencyTag,(async()=>{const n=this.streamClient,{maxConnectUserRetries:r=5,onConnectUserError:i,persistUserOnConnectionFailure:s}=n.options,o=[];for(let l=0;l<r;l++)try{return this.logger("trace",`Connecting user (${l})`,e),"guest"===e.type?await n.connectGuestUser(e):await n.connectUser(e,t)}catch(a){if(this.logger("warn",`Failed to connect a user (${l})`,a),o.push(a),l===r-1)throw i?.(a,o),a;s&&await n.disconnectUser(),await jx(Vx(l))}}));return n?.me&&this.writeableStateStore.setConnectedUser(n.me),this.registerEffects(),n},this.disconnectUser=async e=>{await lI(this.connectionConcurrencyTag,(async()=>{const{user:t,key:n}=this.streamClient;t&&(await this.streamClient.disconnectUser(e),t.id&&qP._instances.delete(zP(n,t)),this.eventHandlersToUnregister.forEach((e=>e())),this.eventHandlersToUnregister=[],this.effectsRegistered=!1,this.writeableStateStore.setConnectedUser(void 0))}))},this.on=(e,t)=>this.streamClient.on(e,t),this.off=(e,t)=>this.streamClient.off(e,t),this.call=(e,t)=>new MP({streamClient:this.streamClient,id:t,type:e,clientStore:this.writeableStateStore}),this.createGuestUser=async e=>this.streamClient.doAxiosRequest("post","/guest",e,{publicEndpoint:!0}),this.queryCalls=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=await n.streamClient.post("/calls",e),r=[];for(const i of t.calls){const t=new MP({streamClient:n.streamClient,id:i.call.id,type:i.call.type,members:i.members,ownCapabilities:i.own_capabilities,watching:e.watch,clientStore:n.writeableStateStore});t.state.updateFromCallResponse(i.call),await t.applyDeviceConfig(i.call.settings,!1),e.watch&&n.writeableStateStore.registerCall(t),r.push(t)}return{...t,calls:r}},this.queryCallStats=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n.streamClient.post("/call/stats",e)},this.queryAggregateCallStats=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n.streamClient.post("/stats",e)},this.edges=async()=>this.streamClient.get("/edges"),this.addDevice=async(e,t,n,r,i)=>await this.streamClient.post("/devices",{id:e,push_provider:t,voip_token:i,...null!=r?{user_id:r}:{},...null!=n?{push_provider_name:n}:{}}),this.addVoipDevice=async(e,t,n,r)=>await this.addDevice(e,t,n,r,!0),this.getDevices=async e=>await this.streamClient.get("/devices",e?{user_id:e}:{}),this.removeDevice=async(e,t)=>await this.streamClient.delete("/devices",{id:e,...t?{user_id:t}:{}}),this.onRingingCall=async e=>{let t=this.state.calls.find((t=>t.cid===e&&t.ringing));if(!t){const[n,r]=e.split(":");t=new MP({streamClient:this.streamClient,type:n,id:r,clientStore:this.writeableStateStore,ringing:!0}),await t.get()}return t},this.connectAnonymousUser=async(e,t)=>lI(this.connectionConcurrencyTag,(()=>this.streamClient.connectAnonymousUser(e,t)));const r="string"===typeof e?e:e.apiKey,i="string"===typeof e?t:e.options;i?.enableTimerWorker&&(cR=!0);var s;if(Gx=i?.logger||Yx,(s=i?.logLevel||"warn")&&Qx(s),this.logger=Zx(["client"]),this.streamClient=HP(r,i),this.writeableStateStore=new bI,this.readOnlyStateStore=new wI(this.writeableStateStore),"string"!==typeof e&&e.user){const t=e.user;"anonymous"===t.type&&(t.id="!anon"),t.id&&this.registerClientInstance(r,t);const n=(e=>{const{token:t,tokenProvider:n}=e;if(t&&n){let e=!1;return async function(){return e?n():(e=!0,t)}}return t||n})(e);this.connectUser(t,n).catch((e=>{this.logger("error","Failed to connect",e)}))}}static getOrCreateInstance(e){const{apiKey:t,user:n,token:r,tokenProvider:i}=e;if(!n.id&&"anonymous"!==n.type)throw new Error("user.id is required for a non-anonymous user");if(!r&&!i&&"anonymous"!==n.type&&"guest"!==n.type)throw new Error("tokenProvider or token is required for a authenticated users");return qP._instances.get(zP(t,n))||new qP(e)}get state(){return this.readOnlyStateStore}}qP._instances=new Map;const WP=e=>"string"===typeof e,KP=()=>{let e,t;const n=new Promise(((n,r)=>{e=n,t=r}));return n.resolve=e,n.reject=t,n},GP=e=>null==e?"":""+e,JP=/###/g,YP=e=>e&&e.indexOf("###")>-1?e.replace(JP,"."):e,QP=e=>!e||WP(e),XP=(e,t,n)=>{const r=WP(t)?t.split("."):t;let i=0;for(;i<r.length-1;){if(QP(e))return{};const t=YP(r[i]);!e[t]&&n&&(e[t]=new n),e=Object.prototype.hasOwnProperty.call(e,t)?e[t]:{},++i}return QP(e)?{}:{obj:e,k:YP(r[i])}},ZP=(e,t,n)=>{const{obj:r,k:i}=XP(e,t,Object);if(void 0!==r||1===t.length)return void(r[i]=n);let s=t[t.length-1],o=t.slice(0,t.length-1),a=XP(e,o,Object);for(;void 0===a.obj&&o.length;)s=`${o[o.length-1]}.${s}`,o=o.slice(0,o.length-1),a=XP(e,o,Object),a&&a.obj&&"undefined"!==typeof a.obj[`${a.k}.${s}`]&&(a.obj=void 0);a.obj[`${a.k}.${s}`]=n},eA=(e,t)=>{const{obj:n,k:r}=XP(e,t);if(n)return n[r]},tA=(e,t,n)=>{for(const r in t)"__proto__"!==r&&"constructor"!==r&&(r in e?WP(e[r])||e[r]instanceof String||WP(t[r])||t[r]instanceof String?n&&(e[r]=t[r]):tA(e[r],t[r],n):e[r]=t[r]);return e},nA=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var rA={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const iA=e=>WP(e)?e.replace(/[&<>"'\/]/g,(e=>rA[e])):e;const sA=[" ",",","?","!",";"],oA=new class{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(void 0!==t)return t;const n=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,n),this.regExpQueue.push(e),n}}(20),aA=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";if(!e)return;if(e[t])return e[t];const r=t.split(n);let i=e;for(let s=0;s<r.length;){if(!i||"object"!==typeof i)return;let e,t="";for(let o=s;o<r.length;++o)if(o!==s&&(t+=n),t+=r[o],e=i[t],void 0!==e){if(["string","number","boolean"].indexOf(typeof e)>-1&&o<r.length-1)continue;s+=o-s+1;break}i=e}return i},lA=e=>e&&e.replace("_","-"),cA={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){console&&console[e]&&console[e].apply(console,t)}};class uA{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.init(e,t)}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||cA,this.options=t,this.debug=t.debug}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"log","",!0)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","",!0)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"error","")}deprecate(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,n,r){return r&&!this.debug?null:(WP(e[0])&&(e[0]=`${n}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new uA(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return(e=e||this.options).prefix=e.prefix||this.prefix,new uA(this.logger,e)}}var dA=new uA;class hA{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach((e=>{this.observers[e]||(this.observers[e]=new Map);const n=this.observers[e].get(t)||0;this.observers[e].set(t,n+1)})),this}off(e,t){this.observers[e]&&(t?this.observers[e].delete(t):delete this.observers[e])}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(this.observers[e]){Array.from(this.observers[e].entries()).forEach((e=>{let[t,r]=e;for(let i=0;i<r;i++)t(...n)}))}if(this.observers["*"]){Array.from(this.observers["*"].entries()).forEach((t=>{let[r,i]=t;for(let s=0;s<i;s++)r.apply(r,[e,...n])}))}}}class pA extends hA{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),void 0===this.options.ignoreJSONStructure&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator,s=void 0!==r.ignoreJSONStructure?r.ignoreJSONStructure:this.options.ignoreJSONStructure;let o;e.indexOf(".")>-1?o=e.split("."):(o=[e,t],n&&(Array.isArray(n)?o.push(...n):WP(n)&&i?o.push(...n.split(i)):o.push(n)));const a=eA(this.data,o);return!a&&!t&&!n&&e.indexOf(".")>-1&&(e=o[0],t=o[1],n=o.slice(2).join(".")),!a&&s&&WP(n)?aA(this.data&&this.data[e]&&this.data[e][t],n,i):a}addResource(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1};const s=void 0!==i.keySeparator?i.keySeparator:this.options.keySeparator;let o=[e,t];n&&(o=o.concat(s?n.split(s):n)),e.indexOf(".")>-1&&(o=e.split("."),r=t,t=o[1]),this.addNamespaces(t),ZP(this.data,o,r),i.silent||this.emit("added",e,t,n,r)}addResources(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(const i in n)(WP(n[i])||Array.isArray(n[i]))&&this.addResource(e,t,i,n[i],{silent:!0});r.silent||this.emit("added",e,t,n)}addResourceBundle(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1,skipCopy:!1},o=[e,t];e.indexOf(".")>-1&&(o=e.split("."),r=n,n=t,t=o[1]),this.addNamespaces(t);let a=eA(this.data,o)||{};s.skipCopy||(n=JSON.parse(JSON.stringify(n))),r?tA(a,n,i):a={...a,...n},ZP(this.data,o,a),s.silent||this.emit("added",e,t,n)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return void 0!==this.getResource(e,t)}getResourceBundle(e,t){return t||(t=this.options.defaultNS),"v1"===this.options.compatibilityAPI?{...this.getResource(e,t)}:this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find((e=>t[e]&&Object.keys(t[e]).length>0))}toJSON(){return this.data}}var fA={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,n,r,i){return e.forEach((e=>{this.processors[e]&&(t=this.processors[e].process(t,n,r,i))})),t}};const mA={};class gA extends hA{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),((e,t,n)=>{e.forEach((e=>{t[e]&&(n[e]=t[e])}))})(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),this.logger=dA.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};if(void 0===e||null===e)return!1;const n=this.resolve(e,t);return n&&void 0!==n.res}extractFromKey(e,t){let n=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");const r=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator;let i=t.ns||this.options.defaultNS||[];const s=n&&e.indexOf(n)>-1,o=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!((e,t,n)=>{t=t||"",n=n||"";const r=sA.filter((e=>t.indexOf(e)<0&&n.indexOf(e)<0));if(0===r.length)return!0;const i=oA.getRegExp(`(${r.map((e=>"?"===e?"\\?":e)).join("|")})`);let s=!i.test(e);if(!s){const t=e.indexOf(n);t>0&&!i.test(e.substring(0,t))&&(s=!0)}return s})(e,n,r);if(s&&!o){const t=e.match(this.interpolator.nestingRegexp);if(t&&t.length>0)return{key:e,namespaces:WP(i)?[i]:i};const s=e.split(n);(n!==r||n===r&&this.options.ns.indexOf(s[0])>-1)&&(i=s.shift()),e=s.join(r)}return{key:e,namespaces:WP(i)?[i]:i}}translate(e,t,n){if("object"!==typeof t&&this.options.overloadTranslationOptionHandler&&(t=this.options.overloadTranslationOptionHandler(arguments)),"object"===typeof t&&(t={...t}),t||(t={}),void 0===e||null===e)return"";Array.isArray(e)||(e=[String(e)]);const r=void 0!==t.returnDetails?t.returnDetails:this.options.returnDetails,i=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,{key:s,namespaces:o}=this.extractFromKey(e[e.length-1],t),a=o[o.length-1],l=t.lng||this.language,c=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(l&&"cimode"===l.toLowerCase()){if(c){const e=t.nsSeparator||this.options.nsSeparator;return r?{res:`${a}${e}${s}`,usedKey:s,exactUsedKey:s,usedLng:l,usedNS:a,usedParams:this.getUsedParamsDetails(t)}:`${a}${e}${s}`}return r?{res:s,usedKey:s,exactUsedKey:s,usedLng:l,usedNS:a,usedParams:this.getUsedParamsDetails(t)}:s}const u=this.resolve(e,t);let d=u&&u.res;const h=u&&u.usedKey||s,p=u&&u.exactUsedKey||s,f=Object.prototype.toString.apply(d),m=void 0!==t.joinArrays?t.joinArrays:this.options.joinArrays,g=!this.i18nFormat||this.i18nFormat.handleAsObject,v=!WP(d)&&"boolean"!==typeof d&&"number"!==typeof d;if(!(g&&d&&v&&["[object Number]","[object Function]","[object RegExp]"].indexOf(f)<0)||WP(m)&&Array.isArray(d))if(g&&WP(m)&&Array.isArray(d))d=d.join(m),d&&(d=this.extendTranslation(d,e,t,n));else{let r=!1,o=!1;const c=void 0!==t.count&&!WP(t.count),h=gA.hasDefaultValue(t),p=c?this.pluralResolver.getSuffix(l,t.count,t):"",f=t.ordinal&&c?this.pluralResolver.getSuffix(l,t.count,{ordinal:!1}):"",m=c&&!t.ordinal&&0===t.count&&this.pluralResolver.shouldUseIntlApi(),g=m&&t[`defaultValue${this.options.pluralSeparator}zero`]||t[`defaultValue${p}`]||t[`defaultValue${f}`]||t.defaultValue;!this.isValidLookup(d)&&h&&(r=!0,d=g),this.isValidLookup(d)||(o=!0,d=s);const v=(t.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&o?void 0:d,y=h&&g!==d&&this.options.updateMissing;if(o||r||y){if(this.logger.log(y?"updateKey":"missingKey",l,a,s,y?g:d),i){const e=this.resolve(s,{...t,keySeparator:!1});e&&e.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let e=[];const n=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if("fallback"===this.options.saveMissingTo&&n&&n[0])for(let t=0;t<n.length;t++)e.push(n[t]);else"all"===this.options.saveMissingTo?e=this.languageUtils.toResolveHierarchy(t.lng||this.language):e.push(t.lng||this.language);const r=(e,n,r)=>{const i=h&&r!==d?r:v;this.options.missingKeyHandler?this.options.missingKeyHandler(e,a,n,i,y,t):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(e,a,n,i,y,t),this.emit("missingKey",e,a,n,d)};this.options.saveMissing&&(this.options.saveMissingPlurals&&c?e.forEach((e=>{const n=this.pluralResolver.getSuffixes(e,t);m&&t[`defaultValue${this.options.pluralSeparator}zero`]&&n.indexOf(`${this.options.pluralSeparator}zero`)<0&&n.push(`${this.options.pluralSeparator}zero`),n.forEach((n=>{r([e],s+n,t[`defaultValue${n}`]||g)}))})):r(e,s,g))}d=this.extendTranslation(d,e,t,u,n),o&&d===s&&this.options.appendNamespaceToMissingKey&&(d=`${a}:${s}`),(o||r)&&this.options.parseMissingKeyHandler&&(d="v1"!==this.options.compatibilityAPI?this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${a}:${s}`:s,r?d:void 0):this.options.parseMissingKeyHandler(d))}else{if(!t.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const e=this.options.returnedObjectHandler?this.options.returnedObjectHandler(h,d,{...t,ns:o}):`key '${s} (${this.language})' returned an object instead of string.`;return r?(u.res=e,u.usedParams=this.getUsedParamsDetails(t),u):e}if(i){const e=Array.isArray(d),n=e?[]:{},r=e?p:h;for(const s in d)if(Object.prototype.hasOwnProperty.call(d,s)){const e=`${r}${i}${s}`;n[s]=this.translate(e,{...t,joinArrays:!1,ns:o}),n[s]===e&&(n[s]=d[s])}d=n}}return r?(u.res=d,u.usedParams=this.getUsedParamsDetails(t),u):d}extendTranslation(e,t,n,r,i){var s=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});const o=WP(e)&&(n&&n.interpolation&&void 0!==n.interpolation.skipOnVariables?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let a;if(o){const t=e.match(this.interpolator.nestingRegexp);a=t&&t.length}let l=n.replace&&!WP(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(l={...this.options.interpolation.defaultVariables,...l}),e=this.interpolator.interpolate(e,l,n.lng||this.language||r.usedLng,n),o){const t=e.match(this.interpolator.nestingRegexp);a<(t&&t.length)&&(n.nest=!1)}!n.lng&&"v1"!==this.options.compatibilityAPI&&r&&r.res&&(n.lng=this.language||r.usedLng),!1!==n.nest&&(e=this.interpolator.nest(e,(function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return i&&i[0]===r[0]&&!n.context?(s.logger.warn(`It seems you are nesting recursively key: ${r[0]} in key: ${t[0]}`),null):s.translate(...r,t)}),n)),n.interpolation&&this.interpolator.reset()}const o=n.postProcess||this.options.postProcess,a=WP(o)?[o]:o;return void 0!==e&&null!==e&&a&&a.length&&!1!==n.applyPostProcessor&&(e=fA.handle(a,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...r,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),e}resolve(e){let t,n,r,i,s,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return WP(e)&&(e=[e]),e.forEach((e=>{if(this.isValidLookup(t))return;const a=this.extractFromKey(e,o),l=a.key;n=l;let c=a.namespaces;this.options.fallbackNS&&(c=c.concat(this.options.fallbackNS));const u=void 0!==o.count&&!WP(o.count),d=u&&!o.ordinal&&0===o.count&&this.pluralResolver.shouldUseIntlApi(),h=void 0!==o.context&&(WP(o.context)||"number"===typeof o.context)&&""!==o.context,p=o.lngs?o.lngs:this.languageUtils.toResolveHierarchy(o.lng||this.language,o.fallbackLng);c.forEach((e=>{this.isValidLookup(t)||(s=e,!mA[`${p[0]}-${e}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(s)&&(mA[`${p[0]}-${e}`]=!0,this.logger.warn(`key "${n}" for languages "${p.join(", ")}" won't get resolved as namespace "${s}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),p.forEach((n=>{if(this.isValidLookup(t))return;i=n;const s=[l];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(s,l,n,e,o);else{let e;u&&(e=this.pluralResolver.getSuffix(n,o.count,o));const t=`${this.options.pluralSeparator}zero`,r=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(u&&(s.push(l+e),o.ordinal&&0===e.indexOf(r)&&s.push(l+e.replace(r,this.options.pluralSeparator)),d&&s.push(l+t)),h){const n=`${l}${this.options.contextSeparator}${o.context}`;s.push(n),u&&(s.push(n+e),o.ordinal&&0===e.indexOf(r)&&s.push(n+e.replace(r,this.options.pluralSeparator)),d&&s.push(n+t))}}let a;for(;a=s.pop();)this.isValidLookup(t)||(r=a,t=this.getResource(n,e,a,o))})))}))})),{res:t,usedKey:n,exactUsedKey:r,usedLng:i,usedNS:s}}isValidLookup(e){return void 0!==e&&!(!this.options.returnNull&&null===e)&&!(!this.options.returnEmptyString&&""===e)}getResource(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,n,r):this.resourceStore.getResource(e,t,n,r)}getUsedParamsDetails(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=e.replace&&!WP(e.replace);let r=n?e.replace:e;if(n&&"undefined"!==typeof e.count&&(r.count=e.count),this.options.interpolation.defaultVariables&&(r={...this.options.interpolation.defaultVariables,...r}),!n){r={...r};for(const e of t)delete r[e]}return r}static hasDefaultValue(e){const t="defaultValue";for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t===n.substring(0,12)&&void 0!==e[n])return!0;return!1}}const vA=e=>e.charAt(0).toUpperCase()+e.slice(1);class yA{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=dA.create("languageUtils")}getScriptPartFromCode(e){if(!(e=lA(e))||e.indexOf("-")<0)return null;const t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}getLanguagePartFromCode(e){if(!(e=lA(e))||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(WP(e)&&e.indexOf("-")>-1){if("undefined"!==typeof Intl&&"undefined"!==typeof Intl.getCanonicalLocales)try{let t=Intl.getCanonicalLocales(e)[0];if(t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t)return t}catch(t){}const n=["hans","hant","latn","cyrl","cans","mong","arab"];let r=e.split("-");return this.options.lowerCaseLng?r=r.map((e=>e.toLowerCase())):2===r.length?(r[0]=r[0].toLowerCase(),r[1]=r[1].toUpperCase(),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=vA(r[1].toLowerCase()))):3===r.length&&(r[0]=r[0].toLowerCase(),2===r[1].length&&(r[1]=r[1].toUpperCase()),"sgn"!==r[0]&&2===r[2].length&&(r[2]=r[2].toUpperCase()),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=vA(r[1].toLowerCase())),n.indexOf(r[2].toLowerCase())>-1&&(r[2]=vA(r[2].toLowerCase()))),r.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach((e=>{if(t)return;const n=this.formatLanguageCode(e);this.options.supportedLngs&&!this.isSupportedCode(n)||(t=n)})),!t&&this.options.supportedLngs&&e.forEach((e=>{if(t)return;const n=this.getLanguagePartFromCode(e);if(this.isSupportedCode(n))return t=n;t=this.options.supportedLngs.find((e=>e===n?e:e.indexOf("-")<0&&n.indexOf("-")<0?void 0:e.indexOf("-")>0&&n.indexOf("-")<0&&e.substring(0,e.indexOf("-"))===n||0===e.indexOf(n)&&n.length>1?e:void 0))})),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if("function"===typeof e&&(e=e(t)),WP(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}toResolveHierarchy(e,t){const n=this.getFallbackCodes(t||this.options.fallbackLng||[],e),r=[],i=e=>{e&&(this.isSupportedCode(e)?r.push(e):this.logger.warn(`rejecting language code not found in supportedLngs: ${e}`))};return WP(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?("languageOnly"!==this.options.load&&i(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&i(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&i(this.getLanguagePartFromCode(e))):WP(e)&&i(this.formatLanguageCode(e)),n.forEach((e=>{r.indexOf(e)<0&&i(this.formatLanguageCode(e))})),r}}let bA=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],wA={1:e=>Number(e>1),2:e=>Number(1!=e),3:e=>0,4:e=>Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2),5:e=>Number(0==e?0:1==e?1:2==e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5),6:e=>Number(1==e?0:e>=2&&e<=4?1:2),7:e=>Number(1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2),8:e=>Number(1==e?0:2==e?1:8!=e&&11!=e?2:3),9:e=>Number(e>=2),10:e=>Number(1==e?0:2==e?1:e<7?2:e<11?3:4),11:e=>Number(1==e||11==e?0:2==e||12==e?1:e>2&&e<20?2:3),12:e=>Number(e%10!=1||e%100==11),13:e=>Number(0!==e),14:e=>Number(1==e?0:2==e?1:3==e?2:3),15:e=>Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2),16:e=>Number(e%10==1&&e%100!=11?0:0!==e?1:2),17:e=>Number(1==e||e%10==1&&e%100!=11?0:1),18:e=>Number(0==e?0:1==e?1:2),19:e=>Number(1==e?0:0==e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3),20:e=>Number(1==e?0:0==e||e%100>0&&e%100<20?1:2),21:e=>Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0),22:e=>Number(1==e?0:2==e?1:(e<0||e>10)&&e%10==0?2:3)};const SA=["v1","v2","v3"],kA=["v4"],CA={zero:0,one:1,two:2,few:3,many:4,other:5};class EA{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.languageUtils=e,this.options=t,this.logger=dA.create("pluralResolver"),this.options.compatibilityJSON&&!kA.includes(this.options.compatibilityJSON)||"undefined"!==typeof Intl&&Intl.PluralRules||(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=(()=>{const e={};return bA.forEach((t=>{t.lngs.forEach((n=>{e[n]={numbers:t.nr,plurals:wA[t.fc]}}))})),e})(),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.shouldUseIntlApi()){const r=lA("dev"===e?"en":e),i=t.ordinal?"ordinal":"cardinal",s=JSON.stringify({cleanedCode:r,type:i});if(s in this.pluralRulesCache)return this.pluralRulesCache[s];let o;try{o=new Intl.PluralRules(r,{type:i})}catch(n){if(!e.match(/-|_/))return;const r=this.languageUtils.getLanguagePartFromCode(e);o=this.getRule(r,t)}return this.pluralRulesCache[s]=o,o}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.getRule(e,t);return this.shouldUseIntlApi()?n&&n.resolvedOptions().pluralCategories.length>1:n&&n.numbers.length>1}getPluralFormsOfKey(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.getSuffixes(e,n).map((e=>`${t}${e}`))}getSuffixes(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.getRule(e,t);return n?this.shouldUseIntlApi()?n.resolvedOptions().pluralCategories.sort(((e,t)=>CA[e]-CA[t])).map((e=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${e}`)):n.numbers.map((n=>this.getSuffix(e,n,t))):[]}getSuffix(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=this.getRule(e,n);return r?this.shouldUseIntlApi()?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${r.select(t)}`:this.getSuffixRetroCompatible(r,t):(this.logger.warn(`no plural rule found for: ${e}`),"")}getSuffixRetroCompatible(e,t){const n=e.noAbs?e.plurals(t):e.plurals(Math.abs(t));let r=e.numbers[n];this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]&&(2===r?r="plural":1===r&&(r=""));const i=()=>this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString();return"v1"===this.options.compatibilityJSON?1===r?"":"number"===typeof r?`_plural_${r.toString()}`:i():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]?i():this.options.prepend&&n.toString()?this.options.prepend+n.toString():n.toString()}shouldUseIntlApi(){return!SA.includes(this.options.compatibilityJSON)}}const TA=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:".",i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],s=((e,t,n)=>{const r=eA(e,n);return void 0!==r?r:eA(t,n)})(e,t,n);return!s&&i&&WP(n)&&(s=aA(e,n,r),void 0===s&&(s=aA(t,n,r))),s},_A=e=>e.replace(/\$/g,"$$$$");class xA{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=dA.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(e=>e),this.init(e)}init(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:n,useRawValueToEscape:r,prefix:i,prefixEscaped:s,suffix:o,suffixEscaped:a,formatSeparator:l,unescapeSuffix:c,unescapePrefix:u,nestingPrefix:d,nestingPrefixEscaped:h,nestingSuffix:p,nestingSuffixEscaped:f,nestingOptionsSeparator:m,maxReplaces:g,alwaysFormat:v}=e.interpolation;this.escape=void 0!==t?t:iA,this.escapeValue=void 0===n||n,this.useRawValueToEscape=void 0!==r&&r,this.prefix=i?nA(i):s||"{{",this.suffix=o?nA(o):a||"}}",this.formatSeparator=l||",",this.unescapePrefix=c?"":u||"-",this.unescapeSuffix=this.unescapePrefix?"":c||"",this.nestingPrefix=d?nA(d):h||nA("$t("),this.nestingSuffix=p?nA(p):f||nA(")"),this.nestingOptionsSeparator=m||",",this.maxReplaces=g||1e3,this.alwaysFormat=void 0!==v&&v,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(e,t)=>e&&e.source===t?(e.lastIndex=0,e):new RegExp(t,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,t,n,r){let i,s,o;const a=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},l=e=>{if(e.indexOf(this.formatSeparator)<0){const i=TA(t,a,e,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(i,void 0,n,{...r,...t,interpolationkey:e}):i}const i=e.split(this.formatSeparator),s=i.shift().trim(),o=i.join(this.formatSeparator).trim();return this.format(TA(t,a,s,this.options.keySeparator,this.options.ignoreJSONStructure),o,n,{...r,...t,interpolationkey:s})};this.resetRegExp();const c=r&&r.missingInterpolationHandler||this.options.missingInterpolationHandler,u=r&&r.interpolation&&void 0!==r.interpolation.skipOnVariables?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:e=>_A(e)},{regex:this.regexp,safeValue:e=>this.escapeValue?_A(this.escape(e)):_A(e)}].forEach((t=>{for(o=0;i=t.regex.exec(e);){const n=i[1].trim();if(s=l(n),void 0===s)if("function"===typeof c){const t=c(e,i,r);s=WP(t)?t:""}else if(r&&Object.prototype.hasOwnProperty.call(r,n))s="";else{if(u){s=i[0];continue}this.logger.warn(`missed to pass in variable ${n} for interpolating ${e}`),s=""}else WP(s)||this.useRawValueToEscape||(s=GP(s));const a=t.safeValue(s);if(e=e.replace(i[0],a),u?(t.regex.lastIndex+=s.length,t.regex.lastIndex-=i[0].length):t.regex.lastIndex=0,o++,o>=this.maxReplaces)break}})),e}nest(e,t){let n,r,i,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=(e,t)=>{const n=this.nestingOptionsSeparator;if(e.indexOf(n)<0)return e;const r=e.split(new RegExp(`${n}[ ]*{`));let s=`{${r[1]}`;e=r[0],s=this.interpolate(s,i);const o=s.match(/'/g),a=s.match(/"/g);(o&&o.length%2===0&&!a||a.length%2!==0)&&(s=s.replace(/'/g,'"'));try{i=JSON.parse(s),t&&(i={...t,...i})}catch(l){return this.logger.warn(`failed parsing options string in nesting for key ${e}`,l),`${e}${n}${s}`}return i.defaultValue&&i.defaultValue.indexOf(this.prefix)>-1&&delete i.defaultValue,e};for(;n=this.nestingRegexp.exec(e);){let a=[];i={...s},i=i.replace&&!WP(i.replace)?i.replace:i,i.applyPostProcessor=!1,delete i.defaultValue;let l=!1;if(-1!==n[0].indexOf(this.formatSeparator)&&!/{.*}/.test(n[1])){const e=n[1].split(this.formatSeparator).map((e=>e.trim()));n[1]=e.shift(),a=e,l=!0}if(r=t(o.call(this,n[1].trim(),i),i),r&&n[0]===e&&!WP(r))return r;WP(r)||(r=GP(r)),r||(this.logger.warn(`missed to resolve ${n[1]} for nesting ${e}`),r=""),l&&(r=a.reduce(((e,t)=>this.format(e,t,s.lng,{...s,interpolationkey:n[1].trim()})),r.trim())),e=e.replace(n[0],r),this.regexp.lastIndex=0}return e}}const IA=e=>{const t={};return(n,r,i)=>{let s=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(s={...s,[i.interpolationkey]:void 0});const o=r+JSON.stringify(s);let a=t[o];return a||(a=e(lA(r),i),t[o]=a),a(n)}};class RA{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=dA.create("formatter"),this.options=e,this.formats={number:IA(((e,t)=>{const n=new Intl.NumberFormat(e,{...t});return e=>n.format(e)})),currency:IA(((e,t)=>{const n=new Intl.NumberFormat(e,{...t,style:"currency"});return e=>n.format(e)})),datetime:IA(((e,t)=>{const n=new Intl.DateTimeFormat(e,{...t});return e=>n.format(e)})),relativetime:IA(((e,t)=>{const n=new Intl.RelativeTimeFormat(e,{...t});return e=>n.format(e,t.range||"day")})),list:IA(((e,t)=>{const n=new Intl.ListFormat(e,{...t});return e=>n.format(e)}))},this.init(e)}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};this.formatSeparator=t.interpolation.formatSeparator||","}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=IA(t)}format(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i=t.split(this.formatSeparator);if(i.length>1&&i[0].indexOf("(")>1&&i[0].indexOf(")")<0&&i.find((e=>e.indexOf(")")>-1))){const e=i.findIndex((e=>e.indexOf(")")>-1));i[0]=[i[0],...i.splice(1,e)].join(this.formatSeparator)}const s=i.reduce(((e,t)=>{const{formatName:i,formatOptions:s}=(e=>{let t=e.toLowerCase().trim();const n={};if(e.indexOf("(")>-1){const r=e.split("(");t=r[0].toLowerCase().trim();const i=r[1].substring(0,r[1].length-1);"currency"===t&&i.indexOf(":")<0?n.currency||(n.currency=i.trim()):"relativetime"===t&&i.indexOf(":")<0?n.range||(n.range=i.trim()):i.split(";").forEach((e=>{if(e){const[t,...r]=e.split(":"),i=r.join(":").trim().replace(/^'+|'+$/g,""),s=t.trim();n[s]||(n[s]=i),"false"===i&&(n[s]=!1),"true"===i&&(n[s]=!0),isNaN(i)||(n[s]=parseInt(i,10))}}))}return{formatName:t,formatOptions:n}})(t);if(this.formats[i]){let t=e;try{const o=r&&r.formatParams&&r.formatParams[r.interpolationkey]||{},a=o.locale||o.lng||r.locale||r.lng||n;t=this.formats[i](e,a,{...s,...r,...o})}catch(o){this.logger.warn(o)}return t}return this.logger.warn(`there was no format function for ${i}`),e}),e);return s}}class PA extends hA{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};super(),this.backend=e,this.store=t,this.services=n,this.languageUtils=n.languageUtils,this.options=r,this.logger=dA.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=r.maxParallelReads||10,this.readingCalls=0,this.maxRetries=r.maxRetries>=0?r.maxRetries:5,this.retryTimeout=r.retryTimeout>=1?r.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(n,r.backend,r)}queueLoad(e,t,n,r){const i={},s={},o={},a={};return e.forEach((e=>{let r=!0;t.forEach((t=>{const o=`${e}|${t}`;!n.reload&&this.store.hasResourceBundle(e,t)?this.state[o]=2:this.state[o]<0||(1===this.state[o]?void 0===s[o]&&(s[o]=!0):(this.state[o]=1,r=!1,void 0===s[o]&&(s[o]=!0),void 0===i[o]&&(i[o]=!0),void 0===a[t]&&(a[t]=!0)))})),r||(o[e]=!0)})),(Object.keys(i).length||Object.keys(s).length)&&this.queue.push({pending:s,pendingCount:Object.keys(s).length,loaded:{},errors:[],callback:r}),{toLoad:Object.keys(i),pending:Object.keys(s),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(a)}}loaded(e,t,n){const r=e.split("|"),i=r[0],s=r[1];t&&this.emit("failedLoading",i,s,t),!t&&n&&this.store.addResourceBundle(i,s,n,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&n&&(this.state[e]=0);const o={};this.queue.forEach((n=>{((e,t,n)=>{const{obj:r,k:i}=XP(e,t,Object);r[i]=r[i]||[],r[i].push(n)})(n.loaded,[i],s),((e,t)=>{void 0!==e.pending[t]&&(delete e.pending[t],e.pendingCount--)})(n,e),t&&n.errors.push(t),0!==n.pendingCount||n.done||(Object.keys(n.loaded).forEach((e=>{o[e]||(o[e]={});const t=n.loaded[e];t.length&&t.forEach((t=>{void 0===o[e][t]&&(o[e][t]=!0)}))})),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())})),this.emit("loaded",o),this.queue=this.queue.filter((e=>!e.done))}read(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.retryTimeout,s=arguments.length>5?arguments[5]:void 0;if(!e.length)return s(null,{});if(this.readingCalls>=this.maxParallelReads)return void this.waitingReads.push({lng:e,ns:t,fcName:n,tried:r,wait:i,callback:s});this.readingCalls++;const o=(o,a)=>{if(this.readingCalls--,this.waitingReads.length>0){const e=this.waitingReads.shift();this.read(e.lng,e.ns,e.fcName,e.tried,e.wait,e.callback)}o&&a&&r<this.maxRetries?setTimeout((()=>{this.read.call(this,e,t,n,r+1,2*i,s)}),i):s(o,a)},a=this.backend[n].bind(this.backend);if(2!==a.length)return a(e,t,o);try{const n=a(e,t);n&&"function"===typeof n.then?n.then((e=>o(null,e))).catch(o):o(null,n)}catch(l){o(l)}}prepareLoading(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),r&&r();WP(e)&&(e=this.languageUtils.toResolveHierarchy(e)),WP(t)&&(t=[t]);const i=this.queueLoad(e,t,n,r);if(!i.toLoad.length)return i.pending.length||r(),null;i.toLoad.forEach((e=>{this.loadOne(e)}))}load(e,t,n){this.prepareLoading(e,t,{},n)}reload(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}loadOne(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e.split("|"),r=n[0],i=n[1];this.read(r,i,"read",void 0,void 0,((n,s)=>{n&&this.logger.warn(`${t}loading namespace ${i} for language ${r} failed`,n),!n&&s&&this.logger.log(`${t}loaded namespace ${i} for language ${r}`,s),this.loaded(e,n,s)}))}saveMissing(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t))this.logger.warn(`did not save key "${n}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");else if(void 0!==n&&null!==n&&""!==n){if(this.backend&&this.backend.create){const l={...s,isUpdate:i},c=this.backend.create.bind(this.backend);if(c.length<6)try{let i;i=5===c.length?c(e,t,n,r,l):c(e,t,n,r),i&&"function"===typeof i.then?i.then((e=>o(null,e))).catch(o):o(null,i)}catch(a){o(a)}else c(e,t,n,r,o,l)}e&&e[0]&&this.store.addResource(e[0],t,n,r)}}}const AA=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if("object"===typeof e[1]&&(t=e[1]),WP(e[1])&&(t.defaultValue=e[1]),WP(e[2])&&(t.tDescription=e[2]),"object"===typeof e[2]||"object"===typeof e[3]){const n=e[3]||e[2];Object.keys(n).forEach((e=>{t[e]=n[e]}))}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),NA=e=>(WP(e.ns)&&(e.ns=[e.ns]),WP(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),WP(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e),OA=()=>{};class DA extends hA{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;var n;if(super(),this.options=NA(e),this.services={},this.logger=dA,this.modules={external:[]},n=this,Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach((e=>{"function"===typeof n[e]&&(n[e]=n[e].bind(n))})),t&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,t),this;setTimeout((()=>{this.init(e,t)}),0)}}init(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,"function"===typeof t&&(n=t,t={}),!t.defaultNS&&!1!==t.defaultNS&&t.ns&&(WP(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const r=AA();this.options={...r,...this.options,...NA(t)},"v1"!==this.options.compatibilityAPI&&(this.options.interpolation={...r.interpolation,...this.options.interpolation}),void 0!==t.keySeparator&&(this.options.userDefinedKeySeparator=t.keySeparator),void 0!==t.nsSeparator&&(this.options.userDefinedNsSeparator=t.nsSeparator);const i=e=>e?"function"===typeof e?new e:e:null;if(!this.options.isClone){let t;this.modules.logger?dA.init(i(this.modules.logger),this.options):dA.init(null,this.options),this.modules.formatter?t=this.modules.formatter:"undefined"!==typeof Intl&&(t=RA);const n=new yA(this.options);this.store=new pA(this.options.resources,this.options);const s=this.services;s.logger=dA,s.resourceStore=this.store,s.languageUtils=n,s.pluralResolver=new EA(n,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),!t||this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format||(s.formatter=i(t),s.formatter.init(s,this.options),this.options.interpolation.format=s.formatter.format.bind(s.formatter)),s.interpolator=new xA(this.options),s.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},s.backendConnector=new PA(i(this.modules.backend),s.resourceStore,s,this.options),s.backendConnector.on("*",(function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.emit(t,...r)})),this.modules.languageDetector&&(s.languageDetector=i(this.modules.languageDetector),s.languageDetector.init&&s.languageDetector.init(s,this.options.detection,this.options)),this.modules.i18nFormat&&(s.i18nFormat=i(this.modules.i18nFormat),s.i18nFormat.init&&s.i18nFormat.init(this)),this.translator=new gA(this.services,this.options),this.translator.on("*",(function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.emit(t,...r)})),this.modules.external.forEach((e=>{e.init&&e.init(this)}))}if(this.format=this.options.interpolation.format,n||(n=OA),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const e=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);e.length>0&&"dev"!==e[0]&&(this.options.lng=e[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach((t=>{this[t]=function(){return e.store[t](...arguments)}}));["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach((t=>{this[t]=function(){return e.store[t](...arguments),e}}));const s=KP(),o=()=>{const e=(e,t)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),s.resolve(t),n(e,t)};if(this.languages&&"v1"!==this.options.compatibilityAPI&&!this.isInitialized)return e(null,this.t.bind(this));this.changeLanguage(this.options.lng,e)};return this.options.resources||!this.options.initImmediate?o():setTimeout(o,0),s}loadResources(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:OA;const n=WP(e)?e:this.language;if("function"===typeof e&&(t=e),!this.options.resources||this.options.partialBundledLanguages){if(n&&"cimode"===n.toLowerCase()&&(!this.options.preload||0===this.options.preload.length))return t();const e=[],r=t=>{if(!t)return;if("cimode"===t)return;this.services.languageUtils.toResolveHierarchy(t).forEach((t=>{"cimode"!==t&&e.indexOf(t)<0&&e.push(t)}))};if(n)r(n);else{this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach((e=>r(e)))}this.options.preload&&this.options.preload.forEach((e=>r(e))),this.services.backendConnector.load(e,this.options.ns,(e=>{e||this.resolvedLanguage||!this.language||this.setResolvedLanguage(this.language),t(e)}))}else t(null)}reloadResources(e,t,n){const r=KP();return"function"===typeof e&&(n=e,e=void 0),"function"===typeof t&&(n=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),n||(n=OA),this.services.backendConnector.reload(e,t,(e=>{r.resolve(),n(e)})),r}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&fA.addPostProcessor(e),"formatter"===e.type&&(this.modules.formatter=e),"3rdParty"===e.type&&this.modules.external.push(e),this}setResolvedLanguage(e){if(e&&this.languages&&!(["cimode","dev"].indexOf(e)>-1))for(let t=0;t<this.languages.length;t++){const e=this.languages[t];if(!(["cimode","dev"].indexOf(e)>-1)&&this.store.hasLanguageSomeTranslations(e)){this.resolvedLanguage=e;break}}}changeLanguage(e,t){var n=this;this.isLanguageChangingTo=e;const r=KP();this.emit("languageChanging",e);const i=e=>{this.language=e,this.languages=this.services.languageUtils.toResolveHierarchy(e),this.resolvedLanguage=void 0,this.setResolvedLanguage(e)},s=(e,s)=>{s?(i(s),this.translator.changeLanguage(s),this.isLanguageChangingTo=void 0,this.emit("languageChanged",s),this.logger.log("languageChanged",s)):this.isLanguageChangingTo=void 0,r.resolve((function(){return n.t(...arguments)})),t&&t(e,(function(){return n.t(...arguments)}))},o=t=>{e||t||!this.services.languageDetector||(t=[]);const n=WP(t)?t:this.services.languageUtils.getBestMatchFromCodes(t);n&&(this.language||i(n),this.translator.language||this.translator.changeLanguage(n),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(n)),this.loadResources(n,(e=>{s(e,n)}))};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?0===this.services.languageDetector.detect.length?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(e):o(this.services.languageDetector.detect()),r}getFixedT(e,t,n){var r=this;const i=function(e,t){let s;if("object"!==typeof t){for(var o=arguments.length,a=new Array(o>2?o-2:0),l=2;l<o;l++)a[l-2]=arguments[l];s=r.options.overloadTranslationOptionHandler([e,t].concat(a))}else s={...t};s.lng=s.lng||i.lng,s.lngs=s.lngs||i.lngs,s.ns=s.ns||i.ns,""!==s.keyPrefix&&(s.keyPrefix=s.keyPrefix||n||i.keyPrefix);const c=r.options.keySeparator||".";let u;return u=s.keyPrefix&&Array.isArray(e)?e.map((e=>`${s.keyPrefix}${c}${e}`)):s.keyPrefix?`${s.keyPrefix}${c}${e}`:e,r.t(u,s)};return WP(e)?i.lng=e:i.lngs=e,i.ns=t,i.keyPrefix=n,i}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=t.lng||this.resolvedLanguage||this.languages[0],r=!!this.options&&this.options.fallbackLng,i=this.languages[this.languages.length-1];if("cimode"===n.toLowerCase())return!0;const s=(e,t)=>{const n=this.services.backendConnector.state[`${e}|${t}`];return-1===n||0===n||2===n};if(t.precheck){const e=t.precheck(this,s);if(void 0!==e)return e}return!!this.hasResourceBundle(n,e)||(!(this.services.backendConnector.backend&&(!this.options.resources||this.options.partialBundledLanguages))||!(!s(n,e)||r&&!s(i,e)))}loadNamespaces(e,t){const n=KP();return this.options.ns?(WP(e)&&(e=[e]),e.forEach((e=>{this.options.ns.indexOf(e)<0&&this.options.ns.push(e)})),this.loadResources((e=>{n.resolve(),t&&t(e)})),n):(t&&t(),Promise.resolve())}loadLanguages(e,t){const n=KP();WP(e)&&(e=[e]);const r=this.options.preload||[],i=e.filter((e=>r.indexOf(e)<0&&this.services.languageUtils.isSupportedCode(e)));return i.length?(this.options.preload=r.concat(i),this.loadResources((e=>{n.resolve(),t&&t(e)})),n):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const t=this.services&&this.services.languageUtils||new yA(AA());return["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(t.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){return new DA(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1?arguments[1]:void 0)}cloneInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:OA;const n=e.forkResourceStore;n&&delete e.forkResourceStore;const r={...this.options,...e,isClone:!0},i=new DA(r);void 0===e.debug&&void 0===e.prefix||(i.logger=i.logger.clone(e));return["store","services","language"].forEach((e=>{i[e]=this[e]})),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},n&&(i.store=new pA(this.store.data,r),i.services.resourceStore=i.store),i.translator=new gA(i.services,r),i.translator.on("*",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];i.emit(e,...n)})),i.init(r,t),i.translator.options=r,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const LA=DA.createInstance();LA.createInstance=DA.createInstance;LA.createInstance,LA.dir,LA.init,LA.loadResources,LA.reloadResources,LA.use,LA.changeLanguage,LA.getFixedT,LA.t,LA.exists,LA.setDefaultNamespace,LA.hasLoadedNamespace,LA.loadNamespaces,LA.loadLanguages;const jA=(0,o.createContext)(void 0),MA=()=>(0,o.useContext)(jA),FA="stream-video",UA={debug:!1,currentLanguage:"en",fallbackLanguage:!1},VA=((e,t)=>Object.entries(e).reduce(((e,n)=>{let[r,i]=n;return e[r]={[t]:i},e}),{}))({},FA),$A=e=>e;class BA{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.t=$A,this.init=async()=>{try{this.t=await this.i18nInstance.init()}catch(e){console.error(`Failed to initialize translations: ${JSON.stringify(e)}`)}return this},this.changeLanguage=async(e,t)=>{if(!this._checkIsInitialized())return;const n="undefined"!==typeof window&&window.navigator?window.navigator.language:void 0;await this.i18nInstance.changeLanguage(e||n),t?.(this.currentLanguage)},this.registerTranslationsForLanguage=e=>{let{lng:t,translations:n}=e;this._checkIsInitialized()&&this.i18nInstance.addResourceBundle(t,FA,n,!0,!0)},this._checkIsInitialized=()=>(this.i18nInstance.isInitialized||console.warn("I18n instance is not initialized. Call yourStreamI18nInstance.init()."),this.i18nInstance.isInitialized);const{debug:t=UA.debug,currentLanguage:n=UA.currentLanguage,fallbackLanguage:r=UA.fallbackLanguage,translationsOverrides:i}=e;this.i18nInstance=LA.createInstance({debug:t,defaultNS:FA,fallbackLng:r,interpolation:{escapeValue:!1},keySeparator:!1,lng:n,nsSeparator:!1,parseMissingKeyHandler:e=>e,resources:VA}),i&&this.i18nInstance.on("initialized",(()=>{Object.entries(i).forEach((e=>{let[t,n]=e;this.registerTranslationsForLanguage({lng:t,translations:n})}))}))}get currentLanguage(){return this._checkIsInitialized(),this.i18nInstance.language}get isInitialized(){return this.i18nInstance.isInitialized}}const zA=(0,o.createContext)({t:$A}),HA=e=>{let{children:t,...n}=e;const{i18n:r,t:i}=qA(n);return(0,Pr.jsx)(zA.Provider,{value:{t:i,i18n:r},children:t})},qA=e=>{let{i18nInstance:t,language:n,fallbackLanguage:r,translationsOverrides:i}=e;const[s]=(0,o.useState)((()=>t||new BA({currentLanguage:n,fallbackLanguage:r,translationsOverrides:i}))),[a,l]=(0,o.useState)((()=>$A));return(0,o.useEffect)((()=>{const{isInitialized:e}=s;e?n&&s?.currentLanguage!==n&&s.changeLanguage(n).catch((e=>{console.log("Error while changing language",e)})):s.init().then((e=>l((()=>e.i18nInstance.t))))}),[s,t,n,i]),{i18n:s,t:a}},WA=()=>(0,o.useContext)(zA),KA=(0,o.createContext)(void 0),GA=e=>{let{children:t,client:n,i18nInstance:r,language:i,translationsOverrides:s}=e;return(0,Pr.jsx)(KA.Provider,{value:n,children:(0,Pr.jsx)(HA,{i18nInstance:r,language:i,translationsOverrides:s,children:t})})},JA=(e,t)=>{const[n,r]=(0,o.useState)((()=>{try{return yI.getCurrentValue(e)}catch(n){if("undefined"===typeof t)throw n;return t}}));return(0,o.useEffect)((()=>yI.createSubscription(e,r,(e=>{console.log("An error occurred while reading an observable",e),t&&r(t)}))),[t,e]),n},YA=Object.freeze([]),QA=()=>{const e=MA();if(!e){const e='You are using useCallState() outside a Call context. Please wrap your component in <StreamCall /> and provide a "call" instance.';return console.warn(e),new zI}return e.state},XA=()=>{const{recording$:e}=QA();return JA(e)},ZA=()=>{const{ownCapabilities$:e}=QA();return JA(e)};function eN(e,t){const n=t??e;return{status:e,optimisticStatus:n,isEnabled:"enabled"===e,isMute:"enabled"!==e,optimisticIsMute:"enabled"!==n,isTogglePending:n!==e}}var tN=Object.freeze({__proto__:null,useAnonymousParticipantCount:()=>{const{anonymousParticipantCount$:e}=QA();return JA(e)},useCallBlockedUserIds:()=>{const{blockedUserIds$:e}=QA();return JA(e)},useCallCallingState:()=>{const{callingState$:e}=QA();return JA(e)},useCallClosedCaptions:()=>{const{closedCaptions$:e}=QA();return JA(e)},useCallCreatedAt:()=>{const{createdAt$:e}=QA();return JA(e)},useCallCreatedBy:()=>{const{createdBy$:e}=QA();return JA(e)},useCallCustomData:()=>{const{custom$:e}=QA();return JA(e)},useCallEgress:()=>{const{egress$:e}=QA();return JA(e)},useCallEndedAt:()=>{const{endedAt$:e}=QA();return JA(e)},useCallEndedBy:()=>{const{endedBy$:e}=QA();return JA(e)},useCallIngress:()=>{const{ingress$:e}=QA();return JA(e)},useCallMembers:()=>{const{members$:e}=QA();return JA(e)},useCallSession:()=>{const{session$:e}=QA();return JA(e)},useCallSettings:()=>{const{settings$:e}=QA();return JA(e)},useCallStartedAt:()=>{const{startedAt$:e}=QA();return JA(e)},useCallStartsAt:()=>{const{startsAt$:e}=QA();return JA(e)},useCallState:QA,useCallStatsReport:()=>{const{callStatsReport$:e}=QA();return JA(e)},useCallThumbnail:()=>{const{thumbnails$:e}=QA();return JA(e)},useCallUpdatedAt:()=>{const{updatedAt$:e}=QA();return JA(e)},useCameraState:()=>{const e=MA(),{camera:t}=e,n=(0,o.useMemo)((()=>t.listDevices()),[t]),{state:r}=t,i=JA(r.direction$),s=JA(r.mediaStream$),a=JA(r.selectedDevice$),l=JA(n,YA),c=JA(r.hasBrowserPermission$),u=JA(r.isPromptingPermission$);return{camera:t,direction:i,mediaStream:s,devices:l,hasBrowserPermission:c,isPromptingPermission:u,selectedDevice:a,...eN(JA(r.status$),JA(r.optimisticStatus$))}},useDominantSpeaker:()=>{const{dominantSpeaker$:e}=QA();return JA(e)},useHasOngoingScreenShare:()=>{const{hasOngoingScreenShare$:e}=QA();return JA(e)},useHasPermissions:function(){const e=ZA();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.every((t=>e?.includes(t)))},useIncomingVideoSettings:()=>{const e=MA();return JA(e.dynascaleManager.incomingVideoSettings$)},useIsCallCaptioningInProgress:()=>{const{captioning$:e}=QA();return JA(e)},useIsCallHLSBroadcastingInProgress:()=>{const{egress$:e}=QA(),t=JA(e);return!!t&&t.broadcasting},useIsCallLive:()=>{const{backstage$:e}=QA();return!JA(e)},useIsCallRecordingInProgress:XA,useIsCallTranscribingInProgress:()=>{const{transcribing$:e}=QA();return JA(e)},useLocalParticipant:()=>{const{localParticipant$:e}=QA();return JA(e)},useMicrophoneState:()=>{const e=MA(),{microphone:t}=e,n=(0,o.useMemo)((()=>t.listDevices()),[t]),{state:r}=t,i=JA(r.mediaStream$),s=JA(r.selectedDevice$),a=JA(n,YA),l=JA(r.hasBrowserPermission$),c=JA(r.isPromptingPermission$),u=JA(r.speakingWhileMuted$);return{microphone:t,mediaStream:i,devices:a,selectedDevice:s,hasBrowserPermission:l,isPromptingPermission:c,isSpeakingWhileMuted:u,...eN(JA(r.status$),JA(r.optimisticStatus$))}},useOwnCapabilities:ZA,useParticipantCount:()=>{const{participantCount$:e}=QA();return JA(e)},useParticipants:function(){let{sortBy:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{participants$:t}=QA(),n=JA(t);return(0,o.useMemo)((()=>e?[...n].sort(e):n),[n,e])},useRemoteParticipants:()=>{const{remoteParticipants$:e}=QA();return JA(e)},useScreenShareState:()=>{const e=MA(),{screenShare:t}=e;return{screenShare:t,mediaStream:JA(t.state.mediaStream$),...eN(JA(t.state.status$),JA(t.state.optimisticStatus$))}},useSpeakerState:()=>{if("undefined"!==typeof navigator&&"reactnative"===navigator.product?.toLowerCase())throw new Error("This feature is not supported in React Native. Please visit https://getstream.io/video/docs/reactnative/core/camera-and-microphone/#speaker-management for more details");const e=MA(),{speaker:t}=e,n=(0,o.useMemo)((()=>t.listDevices()),[t]),r=JA(n,YA),i=JA(t.state.selectedDevice$);return{speaker:t,devices:r,selectedDevice:i,isDeviceSelectionSupported:t.state.isDeviceSelectionSupported}}});const nN=()=>tN,rN=e=>{let{canRequestOnly:t,hasPermissionsOnly:n,requiredGrants:r,requireAll:i=!0,children:s}=e;const o=MA(),{useCallSettings:a,useOwnCapabilities:l}=nN(),c=l(),u=a(),d=r[i?"every":"some"]((e=>c?.includes(e)));if(n)return d?(0,Pr.jsx)(Pr.Fragment,{children:s}):null;const h=r.some((e=>o?.permissionsContext.canRequest(e,u)));return t?h?(0,Pr.jsx)(Pr.Fragment,{children:s}):null:d||h?(0,Pr.jsx)(Pr.Fragment,{children:s}):null};function iN(){return"undefined"!==typeof window}function sN(e){return lN(e)?(e.nodeName||"").toLowerCase():"#document"}function oN(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function aN(e){var t;return null==(t=(lN(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function lN(e){return!!iN()&&(e instanceof Node||e instanceof oN(e).Node)}function cN(e){return!!iN()&&(e instanceof Element||e instanceof oN(e).Element)}function uN(e){return!!iN()&&(e instanceof HTMLElement||e instanceof oN(e).HTMLElement)}function dN(e){return!(!iN()||"undefined"===typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof oN(e).ShadowRoot)}function hN(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=yN(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function pN(e){return["table","td","th"].includes(sN(e))}function fN(e){return[":popover-open",":modal"].some((t=>{try{return e.matches(t)}catch(n){return!1}}))}function mN(e){const t=gN(),n=cN(e)?yN(e):e;return["transform","translate","scale","rotate","perspective"].some((e=>!!n[e]&&"none"!==n[e]))||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||["transform","translate","scale","rotate","perspective","filter"].some((e=>(n.willChange||"").includes(e)))||["paint","layout","strict","content"].some((e=>(n.contain||"").includes(e)))}function gN(){return!("undefined"===typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function vN(e){return["html","body","#document"].includes(sN(e))}function yN(e){return oN(e).getComputedStyle(e)}function bN(e){return cN(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function wN(e){if("html"===sN(e))return e;const t=e.assignedSlot||e.parentNode||dN(e)&&e.host||aN(e);return dN(t)?t.host:t}function SN(e){const t=wN(e);return vN(t)?e.ownerDocument?e.ownerDocument.body:e.body:uN(t)&&hN(t)?t:SN(t)}function kN(e,t,n){var r;void 0===t&&(t=[]),void 0===n&&(n=!0);const i=SN(e),s=i===(null==(r=e.ownerDocument)?void 0:r.body),o=oN(i);if(s){const e=CN(o);return t.concat(o,o.visualViewport||[],hN(i)?i:[],e&&n?kN(e):[])}return t.concat(i,kN(i,[],n))}function CN(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function EN(e){let t=e.activeElement;for(;null!=(null==(n=t)||null==(n=n.shadowRoot)?void 0:n.activeElement);){var n;t=t.shadowRoot.activeElement}return t}function TN(e,t){if(!e||!t)return!1;const n=null==t.getRootNode?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&dN(n)){let n=t;for(;n;){if(e===n)return!0;n=n.parentNode||n.host}}return!1}function _N(){const e=navigator.userAgentData;return null!=e&&e.platform?e.platform:navigator.platform}function xN(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map((e=>{let{brand:t,version:n}=e;return t+"/"+n})).join(" "):navigator.userAgent}function IN(e){return!(0!==e.mozInputSource||!e.isTrusted)||(AN()&&e.pointerType?"click"===e.type&&1===e.buttons:0===e.detail&&!e.pointerType)}function RN(e){return!xN().includes("jsdom/")&&(!AN()&&0===e.width&&0===e.height||AN()&&1===e.width&&1===e.height&&0===e.pressure&&0===e.detail&&"mouse"===e.pointerType||e.width<1&&e.height<1&&0===e.pressure&&0===e.detail&&"touch"===e.pointerType)}function PN(){return/apple/i.test(navigator.vendor)}function AN(){const e=/android/i;return e.test(_N())||e.test(xN())}function NN(e,t){const n=["mouse","pen"];return t||n.push("",void 0),n.includes(e)}function ON(e){return(null==e?void 0:e.ownerDocument)||document}function DN(e,t){if(null==t)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return null!=n.target&&t.contains(n.target)}function LN(e){return"composedPath"in e?e.composedPath()[0]:e.target}function jN(e){return uN(e)&&e.matches("input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])")}function MN(e){e.preventDefault(),e.stopPropagation()}function FN(e){return!!e&&("combobox"===e.getAttribute("role")&&jN(e))}const UN=Math.min,VN=Math.max,$N=Math.round,BN=Math.floor,zN=e=>({x:e,y:e}),HN={left:"right",right:"left",bottom:"top",top:"bottom"},qN={start:"end",end:"start"};function WN(e,t,n){return VN(e,UN(t,n))}function KN(e,t){return"function"===typeof e?e(t):e}function GN(e){return e.split("-")[0]}function JN(e){return e.split("-")[1]}function YN(e){return"x"===e?"y":"x"}function QN(e){return"y"===e?"height":"width"}function XN(e){return["top","bottom"].includes(GN(e))?"y":"x"}function ZN(e){return YN(XN(e))}function eO(e){return e.replace(/start|end/g,(e=>qN[e]))}function tO(e){return e.replace(/left|right|bottom|top/g,(e=>HN[e]))}function nO(e){return"number"!==typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}function rO(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}var iO=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],sO=iO.join(","),oO="undefined"===typeof Element,aO=oO?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,lO=!oO&&Element.prototype.getRootNode?function(e){var t;return null===e||void 0===e||null===(t=e.getRootNode)||void 0===t?void 0:t.call(e)}:function(e){return null===e||void 0===e?void 0:e.ownerDocument},cO=function e(t,n){var r;void 0===n&&(n=!0);var i=null===t||void 0===t||null===(r=t.getAttribute)||void 0===r?void 0:r.call(t,"inert");return""===i||"true"===i||n&&t&&e(t.parentNode)},uO=function(e,t,n){if(cO(e))return[];var r=Array.prototype.slice.apply(e.querySelectorAll(sO));return t&&aO.call(e,sO)&&r.unshift(e),r=r.filter(n)},dO=function e(t,n,r){for(var i=[],s=Array.from(t);s.length;){var o=s.shift();if(!cO(o,!1))if("SLOT"===o.tagName){var a=o.assignedElements(),l=e(a.length?a:o.children,!0,r);r.flatten?i.push.apply(i,l):i.push({scopeParent:o,candidates:l})}else{aO.call(o,sO)&&r.filter(o)&&(n||!t.includes(o))&&i.push(o);var c=o.shadowRoot||"function"===typeof r.getShadowRoot&&r.getShadowRoot(o),u=!cO(c,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(o));if(c&&u){var d=e(!0===c?o.children:c.children,!0,r);r.flatten?i.push.apply(i,d):i.push({scopeParent:o,candidates:d})}else s.unshift.apply(s,o.children)}}return i},hO=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},pO=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||function(e){var t,n=null===e||void 0===e||null===(t=e.getAttribute)||void 0===t?void 0:t.call(e,"contenteditable");return""===n||"true"===n}(e))&&!hO(e)?0:e.tabIndex},fO=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},mO=function(e){return"INPUT"===e.tagName},gO=function(e){return function(e){return mO(e)&&"radio"===e.type}(e)&&!function(e){if(!e.name)return!0;var t,n=e.form||lO(e),r=function(e){return n.querySelectorAll('input[type="radio"][name="'+e+'"]')};if("undefined"!==typeof window&&"undefined"!==typeof window.CSS&&"function"===typeof window.CSS.escape)t=r(window.CSS.escape(e.name));else try{t=r(e.name)}catch(s){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",s.message),!1}var i=function(e,t){for(var n=0;n<e.length;n++)if(e[n].checked&&e[n].form===t)return e[n]}(t,e.form);return!i||i===e}(e)},vO=function(e){var t=e.getBoundingClientRect(),n=t.width,r=t.height;return 0===n&&0===r},yO=function(e,t){var n=t.displayCheck,r=t.getShadowRoot;if("hidden"===getComputedStyle(e).visibility)return!0;var i=aO.call(e,"details>summary:first-of-type")?e.parentElement:e;if(aO.call(i,"details:not([open]) *"))return!0;if(n&&"full"!==n&&"legacy-full"!==n){if("non-zero-area"===n)return vO(e)}else{if("function"===typeof r){for(var s=e;e;){var o=e.parentElement,a=lO(e);if(o&&!o.shadowRoot&&!0===r(o))return vO(e);e=e.assignedSlot?e.assignedSlot:o||a===e.ownerDocument?o:a.host}e=s}if(function(e){var t,n,r,i,s=e&&lO(e),o=null===(t=s)||void 0===t?void 0:t.host,a=!1;if(s&&s!==e)for(a=!!(null!==(n=o)&&void 0!==n&&null!==(r=n.ownerDocument)&&void 0!==r&&r.contains(o)||null!==e&&void 0!==e&&null!==(i=e.ownerDocument)&&void 0!==i&&i.contains(e));!a&&o;){var l,c,u;a=!(null===(c=o=null===(l=s=lO(o))||void 0===l?void 0:l.host)||void 0===c||null===(u=c.ownerDocument)||void 0===u||!u.contains(o))}return a}(e))return!e.getClientRects().length;if("legacy-full"!==n)return!0}return!1},bO=function(e,t){return!(t.disabled||cO(t)||function(e){return mO(e)&&"hidden"===e.type}(t)||yO(t,e)||function(e){return"DETAILS"===e.tagName&&Array.prototype.slice.apply(e.children).some((function(e){return"SUMMARY"===e.tagName}))}(t)||function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if("FIELDSET"===t.tagName&&t.disabled){for(var n=0;n<t.children.length;n++){var r=t.children.item(n);if("LEGEND"===r.tagName)return!!aO.call(t,"fieldset[disabled] *")||!r.contains(e)}return!0}t=t.parentElement}return!1}(t))},wO=function(e,t){return!(gO(t)||pO(t)<0||!bO(e,t))},SO=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},kO=function e(t){var n=[],r=[];return t.forEach((function(t,i){var s=!!t.scopeParent,o=s?t.scopeParent:t,a=function(e,t){var n=pO(e);return n<0&&t&&!hO(e)?0:n}(o,s),l=s?e(t.candidates):o;0===a?s?n.push.apply(n,l):n.push(o):r.push({documentOrder:i,tabIndex:a,item:t,isScope:s,content:l})})),r.sort(fO).reduce((function(e,t){return t.isScope?e.push.apply(e,t.content):e.push(t.content),e}),[]).concat(n)},CO=function(e,t){var n;return n=(t=t||{}).getShadowRoot?dO([e],t.includeContainer,{filter:wO.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:SO}):uO(e,t.includeContainer,wO.bind(null,t)),kO(n)};function EO(e,t,n){let{reference:r,floating:i}=e;const s=XN(t),o=ZN(t),a=QN(o),l=GN(t),c="y"===s,u=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,h=r[a]/2-i[a]/2;let p;switch(l){case"top":p={x:u,y:r.y-i.height};break;case"bottom":p={x:u,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:d};break;case"left":p={x:r.x-i.width,y:d};break;default:p={x:r.x,y:r.y}}switch(JN(t)){case"start":p[o]-=h*(n&&c?-1:1);break;case"end":p[o]+=h*(n&&c?-1:1)}return p}async function TO(e,t){var n;void 0===t&&(t={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:p=0}=KN(t,e),f=nO(p),m=a[h?"floating"===d?"reference":"floating":d],g=rO(await s.getClippingRect({element:null==(n=await(null==s.isElement?void 0:s.isElement(m)))||n?m:m.contextElement||await(null==s.getDocumentElement?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),v="floating"===d?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,y=await(null==s.getOffsetParent?void 0:s.getOffsetParent(a.floating)),b=await(null==s.isElement?void 0:s.isElement(y))&&await(null==s.getScale?void 0:s.getScale(y))||{x:1,y:1},w=rO(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:y,strategy:l}):v);return{top:(g.top-w.top+f.top)/b.y,bottom:(w.bottom-g.bottom+f.bottom)/b.y,left:(g.left-w.left+f.left)/b.x,right:(w.right-g.right+f.right)/b.x}}function _O(e){const t=yN(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=uN(e),s=i?e.offsetWidth:n,o=i?e.offsetHeight:r,a=$N(n)!==s||$N(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function xO(e){return cN(e)?e:e.contextElement}function IO(e){const t=xO(e);if(!uN(t))return zN(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=_O(t);let o=(s?$N(n.width):n.width)/r,a=(s?$N(n.height):n.height)/i;return o&&Number.isFinite(o)||(o=1),a&&Number.isFinite(a)||(a=1),{x:o,y:a}}const RO=zN(0);function PO(e){const t=oN(e);return gN()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:RO}function AO(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=!1);const i=e.getBoundingClientRect(),s=xO(e);let o=zN(1);t&&(r?cN(r)&&(o=IO(r)):o=IO(e));const a=function(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==oN(e))&&t}(s,n,r)?PO(s):zN(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,u=i.width/o.x,d=i.height/o.y;if(s){const e=oN(s),t=r&&cN(r)?oN(r):r;let n=e,i=CN(n);for(;i&&r&&t!==n;){const e=IO(i),t=i.getBoundingClientRect(),r=yN(i),s=t.left+(i.clientLeft+parseFloat(r.paddingLeft))*e.x,o=t.top+(i.clientTop+parseFloat(r.paddingTop))*e.y;l*=e.x,c*=e.y,u*=e.x,d*=e.y,l+=s,c+=o,n=oN(i),i=CN(n)}}return rO({width:u,height:d,x:l,y:c})}function NO(e,t){const n=bN(e).scrollLeft;return t?t.left+n:AO(aN(e)).left+n}function OO(e,t,n){void 0===n&&(n=!1);const r=e.getBoundingClientRect();return{x:r.left+t.scrollLeft-(n?0:NO(e,r)),y:r.top+t.scrollTop}}function DO(e,t,n){let r;if("viewport"===t)r=function(e,t){const n=oN(e),r=aN(e),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const e=gN();(!e||e&&"fixed"===t)&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}(e,n);else if("document"===t)r=function(e){const t=aN(e),n=bN(e),r=e.ownerDocument.body,i=VN(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=VN(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+NO(e);const a=-n.scrollTop;return"rtl"===yN(r).direction&&(o+=VN(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}(aN(e));else if(cN(t))r=function(e,t){const n=AO(e,!0,"fixed"===t),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=uN(e)?IO(e):zN(1);return{width:e.clientWidth*s.x,height:e.clientHeight*s.y,x:i*s.x,y:r*s.y}}(t,n);else{const n=PO(e);r={x:t.x-n.x,y:t.y-n.y,width:t.width,height:t.height}}return rO(r)}function LO(e,t){const n=wN(e);return!(n===t||!cN(n)||vN(n))&&("fixed"===yN(n).position||LO(n,t))}function jO(e,t,n){const r=uN(t),i=aN(t),s="fixed"===n,o=AO(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const l=zN(0);if(r||!r&&!s)if(("body"!==sN(t)||hN(i))&&(a=bN(t)),r){const e=AO(t,!0,s,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else i&&(l.x=NO(i));const c=!i||r||s?zN(0):OO(i,a);return{x:o.left+a.scrollLeft-l.x-c.x,y:o.top+a.scrollTop-l.y-c.y,width:o.width,height:o.height}}function MO(e){return"static"===yN(e).position}function FO(e,t){if(!uN(e)||"fixed"===yN(e).position)return null;if(t)return t(e);let n=e.offsetParent;return aN(e)===n&&(n=n.ownerDocument.body),n}function UO(e,t){const n=oN(e);if(fN(e))return n;if(!uN(e)){let t=wN(e);for(;t&&!vN(t);){if(cN(t)&&!MO(t))return t;t=wN(t)}return n}let r=FO(e,t);for(;r&&pN(r)&&MO(r);)r=FO(r,t);return r&&vN(r)&&MO(r)&&!mN(r)?n:r||function(e){let t=wN(e);for(;uN(t)&&!vN(t);){if(mN(t))return t;if(fN(t))return null;t=wN(t)}return null}(e)||n}const VO={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s="fixed"===i,o=aN(r),a=!!t&&fN(t.floating);if(r===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},c=zN(1);const u=zN(0),d=uN(r);if((d||!d&&!s)&&(("body"!==sN(r)||hN(o))&&(l=bN(r)),uN(r))){const e=AO(r);c=IO(r),u.x=e.x+r.clientLeft,u.y=e.y+r.clientTop}const h=!o||d||s?zN(0):OO(o,l,!0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+h.x,y:n.y*c.y-l.scrollTop*c.y+u.y+h.y}},getDocumentElement:aN,getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const s="clippingAncestors"===n?fN(t)?[]:function(e,t){const n=t.get(e);if(n)return n;let r=kN(e,[],!1).filter((e=>cN(e)&&"body"!==sN(e))),i=null;const s="fixed"===yN(e).position;let o=s?wN(e):e;for(;cN(o)&&!vN(o);){const t=yN(o),n=mN(o);n||"fixed"!==t.position||(i=null),(s?!n&&!i:!n&&"static"===t.position&&i&&["absolute","fixed"].includes(i.position)||hN(o)&&!n&&LO(e,o))?r=r.filter((e=>e!==o)):i=t,o=wN(o)}return t.set(e,r),r}(t,this._c):[].concat(n),o=[...s,r],a=o[0],l=o.reduce(((e,n)=>{const r=DO(t,n,i);return e.top=VN(r.top,e.top),e.right=UN(r.right,e.right),e.bottom=UN(r.bottom,e.bottom),e.left=VN(r.left,e.left),e}),DO(t,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}},getOffsetParent:UO,getElementRects:async function(e){const t=this.getOffsetParent||UO,n=this.getDimensions,r=await n(e.floating);return{reference:jO(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:n}=_O(e);return{width:t,height:n}},getScale:IO,isElement:cN,isRTL:function(e){return"rtl"===yN(e).direction}};function $O(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function BO(e,t,n,r){void 0===r&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o="function"===typeof ResizeObserver,layoutShift:a="function"===typeof IntersectionObserver,animationFrame:l=!1}=r,c=xO(e),u=i||s?[...c?kN(c):[],...kN(t)]:[];u.forEach((e=>{i&&e.addEventListener("scroll",n,{passive:!0}),s&&e.addEventListener("resize",n)}));const d=c&&a?function(e,t){let n,r=null;const i=aN(e);function s(){var e;clearTimeout(n),null==(e=r)||e.disconnect(),r=null}return function o(a,l){void 0===a&&(a=!1),void 0===l&&(l=1),s();const c=e.getBoundingClientRect(),{left:u,top:d,width:h,height:p}=c;if(a||t(),!h||!p)return;const f={rootMargin:-BN(d)+"px "+-BN(i.clientWidth-(u+h))+"px "+-BN(i.clientHeight-(d+p))+"px "+-BN(u)+"px",threshold:VN(0,UN(1,l))||1};let m=!0;function g(t){const r=t[0].intersectionRatio;if(r!==l){if(!m)return o();r?o(!1,r):n=setTimeout((()=>{o(!1,1e-7)}),1e3)}1!==r||$O(c,e.getBoundingClientRect())||o(),m=!1}try{r=new IntersectionObserver(g,{...f,root:i.ownerDocument})}catch(v){r=new IntersectionObserver(g,f)}r.observe(e)}(!0),s}(c,n):null;let h,p=-1,f=null;o&&(f=new ResizeObserver((e=>{let[r]=e;r&&r.target===c&&f&&(f.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame((()=>{var e;null==(e=f)||e.observe(t)}))),n()})),c&&!l&&f.observe(c),f.observe(t));let m=l?AO(e):null;return l&&function t(){const r=AO(e);m&&!$O(m,r)&&n();m=r,h=requestAnimationFrame(t)}(),n(),()=>{var e;u.forEach((e=>{i&&e.removeEventListener("scroll",n),s&&e.removeEventListener("resize",n)})),null==d||d(),null==(e=f)||e.disconnect(),f=null,l&&cancelAnimationFrame(h)}}const zO=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=t,l=await async function(e,t){const{placement:n,platform:r,elements:i}=e,s=await(null==r.isRTL?void 0:r.isRTL(i.floating)),o=GN(n),a=JN(n),l="y"===XN(n),c=["left","top"].includes(o)?-1:1,u=s&&l?-1:1,d=KN(t,e);let{mainAxis:h,crossAxis:p,alignmentAxis:f}="number"===typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&"number"===typeof f&&(p="end"===a?-1*f:f),l?{x:p*u,y:h*c}:{x:h*c,y:p*u}}(t,e);return o===(null==(n=a.offset)?void 0:n.placement)&&null!=(r=a.arrow)&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},HO=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}},...l}=KN(e,t),c={x:n,y:r},u=await TO(t,l),d=XN(GN(i)),h=YN(d);let p=c[h],f=c[d];if(s){const e="y"===h?"bottom":"right";p=WN(p+u["y"===h?"top":"left"],p,p-u[e])}if(o){const e="y"===d?"bottom":"right";f=WN(f+u["y"===d?"top":"left"],f,f-u[e])}const m=a.fn({...t,[h]:p,[d]:f});return{...m,data:{x:m.x-n,y:m.y-r,enabled:{[h]:s,[d]:o}}}}}},qO=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=t,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:f="none",flipAlignment:m=!0,...g}=KN(e,t);if(null!=(n=s.arrow)&&n.alignmentOffset)return{};const v=GN(i),y=XN(a),b=GN(a)===a,w=await(null==l.isRTL?void 0:l.isRTL(c.floating)),S=h||(b||!m?[tO(a)]:function(e){const t=tO(e);return[eO(e),t,eO(t)]}(a)),k="none"!==f;!h&&k&&S.push(...function(e,t,n,r){const i=JN(e);let s=function(e,t,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?s:o;default:return[]}}(GN(e),"start"===n,r);return i&&(s=s.map((e=>e+"-"+i)),t&&(s=s.concat(s.map(eO)))),s}(a,m,f,w));const C=[a,...S],E=await TO(t,g),T=[];let _=(null==(r=s.flip)?void 0:r.overflows)||[];if(u&&T.push(E[v]),d){const e=function(e,t,n){void 0===n&&(n=!1);const r=JN(e),i=ZN(e),s=QN(i);let o="x"===i?r===(n?"end":"start")?"right":"left":"start"===r?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=tO(o)),[o,tO(o)]}(i,o,w);T.push(E[e[0]],E[e[1]])}if(_=[..._,{placement:i,overflows:T}],!T.every((e=>e<=0))){var x,I;const e=((null==(x=s.flip)?void 0:x.index)||0)+1,t=C[e];if(t)return{data:{index:e,overflows:_},reset:{placement:t}};let n=null==(I=_.filter((e=>e.overflows[0]<=0)).sort(((e,t)=>e.overflows[1]-t.overflows[1]))[0])?void 0:I.placement;if(!n)switch(p){case"bestFit":{var R;const e=null==(R=_.filter((e=>{if(k){const t=XN(e.placement);return t===y||"y"===t}return!0})).map((e=>[e.placement,e.overflows.filter((e=>e>0)).reduce(((e,t)=>e+t),0)])).sort(((e,t)=>e[1]-t[1]))[0])?void 0:R[0];e&&(n=e);break}case"initialPlacement":n=a}if(i!==n)return{reset:{placement:n}}}return{}}}},WO=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:i,rects:s,platform:o,elements:a}=t,{apply:l=()=>{},...c}=KN(e,t),u=await TO(t,c),d=GN(i),h=JN(i),p="y"===XN(i),{width:f,height:m}=s.floating;let g,v;"top"===d||"bottom"===d?(g=d,v=h===(await(null==o.isRTL?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(v=d,g="end"===h?"top":"bottom");const y=m-u.top-u.bottom,b=f-u.left-u.right,w=UN(m-u[g],y),S=UN(f-u[v],b),k=!t.middlewareData.shift;let C=w,E=S;if(null!=(n=t.middlewareData.shift)&&n.enabled.x&&(E=b),null!=(r=t.middlewareData.shift)&&r.enabled.y&&(C=y),k&&!h){const e=VN(u.left,0),t=VN(u.right,0),n=VN(u.top,0),r=VN(u.bottom,0);p?E=f-2*(0!==e||0!==t?e+t:VN(u.left,u.right)):C=m-2*(0!==n||0!==r?n+r:VN(u.top,u.bottom))}await l({...t,availableWidth:E,availableHeight:C});const T=await o.getDimensions(a.floating);return f!==T.width||m!==T.height?{reset:{rects:!0}}:{}}}},KO=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=t,{element:c,padding:u=0}=KN(e,t)||{};if(null==c)return{};const d=nO(u),h={x:n,y:r},p=ZN(i),f=QN(p),m=await o.getDimensions(c),g="y"===p,v=g?"top":"left",y=g?"bottom":"right",b=g?"clientHeight":"clientWidth",w=s.reference[f]+s.reference[p]-h[p]-s.floating[f],S=h[p]-s.reference[p],k=await(null==o.getOffsetParent?void 0:o.getOffsetParent(c));let C=k?k[b]:0;C&&await(null==o.isElement?void 0:o.isElement(k))||(C=a.floating[b]||s.floating[f]);const E=w/2-S/2,T=C/2-m[f]/2-1,_=UN(d[v],T),x=UN(d[y],T),I=_,R=C-m[f]-x,P=C/2-m[f]/2+E,A=WN(I,P,R),N=!l.arrow&&null!=JN(i)&&P!==A&&s.reference[f]/2-(P<I?_:x)-m[f]/2<0,O=N?P<I?P-I:P-R:0;return{[p]:h[p]+O,data:{[p]:A,centerOffset:P-A-O,...N&&{alignmentOffset:O}},reset:N}}}),GO=(e,t,n)=>{const r=new Map,i={platform:VO,...n},s={...i.platform,_c:r};return(async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(null==o.isRTL?void 0:o.isRTL(t));let c=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:u,y:d}=EO(c,r,l),h=r,p={},f=0;for(let m=0;m<a.length;m++){const{name:n,fn:s}=a[m],{x:g,y:v,data:y,reset:b}=await s({x:u,y:d,initialPlacement:r,placement:h,strategy:i,middlewareData:p,rects:c,platform:o,elements:{reference:e,floating:t}});u=null!=g?g:u,d=null!=v?v:d,p={...p,[n]:{...p[n],...y}},b&&f<=50&&(f++,"object"===typeof b&&(b.placement&&(h=b.placement),b.rects&&(c=!0===b.rects?await o.getElementRects({reference:e,floating:t,strategy:i}):b.rects),({x:u,y:d}=EO(c,h,l))),m=-1)}return{x:u,y:d,placement:h,strategy:i,middlewareData:p}})(e,t,{...i,platform:s})};var JO="undefined"!==typeof document?o.useLayoutEffect:o.useEffect;function YO(e,t){if(e===t)return!0;if(typeof e!==typeof t)return!1;if("function"===typeof e&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&"object"===typeof e){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;0!==r--;)if(!YO(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;0!==r--;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;0!==r--;){const n=i[r];if(("_owner"!==n||!e.$$typeof)&&!YO(e[n],t[n]))return!1}return!0}return e!==e&&t!==t}function QO(e){if("undefined"===typeof window)return 1;return(e.ownerDocument.defaultView||window).devicePixelRatio||1}function XO(e,t){const n=QO(e);return Math.round(t*n)/n}function ZO(e){const t=o.useRef(e);return JO((()=>{t.current=e})),t}const eD=e=>({name:"arrow",options:e,fn(t){const{element:n,padding:r}="function"===typeof e?e(t):e;return n&&(i=n,{}.hasOwnProperty.call(i,"current"))?null!=n.current?KO({element:n.current,padding:r}).fn(t):{}:n?KO({element:n,padding:r}).fn(t):{};var i}}),tD=(e,t)=>({...HO(e),options:[e,t]}),nD=(e,t)=>({...qO(e),options:[e,t]}),rD=(e,t)=>({...WO(e),options:[e,t]});const iD={...a},sD=iD.useInsertionEffect||(e=>e());function oD(e){const t=o.useRef((()=>{0}));return sD((()=>{t.current=e})),o.useCallback((function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return null==t.current?void 0:t.current(...n)}),[])}const aD="ArrowUp",lD="ArrowDown",cD="ArrowLeft",uD="ArrowRight";function dD(e,t,n){return Math.floor(e/t)!==n}function hD(e,t){return t<0||t>=e.current.length}function pD(e,t){return mD(e,{disabledIndices:t})}function fD(e,t){return mD(e,{decrement:!0,startingIndex:e.current.length,disabledIndices:t})}function mD(e,t){let{startingIndex:n=-1,decrement:r=!1,disabledIndices:i,amount:s=1}=void 0===t?{}:t;const o=e.current;let a=n;do{a+=r?-s:s}while(a>=0&&a<=o.length-1&&wD(o,a,i));return a}function gD(e,t){let{event:n,orientation:r,loop:i,rtl:s,cols:o,disabledIndices:a,minIndex:l,maxIndex:c,prevIndex:u,stopEvent:d=!1}=t,h=u;if(n.key===aD){if(d&&MN(n),-1===u)h=c;else if(h=mD(e,{startingIndex:h,amount:o,decrement:!0,disabledIndices:a}),i&&(u-o<l||h<0)){const e=u%o,t=c%o,n=c-(t-e);h=t===e?c:t>e?n:n-o}hD(e,h)&&(h=u)}if(n.key===lD&&(d&&MN(n),-1===u?h=l:(h=mD(e,{startingIndex:u,amount:o,disabledIndices:a}),i&&u+o>c&&(h=mD(e,{startingIndex:u%o-o,amount:o,disabledIndices:a}))),hD(e,h)&&(h=u)),"both"===r){const t=BN(u/o);n.key===(s?cD:uD)&&(d&&MN(n),u%o!==o-1?(h=mD(e,{startingIndex:u,disabledIndices:a}),i&&dD(h,o,t)&&(h=mD(e,{startingIndex:u-u%o-1,disabledIndices:a}))):i&&(h=mD(e,{startingIndex:u-u%o-1,disabledIndices:a})),dD(h,o,t)&&(h=u)),n.key===(s?uD:cD)&&(d&&MN(n),u%o!==0?(h=mD(e,{startingIndex:u,decrement:!0,disabledIndices:a}),i&&dD(h,o,t)&&(h=mD(e,{startingIndex:u+(o-u%o),decrement:!0,disabledIndices:a}))):i&&(h=mD(e,{startingIndex:u+(o-u%o),decrement:!0,disabledIndices:a})),dD(h,o,t)&&(h=u));const r=BN(c/o)===t;hD(e,h)&&(h=i&&r?n.key===(s?uD:cD)?c:mD(e,{startingIndex:u-u%o-1,disabledIndices:a}):u)}return h}function vD(e,t,n){const r=[];let i=0;return e.forEach(((e,s)=>{let{width:o,height:a}=e,l=!1;for(n&&(i=0);!l;){const e=[];for(let n=0;n<o;n++)for(let r=0;r<a;r++)e.push(i+n+r*t);i%t+o<=t&&e.every((e=>null==r[e]))?(e.forEach((e=>{r[e]=s})),l=!0):i++}})),[...r]}function yD(e,t,n,r,i){if(-1===e)return-1;const s=n.indexOf(e),o=t[e];switch(i){case"tl":return s;case"tr":return o?s+o.width-1:s;case"bl":return o?s+(o.height-1)*r:s;case"br":return n.lastIndexOf(e)}}function bD(e,t){return t.flatMap(((t,n)=>e.includes(t)?[n]:[]))}function wD(e,t,n){if(n)return n.includes(t);const r=e[t];return null==r||r.hasAttribute("disabled")||"true"===r.getAttribute("aria-disabled")}var SD="undefined"!==typeof document?o.useLayoutEffect:o.useEffect;function kD(e,t){const n=e.compareDocumentPosition(t);return n&Node.DOCUMENT_POSITION_FOLLOWING||n&Node.DOCUMENT_POSITION_CONTAINED_BY?-1:n&Node.DOCUMENT_POSITION_PRECEDING||n&Node.DOCUMENT_POSITION_CONTAINS?1:0}const CD=o.createContext({register:()=>{},unregister:()=>{},map:new Map,elementsRef:{current:[]}});function ED(e){const{children:t,elementsRef:n,labelsRef:r}=e,[i,s]=o.useState((()=>new Map)),a=o.useCallback((e=>{s((t=>new Map(t).set(e,null)))}),[]),l=o.useCallback((e=>{s((t=>{const n=new Map(t);return n.delete(e),n}))}),[]);return SD((()=>{const e=new Map(i);Array.from(e.keys()).sort(kD).forEach(((t,n)=>{e.set(t,n)})),function(e,t){if(e.size!==t.size)return!1;for(const[n,r]of e.entries())if(r!==t.get(n))return!1;return!0}(i,e)||s(e)}),[i]),o.createElement(CD.Provider,{value:o.useMemo((()=>({register:a,unregister:l,map:i,elementsRef:n,labelsRef:r})),[a,l,i,n,r])},t)}function TD(e){void 0===e&&(e={});const{label:t}=e,{register:n,unregister:r,map:i,elementsRef:s,labelsRef:a}=o.useContext(CD),[l,c]=o.useState(null),u=o.useRef(null),d=o.useCallback((e=>{if(u.current=e,null!==l&&(s.current[l]=e,a)){var n;const r=void 0!==t;a.current[l]=r?t:null!=(n=null==e?void 0:e.textContent)?n:null}}),[l,s,a,t]);return SD((()=>{const e=u.current;if(e)return n(e),()=>{r(e)}}),[n,r]),SD((()=>{const e=u.current?i.get(u.current):null;null!=e&&c(e)}),[i]),o.useMemo((()=>({ref:d,index:null==l?-1:l})),[l,d])}const _D=[cD,uD],xD=[aD,lD];function ID(){return ID=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ID.apply(this,arguments)}let RD=!1,PD=0;const AD=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+PD++;const ND=iD.useId||function(){const[e,t]=o.useState((()=>RD?AD():void 0));return SD((()=>{null==e&&t(AD())}),[]),o.useEffect((()=>{RD=!0}),[]),e};const OD=o.forwardRef((function(e,t){const{context:{placement:n,elements:{floating:r},middlewareData:{arrow:i,shift:s}},width:a=14,height:l=7,tipRadius:c=0,strokeWidth:u=0,staticOffset:d,stroke:h,d:p,style:{transform:f,...m}={},...g}=e;const v=ND(),[y,b]=o.useState(!1);if(SD((()=>{if(!r)return;"rtl"===yN(r).direction&&b(!0)}),[r]),!r)return null;const[w,S]=n.split("-"),k="top"===w||"bottom"===w;let C=d;(k&&null!=s&&s.x||!k&&null!=s&&s.y)&&(C=null);const E=2*u,T=E/2,_=a/2*(c/-8+1),x=l/2*c/4,I=!!p,R=C&&"end"===S?"bottom":"top";let P=C&&"end"===S?"right":"left";C&&y&&(P="end"===S?"left":"right");const A=null!=(null==i?void 0:i.x)?C||i.x:"",N=null!=(null==i?void 0:i.y)?C||i.y:"",O=p||"M0,0 H"+a+" L"+(a-_)+","+(l-x)+" Q"+a/2+","+l+" "+_+","+(l-x)+" Z",D={top:I?"rotate(180deg)":"",left:I?"rotate(90deg)":"rotate(-90deg)",bottom:I?"":"rotate(180deg)",right:I?"rotate(-90deg)":"rotate(90deg)"}[w];return o.createElement("svg",ID({},g,{"aria-hidden":!0,ref:t,width:I?a:a+E,height:a,viewBox:"0 0 "+a+" "+(l>a?l:a),style:{position:"absolute",pointerEvents:"none",[P]:A,[R]:N,[w]:k||I?"100%":"calc(100% - "+E/2+"px)",transform:[D,f].filter((e=>!!e)).join(" "),...m}}),E>0&&o.createElement("path",{clipPath:"url(#"+v+")",fill:"none",stroke:h,strokeWidth:E+(p?0:1),d:O}),o.createElement("path",{stroke:E&&!p?g.fill:"none",d:O}),o.createElement("clipPath",{id:v},o.createElement("rect",{x:-T,y:T*(I?-1:1),width:a+E,height:a})))}));function DD(){const e=new Map;return{emit(t,n){var r;null==(r=e.get(t))||r.forEach((e=>e(n)))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,(null==(r=e.get(t))?void 0:r.filter((e=>e!==n)))||[])}}}const LD=o.createContext(null),jD=o.createContext(null),MD=()=>{var e;return(null==(e=o.useContext(LD))?void 0:e.id)||null},FD=()=>o.useContext(jD);function UD(e){return"data-floating-ui-"+e}function VD(e){const t=(0,o.useRef)(e);return SD((()=>{t.current=e})),t}let $D=0;function BD(e,t){void 0===t&&(t={});const{preventScroll:n=!1,cancelPrevious:r=!0,sync:i=!1}=t;r&&cancelAnimationFrame($D);const s=()=>null==e?void 0:e.focus({preventScroll:n});i?s():$D=requestAnimationFrame(s)}function zD(e,t){let n=e.filter((e=>{var n;return e.parentId===t&&(null==(n=e.context)?void 0:n.open)})),r=n;for(;r.length;)r=e.filter((e=>{var t;return null==(t=r)?void 0:t.some((t=>{var n;return e.parentId===t.id&&(null==(n=e.context)?void 0:n.open)}))})),n=n.concat(r);return n}let HD=new WeakMap,qD=new WeakSet,WD={},KD=0;const GD=e=>e&&(e.host||GD(e.parentNode));function JD(e,t,n,r){const i="data-floating-ui-inert",s=r?"inert":n?"aria-hidden":null,o=(a=t,e.map((e=>{if(a.contains(e))return e;const t=GD(e);return a.contains(t)?t:null})).filter((e=>null!=e)));var a;const l=new Set,c=new Set(o),u=[];WD[i]||(WD[i]=new WeakMap);const d=WD[i];return o.forEach((function e(t){if(!t||l.has(t))return;l.add(t),t.parentNode&&e(t.parentNode)})),function e(t){if(!t||c.has(t))return;[].forEach.call(t.children,(t=>{if("script"!==sN(t))if(l.has(t))e(t);else{const e=s?t.getAttribute(s):null,n=null!==e&&"false"!==e,r=(HD.get(t)||0)+1,o=(d.get(t)||0)+1;HD.set(t,r),d.set(t,o),u.push(t),1===r&&n&&qD.add(t),1===o&&t.setAttribute(i,""),!n&&s&&t.setAttribute(s,"true")}}))}(t),l.clear(),KD++,()=>{u.forEach((e=>{const t=(HD.get(e)||0)-1,n=(d.get(e)||0)-1;HD.set(e,t),d.set(e,n),t||(!qD.has(e)&&s&&e.removeAttribute(s),qD.delete(e)),n||e.removeAttribute(i)})),KD--,KD||(HD=new WeakMap,HD=new WeakMap,qD=new WeakSet,WD={})}}function YD(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);const r=ON(e[0]).body;return JD(e.concat(Array.from(r.querySelectorAll("[aria-live]"))),r,t,n)}const QD=()=>({getShadowRoot:!0,displayCheck:"function"===typeof ResizeObserver&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function XD(e,t){const n=CO(e,QD());"prev"===t&&n.reverse();const r=n.indexOf(EN(ON(e)));return n.slice(r+1)[0]}function ZD(){return XD(document.body,"next")}function eL(){return XD(document.body,"prev")}function tL(e,t){const n=t||e.currentTarget,r=e.relatedTarget;return!r||!TN(n,r)}function nL(e){CO(e,QD()).forEach((e=>{e.dataset.tabindex=e.getAttribute("tabindex")||"",e.setAttribute("tabindex","-1")}))}function rL(e){e.querySelectorAll("[data-tabindex]").forEach((e=>{const t=e.dataset.tabindex;delete e.dataset.tabindex,t?e.setAttribute("tabindex",t):e.removeAttribute("tabindex")}))}const iL={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};function sL(e){"Tab"===e.key&&(e.target,clearTimeout(undefined))}const oL=o.forwardRef((function(e,t){const[n,r]=o.useState();SD((()=>(PN()&&r("button"),document.addEventListener("keydown",sL),()=>{document.removeEventListener("keydown",sL)})),[]);const i={ref:t,tabIndex:0,role:n,"aria-hidden":!n||void 0,[UD("focus-guard")]:"",style:iL};return o.createElement("span",ID({},e,i))})),aL=o.createContext(null),lL=UD("portal");function cL(e){const{children:t,id:n,root:r,preserveTabOrder:i=!0}=e,s=function(e){void 0===e&&(e={});const{id:t,root:n}=e,r=ND(),i=uL(),[s,a]=o.useState(null),l=o.useRef(null);return SD((()=>()=>{null==s||s.remove(),queueMicrotask((()=>{l.current=null}))}),[s]),SD((()=>{if(!r)return;if(l.current)return;const e=t?document.getElementById(t):null;if(!e)return;const n=document.createElement("div");n.id=r,n.setAttribute(lL,""),e.appendChild(n),l.current=n,a(n)}),[t,r]),SD((()=>{if(null===n)return;if(!r)return;if(l.current)return;let e=n||(null==i?void 0:i.portalNode);e&&!cN(e)&&(e=e.current),e=e||document.body;let s=null;t&&(s=document.createElement("div"),s.id=t,e.appendChild(s));const o=document.createElement("div");o.id=r,o.setAttribute(lL,""),e=s||e,e.appendChild(o),l.current=o,a(o)}),[t,n,r,i]),s}({id:n,root:r}),[a,l]=o.useState(null),c=o.useRef(null),u=o.useRef(null),d=o.useRef(null),h=o.useRef(null),p=null==a?void 0:a.modal,f=null==a?void 0:a.open,m=!!a&&!a.modal&&a.open&&i&&!(!r&&!s);return o.useEffect((()=>{if(s&&i&&!p)return s.addEventListener("focusin",e,!0),s.addEventListener("focusout",e,!0),()=>{s.removeEventListener("focusin",e,!0),s.removeEventListener("focusout",e,!0)};function e(e){if(s&&tL(e)){("focusin"===e.type?rL:nL)(s)}}}),[s,i,p]),o.useEffect((()=>{s&&(f||rL(s))}),[f,s]),o.createElement(aL.Provider,{value:o.useMemo((()=>({preserveTabOrder:i,beforeOutsideRef:c,afterOutsideRef:u,beforeInsideRef:d,afterInsideRef:h,portalNode:s,setFocusManagerState:l})),[i,s])},m&&s&&o.createElement(oL,{"data-type":"outside",ref:c,onFocus:e=>{if(tL(e,s)){var t;null==(t=d.current)||t.focus()}else{const e=eL()||(null==a?void 0:a.refs.domReference.current);null==e||e.focus()}}}),m&&s&&o.createElement("span",{"aria-owns":s.id,style:iL}),s&&rs.createPortal(t,s),m&&s&&o.createElement(oL,{"data-type":"outside",ref:u,onFocus:e=>{if(tL(e,s)){var t;null==(t=h.current)||t.focus()}else{const t=ZD()||(null==a?void 0:a.refs.domReference.current);null==t||t.focus(),(null==a?void 0:a.closeOnFocusOut)&&(null==a||a.onOpenChange(!1,e.nativeEvent,"focus-out"))}}}))}const uL=()=>o.useContext(aL),dL="data-floating-ui-focusable";function hL(e){return e?e.hasAttribute(dL)?e:e.querySelector("["+dL+"]")||e:null}let pL=[];function fL(e){pL=pL.filter((e=>e.isConnected));let t=e;if(t&&"body"!==sN(t)){if(!function(e,t){if(t=t||{},!e)throw new Error("No node provided");return!1!==aO.call(e,sO)&&wO(t,e)}(t,QD())){const e=CO(t,QD())[0];e&&(t=e)}pL.push(t),pL.length>20&&(pL=pL.slice(-20))}}function mL(){return pL.slice().reverse().find((e=>e.isConnected))}const gL=o.forwardRef((function(e,t){return o.createElement("button",ID({},e,{type:"button",ref:t,tabIndex:-1,style:iL}))}));function vL(e){const{context:t,children:n,disabled:r=!1,order:i=["content"],guards:s=!0,initialFocus:a=0,returnFocus:l=!0,restoreFocus:c=!1,modal:u=!0,visuallyHiddenDismiss:d=!1,closeOnFocusOut:h=!0}=e,{open:p,refs:f,nodeId:m,onOpenChange:g,events:v,dataRef:y,floatingId:b,elements:{domReference:w,floating:S}}=t,k="number"===typeof a&&a<0,C=FN(w)&&k,E="undefined"===typeof HTMLElement||!("inert"in HTMLElement.prototype)||s,T=VD(i),_=VD(a),x=VD(l),I=FD(),R=uL(),P=o.useRef(null),A=o.useRef(null),N=o.useRef(!1),O=o.useRef(!1),D=o.useRef(-1),L=null!=R,j=hL(S),M=oD((function(e){return void 0===e&&(e=j),e?CO(e,QD()):[]})),F=oD((e=>{const t=M(e);return T.current.map((e=>w&&"reference"===e?w:j&&"floating"===e?j:t)).filter(Boolean).flat()}));function U(e){return!r&&d&&u?o.createElement(gL,{ref:"start"===e?P:A,onClick:e=>g(!1,e.nativeEvent)},"string"===typeof d?d:"Dismiss"):null}o.useEffect((()=>{if(r)return;if(!u)return;function e(e){if("Tab"===e.key){TN(j,EN(ON(j)))&&0===M().length&&!C&&MN(e);const t=F(),n=LN(e);"reference"===T.current[0]&&n===w&&(MN(e),e.shiftKey?BD(t[t.length-1]):BD(t[1])),"floating"===T.current[1]&&n===j&&e.shiftKey&&(MN(e),BD(t[0]))}}const t=ON(j);return t.addEventListener("keydown",e),()=>{t.removeEventListener("keydown",e)}}),[r,w,j,u,T,C,M,F]),o.useEffect((()=>{if(!r&&S)return S.addEventListener("focusin",e),()=>{S.removeEventListener("focusin",e)};function e(e){const t=LN(e),n=M().indexOf(t);-1!==n&&(D.current=n)}}),[r,S,M]),o.useEffect((()=>{if(!r&&h)return S&&uN(w)?(w.addEventListener("focusout",t),w.addEventListener("pointerdown",e),S.addEventListener("focusout",t),()=>{w.removeEventListener("focusout",t),w.removeEventListener("pointerdown",e),S.removeEventListener("focusout",t)}):void 0;function e(){O.current=!0,setTimeout((()=>{O.current=!1}))}function t(e){const t=e.relatedTarget;queueMicrotask((()=>{const n=!(TN(w,t)||TN(S,t)||TN(t,S)||TN(null==R?void 0:R.portalNode,t)||null!=t&&t.hasAttribute(UD("focus-guard"))||I&&(zD(I.nodesRef.current,m).find((e=>{var n,r;return TN(null==(n=e.context)?void 0:n.elements.floating,t)||TN(null==(r=e.context)?void 0:r.elements.domReference,t)}))||function(e,t){var n;let r=[],i=null==(n=e.find((e=>e.id===t)))?void 0:n.parentId;for(;i;){const t=e.find((e=>e.id===i));i=null==t?void 0:t.parentId,t&&(r=r.concat(t))}return r}(I.nodesRef.current,m).find((e=>{var n,r;return(null==(n=e.context)?void 0:n.elements.floating)===t||(null==(r=e.context)?void 0:r.elements.domReference)===t}))));if(c&&n&&EN(ON(j))===ON(j).body){uN(j)&&j.focus();const e=D.current,t=M(),n=t[e]||t[t.length-1]||j;uN(n)&&n.focus()}!C&&u||!t||!n||O.current||t===mL()||(N.current=!0,g(!1,e,"focus-out"))}))}}),[r,w,S,j,u,m,I,R,g,h,c,M,C]),o.useEffect((()=>{var e;if(r)return;const t=Array.from((null==R||null==(e=R.portalNode)?void 0:e.querySelectorAll("["+UD("portal")+"]"))||[]);if(S){const e=[S,...t,P.current,A.current,T.current.includes("reference")||C?w:null].filter((e=>null!=e)),n=u||C?YD(e,E,!E):YD(e);return()=>{n()}}}),[r,w,S,u,T,R,C,E]),SD((()=>{if(r||!uN(j))return;const e=EN(ON(j));queueMicrotask((()=>{const t=F(j),n=_.current,r=("number"===typeof n?t[n]:n.current)||j,i=TN(j,e);k||i||!p||BD(r,{preventScroll:r===j})}))}),[r,p,j,k,F,_]),SD((()=>{if(r||!j)return;let e=!1;const t=ON(j),n=EN(t);let i=y.current.openEvent;function s(t){let{open:n,reason:r,event:s,nested:o}=t;n&&(i=s),"escape-key"===r&&f.domReference.current&&fL(f.domReference.current),"hover"===r&&"mouseleave"===s.type&&(N.current=!0),"outside-press"===r&&(o?(N.current=!1,e=!0):N.current=!(IN(s)||RN(s)))}fL(n),v.on("openchange",s);const o=t.createElement("span");return o.setAttribute("tabindex","-1"),o.setAttribute("aria-hidden","true"),Object.assign(o.style,iL),L&&w&&w.insertAdjacentElement("afterend",o),()=>{v.off("openchange",s);const n=EN(t),r=TN(S,n)||I&&zD(I.nodesRef.current,m).some((e=>{var t;return TN(null==(t=e.context)?void 0:t.elements.floating,n)}));(r||i&&["click","mousedown"].includes(i.type))&&f.domReference.current&&fL(f.domReference.current);const a="boolean"===typeof x.current?mL()||o:x.current.current||o;queueMicrotask((()=>{x.current&&!N.current&&uN(a)&&(a===n||n===t.body||r)&&a.focus({preventScroll:e}),o.remove()}))}}),[r,S,j,x,y,f,v,I,m,L,w]),o.useEffect((()=>{queueMicrotask((()=>{N.current=!1}))}),[r]),SD((()=>{if(!r&&R)return R.setFocusManagerState({modal:u,closeOnFocusOut:h,open:p,onOpenChange:g,refs:f}),()=>{R.setFocusManagerState(null)}}),[r,R,u,p,g,f,h]),SD((()=>{if(r)return;if(!j)return;if("function"!==typeof MutationObserver)return;if(k)return;const e=()=>{const e=j.getAttribute("tabindex"),t=M(),n=EN(ON(S)),r=t.indexOf(n);-1!==r&&(D.current=r),T.current.includes("floating")||n!==f.domReference.current&&0===t.length?"0"!==e&&j.setAttribute("tabindex","0"):"-1"!==e&&j.setAttribute("tabindex","-1")};e();const t=new MutationObserver(e);return t.observe(j,{childList:!0,subtree:!0,attributes:!0}),()=>{t.disconnect()}}),[r,S,j,f,T,M,k]);const V=!r&&E&&(!u||!C)&&(L||u);return o.createElement(o.Fragment,null,V&&o.createElement(oL,{"data-type":"inside",ref:null==R?void 0:R.beforeInsideRef,onFocus:e=>{if(u){const e=F();BD("reference"===i[0]?e[0]:e[e.length-1])}else if(null!=R&&R.preserveTabOrder&&R.portalNode)if(N.current=!1,tL(e,R.portalNode)){const e=ZD()||w;null==e||e.focus()}else{var t;null==(t=R.beforeOutsideRef.current)||t.focus()}}}),!C&&U("start"),n,U("end"),V&&o.createElement(oL,{"data-type":"inside",ref:null==R?void 0:R.afterInsideRef,onFocus:e=>{if(u)BD(F()[0]);else if(null!=R&&R.preserveTabOrder&&R.portalNode)if(h&&(N.current=!0),tL(e,R.portalNode)){const e=eL()||w;null==e||e.focus()}else{var t;null==(t=R.afterOutsideRef.current)||t.focus()}}}))}let yL=0;let bL=()=>{};const wL=o.forwardRef((function(e,t){const{lockScroll:n=!1,...r}=e;return SD((()=>{if(n)return yL++,1===yL&&(bL=function(){const e=/iP(hone|ad|od)|iOS/.test(_N()),t=document.body.style,n=Math.round(document.documentElement.getBoundingClientRect().left)+document.documentElement.scrollLeft?"paddingLeft":"paddingRight",r=window.innerWidth-document.documentElement.clientWidth,i=t.left?parseFloat(t.left):window.scrollX,s=t.top?parseFloat(t.top):window.scrollY;if(t.overflow="hidden",r&&(t[n]=r+"px"),e){var o,a;const e=(null==(o=window.visualViewport)?void 0:o.offsetLeft)||0,n=(null==(a=window.visualViewport)?void 0:a.offsetTop)||0;Object.assign(t,{position:"fixed",top:-(s-Math.floor(n))+"px",left:-(i-Math.floor(e))+"px",right:"0"})}return()=>{Object.assign(t,{overflow:"",[n]:""}),e&&(Object.assign(t,{position:"",top:"",left:"",right:""}),window.scrollTo(i,s))}}()),()=>{yL--,0===yL&&bL()}}),[n]),o.createElement("div",ID({ref:t},r,{style:{position:"fixed",overflow:"auto",top:0,right:0,bottom:0,left:0,...r.style}}))}));function SL(e){return uN(e.target)&&"BUTTON"===e.target.tagName}function kL(e){return jN(e)}const CL={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},EL={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},TL=e=>{var t,n;return{escapeKey:"boolean"===typeof e?e:null!=(t=null==e?void 0:e.escapeKey)&&t,outsidePress:"boolean"===typeof e?e:null==(n=null==e?void 0:e.outsidePress)||n}};function _L(e){void 0===e&&(e={});const{nodeId:t}=e,n=function(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=ND(),s=o.useRef({}),[a]=o.useState((()=>DD())),l=null!=MD(),[c,u]=o.useState(r.reference),d=oD(((e,t,r)=>{s.current.openEvent=e?t:void 0,a.emit("openchange",{open:e,event:t,reason:r,nested:l}),null==n||n(e,t,r)})),h=o.useMemo((()=>({setPositionReference:u})),[]),p=o.useMemo((()=>({reference:c||r.reference||null,floating:r.floating||null,domReference:r.reference})),[c,r.reference,r.floating]);return o.useMemo((()=>({dataRef:s,open:t,onOpenChange:d,elements:p,events:a,floatingId:i,refs:h})),[t,d,p,a,i,h])}({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[s,a]=o.useState(null),[l,c]=o.useState(null),u=(null==i?void 0:i.domReference)||s,d=o.useRef(null),h=FD();SD((()=>{u&&(d.current=u)}),[u]);const p=function(e){void 0===e&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:a}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[d,h]=o.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[p,f]=o.useState(r);YO(p,r)||f(r);const[m,g]=o.useState(null),[v,y]=o.useState(null),b=o.useCallback((e=>{e!==C.current&&(C.current=e,g(e))}),[]),w=o.useCallback((e=>{e!==E.current&&(E.current=e,y(e))}),[]),S=s||m,k=a||v,C=o.useRef(null),E=o.useRef(null),T=o.useRef(d),_=null!=c,x=ZO(c),I=ZO(i),R=ZO(u),P=o.useCallback((()=>{if(!C.current||!E.current)return;const e={placement:t,strategy:n,middleware:p};I.current&&(e.platform=I.current),GO(C.current,E.current,e).then((e=>{const t={...e,isPositioned:!1!==R.current};A.current&&!YO(T.current,t)&&(T.current=t,rs.flushSync((()=>{h(t)})))}))}),[p,t,n,I,R]);JO((()=>{!1===u&&T.current.isPositioned&&(T.current.isPositioned=!1,h((e=>({...e,isPositioned:!1}))))}),[u]);const A=o.useRef(!1);JO((()=>(A.current=!0,()=>{A.current=!1})),[]),JO((()=>{if(S&&(C.current=S),k&&(E.current=k),S&&k){if(x.current)return x.current(S,k,P);P()}}),[S,k,P,x,_]);const N=o.useMemo((()=>({reference:C,floating:E,setReference:b,setFloating:w})),[b,w]),O=o.useMemo((()=>({reference:S,floating:k})),[S,k]),D=o.useMemo((()=>{const e={position:n,left:0,top:0};if(!O.floating)return e;const t=XO(O.floating,d.x),r=XO(O.floating,d.y);return l?{...e,transform:"translate("+t+"px, "+r+"px)",...QO(O.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:t,top:r}}),[n,l,O.floating,d.x,d.y]);return o.useMemo((()=>({...d,update:P,refs:N,elements:O,floatingStyles:D})),[d,P,N,O,D])}({...e,elements:{...i,...l&&{reference:l}}}),f=o.useCallback((e=>{const t=cN(e)?{getBoundingClientRect:()=>e.getBoundingClientRect(),contextElement:e}:e;c(t),p.refs.setReference(t)}),[p.refs]),m=o.useCallback((e=>{(cN(e)||null===e)&&(d.current=e,a(e)),(cN(p.refs.reference.current)||null===p.refs.reference.current||null!==e&&!cN(e))&&p.refs.setReference(e)}),[p.refs]),g=o.useMemo((()=>({...p.refs,setReference:m,setPositionReference:f,domReference:d})),[p.refs,m,f]),v=o.useMemo((()=>({...p.elements,domReference:u})),[p.elements,u]),y=o.useMemo((()=>({...p,...r,refs:g,elements:v,nodeId:t})),[p,g,v,t,r]);return SD((()=>{r.dataRef.current.floatingContext=y;const e=null==h?void 0:h.nodesRef.current.find((e=>e.id===t));e&&(e.context=y)})),o.useMemo((()=>({...p,context:y,refs:g,elements:v})),[p,g,v,y])}const xL="active",IL="selected";function RL(e,t,n){const r=new Map,i="item"===n;let s=e;if(i&&e){const{[xL]:t,[IL]:n,...r}=e;s=r}return{..."floating"===n&&{tabIndex:-1,[dL]:""},...s,...t.map((t=>{const r=t?t[n]:null;return"function"===typeof r?e?r(e):null:r})).concat(e).reduce(((e,t)=>t?(Object.entries(t).forEach((t=>{let[n,s]=t;var o;i&&[xL,IL].includes(n)||(0===n.indexOf("on")?(r.has(n)||r.set(n,[]),"function"===typeof s&&(null==(o=r.get(n))||o.push(s),e[n]=function(){for(var e,t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return null==(e=r.get(n))?void 0:e.map((e=>e(...i))).find((e=>void 0!==e))})):e[n]=s)})),e):e),{})}}let PL=!1;function AL(e,t,n){switch(e){case"vertical":return t;case"horizontal":return n;default:return t||n}}function NL(e,t){return AL(t,e===aD||e===lD,e===cD||e===uD)}function OL(e,t,n){return AL(t,e===lD,n?e===cD:e===uD)||"Enter"===e||" "===e||""===e}function DL(e,t,n){return AL(t,n?e===uD:e===cD,e===aD)}function LL(e,t){const{open:n,onOpenChange:r,elements:i}=e,{listRef:s,activeIndex:a,onNavigate:l=()=>{},enabled:c=!0,selectedIndex:u=null,allowEscape:d=!1,loop:h=!1,nested:p=!1,rtl:f=!1,virtual:m=!1,focusItemOnOpen:g="auto",focusItemOnHover:v=!0,openOnArrowKeyDown:y=!0,disabledIndices:b,orientation:w="vertical",cols:S=1,scrollItemIntoView:k=!0,virtualItemRef:C,itemSizes:E,dense:T=!1}=t;const _=VD(hL(i.floating)),x=MD(),I=FD(),R=oD(l),P=FN(i.domReference),A=o.useRef(g),N=o.useRef(null!=u?u:-1),O=o.useRef(null),D=o.useRef(!0),L=o.useRef(R),j=o.useRef(!!i.floating),M=o.useRef(n),F=o.useRef(!1),U=o.useRef(!1),V=VD(b),$=VD(n),B=VD(k),z=VD(u),[H,q]=o.useState(),[W,K]=o.useState(),G=oD((function(e,t,n){function r(e){m?(q(e.id),null==I||I.events.emit("virtualfocus",e),C&&(C.current=e)):BD(e,{preventScroll:!0,sync:!(!_N().toLowerCase().startsWith("mac")||navigator.maxTouchPoints||!PN())&&(PL||F.current)})}void 0===n&&(n=!1);const i=e.current[t.current];i&&r(i),requestAnimationFrame((()=>{const s=e.current[t.current]||i;if(!s)return;i||r(s);const o=B.current;o&&Y&&(n||!D.current)&&(null==s.scrollIntoView||s.scrollIntoView("boolean"===typeof o?{block:"nearest",inline:"nearest"}:o))}))}));SD((()=>{document.createElement("div").focus({get preventScroll(){return PL=!0,!1}})}),[]),SD((()=>{c&&(n&&i.floating?A.current&&null!=u&&(U.current=!0,N.current=u,R(u)):j.current&&(N.current=-1,L.current(null)))}),[c,n,i.floating,u,R]),SD((()=>{if(c&&n&&i.floating)if(null==a){if(F.current=!1,null!=z.current)return;if(j.current&&(N.current=-1,G(s,N)),(!M.current||!j.current)&&A.current&&(null!=O.current||!0===A.current&&null==O.current)){let e=0;const t=()=>{if(null==s.current[0]){if(e<2){(e?requestAnimationFrame:queueMicrotask)(t)}e++}else N.current=null==O.current||OL(O.current,w,f)||p?pD(s,V.current):fD(s,V.current),O.current=null,R(N.current)};t()}}else hD(s,a)||(N.current=a,G(s,N,U.current),U.current=!1)}),[c,n,i.floating,a,z,p,s,w,f,R,G,V]),SD((()=>{var e;if(!c||i.floating||!I||m||!j.current)return;const t=I.nodesRef.current,n=null==(e=t.find((e=>e.id===x)))||null==(e=e.context)?void 0:e.elements.floating,r=EN(ON(i.floating)),s=t.some((e=>e.context&&TN(e.context.elements.floating,r)));n&&!s&&D.current&&n.focus({preventScroll:!0})}),[c,i.floating,I,x,m]),SD((()=>{if(c&&I&&m&&!x)return I.events.on("virtualfocus",e),()=>{I.events.off("virtualfocus",e)};function e(e){K(e.id),C&&(C.current=e)}}),[c,I,m,x,C]),SD((()=>{L.current=R,j.current=!!i.floating})),SD((()=>{n||(O.current=null)}),[n]),SD((()=>{M.current=n}),[n]);const J=null!=a,Y=o.useMemo((()=>{function e(e){if(!n)return;const t=s.current.indexOf(e);-1!==t&&R(t)}return{onFocus(t){let{currentTarget:n}=t;e(n)},onClick:e=>{let{currentTarget:t}=e;return t.focus({preventScroll:!0})},...v&&{onMouseMove(t){let{currentTarget:n}=t;e(n)},onPointerLeave(e){let{pointerType:t}=e;D.current&&"touch"!==t&&(N.current=-1,G(s,N),R(null),m||BD(_.current,{preventScroll:!0}))}}}}),[n,_,G,v,s,R,m]),Q=oD((e=>{if(D.current=!1,F.current=!0,229===e.which)return;if(!$.current&&e.currentTarget===_.current)return;if(p&&DL(e.key,w,f))return MN(e),r(!1,e.nativeEvent,"list-navigation"),void(uN(i.domReference)&&(m?null==I||I.events.emit("virtualfocus",i.domReference):i.domReference.focus()));const t=N.current,o=pD(s,b),a=fD(s,b);if(P||("Home"===e.key&&(MN(e),N.current=o,R(N.current)),"End"===e.key&&(MN(e),N.current=a,R(N.current))),S>1){const t=E||Array.from({length:s.current.length},(()=>({width:1,height:1}))),n=vD(t,S,T),r=n.findIndex((e=>null!=e&&!wD(s.current,e,b))),i=n.reduce(((e,t,n)=>null==t||wD(s.current,t,b)?e:n),-1),l=n[gD({current:n.map((e=>null!=e?s.current[e]:null))},{event:e,orientation:w,loop:h,rtl:f,cols:S,disabledIndices:bD([...b||s.current.map(((e,t)=>wD(s.current,t)?t:void 0)),void 0],n),minIndex:r,maxIndex:i,prevIndex:yD(N.current>a?o:N.current,t,n,S,e.key===lD?"bl":e.key===(f?cD:uD)?"tr":"tl"),stopEvent:!0})];if(null!=l&&(N.current=l,R(N.current)),"both"===w)return}if(NL(e.key,w)){if(MN(e),n&&!m&&EN(e.currentTarget.ownerDocument)===e.currentTarget)return N.current=OL(e.key,w,f)?o:a,void R(N.current);OL(e.key,w,f)?N.current=h?t>=a?d&&t!==s.current.length?-1:o:mD(s,{startingIndex:t,disabledIndices:b}):Math.min(a,mD(s,{startingIndex:t,disabledIndices:b})):N.current=h?t<=o?d&&-1!==t?s.current.length:a:mD(s,{startingIndex:t,decrement:!0,disabledIndices:b}):Math.max(o,mD(s,{startingIndex:t,decrement:!0,disabledIndices:b})),hD(s,N.current)?R(null):R(N.current)}})),X=o.useMemo((()=>m&&n&&J&&{"aria-activedescendant":W||H}),[m,n,J,W,H]),Z=o.useMemo((()=>({"aria-orientation":"both"===w?void 0:w,...!FN(i.domReference)&&X,onKeyDown:Q,onPointerMove(){D.current=!0}})),[X,Q,i.domReference,w]),ee=o.useMemo((()=>{function e(e){"auto"===g&&IN(e.nativeEvent)&&(A.current=!0)}return{...X,onKeyDown(e){D.current=!1;const t=e.key.startsWith("Arrow"),i=["Home","End"].includes(e.key),o=t||i,a=function(e,t,n){return AL(t,n?e===cD:e===uD,e===lD)}(e.key,w,f),l=DL(e.key,w,f),c=NL(e.key,w),d=(p?a:c)||"Enter"===e.key||""===e.key.trim();if(m&&n){const t=null==I?void 0:I.nodesRef.current.find((e=>null==e.parentId)),n=I&&t?function(e,t){let n,r=-1;return function t(i,s){s>r&&(n=i,r=s),zD(e,i).forEach((e=>{t(e.id,s+1)}))}(t,0),e.find((e=>e.id===n))}(I.nodesRef.current,t.id):null;if(o&&n&&C){const t=new KeyboardEvent("keydown",{key:e.key,bubbles:!0});if(a||l){var h,g;const r=(null==(h=n.context)?void 0:h.elements.domReference)===e.currentTarget,i=l&&!r?null==(g=n.context)?void 0:g.elements.domReference:a?s.current.find((e=>(null==e?void 0:e.id)===H)):null;i&&(MN(e),i.dispatchEvent(t),K(void 0))}var v;if((c||i)&&n.context)if(n.context.open&&n.parentId&&e.currentTarget!==n.context.elements.domReference)return MN(e),void(null==(v=n.context.elements.domReference)||v.dispatchEvent(t))}return Q(e)}(n||y||!t)&&(d&&(O.current=p&&c?null:e.key),p?a&&(MN(e),n?(N.current=pD(s,V.current),R(N.current)):r(!0,e.nativeEvent,"list-navigation")):c&&(null!=u&&(N.current=u),MN(e),!n&&y?r(!0,e.nativeEvent,"list-navigation"):Q(e),n&&R(N.current)))},onFocus(){n&&!m&&R(null)},onPointerDown:function(e){A.current=g,"auto"===g&&RN(e.nativeEvent)&&(A.current=!0)},onMouseDown:e,onClick:e}}),[H,X,Q,V,g,s,p,R,r,n,y,w,f,u,I,m,C]);return o.useMemo((()=>c?{reference:ee,floating:Z,item:Y}:{}),[c,ee,Z,Y])}const jL=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);const ML=e=>{let{participant:t,trackType:n="audioTrack",...r}=e;const i=MA(),[s,a]=(0,o.useState)(null),{userId:l,sessionId:c}=t;return(0,o.useEffect)((()=>{if(!i||!s)return;const e=i.bindAudioElement(s,c,n);return()=>{e?.()}}),[i,c,s,n]),(0,Pr.jsx)("audio",{autoPlay:!0,...r,ref:a,"data-user-id":l,"data-session-id":c,"data-track-type":n})};ML.displayName="Audio";const FL=e=>{const{participants:t,audioProps:n}=e;return(0,Pr.jsx)(Pr.Fragment,{children:t.map((e=>{if(e.isLocalParticipant)return null;const{audioStream:t,screenShareAudioStream:r,sessionId:i}=e,s=EI(e)&&t&&(0,Pr.jsx)(ML,{...n,trackType:"audioTrack",participant:e}),a=_I(e)&&r&&(0,Pr.jsx)(ML,{...n,trackType:"screenShareAudioTrack",participant:e});return(0,Pr.jsxs)(o.Fragment,{children:[s,a]},i)}))})};FL.displayName="ParticipantsAudio";const UL=(0,o.createContext)(void 0),VL=()=>(0,o.useContext)(UL),$L=e=>{let{middleware:t=[],placement:n,strategy:r,offset:i=10}=e;const{refs:s,x:a,y:l,update:c,elements:{domReference:u,floating:d},context:h}=_L({placement:n,strategy:r,middleware:[(p=i,{...zO(p),options:[p,f]}),tD(),nD(),rD({padding:10,apply:e=>{let{availableHeight:t,elements:n}=e;Object.assign(n.floating.style,{maxHeight:`${t}px`})}}),...t]});var p,f;return(0,o.useEffect)((()=>{if(!u||!d)return;const e=BO(u,d,c);return()=>e()}),[u,d,c]),{refs:s,x:a,y:l,domReference:u,floating:d,strategy:r,context:h}},BL=e=>{const t=MA(),{useHasPermissions:n}=nN(),r=n(e),[i,s]=(0,o.useState)(!1);(0,o.useEffect)((()=>{r&&s(!1)}),[r]);const a=(0,o.useCallback)((async()=>{if(r)return!0;const n=!!t?.permissionsContext.canRequest(e);if(i||!n)return!1;s(!0);try{await(t?.requestPermissions({permissions:[e]}))}catch(o){throw s(!1),new Error(`requestPermission failed: ${o}`)}return!1}),[t,r,i,e]);return{requestPermission:a,hasPermission:r,canRequestPermission:!!t?.permissionsContext.canRequest(e),isAwaitingPermission:i}};function zL(e,t){const{t:n}=WA();return(0,o.useMemo)((()=>{let r=null,i=null;const s=e.map(((e,n)=>{const s=e.deviceId===t,o={deviceId:e.deviceId,label:e.label,isSelected:s};return s&&(r=o,i=n),o}));if(null===r||null===i){const e={deviceId:"default",label:n("Default"),isSelected:!0};r=e,i=0,s.unshift(e)}return{deviceList:s,selectedDeviceInfo:r,selectedIndex:i}}),[e,t,n])}var HL;!function(e){e.PORTAL="portal",e.MENU="menu"}(HL||(HL={}));const qL=(0,o.createContext)({}),WL=()=>(0,o.useContext)(qL),KL=e=>{let{children:t,refs:n}=e;const r=(0,o.useMemo)((()=>`str-video-portal-${Math.random().toString(36).substring(2,9)}`),[]);return(0,Pr.jsxs)(Pr.Fragment,{children:[(0,Pr.jsx)("div",{id:r,className:"str-video__portal"}),(0,Pr.jsx)(wL,{children:(0,Pr.jsx)(cL,{id:r,children:(0,Pr.jsx)("div",{className:"str-video__portal-content",ref:n.setFloating,children:t})})})]})},GL=e=>{let{ToggleButton:t,placement:n="top-start",strategy:r="absolute",offset:i,visualType:s=HL.MENU,children:a,onToggle:l}=e;const[c,u]=(0,o.useState)(!1),d=(0,o.useRef)(l);d.current=l;const{floating:h,domReference:p,refs:f,x:m,y:g}=$L({placement:n,strategy:r,offset:i});return(0,o.useEffect)((()=>{const e=e=>{!h&&p?.contains(e.target)?(u(!0),d.current?.(!0)):h&&!h?.contains(e.target)&&(u(!1),d.current?.(!1))},t=e=>{!e.key||"escape"!==e.key.toLowerCase()||e.altKey||e.ctrlKey||(u(!1),d.current?.(!1))};return document?.addEventListener("click",e,{capture:!0}),document?.addEventListener("keydown",t),()=>{document?.removeEventListener("click",e,{capture:!0}),document?.removeEventListener("keydown",t)}}),[h,p]),(0,Pr.jsxs)(Pr.Fragment,{children:[c&&(0,Pr.jsx)(qL.Provider,{value:{close:()=>u(!1)},children:s===HL.PORTAL?(0,Pr.jsx)(KL,{refs:f,children:a}):s===HL.MENU?(0,Pr.jsx)("div",{className:"str-video__menu-container",ref:f.setFloating,style:{position:r,top:g??0,left:m??0,overflowY:"auto"},role:"menu",children:a}):null}),(0,Pr.jsx)(t,{menuShown:c,ref:f.setReference})]})},JL=e=>{let{children:t,onItemClick:n}=e;const r=(0,o.useRef)(null);return(0,Pr.jsx)("ul",{className:"str-video__generic-menu",ref:r,onClick:e=>{n&&e.target!==r.current&&r.current?.contains(e.target)&&n(e)},children:t})},YL=e=>{let{children:t,...n}=e;return(0,Pr.jsx)("li",{className:"str-video__generic-menu--item",children:(0,Pr.jsx)("button",{...n,children:t})})},QL=e=>{let{className:t,icon:n}=e;return(0,Pr.jsx)("span",{className:h("str-video__icon",n&&`str-video__icon--${n}`,t)})};function XL(e){const[t,n]=(0,o.useState)(document.pictureInPictureElement===e);return!e&&t&&n(!1),(0,o.useEffect)((()=>{if(!e)return;const t=()=>{n(document.pictureInPictureElement===e)};return e.addEventListener("enterpictureinpicture",t),e.addEventListener("leavepictureinpicture",t),()=>{e.removeEventListener("enterpictureinpicture",t),e.removeEventListener("leavepictureinpicture",t)}}),[e]),t}const ZL=()=>{const{participant:e,participantViewElement:t,videoElement:n}=VL(),[r,i]=(0,o.useState)(!!document.fullscreenElement),s=MA(),a=XL(n??void 0),{t:l}=WA(),{pin:c,sessionId:u,userId:d}=e,h=EI(e),p=CI(e),f=TI(e),m=_I(e),g=e=>()=>{s?.updateUserPermissions({user_id:d,grant_permissions:[e]})},v=e=>()=>{s?.updateUserPermissions({user_id:d,revoke_permissions:[e]})};(0,o.useEffect)((()=>{const e=()=>{i(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",e),()=>{document.removeEventListener("fullscreenchange",e)}}),[]);const{close:y}=WL()||{};return(0,Pr.jsxs)(JL,{onItemClick:y,children:[(0,Pr.jsxs)(YL,{onClick:()=>{c?s?.unpin(u):s?.pin(u)},disabled:c&&!c.isLocalPin,children:[(0,Pr.jsx)(QL,{icon:"pin"}),l(c?"Unpin":"Pin")]}),(0,Pr.jsxs)(rN,{requiredGrants:[LT],children:[(0,Pr.jsxs)(YL,{onClick:()=>{s?.pinForEveryone({user_id:d,session_id:u}).catch((e=>{console.error(`Failed to pin participant ${d}`,e)}))},disabled:c&&!c.isLocalPin,children:[(0,Pr.jsx)(QL,{icon:"pin"}),l("Pin for everyone")]}),(0,Pr.jsxs)(YL,{onClick:()=>{s?.unpinForEveryone({user_id:d,session_id:u}).catch((e=>{console.error(`Failed to unpin participant ${d}`,e)}))},disabled:!c||c.isLocalPin,children:[(0,Pr.jsx)(QL,{icon:"pin"}),l("Unpin for everyone")]})]}),(0,Pr.jsx)(rN,{requiredGrants:[PT],children:(0,Pr.jsxs)(YL,{onClick:()=>s?.blockUser(d),children:[(0,Pr.jsx)(QL,{icon:"not-allowed"}),l("Block")]})}),(0,Pr.jsxs)(rN,{requiredGrants:[DT],children:[p&&(0,Pr.jsxs)(YL,{onClick:()=>s?.muteUser(d,"video"),children:[(0,Pr.jsx)(QL,{icon:"camera-off-outline"}),l("Turn off video")]}),f&&(0,Pr.jsxs)(YL,{onClick:()=>s?.muteUser(d,"screenshare"),children:[(0,Pr.jsx)(QL,{icon:"screen-share-off"}),l("Turn off screen share")]}),h&&(0,Pr.jsxs)(YL,{onClick:()=>s?.muteUser(d,"audio"),children:[(0,Pr.jsx)(QL,{icon:"no-audio"}),l("Mute audio")]}),m&&(0,Pr.jsxs)(YL,{onClick:()=>s?.muteUser(d,"screenshare_audio"),children:[(0,Pr.jsx)(QL,{icon:"no-audio"}),l("Mute screen share audio")]})]}),t&&"undefined"!==typeof t.requestFullscreen&&(0,Pr.jsx)(YL,{onClick:()=>r?document.exitFullscreen().catch(console.error):t?.requestFullscreen().catch(console.error),children:l("{{ direction }} fullscreen",{direction:l(r?"Leave":"Enter")})}),n&&document.pictureInPictureEnabled&&(0,Pr.jsx)(YL,{onClick:()=>n&&!a?n.requestPictureInPicture().catch(console.error):document.exitPictureInPicture().catch(console.error),children:l("{{ direction }} picture-in-picture",{direction:l(a?"Leave":"Enter")})}),(0,Pr.jsxs)(rN,{requiredGrants:[$T],children:[(0,Pr.jsx)(YL,{onClick:g(MT),children:l("Allow audio")}),(0,Pr.jsx)(YL,{onClick:g(FT),children:l("Allow video")}),(0,Pr.jsx)(YL,{onClick:g(jT),children:l("Allow screen sharing")}),(0,Pr.jsx)(YL,{onClick:v(MT),children:l("Disable audio")}),(0,Pr.jsx)(YL,{onClick:v(FT),children:l("Disable video")}),(0,Pr.jsx)(YL,{onClick:v(jT),children:l("Disable screen sharing")})]})]})},ej=e=>null!==e&&!(0,o.isValidElement)(e),tj=(e,t)=>{if(e)return"function"===typeof e?e(t):void(e.current=t)},nj=((0,o.forwardRef)((function(e,t){let{stream:n,...r}=e;const[i,s]=(0,o.useState)(null);return(0,o.useEffect)((()=>{if(i&&n&&n!==i.srcObject)return i.srcObject=n,(FR.isSafari()||FR.isFirefox())&&setTimeout((()=>{i.srcObject=n,i.play().catch((e=>{console.error("Failed to play stream",e)}))}),0),()=>{i.pause(),i.srcObject=null}}),[n,i]),(0,Pr.jsx)("video",{autoPlay:!0,playsInline:!0,...r,ref:e=>{tj(t,e),s(e)}})})),(0,o.forwardRef)((function(e,t){let{participant:n,style:r,children:i}=e;const[s,a]=(0,o.useState)(!1),l=n.name||n.userId;return(0,Pr.jsxs)("div",{className:"str-video__video-placeholder",style:r,ref:t,children:[(!n.image||s)&&(l?(0,Pr.jsx)(rj,{name:l}):(0,Pr.jsx)("div",{className:"str-video__video-placeholder__no-video-label",children:i})),n.image&&!s&&(0,Pr.jsx)("img",{onError:()=>a(!0),alt:l,className:"str-video__video-placeholder__avatar",src:n.image})]})}))),rj=e=>{const{name:t}=e,n=t.split(" ").slice(0,2).map((e=>e[0])).join("");return(0,Pr.jsx)("div",{className:"str-video__video-placeholder__initials-fallback",children:n})},ij=(0,o.forwardRef)((function(e,t){const{t:n}=WA();return(0,Pr.jsx)(nj,{ref:t,...e,children:n("Video is disabled")})})),sj=(0,o.forwardRef)((function(e,t){const{t:n}=WA();return(0,Pr.jsx)(nj,{ref:t,...e,children:n("Video is playing in a popup")})})),oj=e=>{let{enabled:t=!0,mirror:n,trackType:r,participant:i,className:s,VideoPlaceholder:a=ij,PictureInPicturePlaceholder:l=sj,refs:c,...u}=e;const{sessionId:d,videoStream:p,screenShareStream:f,viewportVisibilityState:m,isLocalParticipant:g,userId:v}=i,y=MA(),[b,w]=(0,o.useState)(null),[S,k]=(0,o.useState)(!0),[C,E]=(0,o.useState)(!0),T=XL(b??void 0),_="videoTrack"===r?p:"screenShareTrack"===r?f:void 0;if((0,o.useLayoutEffect)((()=>{if(!y||!b||"none"===r)return;const e=y.bindVideoElement(b,d,r);return()=>{e?.()}}),[y,r,d,b]),(0,o.useEffect)((()=>{if(!_||!b)return;const[e]=_.getVideoTracks();if(!e)return;const t=()=>{k(b.paused);const{width:t=0,height:n=0}=e.getSettings();E(t>=n)};return k(b.paused),b.addEventListener("play",t),b.addEventListener("pause",t),e.addEventListener("unmute",t),()=>{b.removeEventListener("play",t),b.removeEventListener("pause",t),e.removeEventListener("unmute",t),k(!0)}}),[_,b]),!y)return null;const x="videoTrack"===r?CI(i):"screenShareTrack"===r&&TI(i),I="none"===r||m?.[r]===Ax.INVISIBLE,R=!t||!x||I,P=void 0===n?g&&"videoTrack"===r:n,A="screenShareTrack"===r;return(0,Pr.jsxs)(Pr.Fragment,{children:[!R&&(0,Pr.jsx)("video",{...u,className:h("str-video__video",s,{"str-video__video--not-playing":S,"str-video__video--tall":!C,"str-video__video--mirror":P,"str-video__video--screen-share":A}),"data-user-id":v,"data-session-id":d,ref:e=>{w(e),c?.setVideoElement?.(e)}}),T&&(0,Pr.jsx)(sj,{style:{position:"absolute"},participant:i}),(R||S)&&a&&(0,Pr.jsx)(a,{style:{position:"absolute"},participant:i,ref:c?.setVideoPlaceholderElement})]})};oj.displayName="Video";(0,o.createContext)(void 0);const aj=(0,o.forwardRef)((function(e,t){const{icon:n,enabled:r,variant:i,onClick:s,className:o,...a}=e;return(0,Pr.jsx)("button",{className:h("str-video__call-controls__button",o,{[`str-video__call-controls__button--variant-${i}`]:i,"str-video__call-controls__button--enabled":r}),onClick:e=>{e.preventDefault(),s?.(e)},ref:t,...a,children:(0,Pr.jsx)(QL,{icon:n})})})),lj=(0,o.forwardRef)((function(e,t){let{disabled:n,caption:r,children:i,className:s,active:o,Menu:a,menuPlacement:l,menuOffset:c,title:u,ToggleMenuButton:d=cj,variant:p,onClick:f,onMenuToggle:m,...g}=e;return(0,Pr.jsxs)("div",{className:h("str-video__composite-button",s,{"str-video__composite-button--caption":r,"str-video__composite-button--menu":a}),title:u,ref:t,children:[(0,Pr.jsxs)("div",{className:h("str-video__composite-button__button-group",{"str-video__composite-button__button-group--active":o,"str-video__composite-button__button-group--active-primary":o&&"primary"===p,"str-video__composite-button__button-group--active-secondary":o&&"secondary"===p,"str-video__composite-button__button-group--disabled":n}),children:[(0,Pr.jsx)("button",{type:"button",className:"str-video__composite-button__button",onClick:e=>{e.preventDefault(),f?.(e)},disabled:n,...g,children:i}),a&&(0,Pr.jsx)(GL,{offset:c,placement:l,ToggleButton:d,onToggle:m,children:ej(a)?(0,Pr.jsx)(a,{}):a})]}),r&&(0,Pr.jsx)("div",{className:"str-video__composite-button__caption",children:r})]})})),cj=(0,o.forwardRef)((function(e,t){let{menuShown:n}=e;return(0,Pr.jsx)(aj,{className:h("str-video__menu-toggle-button",{"str-video__menu-toggle-button--active":n}),icon:n?"caret-down":"caret-up",ref:t})})),uj=e=>{const{isVisible:t,message:n,children:r,visibilityTimeout:i,resetIsVisible:s,placement:a="top",iconClassName:l="str-video__notification__icon",close:c}=e,{refs:u,x:d,y:h,strategy:p}=$L({placement:a,strategy:"absolute"});return(0,o.useEffect)((()=>{if(!t||!i||!s)return;const e=setTimeout((()=>{s()}),i);return()=>clearTimeout(e)}),[t,s,i]),(0,Pr.jsxs)("div",{ref:u.setReference,children:[t&&(0,Pr.jsxs)("div",{className:"str-video__notification",ref:u.setFloating,style:{position:p,top:h??0,left:d??0,overflowY:"auto"},children:[l&&(0,Pr.jsx)("i",{className:l}),(0,Pr.jsx)("span",{className:"str-video__notification__message",children:n}),c?(0,Pr.jsx)("i",{className:"str-video__icon str-video__icon--close str-video__notification__close",onClick:c}):null]}),r]})},dj=e=>{const{permission:t,isAwaitingApproval:n,messageApproved:r,messageAwaitingApproval:i,messageRevoked:s,visibilityTimeout:a=3500,children:l}=e,{useHasPermissions:c}=nN(),u=c(t),d=(0,o.useRef)(u),[h,p]=(0,o.useState)();(0,o.useEffect)((()=>{u&&!d.current?(p("granted"),d.current=!0):!u&&d.current&&(p("revoked"),d.current=!1)}),[u]);const f=(0,o.useCallback)((()=>p(void 0)),[]);return n?(0,Pr.jsx)(uj,{isVisible:n&&!u,message:i,children:l}):(0,Pr.jsx)(uj,{isVisible:!!h,visibilityTimeout:a,resetIsVisible:f,message:"granted"===h?r:s,children:l})},hj=e=>{let{children:t,text:n,placement:r}=e;const{useMicrophoneState:i}=nN(),{isSpeakingWhileMuted:s}=i(),{t:o}=WA(),a=n??o("You are muted. Unmute to speak.");return(0,Pr.jsx)(uj,{message:a,isVisible:s,placement:r||"top-start",children:t})},pj=e=>{let{className:t,type:n="spinner",text:r,tooltip:i}=e;return(0,Pr.jsxs)("div",{className:h("str-video__loading-indicator",t),title:i,children:[(0,Pr.jsx)("div",{className:h("str-video__loading-indicator__icon",n)}),r&&(0,Pr.jsx)("p",{className:"str-video__loading-indicator-text",children:r})]})},fj=e=>{let{children:t,referenceElement:n,tooltipClassName:r,tooltipPlacement:i="top",visible:s=!1}=e;const a=(0,o.useRef)(null),{refs:l,x:c,y:u,strategy:d,context:p}=$L({placement:i,strategy:"absolute",middleware:[(f={element:a},{...eD(f),options:[f,m]})]});var f,m;return(0,o.useEffect)((()=>{l.setReference(n)}),[n,l]),s?(0,Pr.jsxs)("div",{className:h("str-video__tooltip",r),ref:l.setFloating,style:{position:d,top:u??0,left:c??0},children:[(0,Pr.jsx)(OD,{ref:a,context:p,fill:"var(--str-video__tooltip--background-color)"}),t]}):null},mj=e=>{let{title:t,tooltipClassName:n,tooltipPlacement:r,tooltipDisabled:i,...s}=e;const{handleMouseEnter:a,handleMouseLeave:l,tooltipVisible:c}=function(){let{onMouseEnter:e,onMouseLeave:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const[n,r]=(0,o.useState)(!1);return{handleMouseEnter:(0,o.useCallback)((t=>{r(!0),e?.(t)}),[e]),handleMouseLeave:(0,o.useCallback)((e=>{r(!1),t?.(e)}),[t]),tooltipVisible:n}}(),[u,d]=(0,o.useState)(null),h=!i&&Boolean(t)&&c;return(0,Pr.jsxs)(Pr.Fragment,{children:[(0,Pr.jsx)(fj,{referenceElement:u,visible:h,tooltipClassName:n,tooltipPlacement:r,children:t||""}),(0,Pr.jsx)("div",{ref:d,onMouseEnter:a,onMouseLeave:l,...s})]})},gj=((0,o.forwardRef)((function(e,t){return(0,Pr.jsx)(lj,{ref:t,active:!0,variant:"secondary","data-testid":"recording-stop-button",children:(0,Pr.jsx)(QL,{icon:"recording-off"})})})),e=>{let{caption:t}=e;const{t:n}=WA(),{toggleCallRecording:r,isAwaitingResponse:i,isCallRecordingInProgress:s}=(()=>{const e=MA(),t=XA(),[n,r]=(0,o.useState)(!1);return(0,o.useEffect)((()=>{r((e=>!e&&e))}),[t]),{toggleCallRecording:(0,o.useCallback)((async()=>{try{r(!0),t?await(e?.stopRecording()):await(e?.startRecording())}catch(n){throw console.error("Failed start recording",n),n}}),[e,t]),isAwaitingResponse:n,isCallRecordingInProgress:t}})();let a=t??n("Record call");return i&&(a=n(s?"Waiting for recording to stop...":"Waiting for recording to start...")),(0,Pr.jsx)(rN,{requiredGrants:[UT,VT],children:(0,Pr.jsx)(lj,{active:s,caption:t,variant:"secondary","data-testid":s?"recording-stop-button":"recording-start-button",title:a,onClick:i?void 0:r,children:i?(0,Pr.jsx)(pj,{}):(0,Pr.jsx)(QL,{icon:s?"recording-on":"recording-off"})})})}),vj={":like:":"\ud83d\udc4d",":raise-hand:":"\u270b",":fireworks:":"\ud83c\udf89",":dislike:":"\ud83d\udc4e",":heart:":"\u2764\ufe0f",":smile:":"\ud83d\ude00"},yj=e=>{let{participant:{reaction:t,sessionId:n},hideAfterTimeoutInMs:r=5500,emojiReactionMap:i=vj}=e;const s=MA();if((0,o.useEffect)((()=>{if(!s||!t)return;const e=setTimeout((()=>{s.resetReaction(n)}),r);return()=>{clearTimeout(e)}}),[s,r,t,n]),!t)return null;const{emoji_code:a}=t;return(0,Pr.jsx)("div",{className:"str-video__reaction",children:(0,Pr.jsx)("span",{className:"str-video__reaction__emoji",children:a&&i[a]})})},bj=[{type:"reaction",emoji_code:":like:"},{type:"raised-hand",emoji_code:":raise-hand:"},{type:"reaction",emoji_code:":fireworks:"},{type:"reaction",emoji_code:":dislike:"},{type:"reaction",emoji_code:":heart:"},{type:"reaction",emoji_code:":smile:"}],wj=e=>{let{reactions:t=bj}=e;return(0,Pr.jsx)(rN,{requiredGrants:[AT],children:(0,Pr.jsx)(GL,{placement:"top",ToggleButton:Sj,visualType:HL.MENU,children:(0,Pr.jsx)(kj,{reactions:t})})})},Sj=(0,o.forwardRef)((function(e,t){let{menuShown:n}=e;const{t:r}=WA();return(0,Pr.jsx)(mj,{title:r("Reactions"),tooltipDisabled:n,children:(0,Pr.jsx)(lj,{ref:t,active:n,variant:"primary",children:(0,Pr.jsx)(QL,{icon:"reactions"})})})})),kj=e=>{let{reactions:t,layout:n="horizontal"}=e;const r=MA(),{close:i}=WL();return(0,Pr.jsx)("div",{className:h("str-video__reactions-menu",{"str-video__reactions-menu--horizontal":"horizontal"===n,"str-video__reactions-menu--vertical":"vertical"===n}),children:t.map((e=>(0,Pr.jsx)("button",{type:"button",className:"str-video__reactions-menu__button",onClick:()=>{r?.sendReaction(e),i?.()},children:e.emoji_code&&vj[e.emoji_code]},e.emoji_code)))})},Cj=(e,t)=>{const n=Zx(["react-sdk"]);return async()=>{try{await t()}catch(r){if(e.onError)return void e.onError(r);(function(e){return e instanceof DOMException&&"NotAllowedError"===e.name})(r)||n("error","Call control handler failed",r)}}};const Ej=e=>{const{t:t}=WA(),{caption:n}=e,{useHasOngoingScreenShare:r,useScreenShareState:i,useCallSettings:s}=nN(),o=r(),{hasPermission:a,requestPermission:l,isAwaitingPermission:c}=BL(jT),u=s(),d=u?.screensharing.enabled,{screenShare:h,optimisticIsMute:p}=i(),f=!p,m=!f&&(o||!1===d),g=Cj(e,(async()=>{a?await h.toggle():await l()}));return(0,Pr.jsx)(rN,{requiredGrants:[jT],children:(0,Pr.jsx)(dj,{permission:jT,isAwaitingApproval:c,messageApproved:t("You can now share your screen."),messageAwaitingApproval:t("Awaiting for an approval to share screen."),messageRevoked:t("You can no longer share your screen."),children:(0,Pr.jsx)(mj,{title:n??t("Share screen"),children:(0,Pr.jsx)(lj,{active:o||f,caption:n,variant:"primary","data-testid":o?"screen-share-stop-button":"screen-share-start-button",disabled:m,onClick:g,children:(0,Pr.jsx)(QL,{icon:o?"screen-share-on":"screen-share-off"})})})})})},Tj=(0,o.createContext)({}),_j=e=>{const{children:t,icon:n,defaultSelectedLabel:r,defaultSelectedIndex:i,handleSelect:s}=e,[a,l]=(0,o.useState)(!1),[c,u]=(0,o.useState)(null),[d,h]=(0,o.useState)(i),[p,f]=(0,o.useState)(r),{refs:m,context:g}=_L({placement:"bottom-start",open:a,onOpenChange:l,whileElementsMounted:BO,middleware:[nD()]}),v=(0,o.useRef)([]),y=(0,o.useRef)([]),b=(0,o.useCallback)((e=>{h(e),s(e||0),l(!1),null!==e&&f(y.current[e])}),[s]),w=LL(g,{listRef:v,activeIndex:c,selectedIndex:d,onNavigate:u}),S=function(e,t){var n;const{open:r,dataRef:i}=e,{listRef:s,activeIndex:a,onMatch:l,onTypingChange:c,enabled:u=!0,findMatch:d=null,resetMs:h=750,ignoreKeys:p=[],selectedIndex:f=null}=t,m=o.useRef(),g=o.useRef(""),v=o.useRef(null!=(n=null!=f?f:a)?n:-1),y=o.useRef(null),b=oD(l),w=oD(c),S=VD(d),k=VD(p);SD((()=>{r&&(clearTimeout(m.current),y.current=null,g.current="")}),[r]),SD((()=>{var e;r&&""===g.current&&(v.current=null!=(e=null!=f?f:a)?e:-1)}),[r,f,a]);const C=oD((e=>{e?i.current.typing||(i.current.typing=e,w(e)):i.current.typing&&(i.current.typing=e,w(e))})),E=oD((e=>{function t(e,t,n){const r=S.current?S.current(t,n):t.find((e=>0===(null==e?void 0:e.toLocaleLowerCase().indexOf(n.toLocaleLowerCase()))));return r?e.indexOf(r):-1}const n=s.current;if(g.current.length>0&&" "!==g.current[0]&&(-1===t(n,n,g.current)?C(!1):" "===e.key&&MN(e)),null==n||k.current.includes(e.key)||1!==e.key.length||e.ctrlKey||e.metaKey||e.altKey)return;r&&" "!==e.key&&(MN(e),C(!0)),n.every((e=>{var t,n;return!e||(null==(t=e[0])?void 0:t.toLocaleLowerCase())!==(null==(n=e[1])?void 0:n.toLocaleLowerCase())}))&&g.current===e.key&&(g.current="",v.current=y.current),g.current+=e.key,clearTimeout(m.current),m.current=setTimeout((()=>{g.current="",v.current=y.current,C(!1)}),h);const i=v.current,o=t(n,[...n.slice((i||0)+1),...n.slice(0,(i||0)+1)],g.current);-1!==o?(b(o),y.current=o):" "!==e.key&&(g.current="",C(!1))})),T=o.useMemo((()=>({onKeyDown:E})),[E]),_=o.useMemo((()=>({onKeyDown:E,onKeyUp(e){" "===e.key&&C(!1)}})),[E,C]);return o.useMemo((()=>u?{reference:T,floating:_}:{}),[u,T,_])}(g,{listRef:y,activeIndex:c,selectedIndex:d,onMatch:e=>{a?u(e):b(e)}}),k=function(e,t){void 0===t&&(t={});const{open:n,onOpenChange:r,dataRef:i,elements:{domReference:s}}=e,{enabled:a=!0,event:l="click",toggle:c=!0,ignoreMouse:u=!1,keyboardHandlers:d=!0,stickIfOpen:h=!0}=t,p=o.useRef(),f=o.useRef(!1),m=o.useMemo((()=>({onPointerDown(e){p.current=e.pointerType},onMouseDown(e){const t=p.current;0===e.button&&"click"!==l&&(NN(t,!0)&&u||(!n||!c||i.current.openEvent&&h&&"mousedown"!==i.current.openEvent.type?(e.preventDefault(),r(!0,e.nativeEvent,"click")):r(!1,e.nativeEvent,"click")))},onClick(e){const t=p.current;"mousedown"===l&&p.current?p.current=void 0:NN(t,!0)&&u||(!n||!c||i.current.openEvent&&h&&"click"!==i.current.openEvent.type?r(!0,e.nativeEvent,"click"):r(!1,e.nativeEvent,"click"))},onKeyDown(e){p.current=void 0,e.defaultPrevented||!d||SL(e)||(" "!==e.key||kL(s)||(e.preventDefault(),f.current=!0),"Enter"===e.key&&r(!n||!c,e.nativeEvent,"click"))},onKeyUp(e){e.defaultPrevented||!d||SL(e)||kL(s)||" "===e.key&&f.current&&(f.current=!1,r(!n||!c,e.nativeEvent,"click"))}})),[i,s,l,u,d,r,n,h,c]);return o.useMemo((()=>a?{reference:m}:{}),[a,m])}(g),C=function(e,t){void 0===t&&(t={});const{open:n,onOpenChange:r,elements:i,dataRef:s}=e,{enabled:a=!0,escapeKey:l=!0,outsidePress:c=!0,outsidePressEvent:u="pointerdown",referencePress:d=!1,referencePressEvent:h="pointerdown",ancestorScroll:p=!1,bubbles:f,capture:m}=t,g=FD(),v=oD("function"===typeof c?c:()=>!1),y="function"===typeof c?v:c,b=o.useRef(!1),w=o.useRef(!1),{escapeKey:S,outsidePress:k}=TL(f),{escapeKey:C,outsidePress:E}=TL(m),T=o.useRef(!1),_=oD((e=>{var t;if(!n||!a||!l||"Escape"!==e.key)return;if(T.current)return;const i=null==(t=s.current.floatingContext)?void 0:t.nodeId,o=g?zD(g.nodesRef.current,i):[];if(!S&&(e.stopPropagation(),o.length>0)){let e=!0;if(o.forEach((t=>{var n;null==(n=t.context)||!n.open||t.context.dataRef.current.__escapeKeyBubbles||(e=!1)})),!e)return}r(!1,function(e){return"nativeEvent"in e}(e)?e.nativeEvent:e,"escape-key")})),x=oD((e=>{var t;const n=()=>{var t;_(e),null==(t=LN(e))||t.removeEventListener("keydown",n)};null==(t=LN(e))||t.addEventListener("keydown",n)})),I=oD((e=>{var t;const n=b.current;b.current=!1;const o=w.current;if(w.current=!1,"click"===u&&o)return;if(n)return;if("function"===typeof y&&!y(e))return;const a=LN(e),l="["+UD("inert")+"]",c=ON(i.floating).querySelectorAll(l);let d=cN(a)?a:null;for(;d&&!vN(d);){const e=wN(d);if(vN(e)||!cN(e))break;d=e}if(c.length&&cN(a)&&!a.matches("html,body")&&!TN(a,i.floating)&&Array.from(c).every((e=>!TN(d,e))))return;if(uN(a)&&A){const t=a.clientWidth>0&&a.scrollWidth>a.clientWidth,n=a.clientHeight>0&&a.scrollHeight>a.clientHeight;let r=n&&e.offsetX>a.clientWidth;if(n&&"rtl"===yN(a).direction&&(r=e.offsetX<=a.offsetWidth-a.clientWidth),r||t&&e.offsetY>a.clientHeight)return}const h=null==(t=s.current.floatingContext)?void 0:t.nodeId,p=g&&zD(g.nodesRef.current,h).some((t=>{var n;return DN(e,null==(n=t.context)?void 0:n.elements.floating)}));if(DN(e,i.floating)||DN(e,i.domReference)||p)return;const f=g?zD(g.nodesRef.current,h):[];if(f.length>0){let e=!0;if(f.forEach((t=>{var n;null==(n=t.context)||!n.open||t.context.dataRef.current.__outsidePressBubbles||(e=!1)})),!e)return}r(!1,e,"outside-press")})),R=oD((e=>{var t;const n=()=>{var t;I(e),null==(t=LN(e))||t.removeEventListener(u,n)};null==(t=LN(e))||t.addEventListener(u,n)}));o.useEffect((()=>{if(!n||!a)return;s.current.__escapeKeyBubbles=S,s.current.__outsidePressBubbles=k;let e=-1;function t(e){r(!1,e,"ancestor-scroll")}function o(){window.clearTimeout(e),T.current=!0}function c(){e=window.setTimeout((()=>{T.current=!1}),gN()?5:0)}const d=ON(i.floating);l&&(d.addEventListener("keydown",C?x:_,C),d.addEventListener("compositionstart",o),d.addEventListener("compositionend",c)),y&&d.addEventListener(u,E?R:I,E);let h=[];return p&&(cN(i.domReference)&&(h=kN(i.domReference)),cN(i.floating)&&(h=h.concat(kN(i.floating))),!cN(i.reference)&&i.reference&&i.reference.contextElement&&(h=h.concat(kN(i.reference.contextElement)))),h=h.filter((e=>{var t;return e!==(null==(t=d.defaultView)?void 0:t.visualViewport)})),h.forEach((e=>{e.addEventListener("scroll",t,{passive:!0})})),()=>{l&&(d.removeEventListener("keydown",C?x:_,C),d.removeEventListener("compositionstart",o),d.removeEventListener("compositionend",c)),y&&d.removeEventListener(u,E?R:I,E),h.forEach((e=>{e.removeEventListener("scroll",t)})),window.clearTimeout(e)}}),[s,i,l,y,u,n,r,p,a,S,k,_,C,x,I,E,R]),o.useEffect((()=>{b.current=!1}),[y,u]);const P=o.useMemo((()=>({onKeyDown:_,[CL[h]]:e=>{d&&r(!1,e.nativeEvent,"reference-press")}})),[_,r,d,h]),A=o.useMemo((()=>({onKeyDown:_,onMouseDown(){w.current=!0},onMouseUp(){w.current=!0},[EL[u]]:()=>{b.current=!0}})),[_,u]);return o.useMemo((()=>a?{reference:P,floating:A}:{}),[a,P,A])}(g),E=function(e,t){var n;void 0===t&&(t={});const{open:r,floatingId:i}=e,{enabled:s=!0,role:a="dialog"}=t,l=null!=(n=jL.get(a))?n:a,c=ND(),u=null!=MD(),d=o.useMemo((()=>"tooltip"===l||"label"===a?{["aria-"+("label"===a?"labelledby":"describedby")]:r?i:void 0}:{"aria-expanded":r?"true":"false","aria-haspopup":"alertdialog"===l?"dialog":l,"aria-controls":r?i:void 0,..."listbox"===l&&{role:"combobox"},..."menu"===l&&{id:c},..."menu"===l&&u&&{role:"menuitem"},..."select"===a&&{"aria-autocomplete":"none"},..."combobox"===a&&{"aria-autocomplete":"list"}}),[l,i,u,r,c,a]),h=o.useMemo((()=>{const e={id:i,...l&&{role:l}};return"tooltip"===l||"label"===a?e:{...e,..."menu"===l&&{"aria-labelledby":c}}}),[l,i,c,a]),p=o.useCallback((e=>{let{active:t,selected:n}=e;const r={role:"option",...t&&{id:i+"-option"}};switch(a){case"select":return{...r,"aria-selected":t&&n};case"combobox":return{...r,...t&&{"aria-selected":!0}}}return{}}),[i,a]);return o.useMemo((()=>s?{reference:d,floating:h,item:p}:{}),[s,d,h,p])}(g,{role:"listbox"}),{getReferenceProps:T,getFloatingProps:_,getItemProps:x}=function(e){void 0===e&&(e=[]);const t=e.map((e=>null==e?void 0:e.reference)),n=e.map((e=>null==e?void 0:e.floating)),r=e.map((e=>null==e?void 0:e.item)),i=o.useCallback((t=>RL(t,e,"reference")),t),s=o.useCallback((t=>RL(t,e,"floating")),n),a=o.useCallback((t=>RL(t,e,"item")),r);return o.useMemo((()=>({getReferenceProps:i,getFloatingProps:s,getItemProps:a})),[i,s,a])}([w,S,k,C,E]),I=(0,o.useMemo)((()=>({activeIndex:c,selectedIndex:d,getItemProps:x,handleSelect:b})),[c,d,x,b]);return(0,Pr.jsxs)("div",{className:"str-video__dropdown",children:[(0,Pr.jsxs)("div",{className:"str-video__dropdown-selected",ref:m.setReference,tabIndex:0,...T(),children:[(0,Pr.jsxs)("label",{className:"str-video__dropdown-selected__label",children:[n&&(0,Pr.jsx)(QL,{className:"str-video__dropdown-selected__icon",icon:n}),p]}),(0,Pr.jsx)(QL,{className:"str-video__dropdown-selected__chevron",icon:a?"chevron-up":"chevron-down"})]}),(0,Pr.jsx)(Tj.Provider,{value:I,children:a&&(0,Pr.jsx)(vL,{context:g,modal:!1,children:(0,Pr.jsx)("div",{className:"str-video__dropdown-list",ref:m.setFloating,..._(),children:(0,Pr.jsx)(ED,{elementsRef:v,labelsRef:y,children:t})})})})]})},xj=e=>{const{selected:t,label:n,icon:r}=e,{getItemProps:i,handleSelect:s}=(0,o.useContext)(Tj),{ref:a,index:l}=TD();return(0,Pr.jsxs)("div",{className:h("str-video__dropdown-option",{"str-video__dropdown-option--selected":t}),ref:a,...i({onClick:()=>s(l)}),children:[r&&(0,Pr.jsx)(QL,{className:"str-video__dropdown-icon",icon:r}),(0,Pr.jsx)("span",{className:"str-video__dropdown-label",children:n})]})},Ij=e=>{const{children:t,icon:n,handleSelect:r,defaultSelectedLabel:i,defaultSelectedIndex:s}=e;return(0,Pr.jsx)(_j,{icon:n,handleSelect:r,defaultSelectedIndex:s,defaultSelectedLabel:i,children:t})},Rj=e=>{let{disabled:t,id:n,label:r,onChange:i,name:s,selected:o,defaultChecked:a,value:l}=e;return(0,Pr.jsxs)("label",{className:h("str-video__device-settings__option",{"str-video__device-settings__option--selected":o,"str-video__device-settings__option--disabled":t}),htmlFor:n,children:[(0,Pr.jsx)("input",{type:"radio",name:s,onChange:i,value:l,id:n,checked:o,defaultChecked:a,disabled:t}),r]})},Pj=e=>{const{devices:t=[],selectedDeviceId:n,title:r,type:i,onChange:s}=e,{close:o}=WL(),{deviceList:a}=zL(t,n);return(0,Pr.jsxs)("div",{className:"str-video__device-settings__device-kind",children:[r&&(0,Pr.jsx)("div",{className:"str-video__device-settings__device-selector-title",children:r}),a.map((e=>(0,Pr.jsx)(Rj,{id:`${i}--${e.deviceId}`,value:e.deviceId,label:e.label,onChange:e=>{const t=e.target.value;"default"!==t&&s?.(t),o?.()},name:i,selected:e.isSelected},e.deviceId)))]})},Aj=e=>{const{devices:t=[],selectedDeviceId:n,title:r,onChange:i,icon:s}=e,{deviceList:a,selectedDeviceInfo:l,selectedIndex:c}=zL(t,n),u=(0,o.useCallback)((e=>{const t=a[e].deviceId;"default"!==t&&i?.(t)}),[a,i]);return(0,Pr.jsxs)("div",{className:"str-video__device-settings__device-kind",children:[(0,Pr.jsx)("div",{className:"str-video__device-settings__device-selector-title",children:r}),(0,Pr.jsx)(Ij,{icon:s,defaultSelectedIndex:c,defaultSelectedLabel:l.label,handleSelect:u,children:a.map((e=>(0,Pr.jsx)(xj,{icon:s,label:e.label,selected:e.isSelected},e.deviceId)))})]})},Nj=e=>{const{visualType:t="list",icon:n,placeholder:r,...i}=e;return"list"===t?(0,Pr.jsx)(Pj,{...i}):(0,Pr.jsx)(Aj,{...i,icon:n})},Oj=e=>{let{title:t,visualType:n}=e;const{useMicrophoneState:r}=nN(),{microphone:i,selectedDevice:s,devices:o}=r();return(0,Pr.jsx)(Nj,{devices:o||[],selectedDeviceId:s,type:"audioinput",onChange:async e=>{await i.select(e)},title:t,visualType:n,icon:"mic"})},Dj=e=>{let{title:t,visualType:n}=e;const{useCameraState:r}=nN(),{camera:i,devices:s,selectedDevice:o}=r();return(0,Pr.jsx)(Nj,{devices:s||[],type:"videoinput",selectedDeviceId:o,onChange:async e=>{await i.select(e)},title:t,visualType:n,icon:"camera"})},Lj=((0,o.forwardRef)((function(e,t){let{menuShown:n}=e;const{t:r}=WA();return(0,Pr.jsx)(aj,{className:h("str-video__device-settings__button",{"str-video__device-settings__button--active":n}),title:r("Toggle device menu"),icon:"device-settings",ref:t})})),e=>{const{t:t}=WA(),{caption:n,Menu:r=(0,Pr.jsx)(Oj,{visualType:"list"}),menuPlacement:i="top",onMenuToggle:s,...a}=e,{hasPermission:l,requestPermission:c,isAwaitingPermission:u}=BL(MT),{useMicrophoneState:d}=nN(),{microphone:h,optimisticIsMute:p,hasBrowserPermission:f,isPromptingPermission:m}=d(),[g,v]=(0,o.useState)(!1),y=Cj(e,(async()=>{l?await h.toggle():await c()}));return(0,Pr.jsx)(rN,{requiredGrants:[MT],children:(0,Pr.jsx)(dj,{permission:MT,isAwaitingApproval:u,messageApproved:t("You can now speak."),messageAwaitingApproval:t("Awaiting for an approval to speak."),messageRevoked:t("You can no longer speak."),children:(0,Pr.jsx)(mj,{title:l?f?n??t("Mic"):t("Check your browser mic permissions"):t("You have no permission to share your audio"),tooltipDisabled:g,children:(0,Pr.jsxs)(lj,{active:p,caption:n,variant:"secondary",disabled:!f||!l,"data-testid":p?"audio-unmute-button":"audio-mute-button",onClick:y,Menu:r,menuPlacement:i,menuOffset:16,...a,onMenuToggle:e=>{v(e),s?.(e)},children:[(0,Pr.jsx)(QL,{icon:p?"mic-off":"mic"}),(!f||!l)&&(0,Pr.jsx)("span",{className:"str-video__no-media-permission",children:"!"}),m&&(0,Pr.jsx)("span",{className:"str-video__pending-permission",title:t("Waiting for permission"),children:"?"})]})})})})}),jj=e=>{const{t:t}=WA(),{caption:n,Menu:r=(0,Pr.jsx)(Dj,{visualType:"list"}),menuPlacement:i="top",onMenuToggle:s,...a}=e,{hasPermission:l,requestPermission:c,isAwaitingPermission:u}=BL(FT),{useCameraState:d,useCallSettings:h}=nN(),{camera:p,optimisticIsMute:f,hasBrowserPermission:m,isPromptingPermission:g}=d(),v=h(),y=v?.video.enabled,[b,w]=(0,o.useState)(!1),S=Cj(e,(async()=>{l?await p.toggle():await c()}));return(0,Pr.jsx)(rN,{requiredGrants:[FT],children:(0,Pr.jsx)(dj,{permission:FT,isAwaitingApproval:u,messageApproved:t("You can now share your video."),messageAwaitingApproval:t("Awaiting for an approval to share your video."),messageRevoked:t("You can no longer share your video."),children:(0,Pr.jsx)(mj,{title:l?m?y?n||t("Video"):t("Video publishing is disabled by the system"):t("Check your browser video permissions"):t("You have no permission to share your video"),tooltipDisabled:b,children:(0,Pr.jsxs)(lj,{active:f,caption:n,variant:"secondary",disabled:!m||!l||!y,"data-testid":f?"video-unmute-button":"video-mute-button",onClick:S,Menu:r,menuPlacement:i,menuOffset:16,...a,onMenuToggle:e=>{w(e),s?.(e)},children:[(0,Pr.jsx)(QL,{icon:f?"camera-off":"camera"}),(!m||!l||!y)&&(0,Pr.jsx)("span",{className:"str-video__no-media-permission",children:"!"}),g&&(0,Pr.jsx)("span",{className:"str-video__pending-permission",title:t("Waiting for permission"),children:"?"})]})})})})},Mj=((0,o.forwardRef)((function(e,t){let{menuShown:n}=e;const{t:r}=WA();return(0,Pr.jsx)(mj,{title:r("Leave call"),tooltipDisabled:n,children:(0,Pr.jsx)(aj,{icon:n?"close":"call-end",variant:n?"active":"danger","data-testid":"leave-call-button",ref:t})})})),e=>{let{disabled:t,caption:n,onClick:r,onLeave:i}=e;const s=MA(),{t:a}=WA(),l=(0,o.useCallback)((async e=>{r?r(e):s&&(await s.leave(),i?.())}),[r,i,s]);return(0,Pr.jsx)(aj,{disabled:t,icon:"call-end",variant:"danger",title:n??a("Leave call"),"data-testid":"cancel-call-button",onClick:l})}),Fj=e=>{let{onLeave:t}=e;return(0,Pr.jsxs)("div",{className:"str-video__call-controls",children:[(0,Pr.jsx)(rN,{requiredGrants:[MT],children:(0,Pr.jsx)(hj,{children:(0,Pr.jsx)(Lj,{})})}),(0,Pr.jsx)(rN,{requiredGrants:[FT],children:(0,Pr.jsx)(jj,{})}),(0,Pr.jsx)(rN,{requiredGrants:[AT],children:(0,Pr.jsx)(wj,{})}),(0,Pr.jsx)(rN,{requiredGrants:[jT],children:(0,Pr.jsx)(Ej,{})}),(0,Pr.jsx)(rN,{requiredGrants:[UT,VT],children:(0,Pr.jsx)(gj,{})}),(0,Pr.jsx)(Mj,{onLeave:t})]})};(0,o.lazy)((()=>n.e(43).then(n.bind(n,8043))));var Uj;!function(e){e.GOOD="Good",e.OK="Ok",e.BAD="Bad"}(Uj||(Uj={}));(0,o.forwardRef)((function(e,t){const{t:n}=WA(),{caption:r,menuShown:i}=e;return(0,Pr.jsx)(lj,{ref:t,active:i,caption:r,title:r||n("Statistics"),"data-testid":"stats-button",children:(0,Pr.jsx)(QL,{icon:"stats"})})})),(0,o.forwardRef)((function(e,t){return(0,Pr.jsx)(aj,{enabled:e.menuShown,icon:"ellipsis",ref:t})})),(0,o.forwardRef)((function(e,t){return(0,Pr.jsx)(aj,{enabled:e.menuShown,icon:"filter",ref:t})})),(0,o.createContext)(null),vI.JOINING,vI.RINGING,vI.MIGRATING,vI.RECONNECTING,vI.RECONNECTING_FAILED,vI.OFFLINE,vI.IDLE,vI.UNKNOWN,vI.JOINED,vI.LEFT,(0,o.forwardRef)((function(e,t){const{permissionRequests:n,handleUpdatePermission:r,...i}=e,{t:s}=WA();return(0,Pr.jsx)("div",{className:"str-video__permission-requests-list",ref:t,...i,children:n.map(((e,t)=>{const{user:n,permissions:i}=e;return(0,Pr.jsx)(o.Fragment,{children:i.map((t=>(0,Pr.jsxs)("div",{className:"str-video__permission-request",children:[(0,Pr.jsx)("div",{className:"str-video__permission-request__message",children:$j(n.name||n.id,t,s)}),(0,Pr.jsx)(Vj,{className:"str-video__permission-request__button--allow",type:"button",onClick:r(e,"grant"),children:s("Allow")}),(0,Pr.jsx)(Vj,{className:"str-video__permission-request__button--reject",type:"button",onClick:r(e,"revoke"),children:s("Revoke")}),(0,Pr.jsx)(Vj,{className:"str-video__permission-request__button--reject",type:"button",onClick:r(e,"dismiss"),children:s("Dismiss")})]},t)))},`${n.id}/${t}`)}))})}));const Vj=e=>{const{className:t,...n}=e;return(0,Pr.jsx)("button",{className:h("str-video__permission-request__button",t),...n})},$j=(e,t,n)=>{switch(t){case MT:return n("{{ userName }} is requesting to speak",{userName:e});case FT:return n("{{ userName }} is requesting to share their camera",{userName:e});case jT:return n("{{ userName }} is requesting to present their screen",{userName:e});default:return n("{{ userName }} is requesting permission: {{ permission }}",{userName:e,permission:t})}},Bj=e=>{let{as:t="div",className:n,children:r,...i}=e;return(0,Pr.jsx)(t,{...i,className:h("str-video",n),children:r})},zj=(0,o.forwardRef)((function(e,t){return(0,Pr.jsx)(aj,{enabled:e.menuShown,icon:"ellipsis",ref:t})})),Hj=()=>{const e=MA(),{t:t}=WA();return(0,Pr.jsxs)("div",{className:"str-video__screen-share-overlay",children:[(0,Pr.jsx)(QL,{icon:"screen-share-off"}),(0,Pr.jsx)("span",{className:"str-video__screen-share-overlay__title",children:t("You are presenting your screen")}),(0,Pr.jsxs)("button",{onClick:()=>{e?.screenShare.disable()},className:"str-video__screen-share-overlay__button",children:[(0,Pr.jsx)(QL,{icon:"close"})," ",t("Stop Screen Sharing")]})]})},qj=e=>{let{indicatorsVisible:t=!0,menuPlacement:n="bottom-start",showMenuButton:r=!0,ParticipantActionsContextMenu:i=ZL}=e;const{participant:s,trackType:o}=VL(),a=TI(s);return s.isLocalParticipant&&a&&"screenShareTrack"===o?(0,Pr.jsxs)(Pr.Fragment,{children:[(0,Pr.jsx)(Hj,{}),(0,Pr.jsx)(Wj,{indicatorsVisible:t})]}):(0,Pr.jsxs)(Pr.Fragment,{children:[r&&(0,Pr.jsx)(GL,{strategy:"fixed",placement:n,ToggleButton:zj,children:(0,Pr.jsx)(i,{})}),(0,Pr.jsx)(yj,{participant:s}),(0,Pr.jsx)(Wj,{indicatorsVisible:t})]})},Wj=e=>{let{indicatorsVisible:t=!0}=e;const{participant:n}=VL(),{isLocalParticipant:r,connectionQuality:i,pin:s,sessionId:o,name:a,userId:l}=n,c=MA(),{t:u}=WA(),d=!!i&&R_.ConnectionQuality[i].toLowerCase(),p=EI(n),f=CI(n),m=!!s&&s.isLocalPin;return(0,Pr.jsxs)(Pr.Fragment,{children:[(0,Pr.jsx)("div",{className:"str-video__participant-details",children:(0,Pr.jsxs)("span",{className:"str-video__participant-details__name",children:[a||l,t&&!p&&(0,Pr.jsx)("span",{className:"str-video__participant-details__name--audio-muted"}),t&&!f&&(0,Pr.jsx)("span",{className:"str-video__participant-details__name--video-muted"}),t&&m&&(0,Pr.jsx)("span",{title:u("Unpin"),onClick:()=>c?.unpin(o),className:"str-video__participant-details__name--pinned"}),t&&(0,Pr.jsx)(Kj,{})]})}),t&&(0,Pr.jsx)(uj,{isVisible:r&&i===R_.ConnectionQuality.POOR,message:u("Poor connection quality"),children:d&&(0,Pr.jsx)("span",{className:h("str-video__participant-details__connection-quality",`str-video__participant-details__connection-quality--${d}`),title:d})})]})},Kj=()=>{const{participant:e}=VL(),{isSpeaking:t,isDominantSpeaker:n}=e;return(0,Pr.jsxs)("span",{className:h("str-video__speech-indicator",t&&"str-video__speech-indicator--speaking",n&&"str-video__speech-indicator--dominant"),children:[(0,Pr.jsx)("span",{className:"str-video__speech-indicator__bar"}),(0,Pr.jsx)("span",{className:"str-video__speech-indicator__bar"}),(0,Pr.jsx)("span",{className:"str-video__speech-indicator__bar"})]})},Gj=(0,o.forwardRef)((function(e,t){let{participant:n,trackType:r="videoTrack",mirror:i,muteAudio:s,refs:{setVideoElement:a,setVideoPlaceholderElement:l}={},className:c,VideoPlaceholder:u,PictureInPicturePlaceholder:d,ParticipantViewUI:p=qj}=e;const{isLocalParticipant:f,isSpeaking:m,isDominantSpeaker:g,sessionId:v}=n,y=EI(n),b=CI(n),w=_I(n),[S,k]=(0,o.useState)(null),[C,E]=(0,o.useState)(null),[T,_]=(0,o.useState)(null);(e=>{let{trackedElement:t,dynascaleManager:n,sessionId:r,trackType:i}=e;const s=MA(),a=n??s?.dynascaleManager;(0,o.useEffect)((()=>{if(!t||!a||!s||"none"===i)return;const e=a.trackElementVisibility(t,r,i);return()=>{e()}}),[t,a,s,r,i])})({sessionId:v,trackedElement:S,trackType:r});const{useIncomingVideoSettings:x}=nN(),{isParticipantVideoEnabled:I}=x(),R=(0,o.useMemo)((()=>({participant:n,participantViewElement:S,videoElement:C,videoPlaceholderElement:T,trackType:r})),[C,T,n,S,r]),P=(0,o.useMemo)((()=>({setVideoElement:e=>{a?.(e),E(e)},setVideoPlaceholderElement:e=>{l?.(e),_(e)}})),[a,l]);return(0,Pr.jsx)("div",{"data-testid":"participant-view",ref:e=>{tj(t,e),k(e)},className:h("str-video__participant-view",g&&"str-video__participant-view--dominant-speaker",m&&"str-video__participant-view--speaking",!b&&"str-video__participant-view--no-video",!y&&"str-video__participant-view--no-audio",c),children:(0,Pr.jsxs)(UL.Provider,{value:R,children:[!f&&!s&&(0,Pr.jsxs)(Pr.Fragment,{children:[y&&(0,Pr.jsx)(ML,{participant:n,trackType:"audioTrack"}),w&&(0,Pr.jsx)(ML,{participant:n,trackType:"screenShareAudioTrack"})]}),(0,Pr.jsx)(oj,{VideoPlaceholder:u,PictureInPicturePlaceholder:d,participant:n,trackType:r,refs:P,enabled:f||"videoTrack"!==r||I(n.sessionId),mirror:i,autoPlay:!0}),ej(p)?(0,Pr.jsx)(p,{}):p]})})}));Gj.displayName="ParticipantView";const Jj=e=>{const{call:t,children:n}=e;return(0,Pr.jsx)(jA.Provider,{value:t,children:n})};Jj.displayName="StreamCall";const Yj={en:{Joining:"Joining",Mic:"Mic","No internet connection":"No internet connection","Re-connecting":"Re-connecting",Ringing:"Ringing","Screen Share":"Screen Share","Select a Camera":"Select a Camera","Select a Mic":"Select a Mic","Select Speakers":"Select Speakers",Speakers:"Speakers",Video:"Video","You are muted. Unmute to speak.":"You are muted. Unmute to speak.",Live:"Live","You can now speak.":"You can now speak.","Awaiting for an approval to speak.":"Awaiting for an approval to speak.","You can no longer speak.":"You can no longer speak.","You can now share your video.":"You can now share your video.","Awaiting for an approval to share your video.":"Awaiting for an approval to share your video.","You can no longer share your video.":"You can no longer share your video.","Waiting for recording to stop...":"Waiting for recording to stop...","Waiting for recording to start...":"Waiting for recording to start...","Record call":"Record call",Reactions:"Reactions",Statistics:"Statistics","You can now share your screen.":"You can now share your screen.","Awaiting for an approval to share screen.":"Awaiting for an approval to share screen.","You can no longer share your screen.":"You can no longer share your screen.","Share screen":"Share screen","Incoming Call...":"Incoming Call...","Calling...":"Calling...","Mute All":"Mute All",Invite:"Invite",Join:"Join",You:"You",Me:"Me",Unknown:"Unknown","Toggle device menu":"Toggle device menu",Default:"Default","Call Recordings":"Call Recordings",Refresh:"Refresh","Check your browser video permissions":"Check your browser video permissions","Video publishing is disabled by the system":"Video publishing is disabled by the system","You have no permission to share your video":"You have no permission to share your video","You have no permission to share your audio":"You have no permission to share your audio","You are presenting your screen":"You are presenting your screen","Stop Screen Sharing":"Stop Screen Sharing",Allow:"Allow",Revoke:"Revoke",Dismiss:"Dismiss","Microphone on":"Microphone on","Microphone off":"Microphone off","Camera on":"Camera on","Camera off":"Camera off","No camera found":"No camera found","Video is disabled":"Video is disabled",Pinned:"Pinned",Unpin:"Unpin",Pin:"Pin","Pin for everyone":"Pin for everyone","Unpin for everyone":"Unpin for everyone",Block:"Block","Turn off video":"Turn off video","Turn off screen share":"Turn off screen share","Mute audio":"Mute audio","Mute screen share audio":"Mute screen share audio","Allow audio":"Allow audio","Allow video":"Allow video","Allow screen sharing":"Allow screen sharing","Disable audio":"Disable audio","Disable video":"Disable video","Disable screen sharing":"Disable screen sharing",Enter:"Enter",Leave:"Leave","Leave call":"Leave call","End call for all":"End call for all","{{ direction }} fullscreen":"{{ direction }} fullscreen","{{ direction }} picture-in-picture":"{{ direction }} picture-in-picture","Dominant Speaker":"Dominant Speaker","Poor connection quality":"Poor connection quality. Please check your internet connection.",Participants:"Participants",Anonymous:", and ({{ count }}) anonymous","No participants found":"No participants found","Participants ({{ numberOfParticipants }})":"Participants ({{ numberOfParticipants }})","{{ userName }} is sharing their screen":"{{ userName }} is sharing their screen","{{ userName }} is requesting to speak":"{{ userName }} is requesting to speak","{{ userName }} is requesting to share their camera":"{{ userName }} is requesting to share their camera","{{ userName }} is requesting to present their screen":"{{ userName }} is requesting to present their screen","{{ userName }} is requesting permission: {{ permission }}":"{{ userName }} is requesting permission: {{ permission }}"}},Qj=e=>(0,Pr.jsx)(GA,{translationsOverrides:Yj,...e});function Xj(e,t){return"$and"in t?t.$and.every((t=>Xj(e,t))):"$or"in t?t.$or.some((t=>Xj(e,t))):"$not"in t?!Xj(e,t.$not):function(e,t){let n=!0;for(const r of Object.keys(t)){const i=t[r],s=i&&"object"===typeof i;let o=e[r];if(s&&"$eq"in i){n&&(n=i.$eq===o)}else if(s&&"$neq"in i){n&&(n=i.$neq!==o)}else if(s&&"$in"in i){n&&(n=i.$in.includes(o))}else if(s&&"$contains"in i)if(Array.isArray(o)){const e=i;n&&(n=o.includes(e.$contains))}else n=!1;else{n&&(n=i===o)}if(!n)return!1}return!0}(e,t)}Qj.displayName="StreamVideo";const Zj=e=>{let{excludeLocalParticipant:t=!1,filterParticipants:n}=e;const{useParticipants:r,useRemoteParticipants:i}=nN(),s=r(),a=i();return(0,o.useMemo)((()=>{const e=t?a:s;return n?eM(e,n):e}),[s,a,t,n])},eM=(e,t)=>{const n="function"===typeof t?t:e=>Xj({userId:e.userId,isSpeaking:e.isSpeaking,isDominantSpeaker:e.isDominantSpeaker,name:e.name,roles:e.roles,isPinned:xI(e)},t);return e.filter(n)},tM=e=>{(0,o.useEffect)((()=>{if(e)return e.setSortParticipantsBy(VI),()=>{nM(e)}}),[e])},nM=e=>{const t=sP.get(e.type);e.setSortParticipantsBy(t.options.sortParticipantsBy||FI)},rM=(e,t)=>e.isLocalParticipant?1:t.isLocalParticipant?-1:0,iM=e=>{const{useParticipants:t,useRemoteParticipants:n,useHasOngoingScreenShare:r}=nN(),i=MA(),s=t(),[o]=s,a=n(),l=r(),c=l?s.find(TI):void 0;tM(i);const u=(0,Pr.jsx)(sM,{showParticipantCount:e.showParticipantCount,showDuration:e.showDuration,showLiveBadge:e.showLiveBadge,showSpeakerName:e.showSpeakerName}),{floatingParticipantProps:d,muted:p}=e,f=l&&(0,Pr.jsx)(sM,{showParticipantCount:d?.showParticipantCount??!1,showDuration:d?.showDuration??!1,showLiveBadge:d?.showLiveBadge??!1,showSpeakerName:d?.showSpeakerName??!0});return(0,Pr.jsxs)("div",{className:"str-video__livestream-layout__wrapper",children:[!p&&(0,Pr.jsx)(FL,{participants:a}),l&&c&&(0,Pr.jsx)(Gj,{className:"str-video__livestream-layout__screen-share",participant:c,ParticipantViewUI:u,trackType:"screenShareTrack",muteAudio:!0}),o&&(0,Pr.jsx)(Gj,{className:h(l&&h("str-video__livestream-layout__floating-participant",`str-video__livestream-layout__floating-participant--${d?.position??"top-right"}`)),participant:o,ParticipantViewUI:f||u,mirror:!1!==e.mirrorLocalParticipantVideo&&void 0,muteAudio:!0})]})},sM=e=>{const{enableFullScreen:t=!0,showParticipantCount:n=!0,showDuration:r=!0,showLiveBadge:i=!0,showSpeakerName:s=!1}=e,{participant:o}=VL(),{useParticipantCount:a}=nN(),l=a(),c=oM(),u=aM(),{t:d}=WA();return(0,Pr.jsx)("div",{className:"str-video__livestream-layout__overlay",children:(0,Pr.jsxs)("div",{className:"str-video__livestream-layout__overlay__bar",children:[i&&(0,Pr.jsx)("span",{className:"str-video__livestream-layout__live-badge",children:d("Live")}),n&&(0,Pr.jsx)("span",{className:"str-video__livestream-layout__viewers-count",children:l}),s&&(0,Pr.jsx)("span",{className:"str-video__livestream-layout__speaker-name",title:o.name||o.userId||"",children:o.name||o.userId||""}),r&&(0,Pr.jsx)("span",{className:"str-video__livestream-layout__duration",children:lM(c)}),t&&(0,Pr.jsx)("span",{className:"str-video__livestream-layout__go-fullscreen",onClick:u})]})})};iM.displayName="LivestreamLayout";const oM=()=>{const{useIsCallLive:e,useCallSession:t}=nN(),n=e(),r=t(),[i,s]=(0,o.useState)((()=>{if(!r||!r.live_started_at)return 0;const e=new Date(r.live_started_at),t=new Date;return Math.floor((t.getTime()-e.getTime())/1e3)}));return(0,o.useEffect)((()=>{if(!n)return;const e=setInterval((()=>{s((e=>e+1))}),1e3);return()=>{clearInterval(e)}}),[n]),i},aM=()=>{const{participantViewElement:e}=VL(),[t,n]=(0,o.useState)(!1);return(0,o.useCallback)((()=>{t?document.exitFullscreen().then((()=>{n(!1)})):e?.requestFullscreen().then((()=>{n(!0)}))}),[t,e])},lM=e=>{const t=Math.floor(e/86400),n=Math.floor(e/3600),r=Math.floor(e%3600/60),i=e%60;return`${t?t+" ":""}${n?n+":":""}${r<10?"0":""}${r}:${i<10?"0":""}${i}`},cM=16,uM=e=>{let{group:t,mirror:n,VideoPlaceholder:r,PictureInPicturePlaceholder:i,ParticipantViewUI:s}=e;return(0,Pr.jsx)("div",{className:h("str-video__paginated-grid-layout__group",{"str-video__paginated-grid-layout--one":1===t.length,"str-video__paginated-grid-layout--two-four":t.length>=2&&t.length<=4,"str-video__paginated-grid-layout--five-nine":t.length>=5&&t.length<=9}),children:t.map((e=>(0,Pr.jsx)(Gj,{participant:e,muteAudio:!0,mirror:n,VideoPlaceholder:r,PictureInPicturePlaceholder:i,ParticipantViewUI:s},e.sessionId)))})};(e=>{const{groupSize:t=(e.groupSize||0)>0&&e.groupSize||cM,excludeLocalParticipant:n=!1,filterParticipants:r,mirrorLocalParticipantVideo:i=!0,pageArrowsVisible:s=!0,VideoPlaceholder:a,ParticipantViewUI:l=qj}=e,[c,u]=(0,o.useState)(0),[d,h]=(0,o.useState)(null),p=MA(),{useRemoteParticipants:f}=nN(),m=f(),g=Zj({excludeLocalParticipant:n,filterParticipants:r});tM(p),(0,o.useEffect)((()=>{if(!d||!p)return;const e=p.setViewport(d);return()=>e()}),[d,p]);const v=(0,o.useMemo)((()=>((e,t)=>{const n=Math.ceil(e.length/t);return Array.from({length:n},((n,r)=>e.slice(t*r,t*r+t)))})(g,t)),[g,t]),y=v.length;(0,o.useEffect)((()=>{c>y-1&&u(Math.max(0,y-1))}),[c,y]);const b=v[c],w=!!i&&void 0;return p?(0,Pr.jsxs)("div",{className:"str-video__paginated-grid-layout__wrapper",ref:h,children:[(0,Pr.jsx)(FL,{participants:m}),(0,Pr.jsxs)("div",{className:"str-video__paginated-grid-layout",children:[s&&y>1&&(0,Pr.jsx)(aj,{icon:"caret-left",disabled:0===c,onClick:()=>u((e=>Math.max(0,e-1)))}),b&&(0,Pr.jsx)(uM,{group:b,mirror:w,VideoPlaceholder:a,ParticipantViewUI:l}),s&&y>1&&(0,Pr.jsx)(aj,{disabled:c===y-1,icon:"caret-right",onClick:()=>u((e=>Math.min(y-1,e+1)))})]})]}):null}).displayName="PaginatedGridLayout";const dM=()=>(0,Pr.jsx)(qj,{menuPlacement:"top-end"}),hM=e=>{let{ParticipantViewUIBar:t=dM,ParticipantViewUISpotlight:n=qj,VideoPlaceholder:r,PictureInPicturePlaceholder:i,participantsBarPosition:s="bottom",participantsBarLimit:a,mirrorLocalParticipantVideo:l=!0,excludeLocalParticipant:c=!1,filterParticipants:u,pageArrowsVisible:d=!0}=e;const p=MA(),{useParticipants:f,useRemoteParticipants:m}=nN(),g=f(),v=m(),[y,...b]=Zj({excludeLocalParticipant:c,filterParticipants:u}),[w,S]=(0,o.useState)(null),[k,C]=(0,o.useState)(null),[E,T]=(0,o.useState)(null),_=y&&TI(y),x=((e,t,n)=>{const[r,i]=(0,o.useState)({vertical:"number"===typeof n?n:null,horizontal:"number"===typeof n?n:null});return(0,o.useEffect)((()=>{if(!t||!e||"number"===typeof n||"undefined"===typeof n)return;let r=null,s=null;const o=new ResizeObserver(((n,o)=>{if(n.length>1){const e=t.firstChild;e&&(s=e.clientHeight,r=e.clientWidth,o.unobserve(t))}if(null===s||null===r)return;const a=Math.floor(e.clientHeight/s),l=Math.floor(e.clientWidth/r);i((e=>e.vertical!==a||e.horizontal!==l?{vertical:a,horizontal:l}:e))}));return o.observe(e),o.observe(t),()=>{o.disconnect()}}),[t,n,e]),r})(E,k,a),I="left"===s||"right"===s,R="top"===s||"bottom"===s;(0,o.useEffect)((()=>{if(!w||!p)return;const e=p.setViewport(w);return()=>e()}),[w,p]);const P=2===g.length;((e,t)=>{(0,o.useEffect)((()=>{if(e)return t?e.setSortParticipantsBy(SI(PI,rM)):e.setSortParticipantsBy(UI),()=>{nM(e)}}),[e,t])})(p,P);let A=b;const N=I?x.vertical:x.horizontal;"undefined"!==typeof a&&null!==N&&(A=b.slice(0,N-(_?1:0)));const O=!!l&&void 0;if(!p)return null;const D=s&&(A.length>0||_);return(0,Pr.jsxs)("div",{className:"str-video__speaker-layout__wrapper",children:[(0,Pr.jsx)(FL,{participants:v}),(0,Pr.jsxs)("div",{className:h("str-video__speaker-layout",s&&`str-video__speaker-layout--variant-${s}`),children:[(0,Pr.jsx)("div",{className:"str-video__speaker-layout__spotlight",children:y&&(0,Pr.jsx)(Gj,{participant:y,muteAudio:!0,mirror:O,trackType:_?"screenShareTrack":"videoTrack",ParticipantViewUI:n,VideoPlaceholder:r,PictureInPicturePlaceholder:i})}),D&&(0,Pr.jsxs)("div",{ref:T,className:"str-video__speaker-layout__participants-bar-buttons-wrapper",children:[(0,Pr.jsx)("div",{className:"str-video__speaker-layout__participants-bar-wrapper",ref:S,children:(0,Pr.jsxs)("div",{ref:C,className:"str-video__speaker-layout__participants-bar",children:[_&&(0,Pr.jsx)("div",{className:"str-video__speaker-layout__participant-tile",children:(0,Pr.jsx)(Gj,{participant:y,ParticipantViewUI:t,VideoPlaceholder:r,PictureInPicturePlaceholder:i,mirror:O,muteAudio:!0})},y.sessionId),A.map((e=>(0,Pr.jsx)("div",{className:"str-video__speaker-layout__participant-tile",children:(0,Pr.jsx)(Gj,{participant:e,ParticipantViewUI:t,VideoPlaceholder:r,PictureInPicturePlaceholder:i,mirror:O,muteAudio:!0})},e.sessionId)))]})}),d&&I&&(0,Pr.jsx)(fM,{scrollWrapper:w}),d&&R&&(0,Pr.jsx)(pM,{scrollWrapper:w})]})]})]})};hM.displayName="SpeakerLayout";const pM=e=>{let{scrollWrapper:t}=e;const n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;const[n,r]=(0,o.useState)(null);return(0,o.useEffect)((()=>{if(!e)return;const n=()=>{const n=e;return n.scrollWidth>n.clientWidth?n.scrollLeft<=t?r("start"):Math.abs(n.scrollWidth-n.scrollLeft-n.clientWidth)<=t?r("end"):void r("between"):r(null)},i=new ResizeObserver(n);return i.observe(e),e.addEventListener("scroll",n),()=>{e.removeEventListener("scroll",n),i.disconnect()}}),[e,t]),n}(t);return(0,Pr.jsxs)(Pr.Fragment,{children:[n&&"start"!==n&&(0,Pr.jsx)(aj,{onClick:()=>{t?.scrollBy({left:-150,behavior:"smooth"})},icon:"caret-left",className:"str-video__speaker-layout__participants-bar--button-left"}),n&&"end"!==n&&(0,Pr.jsx)(aj,{onClick:()=>{t?.scrollBy({left:150,behavior:"smooth"})},icon:"caret-right",className:"str-video__speaker-layout__participants-bar--button-right"})]})},fM=e=>{let{scrollWrapper:t}=e;const n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;const[n,r]=(0,o.useState)(null);return(0,o.useEffect)((()=>{if(!e)return;const n=()=>{const n=e;return n.scrollHeight>n.clientHeight?n.scrollTop<=t?r("top"):Math.abs(n.scrollHeight-n.scrollTop-n.clientHeight)<=t?r("bottom"):void r("between"):r(null)},i=new ResizeObserver(n);return i.observe(e),e.addEventListener("scroll",n),()=>{e.removeEventListener("scroll",n),i.disconnect()}}),[e,t]),n}(t);return(0,Pr.jsxs)(Pr.Fragment,{children:[n&&"top"!==n&&(0,Pr.jsx)(aj,{onClick:()=>{t?.scrollBy({top:-150,behavior:"smooth"})},icon:"caret-up",className:"str-video__speaker-layout__participants-bar--button-top"}),n&&"bottom"!==n&&(0,Pr.jsx)(aj,{onClick:()=>{t?.scrollBy({top:150,behavior:"smooth"})},icon:"caret-down",className:"str-video__speaker-layout__participants-bar--button-bottom"})]})},[mM,gM,vM]="1.12.10".split(".");var yM;yM={type:R_.SdkType.REACT,major:mM,minor:gM,patch:vM},GR=yM;const bM="sqtepgt3s5px";function wM(e){let{onLeave:t,userId:n,userName:r,userPhoto:i}=e;const[s,a]=(0,o.useState)(null),[l,c]=(0,o.useState)(null),[u,d]=(0,o.useState)(!0),[h,p]=(0,o.useState)(null),f=ho();(0,o.useEffect)((()=>{console.log("WebSocket context:",f),console.log("Stream API Key:",bM)}),[f]);const m=null===f||void 0===f?void 0:f.userToken;return navigator&&navigator.mediaDevices?((0,o.useEffect)((()=>{if(a(null),c(null),d(!0),p(null),!m||!n)return console.log("Missing token or userId:",{token:!!m,userId:!!n}),p("Missing required props: token and userId must be provided"),void d(!1);console.log("Initializing with userId:",n,"and token:",m.substring(0,10)+"...");try{const e={id:n,name:r||n,image:i};console.log("Creating user:",e);const t=new qP({apiKey:bM,tokenProvider:async()=>m,user:e});console.log("Client created successfully");const s=t.call("default","QscXoXP3GOZS");return console.log("Call instance created, attempting to join..."),s.join({create:!0}).then((()=>{console.log("Successfully joined call"),a(t),c(s),d(!1)})).catch((e=>{console.error("Failed to join call:",e),p(`Failed to join call: ${e.message}`),d(!1);try{t.disconnectUser()}catch(n){console.error("Error during cleanup:",n)}})),()=>{console.log("Cleaning up video call resources");try{var e;"left"!==(null===(e=s.state)||void 0===e?void 0:e.callingState)&&s.leave(),t.disconnectUser()}catch(h){console.error("Error during call cleanup:",h)}}}catch(e){console.error("Error initializing video call:",e),p(`Error initializing video call: ${e.message}`),d(!1)}}),[m,n,r,i]),u?(0,Pr.jsxs)("div",{className:"call-loading",children:[(0,Pr.jsx)("p",{children:"Initializing call..."}),(0,Pr.jsx)("p",{children:(0,Pr.jsx)("small",{children:"This may take a moment"})})]}):h?(0,Pr.jsxs)("div",{className:"call-error",children:[(0,Pr.jsx)("h3",{children:"Error"}),(0,Pr.jsx)("p",{children:h}),(0,Pr.jsx)("button",{onClick:t,children:"Go Back"})]}):s&&l?(0,Pr.jsx)(Qj,{client:s,children:(0,Pr.jsx)(Jj,{call:l,children:(0,Pr.jsx)(SM,{onLeave:t})})}):(0,Pr.jsxs)("div",{className:"call-error",children:[(0,Pr.jsx)("h3",{children:"Initialization Error"}),(0,Pr.jsx)("p",{children:"Failed to initialize video components"}),(0,Pr.jsx)("button",{onClick:t,children:"Go Back"})]})):(0,Pr.jsx)("div",{style:{width:"100%",height:"100vh",backgroundColor:"red",display:"flex",justifyContent:"center",alignItems:"center",color:"white"},children:(0,Pr.jsx)("p",{children:"Your browser doesn't support required media features"})})}const SM=e=>{let{onLeave:t}=e;const{useCallCallingState:n}=nN(),r=n();return r!==vI.JOINED?(0,Pr.jsxs)("div",{className:"connecting-state",children:[(0,Pr.jsx)("p",{children:"Connecting to call..."}),(0,Pr.jsxs)("p",{children:["Status: ",r]})]}):(0,Pr.jsxs)(Bj,{children:[(0,Pr.jsx)(hM,{participantsBarPosition:"bottom"}),(0,Pr.jsx)(Fj,{onLeave:t})]})};const kM=function(e){let{showOutGoing:t,setCallID_:n,handleAccept:r,userID:i}=e;const s=ho(),{incomingCall:a,respondToCall:l,callStatus:c}=s,[u,d]=(0,o.useState)(null),[h,p]=(0,o.useState)("");return(0,o.useEffect)((()=>{p("xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})))}),[]),(0,o.useEffect)((()=>{n(h)}),[h]),(0,o.useEffect)((()=>{d(s.callStatus)}),[s]),a?"declined"===c||"accepted"===c&&""!=h?null:(0,Pr.jsx)("div",{className:"incoming-call-overlay",children:(0,Pr.jsxs)("div",{className:"incoming-call-card",children:[(0,Pr.jsx)("h3",{children:"Incoming Call"}),(0,Pr.jsxs)("p",{children:["From: ",a.callerName]}),(0,Pr.jsxs)("div",{className:"call-actions",children:[(0,Pr.jsx)("button",{className:"decline-button",onClick:()=>{l(a.callerId,!1,h,i),"function"===typeof t&&t()},children:"Decline"}),(0,Pr.jsx)("button",{className:"accept-button",onClick:()=>{console.log(h),r(!0),l(a.callerId,!0,h,i)},children:"Accept"})]})]})}):null};const CM=function(e){let{receiverName:t,showOutGoing:n,currChatUserID:r,handleAccept:i}=e;const{callStatus:s,cancelCall:a,respondToCall:l,callID:c}=ho();return(0,o.useEffect)((()=>{"accepted"==s&&""!=c&&(n(!1),i(!0))}),[c,s]),(0,Pr.jsx)("div",{className:"outgoing-call-overlay",children:(0,Pr.jsxs)("div",{className:"outgoing-call-card",children:["declined"===s?(0,Pr.jsxs)(Pr.Fragment,{children:[(0,Pr.jsx)("h3",{children:"Call Declined"}),(0,Pr.jsxs)("p",{children:[t||"User"," declined your call"]}),(0,Pr.jsx)("div",{className:"declined-icon",children:"\u274c"})]}):(0,Pr.jsxs)(Pr.Fragment,{children:[(0,Pr.jsx)("h3",{children:"Calling"}),(0,Pr.jsx)("p",{children:t||"User"}),(0,Pr.jsx)("div",{className:"calling-animation",children:(0,Pr.jsx)("i",{children:"\ud83d\udcde"})})]}),(0,Pr.jsx)("div",{className:"call-actions",children:(0,Pr.jsx)("button",{className:"cancel-button",onClick:()=>{n(!1),a(r)},children:"declined"===s?"Close":"Cancel"})})]})})},EM=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dl();const t=sl(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=sl(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(Fo(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;Ul(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:zd,persistence:[Zu,ju,Fu]}),r=Io("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Kd)return;const r=null===t||void 0===t?void 0:t.token;Gd!==r&&(Gd=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});!function(e,t,n){Wo(e).beforeAuthStateChanged(t,n)}(n,t,(()=>t(n.currentUser))),function(e,t,n,r){Wo(e).onIdTokenChanged(t,n,r)}(n,(e=>t(e)))}}var i;const s=_o("auth");return s&&su(n,`http://${s}`),n}(),TM=new ku;function _M(){const[e,t]=(0,o.useState)([]),[n,r]=(0,o.useState)(""),[i,s]=(0,o.useState)(""),[a,l]=(0,o.useState)(!1),[c,d]=(0,o.useState)(!1),[h,p]=(0,o.useState)(""),[f,m]=(0,o.useState)(null),[g,v]=(0,o.useState)([]),[y,b]=(0,o.useState)(!1),[w,S]=(0,o.useState)(!1);function k(){!function(e){Wo(e).signOut()}(EM)}async function C(){try{const e=await fetch(`${u}/clearChats?collection=${null===f||void 0===f?void 0:f.uid}`,{method:"DELETE"}),t=await e.json();return t.success&&window.location.reload(),t.success}catch(e){return console.error("Error clearing chat:",e),!1}}async function E(){try{const e=await fetch(`${u}/deleteUser?userId=${null===f||void 0===f?void 0:f.uid}`,{method:"DELETE"});return(await e.json()).success}catch(e){return console.error("Error deleting user:",e),!1}}function T(e){S(!0)}function _(e,n,i){r(e),t(n),s(i)}function x(e,t){return g.map((n=>{if(n.id===e){const e={...n};return e.data.chat.push(t),e}return n}))}function I(){(async function(e,t,n){if(ol(e.app))return Promise.reject(Vl(e,"operation-not-supported-in-this-environment"));const r=Kc(e);zl(e,t,bu);const i=sd(r,n);return new hd(r,"signInViaPopup",t,i).executeNotNull()})(EM,TM).then((e=>{ku.credentialFromResult(e).accessToken,e.user})).catch((e=>{alert(e);const t=e.code;e.message,ku.credentialFromError(e);alert(t)}))}(0,o.useEffect)((()=>{const e=function(e,t,n,r){return Wo(e).onAuthStateChanged(t,n,r)}(EM,(e=>{e?(m(e),fetch(u+"/getChats?CollectionName="+e.uid,{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{v(e.documents)})).catch((e=>console.error(e)))):m(null)}));return()=>e()}),[EM]);const{height:R,width:P}=function(){const[e,t]=(0,o.useState)(ub());return(0,o.useEffect)((()=>{function e(){t(ub())}return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),e}(),[A,N]=(0,o.useState)(!0);function O(e){N(e)}return null!=f&&f?(0,Pr.jsx)(uo,{userId:null===f||void 0===f?void 0:f.uid,user:f,children:(0,Pr.jsxs)("div",{className:"App",style:{backgroundColor:"#111b21",minHeight:"100svh",display:"flex",flexDirection:"row",gap:"2px"},children:[(0,Pr.jsx)(yo,{User:f,handleLogout:k,handleChatClear:C,deleteUser:E}),P>1e3?(0,Pr.jsxs)("div",{style:{display:"flex",flexDirection:"row",width:"100%"},children:[(0,Pr.jsx)("div",{style:{width:"30%",maxWidth:"400px",minWidth:"280px"},children:(0,Pr.jsx)(mo,{setIsAddUserOpen:b,isAddUserOpen:y,handleBack:O,chats:g,handleOnClick:_,user:f,handleLogout:k,handleChatClear:C,deleteUser:E,allChats:g,updateAllChat:v})}),(0,Pr.jsx)("div",{style:{flex:1},children:(0,Pr.jsx)(hb,{split_screen:!0,updateAllChat:x,setIsAddUserOpen:b,isAddUserOpen:y,handleOnClick:_,handleBack:O,chat:e,currChatUser:n,currChatUserID:i,user:f,onCall:()=>l(!0),showOutGoing:()=>{d(!0)},allChats:g,setAllChats:v})})]}):A?(0,Pr.jsx)(mo,{allChats:g,setAllChats:v,handleLogout:k,handleChatClear:C,deleteUser:E,setIsAddUserOpen:b,isAddUserOpen:y,handleBack:O,chats:g,handleOnClick:_,user:f}):(0,Pr.jsx)(hb,{split_screen:!1,updateAllChat:x,allChats:g,setAllChats:v,setIsAddUserOpen:b,isAddUserOpen:y,handleOnClick:_,handleBack:O,chat:e,currChatUser:n,currChatUserID:i,user:f,onCall:()=>l(!0),showOutGoing:()=>{d(!0)}}),c?(0,Pr.jsx)(CM,{handleAccept:T,showOutGoing:d,receiverName:n,currChatUserID:i}):null,w?(0,Pr.jsx)(wM,{onLeave:()=>{S(!1)},userId:null===f||void 0===f?void 0:f.uid,userName:null===f||void 0===f?void 0:f.displayName,userPhoto:null===f||void 0===f?void 0:f.photoURL}):null,(0,Pr.jsx)(kM,{userID:null===f||void 0===f?void 0:f.uid,setCallID_:p,handleAccept:T})]})}):(0,Pr.jsx)("div",{className:"login-container",children:(0,Pr.jsxs)("div",{className:"login-card",children:[(0,Pr.jsxs)("div",{className:"login-header",children:[(0,Pr.jsx)("h2",{children:"Welcome Back"}),(0,Pr.jsx)("p",{children:"Sign in to continue to Chat"})]}),(0,Pr.jsxs)("button",{id:"sign-in-button",className:"google-signin-btn",onClick:()=>{I()},children:[(0,Pr.jsx)("svg",{viewBox:"0 0 24 24",width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg",children:(0,Pr.jsxs)("g",{transform:"matrix(1, 0, 0, 1, 27.009001, -39.238998)",children:[(0,Pr.jsx)("path",{fill:"#4285F4",d:"M -3.264 51.509 C -3.264 50.719 -3.334 49.969 -3.454 49.239 L -14.754 49.239 L -14.754 53.749 L -8.284 53.749 C -8.574 55.229 -9.424 56.479 -10.684 57.329 L -10.684 60.329 L -6.824 60.329 C -4.564 58.239 -3.264 55.159 -3.264 51.509 Z"}),(0,Pr.jsx)("path",{fill:"#34A853",d:"M -14.754 63.239 C -11.514 63.239 -8.804 62.159 -6.824 60.329 L -10.684 57.329 C -11.764 58.049 -13.134 58.489 -14.754 58.489 C -17.884 58.489 -20.534 56.379 -21.484 53.529 L -25.464 53.529 L -25.464 56.619 C -23.494 60.539 -19.444 63.239 -14.754 63.239 Z"}),(0,Pr.jsx)("path",{fill:"#FBBC05",d:"M -21.484 53.529 C -21.734 52.809 -21.864 52.039 -21.864 51.239 C -21.864 50.439 -21.724 49.669 -21.484 48.949 L -21.484 45.859 L -25.464 45.859 C -26.284 47.479 -26.754 49.299 -26.754 51.239 C -26.754 53.179 -26.284 54.999 -25.464 56.619 L -21.484 53.529 Z"}),(0,Pr.jsx)("path",{fill:"#EA4335",d:"M -14.754 43.989 C -12.984 43.989 -11.404 44.599 -10.154 45.789 L -6.734 42.369 C -8.804 40.429 -11.514 39.239 -14.754 39.239 C -19.444 39.239 -23.494 41.939 -25.464 45.859 L -21.484 48.949 C -20.534 46.099 -17.884 43.989 -14.754 43.989 Z"})]})}),(0,Pr.jsx)("span",{children:"Sign in with Google"})]})]})})}window.requestIdleCallback||(window.requestIdleCallback=function(e,t){const n=(t||{}).timeout||1;return setTimeout((function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50)}})}),n)},window.cancelIdleCallback=function(e){clearTimeout(e)});l.createRoot(document.getElementById("root")).render((0,Pr.jsx)(_M,{}))})()})();
//# sourceMappingURL=main.18e50012.js.map